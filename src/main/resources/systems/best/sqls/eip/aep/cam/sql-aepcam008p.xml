<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.bai.eip.aep.cam.dao.AEPCAM008PMapper">
    
    <select id="selectMainDetail" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.cam.dao.AEPCAM008PMapper.selectMainDetail*/
        SELECT A.AUD_YR,
               F_CODE_NM('1000739', D.AUD_KND_CD) AS AUD_KND_NM,
               D.AUD_GRN_NO,
               D.AUD_KND_CD,
               A.AUD_NO,
               D.AUD_SBJ_NM,
               A.AUD_YR AS AUD_YR2,
               F_CODE_NM('1000739', D.AUD_KND_CD) AS AUD_KND_NM2,
               D.AUD_GRN_NO AS AUD_GRN_NO2,
               A.AFF_SNO,
               A.SRNO,
               A.TITLE_NM
          FROM TBCSPKDE103M AS A
    INNER JOIN TBBADDED001M AS D ON D.AUD_YR  = A.AUD_YR
                                AND D.AUD_NO  = A.AUD_NO
         WHERE A.AUD_YR  = #{audYr}
           AND A.AUD_NO  = #{audNo}
           AND A.AFF_SNO = #{affSno}
           AND A.SRNO    = #{srno}
    </select>
    
    <select id="selectMainDetailCombo" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.cam.dao.AEPCAM008PMapper.selectMainDetailCombo*/
        SELECT CD
              ,CD_NM
         FROM TBDCMACM013C
        WHERE CMM_CD_DVSN_CD = '1000778'
          AND CD NOT IN ('000000000', '40')
          AND USE_YN = 'Y'
    </select>
    
    <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.cam.dao.AEPCAM008PMapper.selectMainList*/
        <include refid="include.pageSelct" />
            SELECT FILE_NM
                  ,F_CODE_NM('1000776', EVI_DCM_DVSN_CD)  AS DOC_KND_NM
                  ,TO_CHAR(FRT_REGI_DH, 'YYYY-MM-DD') AS REGI_DH
                  ,AUD_DCM_DOC_ID
                  ,EVI_DCM_DVSN_CD
                  ,AUD_YR
                  ,AUD_NO
                  ,'A1099' AS AUD_STEP_CD
                  ,AUD_DCM_DOC_ID AS DOC_ID
                  ,AUD_KND_CD
                  ,AUD_GRN_NO
                  ,AFF_SNO
                  ,'권익보호관' AS RECP_DPT_NM
              FROM TBBADDED108D
             WHERE 1=1
               AND AUD_YR  = #{audYr}
               AND AUD_NO  = #{audNo}
               AND AFF_SNO = #{affSno}
               <if test="docKind != null and docKind != ''">
               AND  EVI_DCMB_DVSN_CD = #{docKind}
               </if>
               AND EVI_DCM_DVSN_CD NOT IN ('10', '20', '30')  /*자료구분이 증거서류 인경우 질문서, 문답서, 답변서 제외 타 경우는 조건 걸지 않음*/
                    
        <include refid="include.pageOrder" />
    </select>
    
</mapper>