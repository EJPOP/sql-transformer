<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.aep.arp.dao.AEPARP010PMapper">

    <select id="selectAudYrNo" parameterType="paramMap" resultType="egovMap" >
        /* kr.go.bai.eip.aep.arp.dao.AEPARP010PMapper.selectAudYrNo */
        SELECT F_MNG_KND_AUDYRNO(AUD_YR, AUD_NO, AUD_KND_CD, '-')    AS AUD_YR_NO
              ,AUD_SBJ_NM
          FROM TBBADDED001M
         WHERE AUD_YR = #{audYr}
           AND AUD_NO = #{audNo}
    </select>
    
    <select id="selectPrstCntList" parameterType="paramMap" resultType="egovMap" >
        /* kr.go.bai.eip.aep.arp.dao.AEPARP010PMapper.selectPrstCntList */
        select
            gubun
            , cnt1 
            , cnt2
            , cnt1 + cnt2 as sum1 
        from (
            select 
            '귀청보고건수' gubun
            ,'40' cnt1
            ,'20' cnt2
            from dual
            union all
            select 
            '증감건수' gubun
            ,'+1' cnt1
            ,'-1' cnt2
            from dual
            union all
            select 
            '현재건수' gubun
            ,'39' cnt1
            ,'20' cnt2
            from dual
        )
        where 1=1
    </select>
    
    
    
    <select id="selectHndlRtList" parameterType="paramMap" resultType="egovMap" >
        /* kr.go.bai.eip.aep.arp.dao.AEPARP010PMapper.selectHndlRtList */
        select
            gubun
            , cnt1 
            , cnt2
            , cnt1 + cnt2 as sum1
            , percent
        from (
            select
            '전체' gubun
            ,'39' cnt1 
            ,'20' cnt2
            ,'' percent
            from dual
            union all 
            select
            '처리안작성' gubun
            ,'39' cnt1
            ,'20' cnt2
            ,'100%' percent
            from dual
            union all
            select
            '의결완료' gubun
            ,'38' cnt1
            ,'17' cnt2
            ,'93%' percent
            from dual
        )
        where 1=1
    </select>
    
    <select id="selectPrssSituList" parameterType="paramMap" resultType="egovMap" >
        /* kr.go.bai.eip.aep.arp.dao.AEPARP010PMapper.selectPrssSituList */
            SELECT T1.AUD_YR
                 , T1.AUD_NO
                 , T1.AUD_STEP_CD
                 , T1.AUD_KND_CD
                 , T1.RPRT_NM
                 , T1.RPRT_NM AS V_RPRT_NM
                 , NVL((
                    SELECT MAX(T3.DOC_ID)
                      FROM TBBADDED111M T3
                     WHERE T3.AUD_YR = #{audYr}
                       AND T3.AUD_NO = #{audNo}
                       AND T3.AUD_STEP_CD = 'A1060'
                       AND T3.REF_ID = T1.DOC_ID
                       AND T3.RPRT_CD = 'A10600200'
                   ), T1.DOC_ID) AS DOC_ID
                 , T1.DOC_ID AS R_DOC_ID
                 , T1.DOC_STA_CD
                 , T1.SR_DOC_SNO
                 , F_CODE_NM('1000780',T1.DOC_STA_CD) DOC_STA_NM 
                 , T1.AUD_RPRT_DVSN_CD
                 , T1.REF_ID
                 , 7 AS CNT
                 , '2016-01-04' m1
                 , '2016-01-07' m2
                 , '2016-01-09' m3
                 , '2016-01-14' m4
                 , '2016-01-17' m5
                 , '2016-01-20' m6
                 , '2016-01-23' m7
                 , '부의26' rslt
                 , '위임37' rslt2
                 , F_OPEN_EDIT(T2.LINK_URL) AS DOC_TYPE
              FROM TBBADDED111M T1
        INNER JOIN TBBADDED103M T2 ON 
                       T1.AUD_YR = T2.AUD_YR
                   AND T1.AUD_NO = T2.AUD_NO
                   AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
                   AND T1.RPRT_CD = T2.RPRT_CD
                   AND T1.DOC_ID = T2.DOC_ID
             WHERE T1.AUD_YR = #{audYr}
               AND T1.AUD_NO = #{audNo}
               AND T1.AUD_STEP_CD = 'A1060'
               AND T1.RPRT_CD = 'A10600200'
    </select>

</mapper> 
