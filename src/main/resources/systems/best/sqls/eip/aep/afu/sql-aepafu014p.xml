<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.aep.afu.dao.AEPAFU014PMapper">

<update id="updateItgtInfo" parameterType="paramMap">
    /*kr.go.bai.eip.aep.afu.dao.AEPAFU014PMapper.updateItgtInfo*/
        <![CDATA[
        UPDATE TBBADDED001M 
           SET ITGT_AUD_YR = #{itgtAudYr},
               ITGT_AUD_NO = #{itgtAudNo},
               ITGT_DVS_RS = #{audRs},
               ITGT_DVS_DH = SYSDATE,
               ITGT_DVS_ID = #{usrId}
         WHERE AUD_YR = #{audYr}
           AND AUD_NO = #{audNo}
        ]]>
    </update>
    <select id="selectMainMaxSno" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.afu.dao.AEPAFU014PMapper.selectMainMaxSno*/
        /* AEPAFU001EMainMaxSnoSelect - 감사번호 채번(MAX값) */
        <![CDATA[
        SELECT MAX(AUD_YR) AS AUD_YR
             , TO_CHAR(LPAD(NVL(MAX(TO_NUMBER(AUD_NO)),0)+1,3,0)) AS MAX_SEQ
          FROM TBBADDED001M
               WHERE AUD_YR = #{audYr}
        ]]>
    </select>
    <update id="updateDvsInfo" parameterType="paramMap">
    /*kr.go.bai.eip.aep.afu.dao.AEPAFU014PMapper.updateDvsInfo*/
        <![CDATA[
        UPDATE TBBADDED001M 
           SET DVS_AUD_YR = #{audYr},
               DVS_AUD_NO = #{audNo},
               ITGT_DVS_DH = SYSDATE,
               ITGT_DVS_ID = #{usrId},
               ITGT_DVS_RS = #{audRs}
         WHERE AUD_YR = #{audYr}
           AND AUD_NO = #{audNo}
        ]]>
    </update>

    <insert id="insertTBBADDED001M" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADDED001M */
        <![CDATA[
        INSERT INTO TBBADDED001M
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.AUD_TASK_CD
              ,A.ORG_DVSN_CD
              ,A.AUD_KND_CD
              ,A.SPV_BRDV_CD
              ,A.AUD_WAY_CD
              ,A.AUD_SBJ_NM
              ,A.AUD_SCL_CD
              ,A.TSK_CAT_CD
              ,A.EPS_TASK_CD
              ,A.AUD_TOT_DRTR_CNB
              ,A.TOT_DRTR_RANK_CD
              ,A.TOT_DRTR_BRDV_CD
              ,A.AUD_RPST_ORG_CD
              ,A.SPVR_CNB
              ,A.SPVR_BRDV_CD
              ,A.SPVR_RANK_CD
              ,A.AST_CNB
              ,A.AST_BRDV_CD
              ,A.AST_RANK_CD
              ,A.PRSS_STEP_CD
              ,A.MNG_DPT_CD
              ,A.ACP_YR
              ,A.CVPT_ACP_NO
              ,A.REQ_DVSN_CD
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
              ,A.DVS_AUD_YR
              ,A.DVS_AUD_NO
              ,A.ITGT_AUD_YR
              ,A.ITGT_AUD_NO
              ,#{audGrnNo} AS AUD_GRN_NO
              ,A.AUD_CTRL_CD
              ,A.BZT_BGT_DVSN_CD
              ,A.PRL_SMT_DT
              ,A.APV_DOC_NO
              ,A.AUD_STEP_CD
              ,A.CHF_CMTR_CNB
              ,SYSDATE
              ,#{usrId} AS ITGT_DVS_ID
              ,#{audRs} AS ITGT_DVS_RS
              ,A.SEC_AUD_YN
          FROM TBBADDED001M A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
    
        <insert id="insertTBBADHAB008M" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADHAB008M */
        <![CDATA[
        INSERT INTO TBBADHAB008M
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.AUD_OW_HNDL_SU_SRNO
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
          FROM TBBADHAB008M A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
    
        <insert id="insertTBBADDED003M" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADDED003M */
        <![CDATA[
        INSERT INTO TBBADDED003M
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.RSV_INSPC_LUNH_DT
              ,A.HNDL_DDLN_DT
              ,A.FLD_AUD_STR_DT
              ,A.FLD_AUD_END_DT
              ,A.FLD_EXTN_STR_DT
              ,A.FLD_EXTN_END_DT
              ,A.FLD_AUD_EXEC_DCN
              ,A.RTN_DT
              ,A.RTN_RPT_DT
              ,A.RPT_DDLN_DT
              ,A.AUD_BRDV_APV_DT
              ,A.MDT_OFER_APV_DT
              ,A.MDT_DDG_APV_DT
              ,A.JA_JDG_SSEC_APV_DT
              ,A.OW_DHD_APV_DT
              ,A.OW_PSD_APV_DT
              ,A.ENF_APV_DT
              ,A.CHF_CMTR_CNB
              ,A.CHF_CMTR_APV_DT
              ,A.SBCN_DT
              ,A.AUD_EXEC_HNDL_STA_CD
              ,A.HNDL_SITU_HIS
              ,A.RTN_RPT_NOC
              ,A.TRTM_SBCN_NOC
              ,A.TRTM_DLG_NOC
              ,A.CMT_SBCN_NOC
              ,A.STT_RMK
              ,A.MDF_YN
              ,A.BRDV_HNDL_DDLN_DT
              ,A.MDT_CHGR_APV_DDLN_DT
              ,A.RVW_RM_APV_DDLN_DT
              ,A.INDC_NOC
              ,A.GNR_HNDL_PLAN_YN
              ,A.EXTN_PRD_COFM_DT
              ,A.MDT_OFER_APV_DDLN_DT
              ,A.TOT_DHD_APV_DDLN_DT
              ,A.CHF_CMTR_APV_DDLN_DT
              ,A.ENF_APV_DDLN_DT
              ,A.DLAY_RSN_TXT
              ,A.AUD_OW_HNDL_SU_SRNO
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
              ,A.STAD_HNDL_DCN
              ,A.REQ_NTAS_DCS_DT
              ,A.AUD_EXEC_DT
			  ,A.EXTN_HNDL_DDLN_DT
			  ,A.EXTN_RPT_DDLN_DT
			  ,A.EXTN_BRDV_HNDL_DDLN_DT
			  ,A.EXTN_MDT_CHGR_APV_DDLN_DT
			  ,A.EXTN_MDT_OFER_APV_DDLN_DT
			  ,A.EXTN_RVW_RM_APV_DDLN_DT
			  ,A.EXTN_TOT_DHD_APV_DDLN_DT
			  ,A.EXTN_DHD_APV_DDLN_DT
			  ,A.EXTN_PSD_APV_DDLN_DT
			  ,A.EXTN_CHF_CMTR_APV_DDLN_DT
			  ,A.EXTN_ENF_APV_DDLN_DT
			  ,A.DHD_APV_DDLN_DT
			  ,A.PSD_APV_DDLN_DT
          FROM TBBADDED003M A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
    
        <insert id="insertTBBADDED031L" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADDED031L */
        <![CDATA[
        INSERT INTO TBBADDED031L
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.AUDTOR_DVSN_CD
              ,A.AUDTOR_SNO
              ,A.CNB
              ,A.DPT_CD
              ,A.RANK_CD
              ,A.STR_STEP_CD
              ,A.END_STEP_CD
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
          FROM TBBADDED031L A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
    
        <insert id="insertTBBADDED101M" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADDED101M */
        <![CDATA[
        INSERT INTO TBBADDED101M
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.AUD_STEP_CD
              ,A.AUD_KND_CD
              ,#{audGrnNo} AS AUD_GRN_NO
              ,A.AUD_STEP_NM
              ,A.NECES_YN
              ,A.CMPT_CLSNG_DY
              ,A.TSK_DESC
              ,A.LINK_URL
              ,A.STEP_CMPT_YN
              ,A.STEP_CMPT_DH
              ,A.SORT_SNO
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
          FROM TBBADDED101M A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
    
        <insert id="insertTBBADDED102M" parameterType="paramMap">
    /* kr.go.bai.eip.aep.dre.dao.AEPAFU014PMapper.insertTBBADDED102M */
        <![CDATA[
        INSERT INTO TBBADDED102M
        SELECT #{newAudYr} AS AUD_YR
              ,#{newAudNo} AS AUD_NO
              ,A.AUD_STEP_CD
              ,A.AUD_MAIN_STEP_ID
              ,A.AUD_MAIN_STEP_SNO
              ,A.AUD_MAIN_SEQ_W
              ,A.AUD_MAIN_SEQ_H
              ,A.AUD_DOC_CD
              ,A.CMPT_YN
              ,A.AUD_KND_CD
              ,#{audGrnNo} AS AUD_GRN_NO
              ,A.MAIN_JOB_NM
              ,A.LINK_TYPE
              ,A.LINK_URL
              ,A.SORT_SNO
              ,A.FRT_USR_ID
              ,A.FNL_USR_ID
              ,A.FNL_DEAL_DPT_CD
              ,A.FNL_MNU_ID
              ,A.FRT_REGI_DH
              ,A.FNL_MDF_DH
          FROM TBBADDED102M A
         WHERE A.AUD_YR = #{audYr}
           AND A.AUD_NO = #{audNo}
        ]]>
    </insert>
</mapper>