<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper">

    <select id="selectInfFndtList" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectInfFndtList*/
    	<include refid="include.pageSelct" />
			SELECT A.TBL_DES ||'('|| A.TBL_NM ||')'AS TBL_DVSN
			     , A.TBL_DES
			     , A.TBL_NM
                 , F_CODE_NM('1000848',A.IF_WAY_DVSN ) AS IF_WAY_DVSN_NM
				 , A.TRNM_DATA_CNT
				 , A.IF_MSG
                 , TO_CHAR(A.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_STR_DH
                 , TO_CHAR(A.IF_END_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_END_DH
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_FNDT_DATA_INFO A
			WHERE 1=1
              AND A.TRNM_DY BETWEEN REPLACE(#{schStrDt},'-') AND REPLACE(#{schEndDt},'-')
			<if test='schTblNm != null and schTblNm != ""'>
			  AND A.TBL_NM = #{schTblNm}
			</if>
			<if test='srDvsn != null and srDvsn != ""'>
			  AND A.SR_DVSN = #{srDvsn}
			</if>
             <if test='schIfWayDvsn != null and schIfWayDvsn != ""'>
              AND A.IF_WAY_DVSN = #{schIfWayDvsn}
            </if>
			ORDER BY A.IF_STR_DH DESC
		<include refid="include.pageOrder" />
    </select>

    <select id="selectEaInfTBDCMACM013C" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectEaInfTBDCMACM013C*/
    	<include refid="include.pageSelct" />
			SELECT A.TSK_CAT_CD
				 , A.FUNC_CAT_CD
				 , A.CMM_CD_DVSN_CD
				 , A.CD
			     , A.CD_NM
                 , A.USE_YN
                 , A.USR_DFN_TXT_1
                 , A.USR_DFN_TXT_2
                 , A.USR_DFN_TXT_3
                 , A.IF_CHNG_STAT_DVSN
                 , A.IF_MSG
                 , TO_CHAR(A.IF_TRNS_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_TRNS_DH
                 , 'TBDCMACM013C' AS TBL_NM
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_TBDCMACM013C A
			WHERE 1=1
			<if test='trnmDy != null and trnmDy != ""'>
			  AND A.TRNM_DY = #{trnmDy}
			</if>
			<if test='ifSeq != null and ifSeq != ""'>
			  AND A.IF_SEQ = #{ifSeq}
			</if>
			ORDER BY A.IF_SEQ
		<include refid="include.pageOrder" />
    </select>
    
    <select id="selectEaInfTBDCMACM001M" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectEaInfTBDCMACM001M*/
    	<include refid="include.pageSelct" />
			SELECT F_CODE_NM('1000338', A.USR_DVSN_CD) AS USR_DVSN_CD
				 , A.USR_ID
				 , A.CNB
				 , A.USR_NAM
			     , F_CODE_NM('1000144', A.DPT_CD) AS DPT_NM
			     , F_CODE_NM('1000144', A.SUB_DPT_CD) AS SUB_DPT_NM
                 , A.RQS_STA_CD
                 , TO_CHAR(TO_DATE(A.RLS_DT), 'YYYY-MM-DD') AS RLS_DT
                 , TO_CHAR(TO_DATE(A.WRK_END_DT), 'YYYY-MM-DD') AS WRK_END_DT
                 , A.IF_CHNG_STAT_DVSN
                 , A.IF_MSG
                 , TO_CHAR(A.IF_TRNS_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_TRNS_DH
                 , 'TBDCMACM001M' AS TBL_NM
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_TBDCMACM001M A
			WHERE 1=1
			<if test='trnmDy != null and trnmDy != ""'>
			  AND A.TRNM_DY = #{trnmDy}
			</if>
			<if test='ifSeq != null and ifSeq != ""'>
			  AND A.IF_SEQ = #{ifSeq}
			</if>
			ORDER BY A.IF_SEQ
		<include refid="include.pageOrder" />
    </select>
    
    <select id="selectEaInfTBDCMACM002M" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectEaInfTBDCMACM002M*/
    	<include refid="include.pageSelct" />
			SELECT A.DPT_CD
				 , A.DPT_NM
				 , A.TNB
				 , A.FAN
			     , A.ABR_DPT_NM_1
                 , A.ABR_DPT_NM_2
                 , A.FRML_DPT_NM
                 , F_CODE_NM('1000144', A.HIRK_DPT_CD) AS HIRK_DPT_NM
                 , F_CODE_NM('1000481', A.ORZT_DVSN_CD) AS ORZT_DVSN_CD
                 , A.IF_CHNG_STAT_DVSN
                 , A.IF_MSG
                 , TO_CHAR(A.IF_TRNS_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_TRNS_DH
                 , 'TBDCMACM002M' AS TBL_NM
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_TBDCMACM002M A
			WHERE 1=1
			<if test='trnmDy != null and trnmDy != ""'>
			  AND A.TRNM_DY = #{trnmDy}
			</if>
			<if test='ifSeq != null and ifSeq != ""'>
			  AND A.IF_SEQ = #{ifSeq}
			</if>
			ORDER BY A.IF_SEQ
		<include refid="include.pageOrder" />
    </select>
    
    <select id="selectEaInfTBDCMACM015M" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectEaInfTBDCMACM015M*/
    	<include refid="include.pageSelct" />
			SELECT F_CODE_NM('1000119', A.ORG_DVSN_CD) AS ORG_DVSN_NM
			     , F_CODE_NM('1000128', A.PUB_DVSN_CD) AS PUB_DVSN_NM
				 , A.ORG_CD
				 , A.ORG_NM
				 , F_CODE_NM('1000001', A.RGN_CD) AS RGN_NM
				 , F_ORG_HRK_NM(A.COPT_SG_CD) AS COPT_SG_NM
                 , A.USE_DVSN_NO
                 , F_CODE_NM('1000144', A.ENFM_DPT_CD) AS ENFM_DPT_NM
                 , A.ORG_DGE_CD
                 , A.ADMN_ORG_DVSN_CD
                 , A.PASA_USE_YN_CD
                 , A.IF_CHNG_STAT_DVSN
                 , A.IF_MSG
                 , TO_CHAR(A.IF_TRNS_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_TRNS_DH
                 , 'TBDCMACM015M' AS TBL_NM
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_TBDCMACM015M A
			WHERE 1=1
			<if test='trnmDy != null and trnmDy != ""'>
			  AND A.TRNM_DY = #{trnmDy}
			</if>
			<if test='ifSeq != null and ifSeq != ""'>
			  AND A.IF_SEQ = #{ifSeq}
			</if>
			ORDER BY A.IF_SEQ
		<include refid="include.pageOrder" />
    </select>
    
    <select id="selectEaInfTBCSPIIT006M" parameterType="paramMap" resultType="egovMap">
    	/*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectEaInfTBCSPIIT006M*/
    	<include refid="include.pageSelct" />
			SELECT A.GCC_ORG_CD
				 , A.ALL_ORG_NM
				 , A.LOWT_ORG_NM
				 , A.ORG_RAK_NO
			     , A.GCC_CON_HNDL_DVSN_CD
                 , TO_CHAR(TO_DATE(A.CRE_DT), 'YYYY-MM-DD') AS CRE_DT
                 , TO_CHAR(TO_DATE(A.ABLT_DT), 'YYYY-MM-DD') AS ABLT_DT
                 , A.BK_ORG_CD
                 , A.IF_CHNG_STAT_DVSN
                 , A.IF_MSG
                 , TO_CHAR(A.IF_TRNS_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_TRNS_DH
                 , 'TBCSPIIT006M' AS TBL_NM
                 , A.TRNM_DY
                 , A.IF_SEQ
			 FROM EA_INF_TBCSPIIT006M A
			WHERE 1=1
			<if test='trnmDy != null and trnmDy != ""'>
			  AND A.TRNM_DY = #{trnmDy}
			</if>
			<if test='ifSeq != null and ifSeq != ""'>
			  AND A.IF_SEQ = #{ifSeq}
			</if>
			ORDER BY A.IF_SEQ
		<include refid="include.pageOrder" />
    </select>
    
        <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
        /*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectMainList*/
        <include refid="include.pageSelct" />
            SELECT A.TBL_NM_DES
                  ,A.TBL_NM
                  ,A.TBL_DES
                  ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') AS IF_STR_DH
                  ,CASE WHEN A.TBL_NM = 'TBDCMACM013C' THEN (
                                                                 SELECT COUNT(1) 
                                                                   FROM TBDCMACM013C ST 
                                                                  WHERE TO_CHAR(ST.FNL_MDF_DH, 'YYYY-MM-DD HH24:MI:SS') > DECODE(B.IF_STR_DH
                                                                                                                                       ,NULL,'0000-00-00 00:00:00'
                                                                                                                                       ,'','0000-00-00 00:00:00'
                                                                                                                                       ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') )
                                                            )
                        WHEN A.TBL_NM = 'TBDCMACM001M' THEN (
                                                                 SELECT COUNT(1) 
                                                                   FROM TBDCMACM001M ST 
                                                                  WHERE TO_CHAR(ST.FNL_MDF_DH, 'YYYY-MM-DD HH24:MI:SS') > DECODE(B.IF_STR_DH
                                                                                                                                       ,NULL,'0000-00-00 00:00:00'
                                                                                                                                       ,'','0000-00-00 00:00:00'
                                                                                                                                       ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') )
                                                            )
                        WHEN A.TBL_NM = 'TBDCMACM002M' THEN (
                                                                 SELECT COUNT(1) 
                                                                   FROM TBDCMACM002M ST 
                                                                  WHERE TO_CHAR(ST.FNL_MDF_DH, 'YYYY-MM-DD HH24:MI:SS') > DECODE(B.IF_STR_DH
                                                                                                                                       ,NULL,'0000-00-00 00:00:00'
                                                                                                                                       ,'','0000-00-00 00:00:00'
                                                                                                                                       ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') )
                                                            )
                        WHEN A.TBL_NM = 'TBDCMACM015M' THEN (
                                                                 SELECT COUNT(1) 
                                                                   FROM TBDCMACM015M ST 
                                                                  WHERE TO_CHAR(ST.FNL_MDF_DH, 'YYYY-MM-DD HH24:MI:SS') > DECODE(B.IF_STR_DH
                                                                                                                                        ,NULL,'0000-00-00 00:00:00'
                                                                                                                                       ,'','0000-00-00 00:00:00'
                                                                                                                                       ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') )
                                                            )
                        WHEN A.TBL_NM = 'TBCSPIIT006M' THEN (
                                                                 SELECT COUNT(1) 
                                                                   FROM TBCSPIIT006M ST 
                                                                  WHERE TO_CHAR(ST.FNL_MDF_DH, 'YYYY-MM-DD HH24:MI:SS') > DECODE(B.IF_STR_DH
                                                                                                                                       ,NULL,'0000-00-00 00:00:00'
                                                                                                                                       ,'','0000-00-00 00:00:00'
                                                                                                                                       ,TO_CHAR(B.IF_STR_DH, 'YYYY-MM-DD HH24:MI:SS') )
                                                            )
                   end TRNM_DATA_CNT
              FROM(
                       SELECT 'TBDCMACM013C(공통코드)' AS TBL_NM_DES
                              ,'TBDCMACM013C' AS TBL_NM
                              ,'공통코드' AS TBL_DES
                              ,'1' AS NO
                         FROM DUAL
                         UNION ALL
                       SELECT 'TBDCMACM001M(사용자정보기본)' AS TBL_NM_DES ,
                               'TBDCMACM001M' AS TBL_NM ,
                               '사용자정보기본' AS TBL_DES
                              ,'2' AS NO
                         FROM DUAL
                         UNION ALL
                       SELECT 'TBDCMACM002M(부서정보기본)' AS TBL_NM_DES ,
                               'TBDCMACM002M' AS TBL_NM ,
                               '부서정보기본' AS TBL_DES
                              ,'3' AS NO
                         FROM DUAL
                        UNION ALL
                        SELECT 'TBDCMACM015M(기관정보기본)' AS TBL_NM_DES ,
                               'TBDCMACM015M' AS TBL_NM ,
                               '기관정보기본' AS TBL_DES
                              ,'4' AS NO
                         FROM DUAL
                         UNION ALL
                        SELECT 'TBCSPIIT006M(GCC행정코드기본)' AS TBL_NM_DES ,
                               'TBCSPIIT006M' AS TBL_NM ,
                               'GCC행정코드기본' AS TBL_DES
                              ,'5' AS NO
                         FROM DUAL 
                 ) A
                 LEFT JOIN 
                 (
                        SELECT TBL_NM
                              ,TBL_DES
                              ,MAX(IF_STR_DH) AS IF_STR_DH
                          FROM EA_INF_FNDT_DATA_INFO
                         WHERE 1=1
                         GROUP BY TBL_NM,TBL_DES
                 ) B ON(A.TBL_NM=B.TBL_NM)
            WHERE 1=1
            <if test='schTblNmDes != null and schTblNmDes != ""'>
              AND A.TBL_NM LIKE '%'||#{schTblNmDes}||'%'
            </if>
            
            ORDER BY A.NO
        <include refid="include.pageOrder" />
    </select>
    
    <select id="selectMaxIfStrDh" parameterType="paramMap" resultType="string">
        /*kr.go.bai.eip.aep.cfr.dao.AEPCFR008QMapper.selectMaxIfStrDh*/
        SELECT NVL(TO_CHAR(MAX(IF_STR_DH),'YYYYMMDDHH24MI'), '0')
          FROM EA_INF_FNDT_DATA_INFO
         WHERE 1 = 1
           AND TBL_NM = #{tblNm};
    </select>
    
</mapper> 