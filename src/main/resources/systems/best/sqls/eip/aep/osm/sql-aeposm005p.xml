<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.aep.osm.dao.AEPOSM005PMapper">
    
    <select id="selectMainInfo" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.osm.dao.AEPOSM005PMapper.selectMainInfo*/
        SELECT CMT_SBJ_DTL_TIT,
               NVL(DOC_ID,'-') AS DOC_ID,
               CMT_SBJ_DTL_SNO,
               SBCN_VT_CD,
               CASE SBCN_VT_CD WHEN '10' THEN '의결'
                               WHEN '20' THEN '부결'
                               ELSE '' END AS SBCN_VT_NM,
               SBCN_VT_TXT
          FROM TBBADDED122M
         WHERE CMT_DY = REPLACE(#{cmtDy},'-')
           AND CMT_DVSN_CD = #{cmtDvsnCd}
           AND CMT_SQ = #{cmtSq}
           AND CMT_SBJ_DVSN_CD = #{cmtSbjDvsnCd}
           AND CMT_SBJ_SNO = #{cmtSbjSno}
    </select>
    
    <update id="updateBADDED113M" parameterType="paramMap">
    /*kr.go.bai.eip.aep.osm.dao.AEPOSM005PMapper.updateBADDED113M*/
        UPDATE TBBADDED122M SET SBCN_VT_CD = #{sbcnVtCd},
                                SBCN_VT_TXT = #{sbcnVtTxt},
                                FNL_USR_ID = #{usrId},
                                FNL_DEAL_DPT_CD = #{dptCd},
                                FNL_MNU_ID = #{menuNo},
                                FNL_MDF_DH = SYSDATE
                          WHERE CMT_DY = REPLACE(#{cmtDy},'-')
                            AND CMT_DVSN_CD = #{cmtDvsnCd}
                            AND CMT_SQ = #{cmtSq}
                            AND CMT_SBJ_DVSN_CD = #{cmtSbjDvsnCd}
                            AND CMT_SBJ_SNO = #{cmtSbjSno}
    </update>
    
</mapper>