<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper">
    <!-- 감사청구 추가완료 -->
    <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectMainList*/
    SELECT 
            LEGAL_REQ_DVSN_NM
            , LEGAL_REQ_DH
            , REQ_STAT_NM
            , AUD_YR_NO
            , AUD_SBJ_NM
            , AFF_NO
            , TITLE_NM
            , REQ_DPT_NM
            , MNG_DPT_NM
            , LEGAL_REQ_STAT_NM /**/
            , RCPT_DPT_NM /**/
            , OPIN_DOC_STA_NM /**/
            , RCPT_DH /**/
            , WRK_DVSN_CD
            , WRK_YR
            , WRK_NO
            , LEGAL_REQ_DVSN_CD
            , LEGAL_REQ_SRNO
            , REQ_STAT_CD
            , AFF_SNO
            , DOC_WRT_NM
            , DOC_TYPE
            , REQ_DVSN_CD
         FROM (
         
         
         
         
         
         
         
         
         
         
         
         
            SELECT F_CODE_NM('1000828', T1.LEGAL_REQ_DVSN_CD) AS LEGAL_REQ_DVSN_NM
                 , TO_CHAR(T1.LEGAL_REQ_DH, 'YYYY-MM-DD') AS LEGAL_REQ_DH
                 , CASE WHEN T1.REQ_STAT_CD IN ('20', '30', '90') THEN F_CODE_NM('1000830', T1.REQ_STAT_CD)
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD) || DECODE(T1.REQ_STAT_CD, '40', ' 수신', '50', ' 접수', '60', ' 회신', '70', '  재배정 요청') 
                   END || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')' AS REQ_STAT_NM
                 , F_MNG_KND_AUDYRNO(T1.WRK_YR, T1.WRK_NO, '', '-') AS AUD_YR_NO
                 , T2.AUD_SBJ_NM
                 , DECODE(T3.AFF_CD, NULL, '', F_MNG_KND_AUDYRNO(T1.WRK_YR, T1.WRK_NO, '', '-') || '-' || T3.AFF_CD) AS AFF_NO
                 , T3.TITLE_NM
                 , F_DPT_INFO(T2.SPV_BRDV_CD, 4) AS REQ_DPT_NM
                 , F_DPT_INFO(T2.MNG_DPT_CD, 4)  AS MNG_DPT_NM
                 , CASE WHEN T1.REQ_STAT_CD BETWEEN '40' AND '60' THEN '발신' || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')'
                        WHEN T1.REQ_STAT_CD IN ('30', '70') THEN '수신' || '(' || TO_CHAR(T1.LEGAL_DPT_RCP_DH, 'YYYY-MM-DD') || ')'
                        ELSE ''
                   END AS LEGAL_REQ_STAT_NM
                 , CASE WHEN T1.REQ_STAT_CD IN ('30', '70') THEN 'SEL'
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD)
                   END AS RCPT_DPT_NM
                 , DECODE(T4.DOC_ID, NULL, DECODE(T5.DOC_ID, NULL, '미작성', '수신전'), '수신') AS OPIN_DOC_STA_NM
                 , TO_CHAR(T4.RCPT_DH, 'YYYY-MM-DD') AS RCPT_DH
                 , T1.WRK_DVSN_CD
                 , T1.WRK_YR
                 , T1.WRK_NO
                 , T1.LEGAL_REQ_DVSN_CD
                 , T1.LEGAL_REQ_SRNO
                 , T1.REQ_STAT_CD
                 , T3.AFF_SNO
                 , F_USR_INFO_BY_ID(T6.DOC_WRT_ID,'2') AS DOC_WRT_NM
                 , T6.DOC_WRT_ID
                 , F_CODE_NM('1000894', T2.DOC_WRIT_KND_CD) AS DOC_TYPE -- 편집기구분
                 , '' AS REQ_DVSN_CD
              FROM TBBADDED126M T1
             INNER JOIN TBBADDED001M T2 ON (    T1.WRK_YR = T2.AUD_YR
                                            AND T1.WRK_NO = T2.AUD_NO )
              LEFT OUTER JOIN (SELECT ST1.AUD_YR
                                      , ST1.AUD_NO
                                      , ST1.AFF_SNO
                                      , ST1.AFF_CD
                                      , ST1.TITLE_NM
                                      , ST1.RPRT_FILD_ID
                                  FROM TBBADDED145M ST1
                                 WHERE ST1.APVR_CD IN (SELECT NVL(MAX(APVR_CD), '0013600')
                                                        FROM (
                                                            SELECT RANK() OVER (PARTITION BY H.DOC_ID ORDER BY DECODE(H.APVR_CD, 'A1070', 1, '0010600', 2,  '0055700', 3, '0055600' ,4 ,'0045900', 5,  '0015800' ,6,'0035100', 7, '0058100', 8,  '0013600', 9, 99) ASC ) AS RN
                                                                 , H.APVR_CD
                                                                 , H.DOC_ID
                                                                 , H.AUD_YR
                                                                 , H.AUD_NO
                                                              FROM TBBADDED145M H
                                                             WHERE H.APVR_CD <![CDATA[<>]]> '0010200'
                                                             GROUP BY H.DOC_ID, H.APVR_CD, H.AUD_YR, H.AUD_NO)   
                                                       WHERE RN = 1 
                                                         AND ST1.DOC_ID = DOC_ID
                                                         AND ST1.AUD_YR = AUD_YR
                                                         AND ST1.AUD_NO = AUD_NO)
                                   ) T3 ON (    T1.WRK_YR = T3.AUD_YR
                                            AND T1.WRK_NO = T3.AUD_NO
                                            AND T1.AFF_SNO = T3.AFF_SNO)
              LEFT OUTER JOIN TBBADDED111M T4 ON (    T1.WRK_YR = T4.AUD_YR
                                                  AND T1.WRK_NO = T4.AUD_NO
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T4.REF_ID
                                                  AND T4.RPRT_CD = 'A10602300' 
                                                  AND T4.RCPT_DPT_CD = '160100' )
              LEFT OUTER JOIN TBBADDED103M T5 ON (    T1.WRK_YR = T5.AUD_YR
                                                  AND T1.WRK_NO = T5.AUD_NO
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T5.REF_ID
                                                  AND T5.RPRT_CD = 'A10602300' )
              LEFT OUTER JOIN TBBADDED103M T6 ON (    T1.WRK_YR = T6.AUD_YR
                                                  AND T1.WRK_NO = T6.AUD_NO
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T6.REF_ID
                                                  AND T6.RPRT_CD = 'A10602100' )
             WHERE T1.REQ_STAT_CD <![CDATA[>]]> 10
           <if test="schAudYr != null and schAudYr != ''">
               AND T2.AUD_YR = #{schAudYr}
           </if>
           <if test="schAudYrNoKndCd != null and schAudYrNoKndCd != ''">
               AND T2.AUD_KND_CD = #{schAudYrNoKndCd}
           </if>
           <if test="schAudGrnNo != null and schAudGrnNo != ''">
               AND T2.AUD_GRN_NO = #{schAudGrnNo}
           </if>
           <if test="schAudSbjNm != null and schAudSbjNm != ''">
               AND T2.AUD_SBJ_NM LIKE '%'||#{schAudSbjNm}||'%'
           </if>
           <if test="schAudGrnNo2 != null and schAudGrnNo2 != ''">
               AND T2.AUD_GRN_NO = #{schAudGrnNo2} /* 사건, 처분 테이블 */
           </if>
           <if test="reqDvsnCd != null and reqDvsnCd != ''">
               AND T1.LEGAL_REQ_DVSN_CD = #{reqDvsnCd}
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'N'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'Y'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'S'.toString()">
               AND T4.DOC_ID IS NOT NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="schAffCd != null and schAffCd != ''">
               AND T3.AFF_CD = #{schAffCd}
               AND T3.AFF_CD IS NOT NULL
           </if>
           <if test="schAudSbjNm2 != null and schAudSbjNm2 != ''">
               AND T3.TITLE_NM = #{schAudSbjNm2}
               AND T3.TITLE_NM IS NOT NULL
           </if>
           		AND T1.WRK_DVSN_CD = 'A10'
           
           <if test="wrkDvsnCd != null and wrkDvsnCd != ''">
               AND T1.WRK_DVSN_CD = #{wrkDvsnCd}
           </if>
           AND T1.HIDDEN_YN = 'N'
           
           
           
           
           
           
           UNION ALL
           
           
           
           
           
           
           SELECT F_CODE_NM('1000828', T1.LEGAL_REQ_DVSN_CD) AS LEGAL_REQ_DVSN_NM
                 , TO_CHAR(T1.LEGAL_REQ_DH, 'YYYY-MM-DD') AS LEGAL_REQ_DH
                 , CASE WHEN T1.REQ_STAT_CD IN ('20', '30', '90') THEN F_CODE_NM('1000830', T1.REQ_STAT_CD)
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD) || DECODE(T1.REQ_STAT_CD, '40', ' 수신', '50', ' 접수', '60', ' 회신', '70', ' 재배정 요청') 
                   END || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')' AS REQ_STAT_NM
                 , T2.ACP_YR || '-' || DECODE(T2.ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || T2.ACP_SRNO  AS AUD_YR_NO
                 , T2.TIT_NM AS AUD_SBJ_NM
                 , '' AS AFF_NO
                 , '' AS TITLE_NM
                 , F_DPT_INFO(T2.DPT_CD, 4) AS REQ_DPT_NM
                 , F_DPT_INFO(T2.DPT_CD, 4) AS MNG_DPT_NM
                 , CASE WHEN T1.REQ_STAT_CD BETWEEN '40' AND '60' THEN '발신' || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')'
                        WHEN T1.REQ_STAT_CD IN ('30', '70') THEN '수신' || '(' || TO_CHAR(T1.LEGAL_DPT_RCP_DH, 'YYYY-MM-DD') || ')'
                        ELSE ''
                   END AS LEGAL_REQ_STAT_NM
                 , CASE WHEN T1.REQ_STAT_CD IN ('30', '70') THEN 'SEL'
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD)
                   END AS RCPT_DPT_NM
                 , DECODE(T4.DOC_ID, NULL, DECODE(T5.DOC_ID, NULL, '미작성', '수신전'), '수신') AS OPIN_DOC_STA_NM
                 , TO_CHAR(T4.RCPT_DH, 'YYYY-MM-DD') AS RCPT_DH
                 , T1.WRK_DVSN_CD
                 , T1.WRK_YR
                 , T1.WRK_NO
                 , T1.LEGAL_REQ_DVSN_CD
                 , T1.LEGAL_REQ_SRNO
                 , T1.REQ_STAT_CD
                 , NULL AS AFF_SNO
                 , F_USR_INFO_BY_ID(T6.DOC_WRT_ID,'2') AS DOC_WRT_NM
                 , T6.DOC_WRT_ID
                 , F_CODE_NM('1000894', T2.DOC_WRIT_KND_CD) AS DOC_TYPE -- 편집기구분
                 , '' AS REQ_DVSN_CD
              FROM TBBADDED126M T1
             INNER JOIN TBBADFRE012M T2 ON (    T1.WRK_YR = T2.ACP_YR
                                            AND T1.WRK_DVSN_CD = DECODE(T2.ACP_DVSN_CD,'1','D10','2','E10')
                                            AND T1.WRK_NO = TO_CHAR(T2.ACP_SRNO) )
              LEFT OUTER JOIN TBBADFRE111M T4 ON (    T1.WRK_YR = T4.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T4.ACP_DVSN_CD,'1','D10','2','E10')
                                                  AND T1.WRK_NO = TO_CHAR(T4.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T4.REF_ID
                                                  AND T4.RPRT_CD IN('D10200700','E10400500')
                                                  AND T4.RCPT_DPT_CD = '160100' )
              LEFT OUTER JOIN TBBADFRE103M T5 ON (    T1.WRK_YR = T5.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T5.ACP_DVSN_CD,'1','D10','2','E10') 
                                                  AND T1.WRK_NO = TO_CHAR(T5.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T5.REF_ID
                                                  AND T5.RPRT_CD IN('D10200700','E10400500') )
              LEFT OUTER JOIN TBBADFRE103M T6 ON (    T1.WRK_YR = T6.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T6.ACP_DVSN_CD,'1','D10','2','E10') 
                                                  AND T1.WRK_NO = TO_CHAR(T6.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T6.REF_ID
                                                  AND T6.RPRT_CD IN ('D10200500', 'E10400300') )
             WHERE T1.REQ_STAT_CD  <![CDATA[>]]> 10
           <if test="schAudYr != null and schAudYr != ''">
               AND T2.ACP_YR = #{schAudYr}
           </if>
           <if test="schAudYrNoKndCd != null and schAudYrNoKndCd != ''">
               AND T2.ACP_DVSN_CD = #{schAudYrNoKndCd}
           </if>
           <if test="schAudGrnNo != null and schAudGrnNo != ''">
               AND T2.ACP_SRNO = #{schAudGrnNo}
           </if>
           <if test="schAudSbjNm != null and schAudSbjNm != ''">
               AND T2.TIT_NM LIKE '%'||#{schAudSbjNm}||'%'
           </if>
           <if test="reqDvsnCd != null and reqDvsnCd != ''">
               AND T1.LEGAL_REQ_DVSN_CD = #{reqDvsnCd}
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'N'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'Y'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'S'.toString()">
               AND T4.DOC_ID IS NOT NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="wrkDvsnCd != null and wrkDvsnCd != ''">
               AND T1.WRK_DVSN_CD = #{wrkDvsnCd}
           </if>
               AND T1.HIDDEN_YN = 'N'
               
               
           
           
           UNION ALL
           
           
           /* 감사제보(B10) 감사청구(C10) */
           SELECT F_CODE_NM('1000828', T1.LEGAL_REQ_DVSN_CD) AS LEGAL_REQ_DVSN_NM
                 , TO_CHAR(T1.LEGAL_REQ_DH, 'YYYY-MM-DD') AS LEGAL_REQ_DH
                 , CASE WHEN T1.REQ_STAT_CD IN ('20', '30', '90') THEN F_CODE_NM('1000830', T1.REQ_STAT_CD)
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD) || DECODE(T1.REQ_STAT_CD, '40', ' 수신', '50', ' 접수', '60', ' 회신', '70', ' 재배정 요청') 
                   END || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')' AS REQ_STAT_NM
                 , T2.ACP_YR || '-' || DECODE(T2.REQ_DVSN_CD,'1','제보','2','국민','3','공익','3','국회') || '-' || LTRIM(T2.RM_CVPT_ACP_NO, '0')  AS AUD_YR_NO 
                 , T2.TIT_NM AS AUD_SBJ_NM
                 , '' AS AFF_NO
                 , '' AS TITLE_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS REQ_DPT_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS MNG_DPT_NM
                 , CASE WHEN T1.REQ_STAT_CD BETWEEN '40' AND '60' THEN '발신' || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')'
                        WHEN T1.REQ_STAT_CD IN ('30', '70') THEN '수신' || '(' || TO_CHAR(T1.LEGAL_DPT_RCP_DH, 'YYYY-MM-DD') || ')'
                        ELSE ''
                   END AS LEGAL_REQ_STAT_NM
                 , CASE WHEN T1.REQ_STAT_CD IN ('30', '70') THEN 'SEL'
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD)
                   END AS RCPT_DPT_NM
                 , DECODE(T4.DOC_ID, NULL, DECODE(T5.DOC_ID, NULL, '미작성', '수신전'), '수신') AS OPIN_DOC_STA_NM
                 , TO_CHAR(T4.RCPT_DH, 'YYYY-MM-DD') AS RCPT_DH
                 , T1.WRK_DVSN_CD
                 , T1.WRK_YR
                 , T1.WRK_NO
                 , T1.LEGAL_REQ_DVSN_CD
                 , T1.LEGAL_REQ_SRNO
                 , T1.REQ_STAT_CD
                 , NULL AS AFF_SNO
                 , F_USR_INFO_BY_ID(T6.DOC_WRT_ID,'2') AS DOC_WRT_NM
                 , T6.DOC_WRT_ID
                 , F_CODE_NM('1000894', T2.DOC_WRIT_KND_CD) AS DOC_TYPE -- 편집기구분
                 , T2.REQ_DVSN_CD
                 
                 
              FROM TBBADDED126M T1
              
              
             INNER JOIN TBCSPDCP101M T2 ON (    T1.WRK_YR = T2.ACP_YR
                                            AND T1.WRK_DVSN_CD = DECODE(T2.REQ_DVSN_CD,'1','B10','2','C10', '3', 'C10', '4', 'C10')
                                            AND T1.AUD_STEP_CD = DECODE(T2.REQ_DVSN_CD,'1','B3011','2','C2012', '3', 'C2013', '4', 'C2010')
                                            AND T1.WRK_NO = TO_CHAR(T2.CVPT_ACP_NO) )
                                            
                                            
                                            
              LEFT OUTER JOIN (SELECT AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH
                             , MAX(AA.DOC_ID) AS DOC_ID
                             , MAX(AA.SND_DH) AS SND_DH
                          FROM TBCSPDCP111M AA
                         GROUP BY
                               AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH) T4 ON (    T1.WRK_YR = T4.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T4.ACP_DVSN_CD,'1','B10','2','C10', '3', 'C10', '4', 'C10')
                                                  AND T1.WRK_NO = TO_CHAR(T4.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T4.REF_ID
                                                  AND T4.RPRT_CD IN('B40100300','C30100300')--법률자문의견서
                                                  AND T4.RCPT_DPT_CD = '160100' )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBCSPDCP603M T5 ON (    T1.WRK_YR = T5.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T5.REQ_DVSN_CD,'1','B10','2','C10','3','C10', '4', 'C10') 
                                                  AND T1.WRK_NO = TO_CHAR(T5.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T5.REF_ID
                                                  AND T5.RPRT_CD IN('B40100300', 'C30100300') )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBCSPDCP603M T6 ON (    T1.WRK_YR = T6.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T6.REQ_DVSN_CD,'1','B10','2','C10','3','C10', '4', 'C10') 
                                                  AND T1.WRK_NO = TO_CHAR(T6.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T6.REF_ID
                                                  AND T6.RPRT_CD IN ('B40100100','C30100100') )
                                                  
                                                  
                                                  
             WHERE T1.REQ_STAT_CD  <![CDATA[>]]> 10
             
             
           <if test="schAudYr != null and schAudYr != ''">
               AND T2.ACP_YR = #{schAudYr}
           </if>
           <if test="schAudYrNoKndCd != null and schAudYrNoKndCd != ''">
               AND T2.REQ_DVSN_CD = #{schAudYrNoKndCd}
           </if>
           <if test="schAudGrnNo != null and schAudGrnNo != ''">
               AND T2.CVPT_ACP_NO = #{schAudGrnNo}
           </if>
           <if test="schAudSbjNm != null and schAudSbjNm != ''">
               AND T2.TIT_NM LIKE '%'||#{schAudSbjNm}||'%'
           </if>
           <if test="reqDvsnCd != null and reqDvsnCd != ''">
               AND T1.LEGAL_REQ_DVSN_CD = #{reqDvsnCd}
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'N'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'Y'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'S'.toString()">
               AND T4.DOC_ID IS NOT NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="wrkDvsnCd != null and wrkDvsnCd != ''">
               AND T1.WRK_DVSN_CD = #{wrkDvsnCd}
           </if>
               AND T1.HIDDEN_YN = 'N'
               AND T1.AUD_STEP_CD IN ('B3011','C2012', 'C2013')
               
               
               
               
               
               
               UNION ALL
           
           
           /* 부패행위(F10) */
           SELECT F_CODE_NM('1000828', T1.LEGAL_REQ_DVSN_CD) AS LEGAL_REQ_DVSN_NM
                 , TO_CHAR(T1.LEGAL_REQ_DH, 'YYYY-MM-DD') AS LEGAL_REQ_DH
                 , CASE WHEN T1.REQ_STAT_CD IN ('20', '30', '90') THEN F_CODE_NM('1000830', T1.REQ_STAT_CD)
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD) || DECODE(T1.REQ_STAT_CD, '40', ' 수신', '50', ' 접수', '60', ' 회신', '70', ' 재배정 요청') 
                   END || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')' AS REQ_STAT_NM
                 , T2.ACP_YR || '-' || '부감' || '-' || LTRIM(T2.RM_CVPT_ACP_NO, '0')  AS AUD_YR_NO
                 , T2.TIT_NM AS AUD_SBJ_NM
                 , '' AS AFF_NO
                 , '' AS TITLE_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS REQ_DPT_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS MNG_DPT_NM
                 , CASE WHEN T1.REQ_STAT_CD BETWEEN '40' AND '60' THEN '발신' || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')'
                        WHEN T1.REQ_STAT_CD IN ('30', '70') THEN '수신' || '(' || TO_CHAR(T1.LEGAL_DPT_RCP_DH, 'YYYY-MM-DD') || ')'
                        ELSE ''
                   END AS LEGAL_REQ_STAT_NM
                 , CASE WHEN T1.REQ_STAT_CD IN ('30', '70') THEN 'SEL'
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD)
                   END AS RCPT_DPT_NM
                 , DECODE(T4.DOC_ID, NULL, DECODE(T5.DOC_ID, NULL, '미작성', '수신전'), '수신') AS OPIN_DOC_STA_NM
                 , TO_CHAR(T4.RCPT_DH, 'YYYY-MM-DD') AS RCPT_DH
                 , T1.WRK_DVSN_CD
                 , T1.WRK_YR
                 , T1.WRK_NO
                 , T1.LEGAL_REQ_DVSN_CD
                 , T1.LEGAL_REQ_SRNO
                 , T1.REQ_STAT_CD
                 , NULL AS AFF_SNO
                 , F_USR_INFO_BY_ID(T6.DOC_WRT_ID,'2') AS DOC_WRT_NM
                 , T6.DOC_WRT_ID
                 , F_CODE_NM('1000894', T2.DOC_WRIT_KND_CD) AS DOC_TYPE -- 편집기구분
                 , T2.REQ_DVSN_CD
                 
                 
              FROM TBBADDED126M T1
              
              
             INNER JOIN TBCORCOR101M T2 ON (    T1.WRK_YR = T2.ACP_YR
                                            AND T1.WRK_DVSN_CD = DECODE(T2.REQ_DVSN_CD,'5','F10', '')
                                            AND T1.WRK_NO = TO_CHAR(T2.CVPT_ACP_NO) )
                                            
                                            
                                            
              LEFT OUTER JOIN (SELECT AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH
                             , MAX(AA.DOC_ID) AS DOC_ID
                             , MAX(AA.SND_DH) AS SND_DH
                          FROM TBCSPDCP111M AA
                         GROUP BY
                               AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH) T4 ON (    T1.WRK_YR = T4.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T4.ACP_DVSN_CD,'5','F10', '')
                                                  AND T1.WRK_NO = TO_CHAR(T4.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T4.REF_ID
                                                  AND T4.RPRT_CD IN('F40100300')--법률자문의견서
                                                  AND T4.RCPT_DPT_CD = '160100' )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBCORCOR603M T5 ON (    T1.WRK_YR = T5.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T5.REQ_DVSN_CD,'5','F10', '') 
                                                  AND T1.WRK_NO = TO_CHAR(T5.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T5.REF_ID
                                                  AND T5.RPRT_CD IN('F40100300') )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBCORCOR603M T6 ON (    T1.WRK_YR = T6.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T6.REQ_DVSN_CD,'5','F10','') 
                                                  AND T1.WRK_NO = TO_CHAR(T6.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T6.REF_ID
                                                  AND T6.RPRT_CD IN ('F40100100') )
                                                  
                                                  
                                                  
             WHERE T1.REQ_STAT_CD  <![CDATA[>]]> 10
             
             
           <if test="schAudYr != null and schAudYr != ''">
               AND T2.ACP_YR = #{schAudYr}
           </if>
           <if test="schAudYrNoKndCd != null and schAudYrNoKndCd != ''">
               AND T2.REQ_DVSN_CD = #{schAudYrNoKndCd}
           </if>
           <if test="schAudGrnNo != null and schAudGrnNo != ''">
               AND T2.CVPT_ACP_NO = #{schAudGrnNo}
           </if>
           <if test="schAudSbjNm != null and schAudSbjNm != ''">
               AND T2.TIT_NM LIKE '%'||#{schAudSbjNm}||'%'
           </if>
           <if test="reqDvsnCd != null and reqDvsnCd != ''">
               AND T1.LEGAL_REQ_DVSN_CD = #{reqDvsnCd}
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'N'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'Y'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'S'.toString()">
               AND T4.DOC_ID IS NOT NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="wrkDvsnCd != null and wrkDvsnCd != ''">
               AND T1.WRK_DVSN_CD = #{wrkDvsnCd}
           </if>
               AND T1.HIDDEN_YN = 'N'
               
               
               
               
               UNION ALL
           
           
           /* 청탁금지(G10) */
           SELECT F_CODE_NM('1000828', T1.LEGAL_REQ_DVSN_CD) AS LEGAL_REQ_DVSN_NM
                 , TO_CHAR(T1.LEGAL_REQ_DH, 'YYYY-MM-DD') AS LEGAL_REQ_DH
                 , CASE WHEN T1.REQ_STAT_CD IN ('20', '30', '90') THEN F_CODE_NM('1000830', T1.REQ_STAT_CD)
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD) || DECODE(T1.REQ_STAT_CD, '40', ' 수신', '50', ' 접수', '60', ' 회신', '70', ' 재배정 요청') 
                   END || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')' AS REQ_STAT_NM
                 , T2.ACP_YR || '-' || '청금' || '-' || LTRIM(T2.RM_CVPT_ACP_NO, '0')  AS AUD_YR_NO
                 , T2.TIT_NM AS AUD_SBJ_NM
                 , '' AS AFF_NO
                 , '' AS TITLE_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS REQ_DPT_NM
                 , F_DPT_INFO(T2.ACP_DPT_CD, 4) AS MNG_DPT_NM
                 , CASE WHEN T1.REQ_STAT_CD BETWEEN '40' AND '60' THEN '발신' || '(' || TO_CHAR(T1.REQ_STAT_CHG_DH, 'YYYY-MM-DD') || ')'
                        WHEN T1.REQ_STAT_CD IN ('30', '70') THEN '수신' || '(' || TO_CHAR(T1.LEGAL_DPT_RCP_DH, 'YYYY-MM-DD') || ')'
                        ELSE ''
                   END AS LEGAL_REQ_STAT_NM
                 , CASE WHEN T1.REQ_STAT_CD IN ('30', '70') THEN 'SEL'
                        ELSE F_CODE_NM('1000831', T1.LEGAL_DPT_CD)
                   END AS RCPT_DPT_NM
                 , DECODE(T4.DOC_ID, NULL, DECODE(T5.DOC_ID, NULL, '미작성', '수신전'), '수신') AS OPIN_DOC_STA_NM
                 , TO_CHAR(T4.RCPT_DH, 'YYYY-MM-DD') AS RCPT_DH
                 , T1.WRK_DVSN_CD
                 , T1.WRK_YR
                 , T1.WRK_NO
                 , T1.LEGAL_REQ_DVSN_CD
                 , T1.LEGAL_REQ_SRNO
                 , T1.REQ_STAT_CD
                 , NULL AS AFF_SNO
                 , F_USR_INFO_BY_ID(T6.DOC_WRT_ID,'2') AS DOC_WRT_NM
                 , T6.DOC_WRT_ID
                 , F_CODE_NM('1000894', T2.DOC_WRIT_KND_CD) AS DOC_TYPE -- 편집기구분
                 , T2.REQ_DVSN_CD
                 
                 
              FROM TBBADDED126M T1
              
              
             INNER JOIN TBDCPDCP101M T2 ON (    T1.WRK_YR = T2.ACP_YR
                                            AND T1.WRK_DVSN_CD = DECODE(T2.REQ_DVSN_CD,'6','G10', '')
                                            AND T1.WRK_NO = TO_CHAR(T2.CVPT_ACP_NO) )
                                            
                                            
                                            
              LEFT OUTER JOIN (SELECT AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH
                             , MAX(AA.DOC_ID) AS DOC_ID
                             , MAX(AA.SND_DH) AS SND_DH
                          FROM TBCSPDCP111M AA
                         GROUP BY
                               AA.ACP_YR
                             , AA.ACP_DVSN_CD
                             , AA.ACP_SRNO
                             , AA.REF_ID
                             , AA.RPRT_CD
                             , AA.RCPT_DPT_CD
                             , AA.RCPT_DH) T4 ON (    T1.WRK_YR = T4.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T4.ACP_DVSN_CD,'6','G10', '')
                                                  AND T1.WRK_NO = TO_CHAR(T4.ACP_SRNO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T4.REF_ID
                                                  AND T4.RPRT_CD IN('G40100300')--법률자문의견서
                                                  AND T4.RCPT_DPT_CD = '160100' )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBDCPDCP603M T5 ON (    T1.WRK_YR = T5.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T5.REQ_DVSN_CD,'6','G10', '') 
                                                  AND T1.WRK_NO = TO_CHAR(T5.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T5.REF_ID
                                                  AND T5.RPRT_CD IN('G40100300') )
                                                  
                                                  
                                                  
              LEFT OUTER JOIN TBDCPDCP603M T6 ON (    T1.WRK_YR = T6.ACP_YR
                                                  AND T1.WRK_DVSN_CD = DECODE(T6.REQ_DVSN_CD,'6','G10','') 
                                                  AND T1.WRK_NO = TO_CHAR(T6.CVPT_ACP_NO)
                                                  AND TO_CHAR(T1.LEGAL_REQ_SRNO) = T6.REF_ID
                                                  AND T6.RPRT_CD IN ('G40100100') )
                                                  
                                                  
                                                  
             WHERE T1.REQ_STAT_CD  <![CDATA[>]]> 10
             
             
           <if test="schAudYr != null and schAudYr != ''">
               AND T2.ACP_YR = #{schAudYr}
           </if>
           <if test="schAudYrNoKndCd != null and schAudYrNoKndCd != ''">
               AND T2.REQ_DVSN_CD = #{schAudYrNoKndCd}
           </if>
           <if test="schAudGrnNo != null and schAudGrnNo != ''">
               AND T2.CVPT_ACP_NO = #{schAudGrnNo}
           </if>
           <if test="schAudSbjNm != null and schAudSbjNm != ''">
               AND T2.TIT_NM LIKE '%'||#{schAudSbjNm}||'%'
           </if>
           <if test="reqDvsnCd != null and reqDvsnCd != ''">
               AND T1.LEGAL_REQ_DVSN_CD = #{reqDvsnCd}
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'N'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'Y'.toString()">
               AND T4.DOC_ID IS NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="examSta != null and examSta != '' and examSta eq 'S'.toString()">
               AND T4.DOC_ID IS NOT NULL
               AND T5.DOC_ID IS NOT NULL
           </if>
           <if test="wrkDvsnCd != null and wrkDvsnCd != ''">
               AND T1.WRK_DVSN_CD = #{wrkDvsnCd}
           </if>
               AND T1.HIDDEN_YN = 'N'
               
               
               
            )
            ORDER BY LEGAL_REQ_DH DESC , DECODE(REQ_STAT_CD, '70', '30', REQ_STAT_CD), LEGAL_REQ_SRNO DESC
    </select>
    
    <select id="selectRprtRcptList" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtRcptList*/
        <![CDATA[
            SELECT RPRT_NM
                 , DOC_ID
                 , F_DPT_INFO(SND_DPT_CD, 1) AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , F_DPT_INFO(RCPT_DPT_CD, 1) AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADDED111M 
             WHERE AUD_YR = #{wrkYr}
               AND AUD_NO = #{wrkNo}
               AND RPRT_CD IN ('A10602100', 'A10602200')
               AND SND_DPT_CD <> '160100' --법무에서 발신된 문서 제외
               AND REF_ID = #{legalReqSrno}
             UNION ALL
            SELECT RPRT_NM
                 , DOC_ID
                 , DECODE(SND_DPT_CD, '160000', '법률자문관I', '160100', '법률자문관II') AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , F_DPT_INFO(RCPT_DPT_CD, 1) AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADDED111M 
             WHERE AUD_YR = #{wrkYr}
               AND AUD_NO = #{wrkNo}
               AND RPRT_CD = 'A10602300'
               AND RCPT_DPT_CD IN ('160000', '160100') --법무에서 발신된 문서
               AND REF_ID = #{legalReqSrno}
        ]]>
    </select>
    
    <select id="selectRprtSndList" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtSndList*/
        <![CDATA[
            SELECT RPRT_NM
                 , DOC_ID
                 , DECODE(DOC_STA_CD, '10', '발신', '20', '수신', '') AS STA_NM
                 , F_DPT_INFO(SND_DPT_CD, 1) AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , DECODE(RCPT_DPT_CD, '160000', '법률자문관I', '160100', '법률자문관II') AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADDED111M 
             WHERE AUD_YR = #{wrkYr}
               AND AUD_NO = #{wrkNo}
               AND RPRT_CD IN ('A10602100', 'A10602200')
               AND SND_DPT_CD = '160100' --법무에서 발신된 문서
               AND REF_ID = #{legalReqSrno}
        ]]>
    </select>
    
    
    
    
    
    
    
    
    
    
    
    
    
    <select id="selectRprtRcptListBADFRE" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtRcptListBADFRE*/
        <![CDATA[
            SELECT RPRT_NM
                 , DOC_ID
                 , F_DPT_INFO(SND_DPT_CD, 1) AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , F_DPT_INFO(RCPT_DPT_CD, 1) AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADFRE111M 
             WHERE ACP_YR = #{wrkYr}
               AND ACP_DVSN_CD = DECODE(#{wrkDvsnCd},'D10','1','E10','2','')
               AND ACP_SRNO = #{wrkNo}
               AND RPRT_CD IN ('D10200500', 'D10200600', 'E10400300', 'E10400400')
               AND SND_DPT_CD <> '160100' --법무에서 발신된 문서 제외
               AND REF_ID = #{legalReqSrno}
             UNION ALL
            SELECT RPRT_NM
                 , DOC_ID
                 , F_DPT_INFO(SND_DPT_CD, 1) AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , F_DPT_INFO(RCPT_DPT_CD, 1) AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADFRE111M 
             WHERE ACP_YR = #{wrkYr}
               AND ACP_DVSN_CD = DECODE(#{wrkDvsnCd},'D10','1','E10','2','')
               AND ACP_SRNO = #{wrkNo}
               AND RPRT_CD IN ('D10200700','E10400500')
               AND RCPT_DPT_CD IN ('160000', '160100') --법무에서 발신된 문서
               AND REF_ID = #{legalReqSrno}
        ]]>
    </select>
    
    <select id="selectRprtSndListBADFRE" parameterType="paramMap" resultType="egovMap">
    /*kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtSndListBADFRE*/
        <![CDATA[
            SELECT RPRT_NM
                 , DOC_ID
                 , DECODE(DOC_STA_CD, '10', '발신', '20', '수신', '') AS STA_NM
                 , F_DPT_INFO(SND_DPT_CD, 1) AS SND_DPT_NM
                 , TO_CHAR(SND_DH, 'YYYY-MM-DD') AS SND_DT
                 , DECODE(RCPT_DPT_CD, '160000', '법률자문관I', '160100', '법률자문관II') AS RCPT_DPT_NM
                 , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
                 , F_OPEN_EDIT(LINK_URL) AS DOC_TYPE
              FROM TBBADFRE111M 
             WHERE ACP_YR = #{wrkYr}
               AND ACP_DVSN_CD = DECODE(#{wrkDvsnCd},'D10','1','E10','2','')
               AND ACP_SRNO = #{wrkNo}
               AND RPRT_CD IN ('D10200500', 'D10200600', 'E10400300', 'E10400400')
               AND SND_DPT_CD = '160100' --법무에서 발신된 문서
               AND REF_ID = #{legalReqSrno}
        ]]>
    </select>
    
    
     
    
    
    
    
    
    <!-- 법무부서 >> 법률자문관 발신 시 메세징 처리 -->
    <insert id="insertSendMessage" parameterType="paramMap">
            INSERT INTO
            TBDCMACM026L
            (
              MSG_SNO
            , TSK_CAT_CD
            , FUNC_CAT_CD
            , SEND_ID
            , MSG_TP_YN   
            <if test="wrkDvsnCd eq 'A10'.toString() or wrkDvsnCd eq 'D10'.toString() or wrkDvsnCd eq 'E10'.toString()">
            , MSG_TXT_2
            </if>
            , RCNT_CNT
            , RCNT_HIS
            , MSG_REGI_DH   
            , FRT_USR_ID
            , FNL_USR_ID
            , FNL_DEAL_DPT_CD
            , FNL_MNU_ID
            , FRT_REGI_DH
            ,
            FNL_MDF_DH  
            )
            (
            SELECT
              (SELECT NVL(MAX(MSG_SNO),'0') AS MSG_SNO FROM TBDCMACM026L) + ROWNUM
            , 'CM'
            , 'CM'
            , 'SYSTEM'
            , '0'
            <if test="wrkDvsnCd eq 'A10'.toString()">
            , '[('||F_MNG_KND_AUDYRNO(#{wrkYr}, #{wrkNo}, '', '-')
                             ||') '
                             ||(SELECT AUD_SBJ_NM from TBBADDED001M WHERE AUD_YR = #{wrkYr} AND AUD_NO = #{wrkNo})
                             ||'] 감사와 관련하여 법률자문 요청건이 수신 되었습니다.'
            </if>
            <if test="wrkDvsnCd eq 'D10'.toString() or wrkDvsnCd eq 'E10'.toString()">
            , '[('||#{wrkYr}||'-'||DECODE(#{wrkDvsnCd}, 'D10', '심사', '재심')||'-'||#{wrkNo}
                             ||') '
                             ||(SELECT TIT_NM from TBBADFRE012M WHERE ACP_YR = #{wrkYr} AND ACP_SRNO = #{wrkNo} AND ACP_DVSN_CD = DECODE(#{wrkDvsnCd}, 'D10', '1', '2'))
                             ||'] '||DECODE(#{wrkDvsnCd}, 'D10', '심사청구', '재심의청구')||'와 관련하여 법률자문 요청건이 수신 되었습니다.'
            </if>
            <![CDATA[
            , 1
            , CNB
            , SYSDATE 
            , #{usrId}
            , #{usrId}
            , #{dptCd}
            , #{mnuId}
            , SYSDATE
            , SYSDATE
            FROM TBDCMACM001M
            WHERE CNB IN ('9339', #{rpctCnb})
            )
        ]]>
    </insert>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <!-- 수신문서 목록 조회(감사제보, 감사청구) -->
    <select id="selectRprtRcptListCSPDCP" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtRcptListCSPDCP */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , F_DPT_INFO(SND_DPT_CD, 1)      AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBCSPDCP111M
         WHERE 1=1
           AND ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('B40100100','B40100200','C30100100', 'C30100200')
           AND SND_DPT_CD  <> '160100'
           AND REF_ID       = #{legalReqSrno}
         UNION ALL
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(SND_DPT_CD, '160000', '법률자문관I'
                                , '160100', '법률자문관II', F_DPT_INFO(SND_DPT_CD, 1))
                                              AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBCSPDCP111M 
         WHERE ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('B40100300','C30100300')
           AND RCPT_DPT_CD IN ('160000', '160100')
           AND REF_ID       = #{legalReqSrno}
        ]]>
    </select>
    
    <!-- 발신문서 목록 조회(감사제보, 감사청구) -->
    <select id="selectRprtSndListCSPDCP" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtSndListCSPDCP */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(DOC_STA_CD, '10', '발신'
                                , '20', '수신', '') AS STA_NM
             , F_DPT_INFO(SND_DPT_CD, 1)            AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')        AS SND_DT
             , DECODE(RCPT_DPT_CD, '160000', '법률자문관I'
                                 , '160100', '법률자문관II', F_DPT_INFO(RCPT_DPT_CD, 1))
                                                    AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD')       AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)                AS DOC_TYPE
          FROM TBCSPDCP111M 
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND RPRT_CD    IN ('B40100100','B40100200','C30100100', 'C30100200')
           AND SND_DPT_CD  = '160100'
           AND REF_ID      = #{legalReqSrno}
        ]]>
    </select>
    

    <!-- 수신문서 목록 조회(부패행위) -->
    <select id="selectRprtRcptListCORCOR" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtRcptListCORCOR */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , F_DPT_INFO(SND_DPT_CD, 1)      AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBCORCOR111M
         WHERE 1=1
           AND ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('F40100100','F40100200')
           AND SND_DPT_CD  <> '160100'
           AND REF_ID       = #{legalReqSrno}
         UNION ALL
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(SND_DPT_CD, '160000', '법률자문관I'
                                , '160100', '법률자문관II', F_DPT_INFO(SND_DPT_CD, 1))
                                              AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBCORCOR111M 
         WHERE ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('F40100300')
           AND RCPT_DPT_CD IN ('160000', '160100')
           AND REF_ID       = #{legalReqSrno}
        ]]>
    </select>
    
    <!-- 발신문서 목록 조회(부패행위) -->
    <select id="selectRprtSndListCORCOR" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtSndListCORCOR */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(DOC_STA_CD, '10', '발신'
                                , '20', '수신', '') AS STA_NM
             , F_DPT_INFO(SND_DPT_CD, 1)            AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')        AS SND_DT
             , DECODE(RCPT_DPT_CD, '160000', '법률자문관I'
                                 , '160100', '법률자문관II', F_DPT_INFO(RCPT_DPT_CD, 1))
                                                    AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD')       AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)                AS DOC_TYPE
          FROM TBCORCOR111M 
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND RPRT_CD    IN ('F40100100','F40100200')
           AND SND_DPT_CD  = '160100'
           AND REF_ID      = #{legalReqSrno}
        ]]>
    </select>

    <!-- 수신문서 목록 조회(감사제보, 감사청구, 부패행위, 청탁금지) -->
    <select id="selectRprtRcptListDCPDCP" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtRcptListDCPDCP */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , F_DPT_INFO(SND_DPT_CD, 1)      AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBDCPDCP111M
         WHERE 1=1
           AND ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('G40100100','G40100200')
           AND SND_DPT_CD  <> '160100'
           AND REF_ID       = #{legalReqSrno}
         UNION ALL
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(SND_DPT_CD, '160000', '법률자문관I'
                                , '160100', '법률자문관II', F_DPT_INFO(SND_DPT_CD, 1))
                                              AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')  AS SND_DT
             , F_DPT_INFO(RCPT_DPT_CD, 1)     AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD') AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)          AS DOC_TYPE
          FROM TBDCPDCP111M 
         WHERE ACP_YR       = #{wrkYr}
           AND ACP_DVSN_CD  = #{reqDvsnCd}
           AND ACP_SRNO     = #{wrkNo}
           AND RPRT_CD     IN ('G40100300')
           AND RCPT_DPT_CD IN ('160000', '160100')
           AND REF_ID       = #{legalReqSrno}
        ]]>
    </select>
    
    <!-- 발신문서 목록 조회(감사제보, 감사청구, 부패행위, 청탁금지) -->
    <select id="selectRprtSndListDCPDCP" parameterType="paramMap" resultType="egovMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.selectRprtSndListDCPDCP */
        <![CDATA[
        SELECT RPRT_NM
             , DOC_ID
             , DECODE(DOC_STA_CD, '10', '발신'
                                , '20', '수신', '') AS STA_NM
             , F_DPT_INFO(SND_DPT_CD, 1)            AS SND_DPT_NM
             , TO_CHAR(SND_DH, 'YYYY-MM-DD')        AS SND_DT
             , DECODE(RCPT_DPT_CD, '160000', '법률자문관I'
                                 , '160100', '법률자문관II', F_DPT_INFO(RCPT_DPT_CD, 1))
                                                    AS RCPT_DPT_NM
             , TO_CHAR(RCPT_DH, 'YYYY-MM-DD')       AS RCPT_DT
             , F_OPEN_EDIT(LINK_URL)                AS DOC_TYPE
          FROM TBDCPDCP111M 
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND RPRT_CD    IN ('G40100100','G40100200')
           AND SND_DPT_CD  = '160100'
           AND REF_ID      = #{legalReqSrno}
        ]]>
    </select>

    
    <!-- 법률자문 요청 목록 접수 -->
    <update id="updateAcp" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateAcp */
        <![CDATA[
        UPDATE TBBADDED126M
           SET REQ_STAT_CD      = '30'
             , LEGAL_DPT_RCP_YN = 'Y'
             , LEGAL_DPT_RCP_DH = SYSDATE
             , REQ_STAT_CHG_DH  = SYSDATE
             , FNL_USR_ID       = #{usrId}
             , FNL_DEAL_DPT_CD  = #{dptCd}
             , FNL_MNU_ID       = #{mnuId}
             , FNL_MDF_DH       = SYSDATE
         WHERE 1=1
           AND WRK_DVSN_CD    = #{wrkDvsnCd}
           AND WRK_YR         = #{wrkYr}
           AND WRK_NO         = #{wrkNo}
           AND LEGAL_REQ_SRNO = #{legalReqSrno}
        ]]>
    </update>
    
    <update id="updateRcptDoc" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateRcptDoc */
        <![CDATA[
        UPDATE TBBADDED111M
           SET DOC_STA_CD      = '20'
             , RCNT_ID         = SYSDATE
             , RCPT_DH         = SYSDATE
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND AUD_YR      = #{wrkYr}
           AND AUD_NO      = #{wrkNo}
           AND REF_ID      = #{legalReqSrno}
           AND RPRT_CD    IN ('A10602100', 'A10602200')
           AND SND_DPT_CD <> '160100'
        ]]>
    </update>
    
    <update id="updateRcptDocBADFRE" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateRcptDocBADFRE */
        <![CDATA[
        UPDATE TBBADFRE111M
           SET DOC_STA_CD      = '20'
             , RCNT_ID         = SYSDATE
             , RCPT_DH         = SYSDATE
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = DECODE(#{wrkDvsnCd}, 'D10', '1', 'E10', '2', '')
           AND ACP_SRNO    = #{wrkNo}
           AND REF_ID      = #{legalReqSrno}
           AND RPRT_CD    IN ('D10200500', 'D10200600', 'E10400300', 'E10400400')
           AND SND_DPT_CD <> '160100'
        ]]>
    </update>
    
    <update id="updateRcptDocCSPDCP" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateRcptDocCSPDCP */
        <![CDATA[
        UPDATE TBCSPDCP111M
           SET DOC_STA_CD      = '20'
             , RCNT_ID         = SYSDATE
             , RCPT_DH         = SYSDATE
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND REF_ID      = #{legalReqSrno}
           AND RPRT_CD    IN ('B40100100','B40100200','C30100100', 'C30100200')
           AND SND_DPT_CD <> '160100'
        ]]>
    </update>

    <update id="updateRcptDocCORCOR" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateRcptDocCORCOR */
        <![CDATA[
        UPDATE TBCORCOR111M
           SET DOC_STA_CD      = '20'
             , RCNT_ID         = SYSDATE
             , RCPT_DH         = SYSDATE
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND REF_ID      = #{legalReqSrno}
           AND RPRT_CD    IN ('F40100100','F40100200')
           AND SND_DPT_CD <> '160100'
        ]]>
    </update>

    <update id="updateRcptDocDCPDCP" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateRcptDocDCPDCP */
        <![CDATA[
        UPDATE TBDCPDCP111M
           SET DOC_STA_CD      = '20'
             , RCNT_ID         = SYSDATE
             , RCPT_DH         = SYSDATE
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND ACP_YR      = #{wrkYr}
           AND ACP_DVSN_CD = #{reqDvsnCd}
           AND ACP_SRNO    = #{wrkNo}
           AND REF_ID      = #{legalReqSrno}
           AND RPRT_CD    IN ('G40100100','G40100200')
           AND SND_DPT_CD <> '160100'
        ]]>
    </update>
    
    <!-- 법률자문 요청 목록 발신 -->
    <update id="updateOm" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateOm */
        <![CDATA[
        UPDATE TBBADDED126M
           SET REQ_STAT_CD     = '40'
             , REQ_STAT_CHG_DH = SYSDATE
             , LEGAL_DPT_CD    = #{legalDptCd}
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND WRK_DVSN_CD    = #{wrkDvsnCd}
           AND WRK_YR         = #{wrkYr}
           AND WRK_NO         = #{wrkNo}
           AND LEGAL_REQ_SRNO = #{legalReqSrno}
        ]]>
    </update>
    
    <update id="updateOmDetail" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.updateOmDetail */
        <![CDATA[
        UPDATE TBBADDED126D
           SET LEGAL_DPT_CD    = #{legalDptCd}
             , FNL_USR_ID      = #{usrId}
             , FNL_DEAL_DPT_CD = #{dptCd}
             , FNL_MNU_ID      = #{mnuId}
             , FNL_MDF_DH      = SYSDATE
         WHERE 1=1
           AND WRK_DVSN_CD     = #{wrkDvsnCd}
           AND WRK_YR          = #{wrkYr}
           AND WRK_NO          = #{wrkNo}
           AND LEGAL_REQ_SRNO  = #{legalReqSrno}
        ]]>
    </update>
    
    <insert id="insertSendDoc" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.insertSendDoc */
        <![CDATA[
        INSERT INTO TBBADDED111M (
	        AUD_YR
	      , AUD_NO
	      , AUD_STEP_CD
	      , DOC_ID
	      , SR_DOC_SNO
	      , AUD_KND_CD
	      , AUD_GRN_NO
	      , RPRT_NM
	      , RPRT_CD
	      , LINK_URL
	      , DOC_STA_CD
	      , SND_DPT_CD
	      , SNDR_ID
	      , SND_DH
	      , RCPT_DPT_CD
	      , RCNT_ID
	      , RCPT_DH
	      , AUD_RPRT_DVSN_CD
	      , DOC_KND_CD
	      , REF_ID
	      , REF_DY
	      , SORT_SNO
	      , FRT_USR_ID
	      , FNL_USR_ID
	      , FNL_DEAL_DPT_CD
	      , FNL_MNU_ID
	      , FRT_REGI_DH
	      , FNL_MDF_DH)
        (SELECT T1.AUD_YR
              , T1.AUD_NO
              , T1.AUD_STEP_CD
              , T1.DOC_ID
              , (SELECT NVL(MAX(SR_DOC_SNO), 0)
                   FROM TBBADDED111M T2
                  WHERE 1=1
                    AND T2.AUD_YR = T1.AUD_YR
                    AND T2.AUD_NO = T1.AUD_NO
                    AND T2.DOC_ID = T1.DOC_ID) + ROWNUM
              , T1.AUD_KND_CD
              , T1.AUD_GRN_NO
              , T1.RPRT_NM
              , T1.RPRT_CD
              , T1.LINK_URL
              , '10'
              , '160100'
              , #{usrId}
              , SYSDATE
              , #{legalDptCd}
              , ''
              , SYSDATE
              , T1.AUD_RPRT_DVSN_CD
              , T1.DOC_KND_CD
              , T1.REF_ID
              , T1.REF_DY
              , T1.SORT_SNO
              , #{usrId}
              , #{usrId}
              , #{dptCd}
              , #{mnuId}
              , SYSDATE
              , SYSDATE 
           FROM TBBADDED111M T1
          WHERE 1=1
            AND T1.AUD_YR      = #{wrkYr}
            AND T1.AUD_NO      = #{wrkNo}
            AND T1.REF_ID      = #{legalReqSrno}
            AND T1.RPRT_CD    IN ('A10602100', 'A10602200')
            AND T1.SND_DPT_CD <> '160100')
        ]]>
    </insert>
    
    <insert id="insertSendDocBADFRE" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.insertSendDocBADFRE */
        <![CDATA[
        INSERT INTO TBBADFRE111M (
	        ACP_YR
	      , ACP_DVSN_CD
	      , ACP_SRNO
	      , ACP_STEP_CD
	      , DOC_ID
	      , SR_DOC_SNO
	      , ACP_KND_CD
	      , ACP_GRN_NO
	      , RPRT_NM
	      , RPRT_CD
	      , LINK_URL
	      , DOC_STA_CD
	      , SND_DPT_CD
	      , SNDR_ID
	      , SND_DH
	      , RCPT_DPT_CD
	      , RCNT_ID
	      , RCPT_DH
	      , ACP_RPRT_DVSN_CD
	      , DOC_KND_CD
	      , REF_ID
	      , REF_DY
	      , SORT_SNO
	      , FRT_USR_ID
	      , FNL_USR_ID
	      , FNL_DEAL_DPT_CD
	      , FNL_MNU_ID
	      , FRT_REGI_DH
	      , FNL_MDF_DH)
        (SELECT T1.ACP_YR
              , T1.ACP_DVSN_CD
              , T1.ACP_SRNO
              , T1.ACP_STEP_CD
              , T1.DOC_ID
              , (SELECT NVL(MAX(SR_DOC_SNO), 0)
                   FROM TBBADFRE111M T2
                  WHERE 1=1
                    AND T2.ACP_YR      = T1.ACP_YR
                    AND T2.ACP_DVSN_CD = T1.ACP_DVSN_CD
                    AND T2.ACP_SRNO    = T1.ACP_SRNO
                    AND T2.DOC_ID      = T1.DOC_ID) + ROWNUM
              , T1.ACP_KND_CD
              , T1.ACP_GRN_NO
              , T1.RPRT_NM
              , T1.RPRT_CD
              , T1.LINK_URL
              , '10'
              , '160100'
              , #{usrId}
              , SYSDATE
              , #{legalDptCd}
              , ''
              , SYSDATE
              , T1.ACP_RPRT_DVSN_CD
              , T1.DOC_KND_CD
              , T1.REF_ID
              , T1.REF_DY
              , T1.SORT_SNO
              , #{usrId}
              , #{usrId}
              , #{dptCd}
              , #{mnuId}
              , SYSDATE
              , SYSDATE 
           FROM TBBADFRE111M T1
          WHERE 1=1
            AND T1.ACP_YR      = #{wrkYr}
            AND T1.ACP_DVSN_CD = DECODE(#{wrkDvsnCd}, 'D10', '1', 'E10', '2', '')
            AND T1.ACP_SRNO    = #{wrkNo}
            AND T1.REF_ID      = #{legalReqSrno}
            AND T1.RPRT_CD    IN ('D10200500', 'D10200600', 'E10400300', 'E10400400')
            AND T1.SND_DPT_CD <> '160100')
        ]]>
    </insert>
    
    <insert id="insertSendDocCSPDCP" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.insertSendDocCSPDCP */
        <![CDATA[
        INSERT INTO TBCSPDCP111M (
            ACP_YR
          , ACP_DVSN_CD
          , ACP_SRNO
          , ACP_STEP_CD
          , DOC_ID
          , SR_DOC_SNO
          , ACP_KND_CD
          , ACP_GRN_NO
          , RPRT_NM
          , RPRT_CD
          , LINK_URL
          , DOC_STA_CD
          , SND_DPT_CD
          , SNDR_ID
          , SND_DH
          , RCPT_DPT_CD
          , RCNT_ID
          , RCPT_DH
          , ACP_RPRT_DVSN_CD
          , DOC_KND_CD
          , REF_ID
          , REF_DY
          , SORT_SNO
          , FRT_USR_ID
          , FNL_USR_ID
          , FNL_DEAL_DPT_CD
          , FNL_MNU_ID
          , FRT_REGI_DH
          , FNL_MDF_DH)
        (SELECT T1.ACP_YR
              , T1.ACP_DVSN_CD
              , T1.ACP_SRNO
              , T1.ACP_STEP_CD
              , T1.DOC_ID
              , (SELECT NVL(MAX(SR_DOC_SNO), 0)
                   FROM TBCSPDCP111M T2
                  WHERE 1=1
                    AND T2.ACP_YR      = T1.ACP_YR
                    AND T2.ACP_DVSN_CD = T1.ACP_DVSN_CD
                    AND T2.ACP_SRNO    = T1.ACP_SRNO
                    AND T2.DOC_ID      = T1.DOC_ID) + ROWNUM
              , T1.ACP_KND_CD
              , T1.ACP_GRN_NO
              , T1.RPRT_NM
              , T1.RPRT_CD
              , T1.LINK_URL
              , '10'
              , '160100'
              , #{usrId}
              , SYSDATE
              , #{legalDptCd}
              , ''
              , SYSDATE
              , T1.ACP_RPRT_DVSN_CD
              , T1.DOC_KND_CD
              , T1.REF_ID
              , T1.REF_DY
              , T1.SORT_SNO
              , #{usrId}
              , #{usrId}
              , #{dptCd}
              , #{mnuId}
              , SYSDATE
              , SYSDATE 
           FROM TBCSPDCP111M T1
          WHERE 1=1
            AND T1.ACP_YR      = #{wrkYr}
            AND T1.ACP_DVSN_CD = #{reqDvsnCd}
            AND T1.ACP_SRNO    = #{wrkNo}
            AND T1.REF_ID      = #{legalReqSrno}
            AND T1.RPRT_CD    IN ('B40100100','B40100200','C30100100', 'C30100200')
            AND T1.SND_DPT_CD <> '160100')
        ]]>
    </insert>

    <insert id="insertSendDocCORCOR" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.insertSendDocCORCOR */
        <![CDATA[
        INSERT INTO TBCORCOR111M (
            ACP_YR
          , ACP_DVSN_CD
          , ACP_SRNO
          , ACP_STEP_CD
          , DOC_ID
          , SR_DOC_SNO
          , ACP_KND_CD
          , ACP_GRN_NO
          , RPRT_NM
          , RPRT_CD
          , LINK_URL
          , DOC_STA_CD
          , SND_DPT_CD
          , SNDR_ID
          , SND_DH
          , RCPT_DPT_CD
          , RCNT_ID
          , RCPT_DH
          , ACP_RPRT_DVSN_CD
          , DOC_KND_CD
          , REF_ID
          , REF_DY
          , SORT_SNO
          , FRT_USR_ID
          , FNL_USR_ID
          , FNL_DEAL_DPT_CD
          , FNL_MNU_ID
          , FRT_REGI_DH
          , FNL_MDF_DH)
        (SELECT T1.ACP_YR
              , T1.ACP_DVSN_CD
              , T1.ACP_SRNO
              , T1.ACP_STEP_CD
              , T1.DOC_ID
              , (SELECT NVL(MAX(SR_DOC_SNO), 0)
                   FROM TBCORCOR111M T2
                  WHERE 1=1
                    AND T2.ACP_YR      = T1.ACP_YR
                    AND T2.ACP_DVSN_CD = T1.ACP_DVSN_CD
                    AND T2.ACP_SRNO    = T1.ACP_SRNO
                    AND T2.DOC_ID      = T1.DOC_ID) + ROWNUM
              , T1.ACP_KND_CD
              , T1.ACP_GRN_NO
              , T1.RPRT_NM
              , T1.RPRT_CD
              , T1.LINK_URL
              , '10'
              , '160100'
              , #{usrId}
              , SYSDATE
              , #{legalDptCd}
              , ''
              , SYSDATE
              , T1.ACP_RPRT_DVSN_CD
              , T1.DOC_KND_CD
              , T1.REF_ID
              , T1.REF_DY
              , T1.SORT_SNO
              , #{usrId}
              , #{usrId}
              , #{dptCd}
              , #{mnuId}
              , SYSDATE
              , SYSDATE 
           FROM TBCORCOR111M T1
          WHERE 1=1
            AND T1.ACP_YR      = #{wrkYr}
            AND T1.ACP_DVSN_CD = #{reqDvsnCd}
            AND T1.ACP_SRNO    = #{wrkNo}
            AND T1.REF_ID      = #{legalReqSrno}
            AND T1.RPRT_CD    IN ('F40100100','F40100200')
            AND T1.SND_DPT_CD <> '160100')
        ]]>
    </insert>

    <insert id="insertSendDocDCPDCP" parameterType="paramMap">
        /* kr.go.bai.eip.aep.rla.dao.AEPRLA001EMapper.insertSendDocDCPDCP */
        <![CDATA[
        INSERT INTO TBDCPDCP111M (
            ACP_YR
          , ACP_DVSN_CD
          , ACP_SRNO
          , ACP_STEP_CD
          , DOC_ID
          , SR_DOC_SNO
          , ACP_KND_CD
          , ACP_GRN_NO
          , RPRT_NM
          , RPRT_CD
          , LINK_URL
          , DOC_STA_CD
          , SND_DPT_CD
          , SNDR_ID
          , SND_DH
          , RCPT_DPT_CD
          , RCNT_ID
          , RCPT_DH
          , ACP_RPRT_DVSN_CD
          , DOC_KND_CD
          , REF_ID
          , REF_DY
          , SORT_SNO
          , FRT_USR_ID
          , FNL_USR_ID
          , FNL_DEAL_DPT_CD
          , FNL_MNU_ID
          , FRT_REGI_DH
          , FNL_MDF_DH)
        (SELECT T1.ACP_YR
              , T1.ACP_DVSN_CD
              , T1.ACP_SRNO
              , T1.ACP_STEP_CD
              , T1.DOC_ID
              , (SELECT NVL(MAX(SR_DOC_SNO), 0)
                   FROM TBDCPDCP111M T2
                  WHERE 1=1
                    AND T2.ACP_YR      = T1.ACP_YR
                    AND T2.ACP_DVSN_CD = T1.ACP_DVSN_CD
                    AND T2.ACP_SRNO    = T1.ACP_SRNO
                    AND T2.DOC_ID      = T1.DOC_ID) + ROWNUM
              , T1.ACP_KND_CD
              , T1.ACP_GRN_NO
              , T1.RPRT_NM
              , T1.RPRT_CD
              , T1.LINK_URL
              , '10'
              , '160100'
              , #{usrId}
              , SYSDATE
              , #{legalDptCd}
              , ''
              , SYSDATE
              , T1.ACP_RPRT_DVSN_CD
              , T1.DOC_KND_CD
              , T1.REF_ID
              , T1.REF_DY
              , T1.SORT_SNO
              , #{usrId}
              , #{usrId}
              , #{dptCd}
              , #{mnuId}
              , SYSDATE
              , SYSDATE 
           FROM TBDCPDCP111M T1
          WHERE 1=1
            AND T1.ACP_YR      = #{wrkYr}
            AND T1.ACP_DVSN_CD = #{reqDvsnCd}
            AND T1.ACP_SRNO    = #{wrkNo}
            AND T1.REF_ID      = #{legalReqSrno}
            AND T1.RPRT_CD    IN ('G40100100','G40100200')
            AND T1.SND_DPT_CD <> '160100')
        ]]>
    </insert>
</mapper> 