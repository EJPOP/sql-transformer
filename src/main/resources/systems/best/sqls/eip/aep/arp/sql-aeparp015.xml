<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper">

    <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
    <![CDATA[
        /* kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper.selectMainList */
        SELECT F_CODE_NM('1000176', APVR_PST_CD) AS APVR_PST_NM
             , (SELECT ST.DPT_NM FROM TBDCMACM002M ST WHERE ST.DPT_CD = APVR_DPT_CD) AS DPT_NM
             , F_CODE_NM('1000173', APVR_RANK_CD) AS APVR_RANK_NM
             , (SELECT ST.USR_NAM FROM TBDCMACM001M ST WHERE ST.CNB = APVR_CNB) AS USR_NM
             , APVR_KND_CD
             , TO_CHAR(APV_DH, 'YYYY-MM-DD') AS APV_DH
             , APVR_PST_CD
             , APVR_DPT_CD
             , APVR_RANK_CD
             , APVR_CNB
        FROM TBDCMACM023L 
       WHERE APV_DOC_NO = #{apvRqsId}
    ORDER BY APV_SNO ASC
        ]]>
    </select>
    
    <delete id="deleteApvMaster" parameterType="paramMap">
        /* kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper.deleteApvMaster */
            DELETE FROM TBDCMACM022L
            WHERE APV_DOC_NO = #{apvRqsId}
    </delete>
    
    <delete id="deleteApvDetail" parameterType="paramMap">
        /* kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper.deleteApvDetail */
            DELETE FROM TBDCMACM023L
            WHERE APV_DOC_NO = #{apvRqsId}
    </delete>
    
    <delete id="deleteApvHistory" parameterType="paramMap">
        /* kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper.deleteApvHistory */
            DELETE FROM TBDCMACM023H
            WHERE APV_DOC_NO = #{apvRqsId}
    </delete>
    
    <delete id="deleteApvDoc" parameterType="paramMap">
        /* kr.go.bai.eip.aep.arp.dao.AEPARP015PMapper.deleteApvDoc */
            DELETE FROM TBBADDED109M
            WHERE APV_RQS_ID = #{apvRqsId}
    </delete>
</mapper> 
