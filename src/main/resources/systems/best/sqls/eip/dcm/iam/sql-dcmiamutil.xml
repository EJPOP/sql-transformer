<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.dcm.iam.dao.DCMIAMUtilMapper">

	
	<insert id="insertAdminInfo">
	/* kr.go.bai.eip.dcm.iam.dao.DCMIAMUtilMapper.insertAdminInfo */
		INSERT INTO	TBDCMIAM012H
				(	
					LG_ID
					, HNDL_PEN_ID
					, HNDL_DH
					, HNDL_YM
					, HNDL_YR
					, TG_TYP_CD
					, TG_ID
        			, TG_NM
        			, TG_DES
        			, HNDL_DVSN_CD
        			, HNDL_STA_CD
        			, HNDL_ERR_HIS
                    , GRN_TYP_CD
                    , GRN_ID
                    , ETC_HNDL_HIS

   				)
  			VALUES	(	
  					(SELECT NVL(MAX(LG_ID), 0)+1 FROM TBDCMIAM012H)
					,#{ssUserId}
					, SYSDATE
					, TO_CHAR(SYSDATE, 'YYYYMM')
                    , TO_CHAR(SYSDATE, 'YYYY')
					,#{tgTypCd}
					,#{tgId}
					
					<if test = "tgTypCd == 'User'">
				      	,(SELECT USR_NAM 
				      	FROM EAMUSER_VIEW
				      	WHERE 1=1
							AND USR_ID = #{tgId}
							AND DPT_NM = #{dptNm})
				      	
				      	,(SELECT DPT_NM 
				      	FROM EAMUSER_VIEW
				      	WHERE 1=1
							AND USR_ID = #{tgId}
							AND DPT_NM = #{dptNm})
					</if>
					<if test = "tgTypCd == 'Group'">
				      	,(SELECT GROUP_NAME 
				      	FROM GROUP_INFO
				      	WHERE GROUP_ID = #{tgId})
				      	
				      	,(SELECT GROUP_DESC 
				      	FROM GROUP_INFO
				      	WHERE GROUP_ID = #{tgId})
					</if>
					<if test = "tgTypCd == 'Operation'">
						,'' 
						,''
		      		</if>
					<if test = "tgTypCd == 'Role'">
				      	,(SELECT ROLE_NAME 
				      	FROM ROLE_INFO
				      	WHERE ROLE_ID = #{tgId})
				      	
				      	,(SELECT ROLE_DESC 
				      	FROM ROLE_INFO
				      	WHERE ROLE_ID = #{tgId})
					</if>
					<if test = "tgTypCd == 'Resource'">
				      	,(SELECT RESOURCE_NAME 
				      	FROM COMMON_RESOURCE
				      	WHERE RESOURCE_ID = #{tgId})
				      	
				      	,(SELECT RESOURCE_DESC 
				      	FROM COMMON_RESOURCE
				      	WHERE RESOURCE_ID = #{tgId})
					</if>
					<if test = "tgTypCd == 'Code'">
				      	,(SELECT CODE_NAME
				      	FROM COMMON_CODE
				      	WHERE CODE_ID = #{tgId})
				      	
				      	,(SELECT CODE_DESC 
				      	FROM COMMON_CODE
				      	WHERE CODE_ID = #{tgId})
					</if>
					,#{hndlDvsnCd}
                    ,#{hndlStaCd}
                    ,#{hndlErrHis}
                    ,#{grnTypCd}
                    ,#{grnId}
                    ,#{etcHndlHis}
   				)
	</insert>

</mapper>