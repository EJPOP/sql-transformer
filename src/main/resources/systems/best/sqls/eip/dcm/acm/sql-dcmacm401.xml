<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.dcm.acm.dao.DCMACM401Mapper">
	
	<!-- 전자감사문서작성기 자동저장시간주기 정보 조회 -->
	<select id="getAtSavTmCyclInfo" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.dcm.acm.dao.TBDCMACM401M.getAtSavTmCyclInfo */
		SELECT CNB
		      ,USR_ID
		      ,AT_SAV_TM_CYCL
		  FROM TBDCMACM401M
		 WHERE 1=1
		   AND CNB    = #{cnb}
		   AND USR_ID = #{usrId}
	</select>
	
	<!-- 전자감사문서작성기 자동저장시간주기 저장 -->
	<insert id="insertAtSavTmCyclInfo" parameterType="paramMap">
		/* kr.go.bai.eip.dcm.acm.dao.TBDCMACM401M.insertAtSavTmCyclInfo */
		INSERT INTO TBDCMACM401M 
		        (
		         CNB
		        ,USR_ID
		        ,AT_SAV_TM_CYCL
		        ,FRT_USR_ID
		        ,FRT_REGI_DH
		        ,FNL_USR_ID
		        ,FNL_MDF_DH
		        )
		    VALUES (
		            #{cnb}
		           ,#{usrId}
		           ,#{atSavTmCycl}
		           ,#{usrId}
		           ,SYSDATE
		           ,#{usrId}
		           ,SYSDATE
		           )
    </insert>
    
    <!-- 전자감사문서작성기 자동저장시간주기 변경 -->
    <update id="updateAtSavTmCyclInfo" parameterType="paramMap">
        /* kr.go.bai.eip.dcm.acm.dao.TBDCMACM401M.updateAtSavTmCyclInfo */
        <![CDATA[
            UPDATE TBDCMACM401M
               SET AT_SAV_TM_CYCL = #{atSavTmCycl}
                  ,FNL_USR_ID 	  = #{usrId}
                  ,FNL_MDF_DH 	  = SYSDATE
             WHERE CNB = #{cnb}
               AND USR_ID = #{usrId}
        ]]>
    </update>
    
</mapper>
