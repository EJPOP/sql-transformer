<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--   -->
<mapper namespace="kr.go.bai.eip.bad.fre.dao.BADFRE320Mapper">
	
	<!-- 심사청구 조회-->
	<select id="BADFRE320QMainselect" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE320Mapper.BADFRE320QMainselect */
		<include refid="include.pageSelct" />
		SELECT ST.*
        	  ,CASE WHEN ENF_DT IS NULL THEN to_char(TO_DATE(SYSDATE) - TO_DATE(ACP_DT))
					WHEN ENF_DT IS NOT NULL THEN to_char(TO_DATE(ENF_DT) - TO_DATE(ACP_DT))
			   END AS HNDL_DT /*처리기간*/ 
			FROM (    
		SELECT * FROM (
        <![CDATA[
		SELECT A.ACP_YR || '-' || DECODE(A.ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || DECODE(A.ORG_ACP_SRNO, null, A.ACP_SRNO, A.ORG_ACP_SRNO) AS ACP_NO /* 분류번호 */
		         , A.ACP_YR || '-' || DECODE(A.ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || DECODE(A.ORG_ACP_SRNO, null, A.ACP_SRNO, A.ORG_ACP_SRNO) AS ACP_NO_HD
		         ,A.ACP_HNDL_STA_CD /* 진행단계코드 */
			     ,F_CODE_NM('1000807', (CASE WHEN A.MG_ACP_YR IS NULL THEN A.ACP_HNDL_STA_CD
                                             ELSE (SELECT ACP_HNDL_STA_CD
                                                     FROM TBBADFRE012M
                                                    WHERE ACP_YR = A.MG_ACP_YR
                                                      AND ACP_DVSN_CD = A.MG_ACP_DVSN_CD
                                                      AND ACP_SRNO = A.MG_ACP_SRNO) END )) AS ACP_HNDL_STA_NM /* 진행단계명 */
			     ,to_char(to_date(A.ACP_DT), 'YYYY-MM-DD') AS ACP_DT		/* 접수일 */
			     ,to_char(to_date(A.DSP_OFC_ACP_DT), 'YYYY-MM-DD') AS DSP_OFC_ACP_DT		/* 처분청접수일자 */
			     ,A.ORG_NM /* 처분청 */
			     ,A.DSP_OFC_UP_INSTT_CD /* 처분청상급기관코드 */
			     ,A.DSP_OFC_UP_INSTT_NAM  /* 처분청상급기관명 */
			     ,A.DSPTCH_INSTT_NAM /* 발신기관명 */
			     ,DECODE(A.AGT_NM, NULL, A.REQR_NM, A.REQR_NM || '(代:' || A.AGT_NM || ')' ) AS REQR_NM/* 청구인명 */
			     ,A.TIT_NM /* 청구내용 */
			     ,A.JDG_REQ_DVSN_CD /* 심사청구부분코드 */
			     ,F_CODE_NM('1000043', A.JDG_REQ_DVSN_CD) AS JDG_REQ_DVSN_NM /* 심사청구구분명 */
			     ,A.DPT_CD /* 부서코드 */
			     ,F_DPT_INFO (A.DPT_CD, '1') AS DPT_NM /* 처리과 */
			     ,to_char(to_date(A.HNDL_DDLN_DT), 'YYYY-MM-DD') AS HNDL_DDLN_DT /* 처리기한 */
			     ,A.HNDL_CHGR_NM /* 담당자 */
			     ,A.VT_KND_CD /* 의결종류 */
			     ,F_CODE_NM('1000045', A.VT_KND_CD) AS VT_KND_NM /* 의결종류명 */
			     ,A.ACP_YR /* 접수년도 */
			     ,A.ACP_DVSN_CD /* 접수구분코드 */
			     ,A.ACP_SRNO /* 접수일련번호 */
			     ,A.ORG_ACP_SRNO /* 기존접수일련번호 */
			     ,A.MG_ACP_YR /* 병합접수년도 */
			     ,A.MG_ACP_DVSN_CD /* 병합접수구분코드 */
			     ,A.MG_ACP_SRNO /* 병합접수일련번호 */
			     ,A.MG_DPT_CD /* 병합부서코드 */
			     ,A.MG_DIV_CD /* 병합병행구분코드 */
			     ,A.ATH_RE_RVW_YN /* 직권재심의 여부 */
			     ,CASE WHEN (A.ACP_YR = A.MG_ACP_YR AND A.ACP_DVSN_CD = A.MG_ACP_DVSN_CD AND A.ACP_SRNO = A.MG_ACP_SRNO) THEN '대표'
			             WHEN A.MG_DIV_CD IS NULL AND A.MG_ACP_YR IS NULL THEN '대표'
			             WHEN A.MG_DIV_CD IS NULL THEN '대표'
			             WHEN A.MG_DIV_CD = '10' THEN '병합'
			             WHEN A.MG_DIV_CD = '20' THEN '병행'
			      END AS MG_DIV_NM /* 병합병행구분명 */
			     ,(CASE WHEN A.MG_ACP_YR IS NULL THEN ''
                        WHEN A.MG_DIV_CD = '10' THEN '병합(' || (SELECT COUNT(MG_ACP_YR)
                                                                   FROM TBBADFRE012M
                                                                  WHERE MG_ACP_YR = A.MG_ACP_YR
                                                                    AND MG_ACP_DVSN_CD = A.MG_ACP_DVSN_CD
                                                                    AND MG_ACP_SRNO = A.MG_ACP_SRNO) || ')'
                        WHEN A.MG_DIV_CD = '20' THEN '병행(' || (SELECT COUNT(MG_ACP_YR)
                                                                   FROM TBBADFRE012M
                                                                  WHERE MG_ACP_YR = A.MG_ACP_YR
                                                                    AND MG_ACP_DVSN_CD = A.MG_ACP_DVSN_CD
                                                                    AND MG_ACP_SRNO = A.MG_ACP_SRNO) || ')'
                   ELSE '병합(' || (SELECT COUNT(D.MG_ACP_YR)
                                      FROM TBBADFRE012M D
                                     WHERE D.MG_ACP_YR = A.MG_ACP_YR
                                       AND D.MG_ACP_DVSN_CD = A.MG_ACP_DVSN_CD
                                       AND D.MG_ACP_SRNO = A.MG_ACP_SRNO
                                       AND D.MG_DPT_CD = A.MG_DPT_CD) || ')' END) AS MG_COUNT
                 ,DECODE(C.LINK_URL, null, (SELECT MAX(LINK_URL)
                                                   FROM TBBADFRE101M
                                                  WHERE ACP_YR = A.ACP_YR
                                                     AND ACP_DVSN_CD = A.ACP_DVSN_CD
                                                     AND ACP_SRNO = A.ACP_SRNO
                                                     AND NECES_YN ='Y'), C.LINK_URL) AS LINK_URL /* 페이지 URL */
                 ,DECODE(C.ACP_STEP_CD, null, (SELECT MAX(ACP_STEP_CD)
                                                        FROM TBBADFRE101M
                                                       WHERE ACP_YR = A.ACP_YR
                                                          AND ACP_DVSN_CD = A.ACP_DVSN_CD
                                                          AND ACP_SRNO = A.ACP_SRNO
                                                          AND NECES_YN ='Y'), C.ACP_STEP_CD) AS ACP_STEP_CD /* 프로세스 단계 코드 */
                 ,C.ACP_STEP_NM /* 프로세스 단계명 */
			     ,(SELECT COUNT(ACP_YR)
			       FROM TBBADFRE103M
			      WHERE ACP_YR = A.ACP_YR
			         AND ACP_DVSN_CD = A.ACP_DVSN_CD
			         AND ACP_SRNO = A.ACP_SRNO) AS PRC_CNT /* 프로세스 갯수 */
				,A.ZCD
				,A.AD
				,A.DTL_AD
				, (SELECT AGGR_CONCAT(ACP_YR || '-' || DECODE(ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || DECODE(ORG_ACP_SRNO, null, ACP_SRNO, ORG_ACP_SRNO), ', ')
				 			   FROM TBBADFRE012M 
				 			  WHERE MG_ACP_YR = A.MG_ACP_YR
				 			  AND MG_ACP_DVSN_CD = A.MG_ACP_DVSN_CD
				 			  AND MG_ACP_SRNO = A.MG_ACP_SRNO 
				 			  AND ROWNUM < 200
				 ) AS MG_ALL
                , G.DOC_ID_1 	/* 심의안 */    
                , G.DOC_ID_11   /* 주심위원단계 심의안*/
                , G.DOC_ID_12   /* 소위원회단계 심의안*/
				, G.DOC_ID_2 	/* 결정문 */	
                , G.DOC_ID_3 	/* 요약문 */	
                , G.DOC_ID_31   /* 주심위원 단계 요약문 */
                , G.DOC_ID_32   /* 주심위원 단계 결정문 */
                , G.DOC_ID_33   /* 부의안요약문 */
                , G.DOC_ID_34   /* 부의안 */
                , G.DOC_ID_4 	/* 시행문(중앙부처) */	
                , G.DOC_ID_5 	/* 시행문(청구인) */	
                , F.DOC_ID AS DOC_ID_6
                , G.DOC_TYPE_1 	/* 심의안 */    
                , G.DOC_TYPE_11   /* 주심위원단계 심의안*/
                , G.DOC_TYPE_12   /* 소위원회단계 심의안*/
				, G.DOC_TYPE_2 	/* 결정문 */	
                , G.DOC_TYPE_3 	/* 요약문 */	
                , G.DOC_TYPE_31   /* 주심위원 단계 요약문 */
                , G.DOC_TYPE_32   /* 주심위원 단계 결정문 */
                , G.DOC_TYPE_33   /* 부의안요약문 */
                , G.DOC_TYPE_34   /* 부의안 */
                , G.DOC_TYPE_4 	/* 시행문(중앙부처) */	
                , G.DOC_TYPE_5 	/* 시행문(청구인) */	
                , F.DOC_TYPE AS DOC_TYPE_6
				, (SELECT SHARE_YN
				     FROM TBBADFRE103M
				    WHERE ACP_YR = A.ACP_YR
				      AND ACP_DVSN_CD = A.ACP_DVSN_CD
				      AND ACP_SRNO = A.ACP_SRNO
				      AND RPRT_CD IN('D10200100','E10400100')
				      AND ROWNUM = '1') AS SHARE_YN 	/* 결정문 공유여부 */			
				, TO_CHAR(TO_DATE(A.ORG_DSP_KWA_OPIN_SRCH_DT),'YYYY-MM-DD') AS ORG_DSP_KWA_OPIN_SRCH_DT     /*원처분 의견조회일*/
                , TO_CHAR(TO_DATE(A.ORG_DSP_KWA_OPIN_RCPT_DT),'YYYY-MM-DD') AS ORG_DSP_KWA_OPIN_RCPT_DT   /*원처분 의견회신일*/
                , D.SOWI_RPRT_KWA   /*소위원회 심의안 결재일*/
                , D.SOWI_RPRT_KUK
                , D.SOWI_RPRT_CHA
                , D.SOWI_RPRT_CHONG
                , D.SOWI_RPRT_WON
                , (SELECT 
                        MIN(DECODE(ST2.APVR_PST_CD,'0010600',TO_CHAR(ST2.APV_DH, 'YYYY-MM-DD'),'')) 
                   FROM TBBADFRE103M ST1
                   INNER JOIN TBDCMACM023l ST2 ON (ST1.APV_RQS_ID = ST2.APV_DOC_NO)
                   WHERE ST1.RPRT_CD IN('E10300150')
                   AND ST1.ACP_YR = A.ACP_YR
                   AND ST1.ACP_DVSN_CD = A.ACP_DVSN_CD
                   AND ST1.ACP_SRNO = A.ACP_SRNO) AS SOWI_APV  /* 소위원회 주심위원 결재일 */
                , (SELECT TO_CHAR(TO_DATE(MIN(SBMT_FIX_DT)),'YYYY-MM-DD')
                   FROM TBBADFRE114M
                   WHERE ACP_YR = A.ACP_YR
                   AND ACP_DVSN_CD = A.ACP_DVSN_CD
                   AND ACP_SRNO = A.ACP_SRNO) AS SBMT_FIX_DT /*소위원회 확정일*/
                , E.FRE_RPRT_KWA    /*결정문 결재일*/
                , E.FRE_RPRT_KUK
                , E.FRE_RPRT_CHA
                , E.FRE_RPRT_CHONG
                , E.FRE_RPRT_WON
                , (SELECT 
                        MIN(DECODE(ST2.APVR_PST_CD,'0010600',TO_CHAR(ST2.APV_DH, 'YYYY-MM-DD'),'')) 
                   FROM TBBADFRE103M ST1
                   INNER JOIN TBDCMACM023l ST2 ON (ST1.APV_RQS_ID = ST2.APV_DOC_NO)
                   WHERE ST1.RPRT_CD IN('D10300200', 'E10500200')
                   AND ST1.ACP_YR = A.ACP_YR
                   AND ST1.ACP_DVSN_CD = A.ACP_DVSN_CD
                   AND ST1.ACP_SRNO = A.ACP_SRNO) AS WI_APV  /* 주심위원 결재일 */
                , (SELECT TO_CHAR(TO_DATE(MIN(SBCN_DY)),'YYYY-MM-DD')
                   FROM TBBADFRE113M
                   WHERE ACP_YR = A.ACP_YR
                   AND ACP_DVSN_CD = A.ACP_DVSN_CD
                   AND ACP_SRNO = A.ACP_SRNO) AS SBCN_DY /*부의일*/
                , F.GAKHA_RPRT_KWA						/*각하검토보고서 결재일*/
                , F.GAKHA_RPRT_KUK
                , DECODE(A.VT_KND_CD, 7, to_char(to_date(B.ENF_DT), 'YYYY-MM-DD'), NULL) AS CNCL_DT /*취하(시행일)*/ 
                , DECODE(A.VT_KND_CD, 8, to_char(to_date(B.ENF_DT), 'YYYY-MM-DD'), NULL) AS GAKHA_DT /*각하(시행일)*/ 
                , E.APV_RQS_ID
                , E.CON_PGM_CD
                , to_char(to_date(B.ENF_DT), 'YYYY-MM-DD') AS ENF_DT
                , F_CODE_NM(DECODE(A.ACP_DVSN_CD, '1','1000873','1000874'), B.DMS_RSN_CD) AS DMS_RSN_NM
                , (SELECT USR_DFN_TXT_1 FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = DECODE(A.ACP_DVSN_CD, '1','1000873','1000874') AND CD = B.DMS_RSN_CD) AS DMS_RSN_NO
		 FROM TBBADFRE012M A
		         ,TBBADFRE013D B
		         ,(SELECT ACP_YR
                           ,ACP_DVSN_CD
                           ,ACP_SRNO
                           ,LINK_URL
                           ,ACP_STEP_CD
                           ,ACP_STEP_NM
                     FROM TBBADFRE101M
                    WHERE STEP_CMPT_YN = 'P'
                       AND NECES_YN ='Y') C
                 ,(SELECT A.ACP_YR
	                    , A.ACP_DVSN_CD
	                    , A.ACP_SRNO
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'30',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS SOWI_RPRT_KWA  /* 과장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'20',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'25',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS SOWI_RPRT_KUK  /* 국장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'14',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS SOWI_RPRT_CHA                   /* 차장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'13',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS SOWI_RPRT_CHONG  /* 총장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'11',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS SOWI_RPRT_WON  /* 원장 결재일 */
	             FROM TBBADFRE103M A
	             INNER JOIN TBDCMACM023l B ON (A.APV_RQS_ID = B.APV_DOC_NO)
                 INNER JOIN TBDCMACM013C C ON (C.USR_DFN_TXT_1 = B.APVR_PST_CD AND C.CMM_CD_DVSN_CD = '1000659' AND C.CD <> '24') 
	             WHERE A.RPRT_CD IN ('E10200200')    /*소위원회 심의안*/
	             GROUP BY A.ACP_YR, A.ACP_DVSN_CD, A.ACP_SRNO) D
	             ,(SELECT A.ACP_YR
	                    , A.ACP_DVSN_CD
	                    , A.ACP_SRNO
	                    , A.APV_RQS_ID
	                    , A.CON_PGM_CD
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'30',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS FRE_RPRT_KWA  /* 과장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'20',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'25',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS FRE_RPRT_KUK  /* 국장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'14',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS FRE_RPRT_CHA                   /* 차장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'13',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS FRE_RPRT_CHONG  /* 총장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'11',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS FRE_RPRT_WON  /* 원장 결재일 */
	             FROM TBBADFRE103M A
	             INNER JOIN TBDCMACM023l B ON (A.APV_RQS_ID = B.APV_DOC_NO)
                 INNER JOIN TBDCMACM013C C ON (C.USR_DFN_TXT_1 = B.APVR_PST_CD AND C.CMM_CD_DVSN_CD = '1000659' AND C.CD <> '24') 
	             WHERE A.RPRT_CD IN ('D10200200', 'E10400200')    /*결정문*/
	             GROUP BY A.ACP_YR, A.ACP_DVSN_CD, A.ACP_SRNO, A.APV_RQS_ID, A.CON_PGM_CD) E
	             ,(SELECT A.ACP_YR
	                    , A.ACP_DVSN_CD
	                    , A.ACP_SRNO
                        , A.DOC_ID
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'30',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS GAKHA_RPRT_KWA  /* 각하검토 - 과장 결재일 */
	                    , MIN(DECODE(C.USR_DFN_TXT_5,'20',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'25',TO_CHAR(B.APV_DH, 'YYYY-MM-DD'),'')) AS GAKHA_RPRT_KUK  /* 각하검토 - 국장 결재일 */
	                    , F_OPEN_EDIT(A.LINK_URL) AS DOC_TYPE
	             FROM TBBADFRE103M A
	             INNER JOIN TBDCMACM023l B ON (A.APV_RQS_ID = B.APV_DOC_NO)
                 INNER JOIN TBDCMACM013C C ON (C.USR_DFN_TXT_1 = B.APVR_PST_CD AND C.CMM_CD_DVSN_CD = '1000659' AND C.CD <> '24') 
	             WHERE A.RPRT_CD IN ('D10100200','E10100200')    /*각하검토보고서*/
	             GROUP BY A.ACP_YR, A.ACP_DVSN_CD, A.ACP_SRNO, A.DOC_ID, F_OPEN_EDIT(A.LINK_URL)) F
	             , (SELECT ACP_YR
                         , ACP_DVSN_CD
                         , ACP_SRNO
                         , MIN(CASE WHEN RPRT_CD IN ('D10300500','E10200100') THEN DOC_ID ELSE '' END) AS DOC_ID_1
                         , MIN(CASE WHEN RPRT_CD IN ('E10300100') THEN DOC_ID ELSE '' END) AS DOC_ID_11
                         , MIN(CASE WHEN RPRT_CD IN ('E10300200') THEN DOC_ID ELSE '' END) AS DOC_ID_12
                         , MIN(CASE WHEN RPRT_CD IN ('D10200100','E10400100') THEN DOC_ID ELSE '' END) AS DOC_ID_2
                         , MIN(CASE WHEN RPRT_CD IN ('D10200200','E10400200') THEN DOC_ID ELSE '' END) AS DOC_ID_3
                         , MIN(CASE WHEN RPRT_CD IN ('D10300200','E10500200') THEN DOC_ID ELSE '' END) AS DOC_ID_31
                         , MIN(CASE WHEN RPRT_CD IN ('D10300100','E10500100') THEN DOC_ID ELSE '' END) AS DOC_ID_32
                         , MIN(CASE WHEN RPRT_CD IN ('D10301100','E10500600') THEN DOC_ID ELSE '' END) AS DOC_ID_33
                         , MIN(CASE WHEN RPRT_CD IN ('D10301000','E10500500') THEN DOC_ID ELSE '' END) AS DOC_ID_34
                         , MIN(CASE WHEN RPRT_CD IN ('D10400300','E10600200') THEN DOC_ID ELSE '' END) AS DOC_ID_4
                         , MIN(CASE WHEN RPRT_CD = 'D10400400' THEN DOC_ID ELSE '' END) AS DOC_ID_5
                         
                         , MIN(CASE WHEN RPRT_CD IN ('D10300500','E10200100') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_1
                         , MIN(CASE WHEN RPRT_CD IN ('E10300100') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_11
                         , MIN(CASE WHEN RPRT_CD IN ('E10300200') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_12
                         , MIN(CASE WHEN RPRT_CD IN ('D10200100','E10400100') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_2
                         , MIN(CASE WHEN RPRT_CD IN ('D10200200','E10400200') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_3
                         , MIN(CASE WHEN RPRT_CD IN ('D10300200','E10500200') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_31
                         , MIN(CASE WHEN RPRT_CD IN ('D10300100','E10500100') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_32
                         , MIN(CASE WHEN RPRT_CD IN ('D10301100','E10500600') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_33
                         , MIN(CASE WHEN RPRT_CD IN ('D10301000','E10500500') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_34
                         , MIN(CASE WHEN RPRT_CD IN ('D10400300','E10600200') THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_4
                         , MIN(CASE WHEN RPRT_CD = 'D10400400' THEN F_OPEN_EDIT(LINK_URL) ELSE '' END) AS DOC_TYPE_5
                 FROM TBBADFRE103M 
                 WHERE RPRT_CD IN ('D10300500','E10200100','D10200100','E10400100','D10200200','E10400200','D10400300','E10600200','D10400400','D10300100','D10300200','D10301000','D10301100','E10500200','E10500100','E10500600','E10500500','E10300100','E10300200')
                GROUP BY ACP_YR, ACP_DVSN_CD, ACP_SRNO) G
	    WHERE 1=1
		   AND A.ACP_YR 		= B.ACP_YR(+)
		   AND A.ACP_DVSN_CD 	= B.ACP_DVSN_CD(+)
		   AND A.ACP_SRNO 		= B.ACP_SRNO(+)
		   AND A.ACP_YR 		= C.ACP_YR(+)
		   AND A.ACP_DVSN_CD 	= C.ACP_DVSN_CD(+)
		   AND A.ACP_SRNO 		= C.ACP_SRNO(+)
		   AND A.ACP_YR 		= D.ACP_YR(+)
		   AND A.ACP_DVSN_CD 	= D.ACP_DVSN_CD(+)
		   AND A.ACP_SRNO 		= D.ACP_SRNO(+)
		   AND A.ACP_YR 		= E.ACP_YR(+)
		   AND A.ACP_DVSN_CD 	= E.ACP_DVSN_CD(+)
		   AND A.ACP_SRNO 		= E.ACP_SRNO(+)
		   AND A.ACP_YR 		= F.ACP_YR(+)
		   AND A.ACP_DVSN_CD 	= F.ACP_DVSN_CD(+)
		   AND A.ACP_SRNO 		= F.ACP_SRNO(+)
		   AND A.ACP_YR         = G.ACP_YR(+)
           AND A.ACP_DVSN_CD    = G.ACP_DVSN_CD(+)
           AND A.ACP_SRNO       = G.ACP_SRNO(+)
		   AND A.DEL_YN IS NULL
		   
		]]>
		<!-- 접수년도 -->
		<if test='dptCd != null and dptCd != ""'>
			AND A.DPT_CD  = #{dptCd}
		</if>
		<if test='acpYr != null and acpYr != ""'>
			AND A.ACP_YR = #{acpYr}
		</if>
		<!-- 구분코드 -->
		<if test='acpDvsnCd != null and acpDvsnCd != ""'>
			AND A.ACP_DVSN_CD = #{acpDvsnCd}
		</if>
		<!-- 접수번호 -->
		<if test='acpSrno != null and acpSrno != ""'>
			AND (NVL(A.ORG_ACP_SRNO,A.ACP_SRNO) = #{acpSrno})
		</if>
		<!-- 접수일자 -->
		<if test='acpDhs != null and acpDhs != ""'>
			AND TO_CHAR(TO_DATE(A.ACP_DT),'YYYYMMDD') &gt;= #{acpDhs}
		</if>
		<if test='acpDhe != null and acpDhe != ""'>
			AND TO_CHAR(TO_DATE(A.ACP_DT),'YYYYMMDD') &lt;= #{acpDhe}
		</if>
		<!-- 처리기한 -->
		<if test='hndlDdlnDts != null and hndlDdlnDts != ""'>
			AND TO_CHAR(TO_DATE(A.HNDL_DDLN_DT),'YYYYMMDD') &gt;= #{hndlDdlnDts}
		</if>
		<if test='hndlDdlnDte != null and hndlDdlnDte != ""'>
			AND TO_CHAR(TO_DATE(A.HNDL_DDLN_DT),'YYYYMMDD') &lt;= #{hndlDdlnDte}
		</if>
		<!-- <if test='enfYn == "Y"'>
			처리과
			<if test='dptCd != null and dptCd != ""'>
				AND A.DPT_CD =#{dptCd}
			</if>
			담당자
			<if test='hndlChgrCd != null and hndlChgrCd != ""'>
				AND A.HNDL_CHGR_CD  =#{hndlChgrCd}
			</if>
		</if> -->
		
		<if test='hndlChgrCd != null and hndlChgrCd != ""'>
			AND A.HNDL_CHGR_CD  =#{hndlChgrCd}
		</if>
		<if test='hndlChgrNm != null and hndlChgrNm != ""'>
			AND A.HNDL_CHGR_NM  =#{hndlChgrNm}
		</if>
		<!-- 진행단계 -->
		<if test='acpHndlStaCd != null and acpHndlStaCd != ""'>
			AND A.ACP_HNDL_STA_CD  =#{acpHndlStaCd}
		</if>
		<!-- 처분청 -->
		<if test='rltnOrgCd != null and rltnOrgCd != ""'>
			AND A.ORG_CD	= #{rltnOrgCd}
		</if>
		<!-- 발신기관 -->
		<if test='dsptchInsttNam != null and dsptchInsttNam != ""'>
			AND A.DSPTCH_INSTT_NAM like '%' || #{dsptchInsttNam} || '%'
		</if>
		<!-- 청구인명 -->
		<if test='reqrNm != null and reqrNm != ""'>
			AND A.REQR_NM LIKE '%' || #{reqrNm} || '%'
		</if>
		<!-- 청구내용 -->
		<if test='titNm != null and titNm != ""'>
			AND A.TIT_NM LIKE '%' || #{titNm} || '%'
		</if>
		<!-- 병행/병합 -->
		<if test='sType != null and sType != ""'>
			AND A.MG_ACP_YR IS NULL
		</if>
        <!-- 완결여부 -->
        <if test='cpltYn != null and cpltYn != ""'>
        <if test='cpltYn == "1"'>
                AND (B.ENF_DT IS NULL OR A.ACP_HNDL_STA_CD NOT IN ( '420' )  )
            </if>
        <if test='cpltYn == "2"'>
                AND (B.ENF_DT IS NOT NULL AND A.ACP_HNDL_STA_CD IN ( '420' ) )
            </if>
        </if>
          <!-- 전체조회 -->
        <if test='cpltYn == null and cpltYn == ""'>
                AND ACP_STEP_NM IS NOT NULL
        </if>
		<!-- 의결종류 -->
		<if test="vtKndCd != null and vtKndCd != ''">
            AND A.VT_KND_CD = #{vtKndCd}
		</if>
		
		ORDER BY A.FRT_REGI_DH DESC
		) T1
		WHERE 1=1
		  AND (DOC_ID_2 IS NOT NULL OR DOC_ID_6 IS NOT NULL)
		  AND MG_DIV_NM  <![CDATA[<>]]> '병합' 
		<if test='popupCd != null and popupCd != ""'>
		   AND HNDL_CHGR_NM IS NOT NULL
		   AND ACP_HNDL_STA_CD >= 250
		</if>
		<if test='mgDivNm != null and mgDivNm != ""'>
		   AND MG_DIV_NM  = #{mgDivNm}
		</if>
		<if test='acpNo != null and acpNo != ""'>
		     AND ACP_NO NOT IN
			 <foreach item="item" index="index" collection="acpNo" open="(" close=")" separator=",">
		            #{item}
		    </foreach>
		</if>
		) ST
		
		<include refid="include.pageOrder" />
	</select>
</mapper>
