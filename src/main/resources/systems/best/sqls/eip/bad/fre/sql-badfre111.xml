<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 감사사무처리부관리(자동)  -->
<mapper namespace="kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper">

	<!-- 재심의심사청구 조회-->
	<select id="BADFRE111EMainselect" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EMainselect */
		<![CDATA[
                SELECT T1.ACP_YR || '-' || DECODE(T1.ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || DECODE(T1.ORG_ACP_SRNO, null, T1.ACP_SRNO, T1.ORG_ACP_SRNO) AS ACP_NO /* 분류번호 */
                     , T1.ACP_HNDL_STA_CD /*진행단계*/
                     , T1.ACP_YR			/*접수년도*/
                     , T1.ACP_DVSN_CD		/*접수구분코드*/
                     , T1.ACP_SRNO		/*접수일련번호*/
                     , T1.ORG_ACP_SRNO		/*접수일련번호*/
                     , to_char(to_date(T1.ACP_DT), 'YYYY-MM-DD') AS ACP_DT			/*접수일*/
                     , T1.REQ_DT			/*청구일*/
                     , NVL(T1.TIT_NM, ' ') AS TIT_NM			/*제목명*/
                     , T1.DPT_CD AS HNDL_DPT_CD /*부서코드*/
                     , (SELECT DPT_NM FROM TBDCMACM002M WHERE DPT_CD = T1.DPT_CD) AS DPT_NM /*부서코드*/
                     , T1.RPT_DT			/*보고일*/
                     , to_char(to_date(T1.HNDL_DDLN_DT), 'YYYY-MM-DD') AS HNDL_DDLN_DT		/*처리기한일*/
                     , T1.JDG_REQ_DVSN_CD	/*심사청구구분코드*/
					 , F_CODE_NM('1000043', T1.JDG_REQ_DVSN_CD) AS JDG_REQ_DVSN_NM
                     , T1.REL_AM			/*관련금액*/
                     , T1.DFNT_CNT			/*관계자수*/
                     , T1.ORG_CD 			/*기관코드*/
					 , F_ORG_INFO(T1.ORG_CD, '1') AS ORG_NM
                     , T1.REQR_NM			/*청구인명*/
                     , T1.AGT_NM 			/*대리인명*/
                     , NVL(T1.EX_YN, 'N') AS EX_YN /*통계제외여부*/
                     , T1.EX_RSN_TXT		/*통계제외사유*/
                     , T1.PSN_CRP_DVSN_CD	/*개인법인구분코드*/
                     , F_CODE_NM ('1000436', T1.PSN_CRP_DVSN_CD) AS PSN_CRP_DVSN /*개인법인구분*/
                     , T1.EIN			/*청구인주민등록번호*/
                     , T1.ISU_TXT			/*쟁점내용*/
                     , T1.HNDL_CHGR_CD		/*처리담당자*/
                     , T1.HNDL_CHGR_NM		/*처리담당자*/
                     , T1.AUD_YR			/*감사년도*/
                     , T1.AUD_NO			/*감사번호*/
                     , (SELECT AUD_GRN_NO
                          FROM TBBADDED001M
                         WHERE AUD_YR = T1.AUD_YR
                           AND AUD_NO = T1.AUD_NO) AS AUD_GRN_NO
                     , T1.DSP_RQ_SNO		/*처분요구순번*/
                     , T1.BAI_DSP_YN		/*원처분여부*/
                     , (SELECT to_char(to_date(S1.ENF_DT), 'YYYY-MM-DD') AS ENF_DT
                          FROM TBBADEAR002D S1
                         WHERE S1.AUD_YR 		= T1.AUD_YR
                           AND S1.AUD_NO  		= T1.AUD_NO
                           AND S1.DSP_RQ_SNO 	= T1.DSP_RQ_SNO
                        ) AS DSP_RQ_ENF_DT
                     ,(SELECT F_CODE_NM('1000002', S1.DSP_RQ_KND_CD)
                         FROM TBBADEAR001M S1
                        WHERE S1.AUD_YR		= T1.AUD_YR
                          AND S1.AUD_NO  	= T1.AUD_NO
                          AND S1.DSP_RQ_SNO = T1.DSP_RQ_SNO
                       ) AS DSP_RQ_KND_NM	/*처분요구종류*/
                     ,(SELECT S1.TIT_TXT
                         FROM TBBADEAR001M S1
                        WHERE S1.AUD_YR 		= T1.AUD_YR
                          AND S1.AUD_NO  		= T1.AUD_NO
                          AND S1.DSP_RQ_SNO 	= T1.DSP_RQ_SNO
                        ) AS DSP_RQ_TIT_NM
                     , T1.ZCD				/*우편번호*/
                     , T1.AD				/*주소*/
                     , T1.DTL_AD			/*상세주소*/
                     , T1.HP_TNB_1			/*핸드폰번호1*/
                     , T1.HP_TNB_2			/*핸드폰번호2*/
                     , T1.HP_TNB_3			/*핸드폰번호3*/
                     , T1.TNB_1				/*전화번호1*/
                     , T1.TNB_2				/*전화번호2*/
                     , T1.TNB_3				/*전화번호3*/
                     , T1.AGT_ZCD			/*대리인우편번호*/
                     , T1.AGT_AD			/*대리인주소*/
                     , T1.AGT_DTL_AD		/*대리인상세주소*/
                     , T1.AGT_HP_TNB_1		/*대리인핸드폰번호1*/
                     , T1.AGT_HP_TNB_2		/*대리인핸드폰번호2*/
                     , T1.AGT_HP_TNB_3		/*대리인핸드폰번호3*/
                     , T1.AGT_TNB_1			/*대리인전화번호1*/
                     , T1.AGT_TNB_2			/*대리인전화번호2*/
                     , T1.AGT_TNB_3			/*대리인전화번호3*/
                     , T1.HNDL_CHGR_TNB_1	/*처리담당자전화번호1*/
                     , T1.HNDL_CHGR_TNB_2	/*처리담당자전화번호2*/
                     , T1.HNDL_CHGR_TNB_3	/*처리담당자전화번호3*/
                     , T1.BAI_DSP_DIV_CD	/*원처분과코드*/
                     , (SELECT DPT_NM FROM TBDCMACM002M WHERE DPT_CD = T1.BAI_DSP_DIV_CD) as BAI_DSP_DIV_NM /*원처분과*/
                     , to_char(to_date(T3.ENF_DT), 'YYYY-MM-DD') AS ENF_DT			/*시행일*/
                     , TO_DATE(TRIM(T3.ENF_DT)) - TO_DATE(TRIM(T1.ACP_DT)) || '일' AS ENF_HNDL_DT /*시행처리기간*/
                     , to_char(to_date(T3.ENFM_DT), 'YYYY-MM-DD') AS ENFM_DT			/*집행일*/
                     , T3.ENFM_TXT			/*집행내용*/
                     , T3.LWS_INST_DT		/*소송제기일*/
                     , T3.JUDG_DT			/*판결일*/
                     , T3.JUDG_TXT			/*판결내용*/
                     , to_char(to_date(T3.DF_DT), 'YYYY-MM-DD') AS DF_DT				/*보류일*/
                     , to_char(to_date(T3.RLS_DT), 'YYYY-MM-DD') AS RLS_DT			/*해제일*/
                     , T3.UN_HNDL_RSN		/*미처리사유*/
                     , T1.EXTN_RSN			/*연장사유*/
                     , T3.HNDL_PLN_TXT		/*처리계획내용*/
                     , T3.ODOC_NO			/*공문서번호*/
                     , T1.CVPT_SEN_ACP_NO   /* 민원발송접수번호 */
                     , DECODE(T1.ACP_NO_SMS_SEN_YN,'Y','발송','미발송') AS ACP_NO_SMS_SEN_YN
                     , to_char(T1.ACP_NO_SMS_SEN_DH, 'YYYY-MM-DD') AS ACP_NO_SMS_SEN_DHSMS /*발송일시*/
			    	 , T1.WRTANS_SEN_YN
			    	 , T1.STTC_CNT
                     , NVL(T3.LWS_YO,'N')              AS LWS_YO    /* 소송유무 - 2015.05.26 yyh */
                     , DECODE(T3.LWS_YO,'Y','유','무') AS LWS_YO_NM  /* 소송유무명 - 2015.05.26 yyh */
                     , T3.FRTRL_CT_NM                               /* 1심법원명 - 2015.05.26 yyh */
                     , T3.FRTRL_EVT_NO_TXT                          /* 1심사건번호 - 2015.05.26 yyh */
                     , T3.FNL_RSLT_TXT                              /* 종국결과 - 2015.05.26 yyh */
                     ,(SELECT CASE WHEN AUD_YR >= '2016'
			                            THEN F_CODE_NM('1000739',AUD_KND_CD)
			                       ELSE ''
			                   END
                         FROM TBBADDED001M
                        WHERE AUD_YR 		= T1.AUD_YR
                          AND AUD_NO  		= T1.AUD_NO) AS AUD_YR_NO_KND_NM
                     ,T1.AMIT_AM /* 용인금액  */
                     ,T1.RMK /* 비고  */
                     ,to_char(to_date(T1.DSP_OFC_ACP_DT), 'YYYY-MM-DD') AS DSP_OFC_ACP_DT /* 처분청접수일자 */
                     ,T1.DSP_OFC_UP_INSTT_CD /* 처분청상급기관코드 */
                     ,T1.DSP_OFC_UP_INSTT_NAM  /* 처분청상급기관명 */
                     ,to_char(to_date(T1.DSP_OFC_UP_INSTT_ACP_DT), 'YYYY-MM-DD') AS DSP_OFC_UP_INSTT_ACP_DT /* 처분청상급기관접수일자  */
                     ,T1.CNTR_ADMNSTMACH_CD /* 중앙행정기관코드  */
                     ,T1.CNTR_ADMNSTMACH_NAM /* 중앙행정기관명  */
                     ,to_char(to_date(T1.CNTR_ADMNSTMACH_ACP_DT), 'YYYY-MM-DD') AS CNTR_ADMNSTMACH_ACP_DT /* 중앙행정기관접수일자  */
                     ,T1.DSPTCH_INSTT_NAM  /* 발신기관명 */
                     ,T1.MG_ACP_YR /* 병합접수년도 */
                     ,T1.MG_ACP_DVSN_CD /* 병합구분코드 */
                     ,T1.MG_ACP_SRNO /* 병합접수번호 */
                     ,T1.MG_DPT_CD /* 병합부서코드 */
                     ,T1.MG_DIV_CD /* 병합/병행구분코드 */
                     ,T1.VT_KND_CD  /* 심사청구의결종류코드 */ 
                     ,TO_CHAR(TO_DATE(T1.DCS_DT), 'YYYY-MM-DD') AS DCS_DT /*결정일자*/
                     ,T1.AMIT_AM  /* 결정금액 */
                     ,T1.DCS_SBJ  /* 결정내용 */
                     ,T1.BAI_DSP_DIV_CD  /* 감사원처분과코드 */
                     ,T1.BAI_DSP_YN  /* 감사원처분여부 */
                     ,to_char(to_date(T1.REQR_OPM_SEN_DT), 'YYYY-MM-DD') AS REQR_OPM_SEN_DT /* 청구인시행문발송일자 */
                     ,to_char(to_date(T1.INSTT_OPM_SEN_DT), 'YYYY-MM-DD') AS ORG_OPM_SEN_DT /* 기관시행문발송일자 */
                     ,(CASE WHEN T1.MG_ACP_YR IS NULL THEN ''
                              WHEN T1.MG_DIV_CD = '10' THEN '병합(' || (SELECT COUNT(MG_ACP_YR)
                                                                                    FROM TBBADFRE012M
                                                                  				   WHERE MG_ACP_YR = T1.MG_ACP_YR
                                                                                      AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                                                                      AND MG_ACP_SRNO = T1.MG_ACP_SRNO) || ')'
                              WHEN T1.MG_DIV_CD = '20' THEN '병행(' || (SELECT COUNT(MG_ACP_YR)
                                                                                    FROM TBBADFRE012M
                                                                                   WHERE MG_ACP_YR = T1.MG_ACP_YR
                                                                                      AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                                                                      AND MG_ACP_SRNO = T1.MG_ACP_SRNO) || ')'
                      ELSE '병합(' || (SELECT COUNT(D.MG_ACP_YR)
                                         FROM TBBADFRE012M D
                                        WHERE D.MG_ACP_YR = T1.MG_ACP_YR
                                           AND D.MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                           AND D.MG_ACP_SRNO = T1.MG_ACP_SRNO
                                           AND D.MG_DPT_CD = T1.MG_DPT_CD) || ')' END) AS MG_COUNT
                     ,(SELECT COUNT(MG_ACP_YR)
                        FROM TBBADFRE012M
     				  WHERE MG_ACP_YR = T1.MG_ACP_YR
                         AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                         AND MG_ACP_SRNO = T1.MG_ACP_SRNO) AS MG_CNT
                     ,CASE WHEN T1.MG_DIV_CD = '10' THEN '병합'
					 	     WHEN T1.MG_DIV_CD = '20' THEN '병행'
					  ELSE ''
					  END AS MG_DIV_NM /* 병합병행구분명 */
                     ,(SELECT COUNT(ACP_SRNO)
					   FROM TBBADFRE101M
					  WHERE ACP_YR = T1.ACP_YR
					     AND ACP_DVSN_CD = T1.ACP_DVSN_CD
					     AND ACP_SRNO = T1.ACP_SRNO) AS PRC_CNT
					 ,NVL((SELECT MAX(LINK_URL)
				       FROM TBBADFRE101M
				      WHERE ACP_YR = T1.ACP_YR
				         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
				         AND ACP_SRNO = T1.ACP_SRNO
				         AND STEP_CMPT_YN = 'P'), 
				         (SELECT MAX(LINK_URL)
				       FROM TBBADFRE101M
				      WHERE ACP_YR = T1.ACP_YR
				         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
				         AND ACP_SRNO = T1.ACP_SRNO
				         AND STEP_CMPT_YN = 'Y')) AS LINK_URL
				     ,T1.REFER_ENT /* 부의위임여부 Y,N */
				     ,T1.ATH_RE_RVW_YN  /* 직권재심의 여부 */
				     ,to_char(to_date(T3.ENF_DT), 'YYYY-MM-DD') AS CPLT_DT /* 완료일자 */
		             ,(SELECT
                           APV_RQS_ID      /*결재ID*/
                      FROM TBBADFRE103M 
                      WHERE ACP_YR = T1.ACP_YR
                         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
                         AND ACP_SRNO = T1.ACP_SRNO
                         AND APV_RQS_ID IS NOT NULL
                         AND RPRT_CD = DECODE(#{acpDvsnCd},'1','D10100001','2','E10100001')) as HST_NA /* 결재이력-선람전 (국) */
                     ,(SELECT
                           APV_RQS_ID      
                      FROM TBBADFRE103M 
                      WHERE ACP_YR = T1.ACP_YR
                         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
                         AND ACP_SRNO = T1.ACP_SRNO
                         AND APV_RQS_ID IS NOT NULL
                         AND RPRT_CD = DECODE(#{acpDvsnCd},'1','D10100002','2','E10100002')) as HST_DE /* 결재이력-선람전 (과) */
                      , (SELECT DOC_ID
						   FROM TBBADFRE103M
						  WHERE ACP_YR = T1.ACP_YR
						    AND ACP_DVSN_CD = T1.ACP_DVSN_CD
						    AND ACP_SRNO = T1.ACP_SRNO
						    AND ACP_STEP_CD IN('D1040','E1060')
						    AND RPRT_CD IN('D10400600','E10600300')
						    AND SND_DOC_YN = 'Y'
						    AND ROWNUM = '1') AS DOC_ID						/*공개문*/
					  , T1.SEC_AUD_YN
					  , T3.DMS_RSN_CD
					  , F_CODE_NM('1000894', T1.DOC_WRIT_KND_CD)   AS DOC_TYPE
					  , INVST_SUIT_YN
            		  , DMND_PRPS_CHNG_YN
            		  , EVI_MTRL_ADD_PRSN_YN
            		  , ETC_DLY_RSN_YN
            		  , DLY_RSN_DETAIL
            		  , T1.REFER_ENT_RSN
            		  , DECODE(T1.REFER_ENT_RSN, '1', '해당 - 주심위원 심의 필요', '해당없음') AS REFER_ENT_RSN_NM
                  FROM  TBBADFRE012M T1
                       ,TBBADFRE013D T3
                 WHERE  1=1
                   AND  T1.ACP_YR         = T3.ACP_YR(+)
                   AND  T1.ACP_DVSN_CD    = T3.ACP_DVSN_CD(+)
                   AND  T1.ACP_SRNO       = T3.ACP_SRNO(+)
		 ]]>
                   AND  T1.ACP_YR         = #{acpYr}
                   AND  T1.ACP_DVSN_CD    = #{acpDvsnCd}
                   AND  T1.ACP_SRNO       = #{acpSrno}
	</select>

	<!-- 진행상태코드 조회 -->
	<select id="BADFRE111EAcpHndlStaCdSelect" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EAcpHndlStaCdSelect */
		SELECT ACP_HNDL_STA_CD /* 진행단계코드 */
		 FROM TBBADFRE012M
		WHERE ACP_YR = #{acpYr}
            AND ACP_DVSN_CD = #{acpDvsnCd}
            AND ACP_SRNO = #{acpSrno}
	</select>

	<!-- 의견서 조회 -->
	<select id="WrtansSenDocSelect" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.WrtansSenDocSelect */
		SELECT A.ACP_YR
		        , A.ACP_DVSN_CD
		        , A.ACP_SRNO
		        , B.RPRT_NM
		        , B.DOC_ID
		        , TO_CHAR(TO_DATE(A.WRTANS_SEN_DT),'YYYY-MM-DD') AS WRTANS_SEN_DT
		        , A.WRTANS_SEN_YN
		        , B.ACP_STEP_CD
		        , F_OPEN_EDIT(B.LINK_URL) AS DOC_TYPE
		 FROM TBBADFRE012M A
		        , TBBADFRE103M B
		WHERE A.ACP_YR = B.ACP_YR(+)
		    AND A.ACP_DVSN_CD = B.ACP_DVSN_CD(+)
		    AND A.ACP_SRNO = B.ACP_SRNO(+)
            AND A.ACP_YR = #{acpYr}
            AND A.ACP_DVSN_CD = #{acpDvsnCd}
            AND A.ACP_SRNO = #{acpSrno}
            AND B.ACP_STEP_CD = 'D1003'
	</select>

	<!-- 의견서 발송여부 -->
	<update id="WrtansSenYnUpdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.WrtansSenDocUpdate */
		UPDATE TBBADFRE012M
		     SET WRTANS_SEN_YN = #{wrtansSenYn}
		         ,WRTANS_SEN_DT = DECODE(#{wrtansSenYn}, 'Y',#{wrtansSenDt},'')
		 WHERE ACP_YR = #{acpYr}
            AND ACP_DVSN_CD = #{acpDvsnCd}
            AND ACP_SRNO = #{acpSrno}
	</update>

	<select id="BADFRE111EchkCvptSenAcpNo" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EchkCvptSenAcpNo */
		<![CDATA[
			SELECT COUNT(1) AS CHK_CNT
			  FROM TBBADFRE012M
			 WHERE 1=1
			   AND CVPT_SEN_ACP_NO = #{cvptSenAcpNo}
		]]>
	</select>

	<!--재심의심사청구 접수일련번호 조회-->
	<select id="BADFRE111EAcpSrnoselect" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EAcpSrnoselect */
		<![CDATA[
			SELECT NVL(MAX(ACP_SRNO),0) + 1
			  FROM TBBADFRE012M
			 WHERE ACP_YR 		= #{acpYr}
			   AND ACP_DVSN_CD  = #{acpDvsnCd} /* 접수구분코드 추가 - 2015.12.21 yyh  */
		]]>
	</select>

	<!--심사심의접수기본insert - 심사청구 -->
	<insert id="BADFRE111EJdgRvwAcpBscinsert" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBscinsert */
		INSERT
		  INTO TBBADFRE012M
		     ( ACP_YR           /*접수년도*/
			 , ACP_DVSN_CD      /*접수구분코드*/
			 , ACP_SRNO         /*접수일련번호*/
			 , DPT_CD			/*부서코드*/
			 , ACP_DT           /*접수일*/
			 , REQ_DT           /*청구일*/
		     , TIT_NM           /*제목명*/
			 , RPT_DT    		/*보고일*/
			 , HNDL_DDLN_DT 	/*처리기한일*/
			 , JDG_REQ_DVSN_CD	/*심사청구구분코드*/
			 , JDG_REQ_DVSN_SRNO /*심사청구구분일련번호*/
			 , REL_AM			/*관련금액*/
			 , DFNT_CNT     	/*관계자수*/
			 , ORG_CD           /*기관코드*/
			 , ORG_NM           /*기관명*/
			 , REQR_NM       	/*청구인명*/
			 , AGT_NM         	/*대리인명*/
			 , PSN_CRP_DVSN_CD  /*개인법인구분코드*/
			 , EIN   		/*청구인주민등록번호*/
			 , ISU_TXT          /*쟁점내용*/
			 , AMIT_AM          /*용인금액*/
			 , RMK              /*비고*/
			 , HNDL_CHGR_CD      /*처리담당자*/
			 , HNDL_CHGR_NM     /*처리담당자*/
			 , AUD_YR         	/*감사년도*/
			 , AUD_NO          	/*감사번호*/
			 , DSP_RQ_SNO       /*처분요구순번*/
			 , BAI_DSP_DIV_CD	/*감사원처분과코드*/
			 , BAI_DSP_YN		/*감사원처분여부*/
			 , ZCD				/*우편번호*/
			 , AD				/*주소*/
			 , DTL_AD			/*상세주소*/
			 , TNB_1			/*전화번호1*/
			 , TNB_2			/*전화번호2*/
			 , TNB_3			/*전화번호3*/
			 , HP_TNB_1			/*핸드폰전화번호1*/
			 , HP_TNB_2			/*핸드폰전화번호2*/
			 , HP_TNB_3			/*핸드폰전화번호3*/
			 , AGT_ZCD			/*대리인우편번호*/
			 , AGT_AD			/*대리인주소*/
			 , AGT_DTL_AD		/*대리인상세주소*/
			 , AGT_TNB_1		/*대리인전화번호1*/
			 , AGT_TNB_2		/*대리인전화번호2*/
			 , AGT_TNB_3		/*대리인전화번호3*/
			 , AGT_HP_TNB_1		/*대리인핸드폰전화번호1*/
			 , AGT_HP_TNB_2		/*대리인핸드폰전화번호2*/
			 , AGT_HP_TNB_3		/*대리인핸드폰전화번호3*/
			 , HNDL_CHGR_TNB_1	/*처리담당자전화번호1*/
			 , HNDL_CHGR_TNB_2	/*처리담당자전화번호2*/
			 , HNDL_CHGR_TNB_3	/*처리담당자전화번호3*/
			 , FRT_USR_ID		/*최초사용자ID*/
			 , FNL_USR_ID		/*최종사용자ID*/
			 , FNL_DEAL_DPT_CD	/*최종거래부서코드*/
			 , FNL_MNU_ID		/*최종메뉴ID*/
			 , FRT_REGI_DH		/*최초등록일시*/
			 , FNL_MDF_DH		/*최종수정일시*/
			 , CVPT_SEN_ACP_NO  /* 민원발송접수번호 */
			 , WRTANS_SEN_YN    /* 부본발송여부 */
			 , STTC_CNT         /* 통계건수 */
			 , DSP_OFC_ACP_DT /* 처분청접수일자 */
			 , DSP_OFC_UP_INSTT_CD /* 처분청상급기관코드 */
			 , DSP_OFC_UP_INSTT_NAM /* 처분청상급기관명 */
			 , DSP_OFC_UP_INSTT_ACP_DT /* 처분청상급기관접수일자 */
			 , CNTR_ADMNSTMACH_CD /* 중앙행정기관코드 */
			 , CNTR_ADMNSTMACH_NAM /* 중앙행정기관명 */
			 , CNTR_ADMNSTMACH_ACP_DT /* 중앙행정기관접수일자 */
			 , DSPTCH_INSTT_NAM /* 발신기관명 */
			 , ACP_HNDL_STA_CD /* 진행단계 */
			 <if test='acpDvsnCd == "2"'>
			 , ATH_RE_RVW_YN /* 직권재심의 여부 */
			 </if>
			 , SEC_AUD_YN
			 <if test='audYr != null and audYr != "" and audNo != null and audNo != ""'>
            , DOC_WRIT_KND_CD
            </if>
            , INVST_SUIT_YN
            , DMND_PRPS_CHNG_YN
            , EVI_MTRL_ADD_PRSN_YN
            , ETC_DLY_RSN_YN
            , DLY_RSN_DETAIL
			)
		VALUES
		     ( #{acpYr}
			 , #{acpDvsnCd}
			 , #{acpSrno}
			 , #{hndlDptCd}
			 , #{acpDt}
			 , #{reqDt}
			 , REPLACE(REPLACE(#{titNm} , CHR(13), ''), chr(10), '')
			 , #{rptDt}
			 , #{hndlDdlnDt}
			 , #{jdgReqDvsnCd}
			 , (SELECT NVL(MAX(JDG_REQ_DVSN_SRNO),0) + #{sttcCnt}
			      FROM TBBADFRE012M
			     WHERE ACP_YR 		= TO_CHAR(SYSDATE,'YYYY')
			       AND ACP_DVSN_CD 	= #{acpDvsnCd}
			       AND DPT_CD 		= #{dptCd}
			       AND JDG_REQ_DVSN_CD LIKE SUBSTR(#{jdgReqDvsnCd},0,1) || '%'
			    )
			 , #{relAm}
			 , #{dfntCnt}
			 , #{orgCd}
			 , #{orgNm}
			 , #{reqrNm}
			 , #{agtNm}
			 , #{psnCrpDvsnCd}
			 , #{ein}
			 , #{isuTxt}
			 , #{amitAm}
			 , #{rmk}
			 , #{hndlChgrCd}
			 , #{hndlChgrNm}
			 , #{audYr}
		     , #{audNo}
			 , #{dspRqSno}
			 , #{baiDspDivCd}
			 , #{baiDspYn}
			 , #{zcd}
			 , #{ad}
			 , #{dtlAd}
			 , #{tnb1}
			 , #{tnb2}
			 , #{tnb3}
			 , #{hpTnb1}
			 , #{hpTnb2}
			 , #{hpTnb3}
			 , #{agtZcd}
			 , #{agtAd}
			 , #{agtDtlAd}
			 , #{agtTnb1}
			 , #{agtTnb2}
			 , #{agtTnb3}
			 , #{agtHpTnb1}
			 , #{agtHpTnb2}
			 , #{agtHpTnb3}
			 , #{hndlChgrTnb1}
			 , #{hndlChgrTnb2}
			 , SUBSTR(#{hndlChgrTnb3} , -4)
			 , #{frtUsrId}
			 , #{fnlUsrId}
			 , #{fnlDealDptCd}
			 , #{fnlMnuId}
			 , SYSDATE
			 , SYSDATE
			 , #{cvptSenAcpNo}
			 , #{wrtansSenYn}
			 , #{sttcCnt}
			 , #{dspOfcAcpDt} /* 처분청접수일자 */
			 , #{dspOfcUpInsttCd} /* 처분청상급기관코드 */
			 , #{dspOfcUpInsttNam} /* 처분청상급기관명 */
			 , #{dspOfcUpInsttAcpDt} /* 처분청상급기관접수일자 */
			 , #{cntrAdmnstmachCd} /* 중앙행정기관코드 */
			 , #{cntrAdmnstmachNam} /* 중앙행정기관명 */
			 , #{cntrAdmnstmachAcpDt} /* 중앙행정기관접수일자 */
			 , #{dsptchInsttNam} /* 발신기관명 */
			 , #{acpHndlStaCd} /* 진행단계 */
			 <if test='acpDvsnCd == "2"'>
			 , #{athReRvwYn} /* 직권재심의여부 */
			 </if>
			 , #{secAudYn}
            <if test='audYr != null and audYr != "" and audNo != null and audNo != ""'>
             , (SELECT NVL(DOC_WRIT_KND_CD, '20') FROM TBBADDED001M WHERE AUD_YR = #{audYr} AND AUD_NO = #{audNo})
		    </if>
		     , #{invstSuitYn}
		     , #{dmndPrpsChngYn}
		     , #{eviMtrlAddPrsnYn}
		     , #{etcDlyRsnYn}
		     , #{dlyRsnDetail}
		       )
	</insert>

	<!--심사심의접수기본insert - 재심의 -->
	<insert id="BADFRE111EJdgRvwAcpBsc2insert" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBsc2insert */
		INSERT
		  INTO TBBADFRE012M
		     ( ACP_YR           /*접수년도*/
			 , ACP_DVSN_CD      /*접수구분코드*/
			 , ACP_SRNO         /*접수일련번호*/
			 , DPT_CD			/*부서코드*/
			 , ACP_DT           /*접수일*/
			 , REQ_DT           /*청구일*/
		     , TIT_NM           /*제목명*/
			 , RPT_DT    		/*보고일*/
			 , HNDL_DDLN_DT 	/*처리기한일*/
			 , JDG_REQ_DVSN_CD	/*심사청구구분코드*/
			 , JDG_REQ_DVSN_SRNO /*심사청구구분일련번호*/
			 , REL_AM			/*관련금액*/
			 , DFNT_CNT     	/*관계자수*/
			 , ORG_CD           /*기관코드*/
			 , ORG_NM           /*기관명*/
			 , REQR_NM       	/*청구인명*/
			 , AGT_NM         	/*대리인명*/
			 , PSN_CRP_DVSN_CD  /*개인법인구분코드*/
			 , EIN   		/*청구인주민등록번호*/
			 , ISU_TXT          /*쟁점내용*/
			 , RMK              /*비고*/			 
			 , HNDL_CHGR_CD     /*처리담당자*/
			 , HNDL_CHGR_NM     /*처리담당자*/
			 , AUD_YR         	/*감사년도*/
			 , AUD_NO          	/*감사번호*/
			 , DSP_RQ_SNO       /*처분요구순번*/
			 , BAI_DSP_DIV_CD	/*감사원처분과코드*/
			 , BAI_DSP_YN		/*감사원처분여부*/
			 , ZCD				/*우편번호*/
			 , AD				/*주소*/
			 , DTL_AD			/*상세주소*/
			 , TNB_1			/*전화번호1*/
			 , TNB_2			/*전화번호2*/
			 , TNB_3			/*전화번호3*/
			 , HP_TNB_1			/*핸드폰전화번호1*/
			 , HP_TNB_2			/*핸드폰전화번호2*/
			 , HP_TNB_3			/*핸드폰전화번호3*/
			 , AGT_ZCD			/*대리인우편번호*/
			 , AGT_AD			/*대리인주소*/
			 , AGT_DTL_AD		/*대리인상세주소*/
			 , AGT_TNB_1		/*대리인전화번호1*/
			 , AGT_TNB_2		/*대리인전화번호2*/
			 , AGT_TNB_3		/*대리인전화번호3*/
			 , AGT_HP_TNB_1		/*대리인핸드폰전화번호1*/
			 , AGT_HP_TNB_2		/*대리인핸드폰전화번호2*/
			 , AGT_HP_TNB_3		/*대리인핸드폰전화번호3*/
			 , HNDL_CHGR_TNB_1	/*처리담당자전화번호1*/
			 , HNDL_CHGR_TNB_2	/*처리담당자전화번호2*/
			 , HNDL_CHGR_TNB_3	/*처리담당자전화번호3*/
			 , FRT_USR_ID		/*최초사용자ID*/
			 , FNL_USR_ID		/*최종사용자ID*/
			 , FNL_DEAL_DPT_CD	/*최종거래부서코드*/
			 , FNL_MNU_ID		/*최종메뉴ID*/
			 , FRT_REGI_DH		/*최초등록일시*/
			 , FNL_MDF_DH		/*최종수정일시*/
			 , CVPT_SEN_ACP_NO  /* 민원발송접수번호 */
			 , WRTANS_SEN_YN    /* 부본발송여부 */
			 , STTC_CNT         /* 통계건수 */
			 , DSP_OFC_ACP_DT /* 처분청접수일자 */
			 , DSP_OFC_UP_INSTT_CD /* 처분청상급기관코드 */
			 , DSP_OFC_UP_INSTT_NAM /* 처분청상급기관명 */
			 , DSP_OFC_UP_INSTT_ACP_DT /* 처분청상급기관접수일자 */
			 , CNTR_ADMNSTMACH_CD /* 중앙행정기관코드 */
			 , CNTR_ADMNSTMACH_NAM /* 중앙행정기관명 */
			 , CNTR_ADMNSTMACH_ACP_DT /* 중앙행정기관접수일자 */
			 , DSPTCH_INSTT_NAM /* 발신기관명 */
			 , ACP_HNDL_STA_CD /* 진행단계 */
			 <if test='acpDvsnCd == "2"'>
			 , ATH_RE_RVW_YN /* 직권재심의 여부 */
			 </if>
			 , SEC_AUD_YN
			 , DOC_WRIT_KND_CD
			 , INVST_SUIT_YN
             , DMND_PRPS_CHNG_YN
             , EVI_MTRL_ADD_PRSN_YN
             , ETC_DLY_RSN_YN
             , DLY_RSN_DETAIL
			   )
		VALUES
		     ( #{acpYr}
			 , #{acpDvsnCd}
			 , #{acpSrno}
			 , #{hndlDptCd}
			 , #{acpDt}
			 , #{reqDt}
			 , REPLACE(#{titNm}, chr(13)||CHR(10), '')
			 , #{rptDt}
			 , #{hndlDdlnDt}
			 , #{jdgReqDvsnCd}
			 , (SELECT NVL(MAX(JDG_REQ_DVSN_SRNO),0) + #{sttcCnt}
			      FROM TBBADFRE012M
			     WHERE ACP_YR 		= TO_CHAR(SYSDATE,'YYYY')
			       AND ACP_DVSN_CD 	= #{acpDvsnCd}
			       AND DPT_CD 		= #{dptCd}
			    )
			 , #{relAm}
			 , #{dfntCnt}
			 , #{orgCd}
			 , #{orgNm}
			 , #{reqrNm}
			 , #{agtNm}
			 , #{psnCrpDvsnCd}
			 , #{ein}
			 , #{isuTxt}
			 , #{rmk}
			 , #{hndlChgrCd}
			 , #{hndlChgrNm}
			 , #{audYr}
		     , #{audNo}
			 , #{dspRqSno}
			 , #{baiDspDivCd}
			 , #{baiDspYn}
			 , #{zcd}
			 , #{ad}
			 , #{dtlAd}
			 , #{tnb1}
			 , #{tnb2}
			 , #{tnb3}
			 , #{hpTnb1}
			 , #{hpTnb2}
			 , #{hpTnb3}
			 , #{agtZcd}
			 , #{agtAd}
			 , #{agtDtlAd}
			 , #{agtTnb1}
			 , #{agtTnb2}
			 , #{agtTnb3}
			 , #{agtHpTnb1}
			 , #{agtHpTnb2}
			 , #{agtHpTnb3}
			 , #{hndlChgrTnb1}
			 , #{hndlChgrTnb2}
			 , SUBSTR(#{hndlChgrTnb3} , -4)
			 , #{frtUsrId}
			 , #{fnlUsrId}
			 , #{fnlDealDptCd}
			 , #{fnlMnuId}
			 , SYSDATE
			 , SYSDATE
			 , #{cvptSenAcpNo}
			 , #{wrtansSenYn}
			 , #{sttcCnt}
			 , #{dspOfcAcpDt} /* 처분청접수일자 */
			 , #{dspOfcUpInsttCd} /* 처분청상급기관코드 */
			 , #{dspOfcUpInsttNam} /* 처분청상급기관명 */
			 , #{dspOfcUpInsttAcpDt} /* 처분청상급기관접수일자 */
			 , #{cntrAdmnstmachCd} /* 중앙행정기관코드 */
			 , #{cntrAdmnstmachNam} /* 중앙행정기관명 */
			 , #{cntrAdmnstmachAcpDt} /* 중앙행정기관접수일자 */
			 , #{dsptchInsttNam} /* 발신기관명 */
			 , #{acpHndlStaCd} /* 진행단계 */
			 <if test='acpDvsnCd == "2"'>
			 , #{athReRvwYn} /* 직권재심의여부 */
			 </if>
			 , #{secAudYn}
			 , (SELECT NVL(DOC_WRIT_KND_CD, '20') FROM TBBADDED001M WHERE AUD_YR = #{audYr} AND AUD_NO = #{audNo})
			 , #{invstSuitYn}
		     , #{dmndPrpsChngYn}
		     , #{eviMtrlAddPrsnYn}
		     , #{etcDlyRsnYn}
		     , #{dlyRsnDetail}
		       )
	</insert>

	<!--심사심의처리상세insert-->
	<insert id="BADFRE111EJdgRvwHndlinsert" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwHndlinsert */
		INSERT
		  INTO TBBADFRE013D
			 ( ACP_YR           /*접수년도*/
			 , ACP_DVSN_CD      /*접수구분코드*/
			 , ACP_SRNO         /*접수일련번호*/
			 , DPT_CD			/*부서코드*/
			 , ENF_DT           /*시행일*/
			 , ENFM_DT          /*집행일*/
			 , ENFM_TXT         /*집행내용*/
			 , LWS_INST_DT  	/*소송제기일*/
			 , JUDG_DT          /*판결일*/
			 , JUDG_TXT         /*판결내용*/
			 , DF_DT            /*보류일*/
			 , RLS_DT           /*해제일*/
			 , UN_HNDL_RSN      /*미처리사유*/
			 , HNDL_PLN_TXT     /*처리계획내용*/
			 , ODOC_NO         	/*공문서번호*/

			 , LWS_YO           /* 소송유무 - 2015.05.26 yyh */
			 , FRTRL_CT_NM      /* 1심법원명 - 2015.05.26 yyh */
			 , FRTRL_EVT_NO_TXT /* 1심사건번호 - 2015.05.26 yyh */
			 , FNL_RSLT_TXT     /* 종국결과 - 2015.05.26 yyh */

			 , FRT_USR_ID		/*최초사용자ID*/
			 , FNL_USR_ID		/*최종사용자ID*/
			 , FNL_DEAL_DPT_CD	/*최종거래부서코드*/
			 , FNL_MNU_ID		/*최종메뉴ID*/
			 , FRT_REGI_DH		/*최초등록일시*/
			 , FNL_MDF_DH		/*최종수정일시*/
			   )
		VALUES
			 ( #{acpYr}
			 , #{acpDvsnCd}
			 , #{acpSrno}
			 , #{hndlDptCd}
			 , #{enfDt}
			 , #{enfmDt}
			 , #{enfmTxt}
			 , #{lwsInstDt}
			 , #{judgDt}
			 , #{judgTxt}
			 , #{dfDt}
			 , #{rlsDt}
			 , #{unHndlRsn}
			 , #{hndlPlnTxt}
			 , #{odocNo}

			 , #{lwsYo}
			 , #{frtrlCtNm}
			 , #{frtrlEvtNoTxt}
			 , #{fnlRsltTxt}

			 , #{frtUsrId}
			 , #{fnlUsrId}
			 , #{fnlDealDptCd}
			 , #{fnlMnuId}
			 , SYSDATE
			 , SYSDATE
			   )
	</insert>

	<insert id="BADFRE111ESENDREQ001Insert" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111ESENDREQ001Insert */
		<![CDATA[
			INSERT INTO	EH_JDG_REQ_001
					(	IF_SEQ
						,IF_TYPE
						,ACP_YR
						,ACP_DVSN_CD
						,ACP_SRNO
						,DPT_CD
						,ACP_DT
						,CVPT_SEN_ACP_NO
						,HNDL_CHGR_NM
						,REQR_NM
						,AGT_NM
						,PRSS_STT
						,HNDL_CHGR_TNB_1
						,HNDL_CHGR_TNB_2
						,HNDL_CHGR_TNB_3
						,ORG_CD2
						,ORG_NM
						,AD
						,DTL_AD
						,TIT_NM
						,DPT_NM
						,FRT_USR_ID
						,ACP_HNDL_STA_CD
						,ENF_DOC_APV_CMPT_YN
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{acpYr}
						,#{acpDvsnCd}
						,#{acpSrno}
						,#{hndlDptCd}
						,#{acpDt}
						,#{cvptSenAcpNo}
						,#{hndlChgrNm}
						,#{reqrNm}
						,#{agtNm}
						,#{prssStt}
						,'02'
						,'2011'
						,DECODE(#{acpDvsnCd}, 2, (SELECT USR_DFN_TXT_1 FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000144' AND CD = #{hndlDptCd}), (SELECT TNB FROM TBDCMACM001M WHERE CNB = #{hndlChgrCd}))
						,#{orgCd}
						,#{orgNm}
						,NVL(#{agtAd}, #{ad})
						,NVL(#{agtDtlAd}, #{dtlAd})
						,REPLACE(REPLACE(#{titNm} , CHR(13), ''), chr(10), '') 
						,#{dptNm}
						,#{frtUsrId}
						,#{acpHndlStaCd}
						,#{enfDocApvCmptYn}
					)
		]]>
	</insert>

	<!--심사심의접수기본 update -->
	<update id="BADFRE111EJdgRvwAcpBscupdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBscupdate */
	<![CDATA[
		UPDATE TBBADFRE012M
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
	]]>

		<if test='mgAcpYr != null'>
	       	   , MG_ACP_YR        	= #{mgAcpYr}
		</if>
		<if test='mgAcpDvsnCd != null'>
	       	   , MG_ACP_DVSN_CD       = #{mgAcpDvsnCd}
		</if>
		<if test='mgAcpSrno != null'>
	       	   , MG_ACP_SRNO          = #{mgAcpSrno}
		</if>
		<if test='mgDptCd != null'>
	       	   , MG_DPT_CD          = #{mgDptCd}
		</if>
		<if test='mgDivCd != null'>
	       	   , MG_DIV_CD			= #{mgDivCd}
		</if>
		<if test='hndlDptCd != null'>
	       	   , DPT_CD          		= #{hndlDptCd}
		</if>
		<if test='cvptSenAcpNo != null'>
	       	   , CVPT_SEN_ACP_NO      = #{cvptSenAcpNo}
		</if>
		<if test='acpDt != null'>
	       	   , ACP_DT        		= #{acpDt}
		</if>
		<if test='reqDt != null'>
	       	   , REQ_DT         		= #{reqDt}
		</if>
		<if test='titNm != null'>
	       	   , TIT_NM           	= REPLACE(REPLACE(#{titNm} , CHR(13), ''), chr(10), '')
		</if>
		<if test='rptDt != null'>
	       	   , RPT_DT      			= #{rptDt}
		</if>
		<if test='hndlDdlnDt != null'>
	       	   , HNDL_DDLN_DT  		= #{hndlDdlnDt}
		</if>
		<if test='jdgReqDvsnCd != null'>
	       	   , JDG_REQ_DVSN_CD  	= #{jdgReqDvsnCd}
		</if>
		<if test='relAm != null'>
	       	   , REL_AM          		= #{relAm}
		</if>
		<if test='dfntCnt != null'>
	       	   , DFNT_CNT     		= #{dfntCnt}
		</if>
		<if test='orgCd != null'>
	       	   , ORG_CD           	= #{orgCd}
		</if>
		<if test='orgNm != null'>
	       	   , ORG_NM           	= #{orgNm}
		</if>
		<if test='reqrNm != null'>
	       	   , REQR_NM       		= #{reqrNm}
		</if>
		<if test='agtNm != null'>
	       	   , AGT_NM         		= #{agtNm}
		</if>
		<if test='psnCrpDvsnCd != null'>
	       	   , PSN_CRP_DVSN_CD  	= #{psnCrpDvsnCd}
		</if>
		<if test='ein != null'>
	       	   , EIN   			= #{ein}
		</if>
		<if test='isuTxt != null'>
	       	   , ISU_TXT          	= #{isuTxt}
		</if>
		<if test='hndlChgrCd != null'>
	       	   , HNDL_CHGR_CD     	= #{hndlChgrCd}
		</if>
		<if test='hndlChgrNm != null'>
	       	   , HNDL_CHGR_NM     	= #{hndlChgrNm}
		</if>
		<if test='audYr != null'>
	       	   , AUD_YR         		= #{audYr}
		</if>
		<if test='audNo != null'>
	       	   , AUD_NO          		= #{audNo}
		</if>
		<if test='audYr != null and audYr != "" and audNo != null and audNo != ""'>
            , DOC_WRIT_KND_CD = (SELECT NVL(DOC_WRIT_KND_CD, '20') 
                                           FROM TBBADDED001M 
                                          WHERE AUD_YR = #{audYr} AND AUD_NO = #{audNo})
		</if>
		<if test='dspRqSno != null'>
	       	   , DSP_RQ_SNO       	= #{dspRqSno}
		</if>
		<if test='zcd != null'>
	       	   , ZCD					= #{zcd}
		</if>
		<if test='ad != null'>
	       	   , AD					= #{ad}
		</if>
		<if test='dtlAd != null'>
	       	   , DTL_AD				= #{dtlAd}
		</if>
		<if test='hpTnb1 != null'>
	       	   , HP_TNB_1				= #{hpTnb1}
		</if>
		<if test='hpTnb2 != null'>
	       	   , HP_TNB_2				= #{hpTnb2}
		</if>
		<if test='hpTnb3 != null'>
	       	   , HP_TNB_3				= #{hpTnb3}
		</if>
		<if test='tnb1 != null'>
	       	   , TNB_1				= #{tnb1}
		</if>
		<if test='tnb2 != null'>
	       	   , TNB_2				= #{tnb2}
		</if>
		<if test='tnb3 != null'>
	       	   , TNB_3				= #{tnb3}
		</if>
		<if test='agtZcd != null'>
	       	   , AGT_ZCD					= #{agtZcd}
		</if>
		<if test='agtAd != null'>
	       	   , AGT_AD					= #{agtAd}
		</if>
		<if test='agtDtlAd != null'>
	       	   , AGT_DTL_AD				= #{agtDtlAd}
		</if>
		<if test='agtHpTnb1 != null'>
	       	   , AGT_HP_TNB_1				= #{agtHpTnb1}
		</if>
		<if test='agtHpTnb2 != null'>
	       	   , AGT_HP_TNB_2				= #{agtHpTnb2}
		</if>
		<if test='agtHpTnb3 != null'>
	       	   , AGT_HP_TNB_3				= #{agtHpTnb3}
		</if>
		<if test='agtTnb1 != null'>
	       	   , AGT_TNB_1				= #{agtTnb1}
		</if>
		<if test='agtTnb2 != null'>
	       	   , AGT_TNB_2				= #{agtTnb2}
		</if>
		<if test='agtTnb3 != null'>
	       	   , AGT_TNB_3				= #{agtTnb3}
		</if>
		<if test='hndlChgrTnb1 != null'>
	       	   , HNDL_CHGR_TNB_1				= #{hndlChgrTnb1}
		</if>
		<if test='hndlChgrTnb2 != null'>
	       	   , HNDL_CHGR_TNB_2				= #{hndlChgrTnb2}
		</if>
		<if test='hndlChgrCd != null'>
	       	   , HNDL_CHGR_TNB_3				= SUBSTR((SELECT ST.TNB FROM TBDCMACM001M ST WHERE ST.CNB = #{hndlChgrCd}), -4)
		</if>
		<if test='baiDspDivCd != null'>
	       	   , BAI_DSP_DIV_CD		= #{baiDspDivCd}
		</if>
		<if test='baiDspYn != null'>
	       	   , BAI_DSP_YN		= #{baiDspYn}
		</if>
		<if test='extnRsn != null'>
	       	   , EXTN_RSN		= #{extnRsn}
		</if>
		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}
		</if>

		<if test='wrtansSenYn != null and wrtansSenYn != ""'>
	       	   , WRTANS_SEN_YN			= #{wrtansSenYn}
	       	   , WRTANS_SEN_DT          = TO_CHAR(SYSDATE,'YYYYMMDD')
		</if>
		<if test='sttcCnt != null'>
	       	   , STTC_CNT			= #{sttcCnt}
		</if>

		<if test='dspOfcAcpDt != null'>
	       	   , DSP_OFC_ACP_DT			= #{dspOfcAcpDt}
		</if>
		<if test='dspOfcUpInsttCd != null'>
	       	   , DSP_OFC_UP_INSTT_CD			= #{dspOfcUpInsttCd}
		</if>
		<if test='dspOfcUpInsttNam != null'>
	       	   , DSP_OFC_UP_INSTT_NAM			= #{dspOfcUpInsttNam}
		</if>
		<if test='dspOfcUpInsttAcpDt != null'>
	       	   , DSP_OFC_UP_INSTT_ACP_DT			= #{dspOfcUpInsttAcpDt}
		</if>
		<if test='cntrAdmnstmachCd != null'>
	       	   , CNTR_ADMNSTMACH_CD			= #{cntrAdmnstmachCd}
		</if>
		<if test='cntrAdmnstmachNam != null'>
	       	   , CNTR_ADMNSTMACH_NAM			= #{cntrAdmnstmachNam}
		</if>
		<if test='cntrAdmnstmachAcpDt != null'>
	       	   , CNTR_ADMNSTMACH_ACP_DT			= #{cntrAdmnstmachAcpDt}
		</if>
		<if test='dsptchInsttNam != null'>
	       	   , DSPTCH_INSTT_NAM			= #{dsptchInsttNam}
		</if>
		<if test='vtKndCd != null'>
			   , VT_KND_CD  				= #{vtKndCd}
		</if>
		<if test='dcsDt != null'>
			   , DCS_DT  	     			= #{dcsDt} /* 결정일 */
		</if>
		<if test='dcsSbj != null'>
			   , DCS_SBJ   				= #{dcsSbj} /* 결정내용 */
		</if>
		<if test='amitAm != null'>
			   , AMIT_AM  				= #{amitAm} /* 청구금액 */
		</if>
				<if test='amitAm != null'>
			   , RMK  				= #{rmk} /* 비고 */
		</if>
		<if test='reqrOpmSenDt != null'>
			   , REQR_OPM_SEN_DT 				= to_char(to_date(#{reqrOpmSenDt}), 'YYYYMMDD') /* 청구인시행문발송일자 */
		</if>
		<if test='hndlOpnnCd != null'>
	       	   , HNDL_OPNN_CD = #{hndlOpnnCd}  /* 처리의견 */
	       	   , VT_KND_CD    = #{hndlOpnnCd}  /* 퀴임시 처리결과 입력 */
		</if>
		<if test='athReRvwYn != null'>
	       	   , ATH_RE_RVW_YN = #{athReRvwYn}  /* 직권재심의 여부 */
		</if>
		<if test='secAudYn != null'>
	       	   , SEC_AUD_YN = #{secAudYn}  /* 보안감사여부  */
		</if>
		
		<if test='invstSuitYn != null'>
	       	   , INVST_SUIT_YN = #{invstSuitYn}  /* 보안감사여부  */
		</if>
		<if test='dmndPrpsChngYn != null'>
	       	   , DMND_PRPS_CHNG_YN = #{dmndPrpsChngYn}  /* 보안감사여부  */
		</if>
		<if test='eviMtrlAddPrsnYn != null'>
	       	   , EVI_MTRL_ADD_PRSN_YN = #{eviMtrlAddPrsnYn}  /* 보안감사여부  */
		</if>
		<if test='etcDlyRsnYn != null'>
	       	   , ETC_DLY_RSN_YN = #{etcDlyRsnYn}  /* 보안감사여부  */
		</if>
		<if test='dlyRsnDetail != null'>
	       	   , DLY_RSN_DETAIL = #{dlyRsnDetail}  /* 보안감사여부  */
		</if>
		<if test='wtVtYn != null and wtVtYn != "NULL"'>
	       	   , WT_VT_YN			= #{wtVtYn}
		</if>
		<if test='wtVtYn != null and wtVtYn == "NULL"'>
	       	   , WT_VT_YN			= ''
		</if>
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</update>

	<!--심사심의처리상세 update -->
	<update id="BADFRE111EJdgRvwHndlupdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwHndlupdate */
	<![CDATA[
		UPDATE TBBADFRE013D
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
	]]>
		<if test='enfDt != null'>
				, ENF_DT          	= TO_CHAR(TO_DATE(#{enfDt}),'YYYYMMDD')
		</if>
		<if test='enfmDt != null'>
				, ENFM_DT          	= #{enfmDt}
		</if>
		<if test='enfmTxt != null'>
				, ENFM_TXT          	= #{enfmTxt}
		</if>
		<if test='lwsInstDt != null'>
				, LWS_INST_DT          	= #{lwsInstDt}
		</if>
		<if test='judgDt != null'>
				, JUDG_DT          	= #{judgDt}
		</if>
		<if test='judgTxt != null'>
				, JUDG_TXT          	= #{judgTxt}
		</if>

		<if test='dfDt != null'>
	       	   , DF_DT          	= #{dfDt}       	/*보류일*/
		</if>
		<if test='rlsDt != null'>
	       	   , RLS_DT         	= #{rlsDt}      	/*해제일*/
		</if>
		<if test='unHndlRsn != null'>
	       	   , UN_HNDL_RSN    	= #{unHndlRsn} 	/*미처리사유*/
		</if>
		<if test='hndlPlnTxt != null'>
	       	   , HNDL_PLN_TXT   	= #{hndlPlnTxt}    /*처리계획내용*/
		</if>
		<if test='odocNo != null'>
	       	   , ODOC_NO        	= #{odocNo}         /*공문서번호*/
		</if>

		<if test='lwsYo != null'>
	       	   , LWS_YO        	= #{lwsYo}            /* 소송유무 - 2015.05.26 yyh */
		</if>

		<if test='frtrlCtNm != null'>
	       	   , FRTRL_CT_NM      = #{frtrlCtNm}       /* 1심법원명 - 2015.05.26 yyh */
		</if>

		<if test='frtrlEvtNoTxt != null'>
	       	   , FRTRL_EVT_NO_TXT = #{frtrlEvtNoTxt}  /* 1심사건번호 - 2015.05.26 yyh */
		</if>

		<if test='fnlRsltTxt != null'>
	       	   , FNL_RSLT_TXT     = #{fnlRsltTxt}      /* 종국결과 - 2015.05.26 yyh */
		</if>


		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}				/*최종사용자ID*/
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}			/*최종거래부서코드*/
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}				/*최종메뉴ID*/
		</if>

		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}

	</update>

	<!--심사심의처리 이행관리 update -->
	<update id="BADFRE111EJdgRvwHndlupdate2" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwHndlupdate2 */
	<![CDATA[
		UPDATE TBBADFRE013D
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
	]]>
		<if test='enfmDt != null'>
				, ENFM_DT          	= #{enfmDt}
		</if>
		<if test='enfmTxt != null'>
				, ENFM_TXT          	= #{enfmTxt}
		</if>
		<if test='lwsYo != null'>
				, LWS_YO          	= #{lwsYo}
		</if>
		<if test='frtrlCtNm != null'>
	       	   , FRTRL_CT_NM      = #{frtrlCtNm}       /* 1심법원명 - 2015.05.26 yyh */
		</if>

		<if test='frtrlEvtNoTxt != null'>
	       	   , FRTRL_EVT_NO_TXT = #{frtrlEvtNoTxt}  /* 1심사건번호 - 2015.05.26 yyh */
		</if>
		<if test='fnlRsltTxt != null'>
	       	   , FNL_RSLT_TXT     = #{fnlRsltTxt}      /* 종국결과 - 2015.05.26 yyh */
		</if>
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</update>

	<!--신규 심사심의접수기본 delete-->
	<update id="BADFRE111EJdgRvwAcpBscdelete" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBscdelete */
		UPDATE TBBADFRE012M
		     SET DEL_YN = 'Y'
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</update>

	<!--구 심사심의접수기본 delete-->
	<delete id="BADFRE111EJdgRvwAcpBscdelete2" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBscdelete2 */
		DELETE
		  FROM TBBADFRE012M
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</delete>

	<!--구 심사심의처리상세 delete -->
	<delete id="BADFRE111EJdgRvwHndldelete2" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwHndldelete2 */
		DELETE
		  FROM TBBADFRE013D
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</delete>

	<!--심사심의 병합취소 update -->
	<update id="BADFRE111EJdgRvwMgCnlupdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwMgCnlupdate */
	<![CDATA[
		UPDATE TBBADFRE012M
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
			 , MG_ACP_YR        = ''
			 , MG_ACP_DVSN_CD   = ''
			 , MG_ACP_SRNO      = ''
			 , MG_DPT_CD		= ''
			 , MG_DIV_CD        = ''
			 ]]>
		<if test='wtVtYn != null'>
	       	   ,  WT_VT_YN         = ''				/*서면의결여부*/
		</if>
		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}				/*최종사용자ID*/
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}			/*최종거래부서코드*/
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}				/*최종메뉴ID*/
		</if>

		 WHERE ACP_YR 		    = #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		    = #{acpSrno}
	</update>

	<!--심사심의 진행단계 update -->
	<update id="BADFRE111EAcpHndlStaCdUpdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EAcpHndlStaCdUpdate */
	<![CDATA[
		UPDATE TBBADFRE012M
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
			 , ACP_HNDL_STA_CD        = #{acpHndlStaCd}
	]]>
		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}				/*최종사용자ID*/
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}			/*최종거래부서코드*/
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}				/*최종메뉴ID*/
		</if>

		 WHERE ACP_YR 		    = #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		    = #{acpSrno}
	</update>

	<insert id="BADFRE103MInsert" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE103MInsert */
		<![CDATA[
		INSERT INTO	TBBADFRE103M
							(	 ACP_YR              /* 접수년도 */
								,ACP_DVSN_CD      /* 접수구분 */
								,ACP_SRNO          /* 접수번호 */
								,ACP_STEP_CD       /* 단계코드 */
								,DOC_ID              /* 문서ID */
								,RPRT_CD            /* 보고서코드 */
								,RPRT_NM           /* 보고서명 */
								,LINK_URL           /* 링크주소 */
								,APV_STA_CD	       /* 결재상태코드 */
								,APV_WAY_CD      /* 결재타입 */
								,NECES_YN          /* 필수여부 */
								,FRT_USR_ID        /* 최초사용자ID */
								,FNL_USR_ID        /* 최종사용자ID */
								,FNL_DEAL_DPT_CD/* 최종거래부서코드 */
								,FNL_MNU_ID       /* 최종메뉴ID */
								,FRT_REGI_DH       /* 최초등록일시 */
								,FNL_MDF_DH       /* 최종수정일시 */
							)
					VALUES	(
								 #{acpYr}
								,#{acpDvsnCd}
								,#{acpSrno}
								,#{acpStepCd}
								,#{docId}
								,#{rprtCd}
								,#{rprtNm}
								,#{linkUrl}
								,#{apvStaCd}
								,#{apvWayCd}
								,#{necesYn}
								,#{frtUsrId}
								,#{fnlUsrId}
								,#{fnlDealDptCd}
								,#{fnlMnuId}
								,SYSDATE
								,SYSDATE
							)
		]]>
	</insert>
	
	
	<!--심사심의 진행단계 update -->
	<update id="BADFRE111EAcpHndlStaCdUpdate2" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EAcpHndlStaCdUpdate2 */
	<![CDATA[
		UPDATE TBBADFRE012M
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
			 , ACP_HNDL_STA_CD        = #{acpHndlStaCd}
	]]>
		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}				/*최종사용자ID*/
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}			/*최종거래부서코드*/
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}				/*최종메뉴ID*/
		</if>
		WHERE 1 = 1
		  AND NVL(MG_ACP_YR, ACP_YR) 		        = #{acpYr}
		  AND NVL(MG_ACP_DVSN_CD, ACP_DVSN_CD) 	= #{acpDvsnCd}
		  AND NVL(MG_ACP_SRNO, ACP_SRNO)		    = #{acpSrno}
	</update>
	
	<update id="BADFRE111EJdgRvwAcpBscupdate2" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EJdgRvwAcpBscupdate2 */
	<![CDATA[
		UPDATE TBBADFRE012M
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
	]]>
		<if test='vtKndCd != null'>
			   , VT_KND_CD  				= #{vtKndCd}
		</if>
		<if test='dcsDt != null'>
			   , DCS_DT  	     			= #{dcsDt} /* 결정일 */
		</if>
		<if test='dcsSbj != null'>
			   , DCS_SBJ   				= #{dcsSbj} /* 결정내용 */
		</if>
		<if test='amitAm != null'>
			   , AMIT_AM  				= #{amitAm} /* 청구금액 */
		</if>
				<if test='amitAm != null'>
			   , RMK  				= #{rmk} /* 비고 */
		</if>
		<if test='reqrOpmSenDt != null'>
			   , REQR_OPM_SEN_DT 				= to_char(to_date(#{reqrOpmSenDt}), 'YYYYMMDD') /* 청구인시행문발송일자 */
		</if>
		<if test='orgOpmSenDt != null'>
			   , INSTT_OPM_SEN_DT 				= to_char(to_date(#{orgOpmSenDt}), 'YYYYMMDD') /* 기관시행문발송일자 */
		</if>
		<if test='athReRvwYn != null'>
	       	   , ATH_RE_RVW_YN = #{athReRvwYn}  /* 직권재심의 여부 */
		</if>
		 WHERE NVL(MG_ACP_YR, ACP_YR) 		    = #{acpYr}
		   AND NVL(MG_ACP_DVSN_CD, ACP_DVSN_CD) 	= #{acpDvsnCd}
		   AND NVL(MG_ACP_SRNO, ACP_SRNO)		    = #{acpSrno}
	</update>
	
	
	
	<!--문서함 delete -->
	<delete id="BADFRE103MDelete" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE103MDelete */
		DELETE
		  FROM TBBADFRE103M
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</delete>
	
	<!-- 증거서류 delete -->
	<delete id="BADFRE108DDelete" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE108DDelete */
		DELETE
		  FROM TBBADFRE108D
		 WHERE ACP_YR 		= #{acpYr}
		   AND ACP_DVSN_CD 	= #{acpDvsnCd}
		   AND ACP_SRNO		= #{acpSrno}
	</delete>
	
	<!--재심의심사청구 접수일련번호 조회-->
	<select id="selectUserCnb" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectUserCnb */
		<![CDATA[
			SELECT CNB
			FROM TBDCMACM001M
			WHERE DPT_CD 		= #{hndlDptCd}
			AND USR_NAM  = #{hndlChgrNm}
		]]>
	</select>
	
	
	<update id="BADFRE013DEnfDtUpdate" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE013DEnfDtUpdate */
	<![CDATA[
		UPDATE TBBADFRE013D
   		   SET FNL_MDF_DH      	= SYSDATE				/*최종수정일시*/
	]]>
		<if test='enfDt != null'>
			   , ENF_DT  				= #{enfDt}
		</if>
		<if test='fnlUsrId != null'>
	       	   , FNL_USR_ID   		= #{fnlUsrId}				/*최종사용자ID*/
		</if>
		<if test='fnlDealDptCd != null'>
	       	   , FNL_DEAL_DPT_CD		= #{fnlDealDptCd}			/*최종거래부서코드*/
		</if>
		<if test='fnlMnuId != null'>
	       	   , FNL_MNU_ID			= #{fnlMnuId}				/*최종메뉴ID*/
		</if>
		 WHERE (ACP_YR, ACP_DVSN_CD, ACP_SRNO) IN ( SELECT ACP_YR, ACP_DVSN_CD, ACP_SRNO 
			                                                    FROM TBBADFRE012M 
			                                                    WHERE (MG_ACP_YR = #{acpYr}
			                                                    AND MG_ACP_DVSN_CD = #{acpDvsnCd}
			                                                    AND MG_ACP_SRNO = #{acpSrno}
			                                                    AND MG_DIV_CD IN ('10', '20')) OR 
			                                                    (ACP_YR = #{acpYr}
			                                                    AND ACP_DVSN_CD = #{acpDvsnCd}
			                                                    AND ACP_SRNO = #{acpSrno}
			                                                    AND MG_DIV_CD IS NULL))
	</update>
	
	<select id="selectHndlChgrTnb" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectHndlChgrTnb */
		<![CDATA[
            SELECT TNB
              FROM TBBADFRE012M A
        INNER JOIN TBDCMACM001M B ON (B.CNB = A.HNDL_CHGR_CD)
             WHERE A.ACP_YR = #{acpYr}
               AND A.ACP_DVSN_CD = #{acpDvsnCd}
               AND A.ACP_SRNO = #{acpSrno}
		]]>
	</select>
	
	<select id="selectAllDept" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectAllDept */
	<![CDATA[
		SELECT DPT_CD
		      ,DPT_NM
		      ,HIRK_DPT_CD
		      ,DPT_SNO
		  FROM (SELECT DPT_CD
				     , DPT_NM
				     , HIRK_DPT_CD
		             , DPT_SNO
				  FROM TBDCMACM002M
				 WHERE 1=1
				   AND DPT_CD NOT LIKE '%000'
				   AND USE_YN = 'Y'
				   AND DPT_CD NOT IN ('770770','880880','400100','400200')
		        UNION ALL
		        SELECT DPT_CD
		             , DPT_NM
		             , HIRK_DPT_CD
		             , DPT_SNO
		          FROM TBDCMACM002M
		         WHERE 1=1
		           AND MANPOWER_POOL_SYE_YN = 'Y')
		  ORDER BY DPT_SNO
	]]>
	</select>
	
	
	<!--직권재심의여부 조회-->
	<select id="selectAthReRvwYn" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectAthReRvwYn */
		<![CDATA[
			SELECT ATH_RE_RVW_YN
			  FROM TBBADFRE012M
			 WHERE 1=1
			   AND ACP_YR      = #{acpYr}
			   AND ACP_DVSN_CD =#{acpDvsnCd}
			   AND ACP_SRNO    = #{acpSrno}
		]]>
	</select>
	
	<delete id="deleteCv" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.deleteCv */
		DELETE
		  FROM TBBADFRE103M
		 WHERE ACP_YR      = #{acpYr}
		   AND ACP_DVSN_CD = #{acpDvsnCd}
		   AND ACP_SRNO    = #{acpSrno}
		   AND ACP_STEP_CD = #{acpStepCd}
		   AND DOC_ID      = #{docId}
    </delete>
    
    <select id="selectTBBADFRE015M" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectTBBADFRE015M */
		<![CDATA[
		SELECT ACP_YR
		      ,ACP_DVSN_CD
		      ,ACP_SRNO
		      ,LWS_INSTC_STEP_CD
		      ,LWS_INSTC_STEP_NM
		      ,LWS_INCDNT_NO_NM
		      ,LWS_CT_NM
		      ,LWS_AGT_NM
		      ,TO_CHAR(TO_DATE(LWS_SNTNC_YMD), 'YYYY-MM-DD') AS LWS_SNTNC_YMD
		      ,LWS_RSLT_CD
		      ,LWS_RSLT_NM
		      ,LWS_EXEC_STTS_CD
		      ,LWS_EXEC_STTS_NM
		      ,LWS_CMPLNT_ATCH_FILE_UUID
		      ,LWS_RLNGDOC_ATCH_FILE_UUID
		      ,LWS_ATCH_FILE_DOC_ID
		      ,SRNO
		      ,RMK
		  FROM TBBADFRE015M
		 WHERE ACP_YR = #{acpYr}
		   AND ACP_DVSN_CD = #{acpDvsnCd}
		   AND ACP_SRNO = #{acpSrno}
		 ]]>
	</select>
    
    <select id="selectAtchFile" parameterType="paramMap" resultType="egovMap">
    /* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectAtchFile */
        <![CDATA[
            SELECT ACP_YR
                  ,ACP_DVSN_CD
                  ,ACP_SRNO
                  ,'파일명' AS LWS_ATCH_FILE_DOC_NM
                  ,LWS_ATCH_FILE_DOC_ID
              FROM TBBADFRE015M
             WHERE ACP_YR = #{acpYr}
               AND ACP_DVSN_CD = #{acpDvsnCd}
               AND ACP_SRNO = #{acpSrno}
               AND LWS_INSTC_STEP_CD = #{lwsInstcStepCd}
          ]]>
    </select>
    
    <!-- 재심의심사청구 조회 Two-->
	<select id="BADFRE111EMainselectTwo" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.BADFRE111EMainselectTwo */
		<![CDATA[
                SELECT T1.ACP_YR || '-' || DECODE(T1.ACP_DVSN_CD,'1','심사','2','재심','3','재심판정') || '-' || DECODE(T1.ORG_ACP_SRNO, null, T1.ACP_SRNO, T1.ORG_ACP_SRNO) AS ACP_NO /* 분류번호 */
                     , T1.ACP_HNDL_STA_CD /*진행단계*/
                     , T1.ACP_YR			/*접수년도*/
                     , T1.ACP_DVSN_CD		/*접수구분코드*/
                     , T1.ACP_SRNO		/*접수일련번호*/
                     , T1.ORG_ACP_SRNO		/*접수일련번호*/
                     , to_char(to_date(T1.ACP_DT), 'YYYY-MM-DD') AS ACP_DT			/*접수일*/
                     , T1.REQ_DT			/*청구일*/
                     , NVL(T1.TIT_NM, ' ') AS TIT_NM			/*제목명*/
                     , T1.DPT_CD AS HNDL_DPT_CD /*부서코드*/
                     , (SELECT DPT_NM FROM TBDCMACM002M WHERE DPT_CD = T1.DPT_CD) AS DPT_NM /*부서코드*/
                     , T1.RPT_DT			/*보고일*/
                     , to_char(to_date(T1.HNDL_DDLN_DT), 'YYYY-MM-DD') AS HNDL_DDLN_DT		/*처리기한일*/
                     , T1.JDG_REQ_DVSN_CD	/*심사청구구분코드*/
					 , F_CODE_NM('1000043', T1.JDG_REQ_DVSN_CD) AS JDG_REQ_DVSN_NM
                     , T1.REL_AM			/*관련금액*/
                     , T1.DFNT_CNT			/*관계자수*/
                     , T1.ORG_CD 			/*기관코드*/
					 , F_ORG_INFO(T1.ORG_CD, '1') AS ORG_NM
                     , T1.REQR_NM			/*청구인명*/
                     , T1.AGT_NM 			/*대리인명*/
                     , NVL(T1.EX_YN, 'N') AS EX_YN /*통계제외여부*/
                     , T1.EX_RSN_TXT		/*통계제외사유*/
                     , T1.PSN_CRP_DVSN_CD	/*개인법인구분코드*/
                     , F_CODE_NM ('1000436', T1.PSN_CRP_DVSN_CD) AS PSN_CRP_DVSN /*개인법인구분*/
                     , T1.EIN			/*청구인주민등록번호*/
                     , T1.ISU_TXT			/*쟁점내용*/
                     , T1.HNDL_CHGR_CD		/*처리담당자*/
                     , T1.HNDL_CHGR_NM		/*처리담당자*/
                     , T1.AUD_YR			/*감사년도*/
                     , T1.AUD_NO			/*감사번호*/
                     , (SELECT AUD_GRN_NO
                          FROM TBBADDED001M
                         WHERE AUD_YR = T1.AUD_YR
                           AND AUD_NO = T1.AUD_NO) AS AUD_GRN_NO
                     , T1.DSP_RQ_SNO		/*처분요구순번*/
                     , T1.BAI_DSP_YN		/*원처분여부*/
                     , (SELECT to_char(to_date(S1.ENF_DT), 'YYYY-MM-DD') AS ENF_DT
                          FROM TBBADEAR002D S1
                         WHERE S1.AUD_YR 		= T1.AUD_YR
                           AND S1.AUD_NO  		= T1.AUD_NO
                           AND S1.DSP_RQ_SNO 	= T1.DSP_RQ_SNO
                        ) AS DSP_RQ_ENF_DT
                     ,(SELECT F_CODE_NM('1000002', S1.DSP_RQ_KND_CD)
                         FROM TBBADEAR001M S1
                        WHERE S1.AUD_YR		= T1.AUD_YR
                          AND S1.AUD_NO  	= T1.AUD_NO
                          AND S1.DSP_RQ_SNO = T1.DSP_RQ_SNO
                       ) AS DSP_RQ_KND_NM	/*처분요구종류*/
                     ,(SELECT S1.TIT_TXT
                         FROM TBBADEAR001M S1
                        WHERE S1.AUD_YR 		= T1.AUD_YR
                          AND S1.AUD_NO  		= T1.AUD_NO
                          AND S1.DSP_RQ_SNO 	= T1.DSP_RQ_SNO
                        ) AS DSP_RQ_TIT_NM
                     , T1.ZCD				/*우편번호*/
                     , T1.AD				/*주소*/
                     , T1.DTL_AD			/*상세주소*/
                     , T1.HP_TNB_1			/*핸드폰번호1*/
                     , T1.HP_TNB_2			/*핸드폰번호2*/
                     , T1.HP_TNB_3			/*핸드폰번호3*/
                     , T1.TNB_1				/*전화번호1*/
                     , T1.TNB_2				/*전화번호2*/
                     , T1.TNB_3				/*전화번호3*/
                     , T1.AGT_ZCD			/*대리인우편번호*/
                     , T1.AGT_AD			/*대리인주소*/
                     , T1.AGT_DTL_AD		/*대리인상세주소*/
                     , T1.AGT_HP_TNB_1		/*대리인핸드폰번호1*/
                     , T1.AGT_HP_TNB_2		/*대리인핸드폰번호2*/
                     , T1.AGT_HP_TNB_3		/*대리인핸드폰번호3*/
                     , T1.AGT_TNB_1			/*대리인전화번호1*/
                     , T1.AGT_TNB_2			/*대리인전화번호2*/
                     , T1.AGT_TNB_3			/*대리인전화번호3*/
                     , T1.HNDL_CHGR_TNB_1	/*처리담당자전화번호1*/
                     , T1.HNDL_CHGR_TNB_2	/*처리담당자전화번호2*/
                     , T1.HNDL_CHGR_TNB_3	/*처리담당자전화번호3*/
                     , T1.BAI_DSP_DIV_CD	/*원처분과코드*/
                     , (SELECT DPT_NM FROM TBDCMACM002M WHERE DPT_CD = T1.BAI_DSP_DIV_CD) as BAI_DSP_DIV_NM /*원처분과*/
                     , to_char(to_date(T3.ENF_DT), 'YYYY-MM-DD') AS ENF_DT			/*시행일*/
                     , TO_DATE(TRIM(T3.ENF_DT)) - TO_DATE(TRIM(T1.ACP_DT)) || '일' AS ENF_HNDL_DT /*시행처리기간*/
                     , to_char(to_date(T3.ENFM_DT), 'YYYY-MM-DD') AS ENFM_DT			/*집행일*/
                     , T3.ENFM_TXT			/*집행내용*/
                     , T3.LWS_INST_DT		/*소송제기일*/
                     , T3.JUDG_DT			/*판결일*/
                     , T3.JUDG_TXT			/*판결내용*/
                     , to_char(to_date(T3.DF_DT), 'YYYY-MM-DD') AS DF_DT				/*보류일*/
                     , to_char(to_date(T3.RLS_DT), 'YYYY-MM-DD') AS RLS_DT			/*해제일*/
                     , T3.UN_HNDL_RSN		/*미처리사유*/
                     , T1.EXTN_RSN			/*연장사유*/
                     , T3.HNDL_PLN_TXT		/*처리계획내용*/
                     , T3.ODOC_NO			/*공문서번호*/
                     , T1.CVPT_SEN_ACP_NO   /* 민원발송접수번호 */
                     , DECODE(T1.ACP_NO_SMS_SEN_YN,'Y','발송','미발송') AS ACP_NO_SMS_SEN_YN
                     , to_char(T1.ACP_NO_SMS_SEN_DH, 'YYYY-MM-DD') AS ACP_NO_SMS_SEN_DHSMS /*발송일시*/
			    	 , T1.WRTANS_SEN_YN
			    	 , T1.STTC_CNT
                     , NVL(T3.LWS_YO,'N')              AS LWS_YO    /* 소송유무 - 2015.05.26 yyh */
                     , DECODE(T3.LWS_YO,'Y','유','무') AS LWS_YO_NM  /* 소송유무명 - 2015.05.26 yyh */
                     , T3.FRTRL_CT_NM                               /* 1심법원명 - 2015.05.26 yyh */
                     , T3.FRTRL_EVT_NO_TXT                          /* 1심사건번호 - 2015.05.26 yyh */
                     , T3.FNL_RSLT_TXT                              /* 종국결과 - 2015.05.26 yyh */
                     ,(SELECT CASE WHEN AUD_YR >= '2016'
			                            THEN F_CODE_NM('1000739',AUD_KND_CD)
			                       ELSE ''
			                   END
                         FROM TBBADDED001M
                        WHERE AUD_YR 		= T1.AUD_YR
                          AND AUD_NO  		= T1.AUD_NO) AS AUD_YR_NO_KND_NM
                     ,T1.AMIT_AM /* 용인금액  */
                     ,T1.RMK /* 비고  */
                     ,to_char(to_date(T1.DSP_OFC_ACP_DT), 'YYYY-MM-DD') AS DSP_OFC_ACP_DT /* 처분청접수일자 */
                     ,T1.DSP_OFC_UP_INSTT_CD /* 처분청상급기관코드 */
                     ,T1.DSP_OFC_UP_INSTT_NAM  /* 처분청상급기관명 */
                     ,to_char(to_date(T1.DSP_OFC_UP_INSTT_ACP_DT), 'YYYY-MM-DD') AS DSP_OFC_UP_INSTT_ACP_DT /* 처분청상급기관접수일자  */
                     ,T1.CNTR_ADMNSTMACH_CD /* 중앙행정기관코드  */
                     ,T1.CNTR_ADMNSTMACH_NAM /* 중앙행정기관명  */
                     ,to_char(to_date(T1.CNTR_ADMNSTMACH_ACP_DT), 'YYYY-MM-DD') AS CNTR_ADMNSTMACH_ACP_DT /* 중앙행정기관접수일자  */
                     ,T1.DSPTCH_INSTT_NAM  /* 발신기관명 */
                     ,T1.MG_ACP_YR /* 병합접수년도 */
                     ,T1.MG_ACP_DVSN_CD /* 병합구분코드 */
                     ,T1.MG_ACP_SRNO /* 병합접수번호 */
                     ,T1.MG_DPT_CD /* 병합부서코드 */
                     ,T1.MG_DIV_CD /* 병합/병행구분코드 */
                     ,T1.VT_KND_CD  /* 심사청구의결종류코드 */ 
                     ,TO_CHAR(TO_DATE(T1.DCS_DT), 'YYYY-MM-DD') AS DCS_DT /*결정일자*/
                     ,T1.AMIT_AM  /* 결정금액 */
                     ,T1.DCS_SBJ  /* 결정내용 */
                     ,T1.BAI_DSP_DIV_CD  /* 감사원처분과코드 */
                     ,T1.BAI_DSP_YN  /* 감사원처분여부 */
                     ,to_char(to_date(T1.REQR_OPM_SEN_DT), 'YYYY-MM-DD') AS REQR_OPM_SEN_DT /* 청구인시행문발송일자 */
                     ,to_char(to_date(T1.INSTT_OPM_SEN_DT), 'YYYY-MM-DD') AS ORG_OPM_SEN_DT /* 기관시행문발송일자 */
                     ,(CASE WHEN T1.MG_ACP_YR IS NULL THEN ''
                              WHEN T1.MG_DIV_CD = '10' THEN '병합(' || (SELECT COUNT(MG_ACP_YR)
                                                                                    FROM TBBADFRE012M
                                                                  				   WHERE MG_ACP_YR = T1.MG_ACP_YR
                                                                                      AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                                                                      AND MG_ACP_SRNO = T1.MG_ACP_SRNO) || ')'
                              WHEN T1.MG_DIV_CD = '20' THEN '병행(' || (SELECT COUNT(MG_ACP_YR)
                                                                                    FROM TBBADFRE012M
                                                                                   WHERE MG_ACP_YR = T1.MG_ACP_YR
                                                                                      AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                                                                      AND MG_ACP_SRNO = T1.MG_ACP_SRNO) || ')'
                      ELSE '병합(' || (SELECT COUNT(D.MG_ACP_YR)
                                         FROM TBBADFRE012M D
                                        WHERE D.MG_ACP_YR = T1.MG_ACP_YR
                                           AND D.MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                                           AND D.MG_ACP_SRNO = T1.MG_ACP_SRNO
                                           AND D.MG_DPT_CD = T1.MG_DPT_CD) || ')' END) AS MG_COUNT
                     ,(SELECT COUNT(MG_ACP_YR)
                        FROM TBBADFRE012M
     				  WHERE MG_ACP_YR = T1.MG_ACP_YR
                         AND MG_ACP_DVSN_CD = T1.MG_ACP_DVSN_CD
                         AND MG_ACP_SRNO = T1.MG_ACP_SRNO) AS MG_CNT
                     ,CASE WHEN T1.MG_DIV_CD = '10' THEN '병합'
					 	     WHEN T1.MG_DIV_CD = '20' THEN '병행'
					  ELSE ''
					  END AS MG_DIV_NM /* 병합병행구분명 */
                     ,(SELECT COUNT(ACP_SRNO)
					   FROM TBBADFRE101M
					  WHERE ACP_YR = T1.ACP_YR
					     AND ACP_DVSN_CD = T1.ACP_DVSN_CD
					     AND ACP_SRNO = T1.ACP_SRNO) AS PRC_CNT
					 ,NVL((SELECT MAX(LINK_URL)
				       FROM TBBADFRE101M
				      WHERE ACP_YR = T1.ACP_YR
				         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
				         AND ACP_SRNO = T1.ACP_SRNO
				         AND STEP_CMPT_YN = 'P'), 
				         (SELECT MAX(LINK_URL)
				       FROM TBBADFRE101M
				      WHERE ACP_YR = T1.ACP_YR
				         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
				         AND ACP_SRNO = T1.ACP_SRNO
				         AND STEP_CMPT_YN = 'Y')) AS LINK_URL
				     ,T1.REFER_ENT /* 부의위임여부 Y,N */
				     ,T1.ATH_RE_RVW_YN  /* 직권재심의 여부 */
				     ,to_char(to_date(T3.ENF_DT), 'YYYY-MM-DD') AS CPLT_DT /* 완료일자 */
		             ,(SELECT
                           APV_RQS_ID      /*결재ID*/
                      FROM TBBADFRE103M 
                      WHERE ACP_YR = T1.ACP_YR
                         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
                         AND ACP_SRNO = T1.ACP_SRNO
                         AND APV_RQS_ID IS NOT NULL
                         AND RPRT_CD = DECODE(#{acpDvsnCd},'1','D10100001','2','E10100001')) as HST_NA /* 결재이력-선람전 (국) */
                     ,(SELECT
                           APV_RQS_ID      
                      FROM TBBADFRE103M 
                      WHERE ACP_YR = T1.ACP_YR
                         AND ACP_DVSN_CD = T1.ACP_DVSN_CD
                         AND ACP_SRNO = T1.ACP_SRNO
                         AND APV_RQS_ID IS NOT NULL
                         AND RPRT_CD = DECODE(#{acpDvsnCd},'1','D10100002','2','E10100002')) as HST_DE /* 결재이력-선람전 (과) */
                      , (SELECT DOC_ID
						   FROM TBBADFRE103M
						  WHERE ACP_YR = T1.ACP_YR
						    AND ACP_DVSN_CD = T1.ACP_DVSN_CD
						    AND ACP_SRNO = T1.ACP_SRNO
						    AND ACP_STEP_CD IN('D1040','E1060')
						    AND RPRT_CD IN('D10400600','E10600300')
						    AND SND_DOC_YN = 'Y'
						    AND ROWNUM = '1') AS DOC_ID						/*공개문*/
					  , T1.SEC_AUD_YN
					  , T3.DMS_RSN_CD
					  , F_CODE_NM('1000894', T1.DOC_WRIT_KND_CD)   AS DOC_TYPE
					  , INVST_SUIT_YN
            		  , DMND_PRPS_CHNG_YN
            		  , EVI_MTRL_ADD_PRSN_YN
            		  , ETC_DLY_RSN_YN
            		  , DLY_RSN_DETAIL
            		  , T1.REFER_ENT_RSN
            		  , DECODE(T1.REFER_ENT_RSN, '1', '해당 - 주심위원 심의 필요', '해당없음') AS REFER_ENT_RSN_NM
                  FROM  TBBADFRE012M T1
                       ,TBBADFRE013D T3
                 WHERE  1=1
                   AND  T1.ACP_YR         = T3.ACP_YR(+)
                   AND  T1.ACP_DVSN_CD    = T3.ACP_DVSN_CD(+)
                   AND  T1.ACP_SRNO       = T3.ACP_SRNO(+)
		 ]]>
                   AND  NVL(T1.MG_ACP_YR, T1.ACP_YR)           = #{acpYr}
                   AND  NVL(T1.MG_ACP_DVSN_CD, T1.ACP_DVSN_CD) = #{acpDvsnCd}
                   AND  NVL(T1.MG_ACP_SRNO, T1.ACP_SRNO)       = #{acpSrno}
	</select>
	
	<update id="updateHndlOpnnCd" parameterType="paramMap">
		/* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.updateHndlOpnnCd */
		UPDATE TBBADFRE012M
		   SET FNL_MDF_DH = SYSDATE
		     <if test='hndlOpnnCd != null'>
	         , HNDL_OPNN_CD = #{hndlOpnnCd}
		     </if>
		     <if test='wtVtYn != null'>
	         , WT_VT_YN = #{wtVtYn}
		     </if>
		 WHERE ACP_YR = #{acpYr}
            AND ACP_DVSN_CD = #{acpDvsnCd}
            AND ACP_SRNO = #{acpSrno}
	</update>
    
    <select id="selectDocumentList" parameterType="paramMap" resultType="egovMap" >
        /* kr.go.bai.eip.bad.fre.dao.BADFRE111Mapper.selectDocumentList*/
        /*문서함(문서자체정보)*/
        <![CDATA[
          SELECT CASE WHEN A.RPRT_CD = 'A10700500'     /*부의안 요약 + 부의안 한줄로 처리 */
                    THEN  A.RPRT_NM ||'<br>'|| (SELECT RPRT_NM
                                        FROM TBBADFRE103M ST1
                                        WHERE ST1.ACP_YR = A.ACP_YR
                                        AND ST1.ACP_SRNO = A.ACP_SRNO
                                        AND ST1.ACP_STEP_CD = A.ACP_STEP_CD
                                        AND ST1.ACP_DVSN_CD = A.ACP_DVSN_CD
                                        AND ST1.REF_DY  = A.REF_DY
                                        AND RPRT_CD = 'A10700600')
                    ELSE A.RPRT_NM
               	  END AS RPRT_NM       /*보고서명 */
               , A.RPRT_CD         /*보고서코드*/
               , A.REF_ID
               , A.APV_STA_CD      /*결재상태코드 */
               , F_CODE_NM('1000773',A.APV_STA_CD) AS APV_STA_NM    /*결재상태코드 */
               , A.SORT_SNO        /*보고서순번  */
               , A.DOC_ID          /*결재문서번호 */
               , A.APV_RQS_ID      /*결재ID*/
               , A.SND_DOC_YN /*문서발송여부*/
               , A.EDITOR_WRK_APPL_YN /*에디팅결과반영여부*/
               , (SELECT (CASE WHEN COUNT(DOC_ID) > 0 THEN 'Y' ELSE 'N' END) FROM TBBADFRE111M WHERE ACP_YR = A.ACP_YR AND ACP_DVSN_CD = A.ACP_DVSN_CD AND ACP_SRNO = A.ACP_SRNO AND ACP_STEP_CD = 'D1020' AND DOC_ID = A.REF_ID AND RPRT_CD = 'D10200100') AS QLT_YN
               , (SELECT DECODE(COUNT(1), 0, 'N', 'Y') FROM TBDCMACM023H ST1 WHERE ST1.APV_DOC_NO = A.APV_RQS_ID AND ST1.APVR_STA_CD NOT IN ('301', '201')) AS APV_HIS_YN
               , A.ACP_YR
               , A.ACP_DVSN_CD
               , A.ACP_SRNO
               , F_OPEN_EDIT(A.LINK_URL) AS DOC_TYPE
               , B.WT_VT_YN
               , A.WRIT_CMPT_YN
          FROM TBBADFRE103M AS A
             , TBBADFRE012M AS B
          WHERE 1=1
            AND A.ACP_YR = B.ACP_YR
            AND A.ACP_DVSN_CD = B.ACP_DVSN_CD
            AND A.ACP_SRNO = B.ACP_SRNO
            AND A.ACP_YR = #{acpYr}
            AND A.ACP_DVSN_CD = #{acpDvsnCd}
            AND A.ACP_SRNO = #{acpSrno}
            AND A.ACP_STEP_CD = #{acpStepCd}
         ]]>
       	<if test='acpStepCd == "E1040"'> <!-- 재심 본안심리 -->
              AND A.RPRT_CD NOT IN ('E10400100', 'E10400101', 'E10400300', 'E10400400', 'E10400500', 'E10400600', 'E10400700')
        </if>
        <if test='acpStepCd == "E1050" and tabIndex == "1"'> <!-- 재심 부의준비 -->
              AND A.RPRT_CD  IN ('E10500200', 'E10500300')
       	</if>
        ORDER BY A.SORT_SNO DESC, A.FRT_REGI_DH DESC
    </select>
</mapper>
