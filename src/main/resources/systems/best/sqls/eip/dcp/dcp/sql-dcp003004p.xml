<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.dcp.dcp.dao.DCP003004PMapper">
 	
 	<select id="DCP003004PMainSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP003004PMapper.DCP003004PMainSelect */
		<![CDATA[
			SELECT	A.REQ_DVSN_CD
					,A.ACP_YR
   					,A.CVPT_ACP_NO
   					,A.RM_CVPT_ACP_NO
   					,A.REQR_KND_CD
   					,A.CVPTR_NM
   					,A.RPST_PEN_NM
   					,A.ZCD
   					,A.AD
   					,A.DTL_AD
   					,DECODE(A.TNB,NULL,'',SUBSTR(A.TNB,1,INSTR(A.TNB,'-',1,1)-1)) TNB1
   					,DECODE(A.TNB,NULL,'',SUBSTR(A.TNB,INSTR(A.TNB,'-',1,1)+1,INSTR(A.TNB,'-',1,2)-INSTR(A.TNB,'-',1,1)-1)) AS TNB2
   					,DECODE(A.TNB,NULL,'',SUBSTR(A.TNB,INSTR(A.TNB,'-',1,2)+1)) TNB3
   					,DECODE(A.HPN,NULL,'',SUBSTR(HPN,1,INSTR(HPN,'-',1,1)-1)) HPN1
   					,DECODE(A.HPN,NULL,'',SUBSTR(A.HPN,INSTR(A.HPN,'-',1,1)+1,INSTR(A.HPN,'-',1,2)-INSTR(A.HPN,'-',1,1)-1)) AS HPN2
   					,DECODE(A.HPN,NULL,'',SUBSTR(A.HPN,INSTR(A.HPN,'-',1,2)+1)) HPN3
   					,A.HPN
   					,A.EML_ID
   					,A.EML_DMI_NM
   					,A.MNG_TYP_CD
   					,A.RSLT_NTF_WAY_CD
   					,A.TIT_NM
   					,A.ACP_RUT_CD
   					,NVL(A.INNER_YN,'N') AS INNER_YN
   					,A.INNER_ORG_NM
   			FROM	TBDCPDCP101M A
   			WHERE	1=1
   			AND		A.REQ_DVSN_CD = #{reqDvsnCd}
   			AND		A.ACP_YR = #{acpYr}
   			AND	A.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
			
	</select>
	
	<update id="DCP003004PMainUpdate" parameterType="paramMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP003004PMapper.DCP003004PMainUpdate */
		<![CDATA[
			UPDATE	TBDCPDCP101M
			SET		CVPTR_NM = #{cvptrNm}
					,RPST_PEN_NM = #{rpstPenNm}
					,ZCD = #{zcd}
					,AD = #{ad}
   					,DTL_AD = #{dtlAd}
   					,TNB = DECODE(#{tnb1},NULL,'',#{tnb1}||'-'||#{tnb2}||'-'||#{tnb3})
   					,HPN = DECODE(#{hpn1},NULL,'',#{hpn1}||'-'||#{hpn2}||'-'||#{hpn3})
   					,EML_ID = #{emlId}
   					,EML_DMI_NM = #{emlDmiNm}
   					,RSLT_NTF_WAY_CD = NVL(#{rsltNtfWayCd},'003')
   					,TIT_NM = #{titNm}
   					,INNER_YN = #{innerYn}
   					,INNER_ORG_NM = #{innerOrgNm}
			WHERE	REQ_DVSN_CD = #{reqDvsnCd}
			AND		ACP_YR = #{acpYr}
			AND		CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</update>
	
</mapper> 
