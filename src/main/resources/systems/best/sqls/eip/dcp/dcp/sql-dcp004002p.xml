<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper">
 	
 	<resultMap type="java.util.HashMap" id="mainMap">
	
	<result property="cvptKndCd" column="CVPT_KND_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvptKndNm" column="CVPT_KND_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpYr" column="ACP_YR" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpYrNo" column="ACP_YR_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvptAcpNo" column="CVPT_ACP_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="reqDvsnCd" column="REQ_DVSN_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpDptCd" column="ACP_DPT_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpDptUsrNam" column="ACP_DPT_USR_NAM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="rcepId" column="RCEP_ID" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="usrNam" column="USR_NAM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpDh" column="ACP_DH" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpRutCd" column="ACP_RUT_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acpRutNm" column="ACP_RUT_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="reqrKndNm" column="REQR_KND_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvptrNm" column="CVPTR_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="openYn" column="OPEN_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	<result property="mngTypNm" column="MNG_TYP_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="ad" column="AD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="tnb" column="TNB" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="hpn" column="HPN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="titNm" column="TIT_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
     <result property="rsltNtfWayNm" column="RSLT_NTF_WAY_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="clmNm" column="CLM_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="wrkPlacNm" column="WRK_PLAC_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="subad" column="SUBAD" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="subtnb" column="SUBTNB" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="cvptHndlStaCd" column="CVPT_HNDL_STA_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="docId" column="DOC_ID" jdbcType="VARCHAR"	javaType="java.lang.String" />
     
     <result property="cvptKndDvsnCd" column="CVPT_KND_DVSN_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
     <result property="cvptKndDvsnNm" column="CVPT_KND_DVSN_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	<result property="cvptTxt" column="CVPT_TXT" jdbcType="CLOB"	javaType="java.lang.String" />
	
	<result property="pasvAdmnYn" column="PASV_ADMN_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="atchYn" column="ATCH_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cpnmNm" column="CPNM_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="docSenHis" column="DOC_SEN_HIS" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="rpetYn" column="RPET_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="prcYn" column="PRC_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="hndlDdlnDt" column="HNDL_DDLN_DT" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="bkHndlDdlnDt" column="BK_HNDL_DDLN_DT" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="innerYn" column="INNER_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="innerOrgNm" column="INNER_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	
	<result property="subTnb" column="SUB_TNB" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="subAd" column="SUB_AD" jdbcType="VARCHAR"	javaType="java.lang.String" />
    </resultMap>
 	
 	
 	<select id="DCP004002PMainSelect" parameterType="paramMap"
		resultMap="mainMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PMainSelect */
		<![CDATA[
			SELECT D1.CVPT_KND_CD 
			       ,F_CODE_NM('1000940', D1.CVPT_KND_CD) AS CVPT_KND_NM
			      ,F_CODE_NM('1000944', D1.CVPT_KND_DTL_CD) AS CVPT_KND_DTL_NM
			      ,CASE WHEN D1.REQ_DVSN_CD = '9' THEN D1.ACP_YR||'-이해-'||D1.RM_CVPT_ACP_NO
   					    ELSE D1.ACP_YR||'-청금-'||D1.RM_CVPT_ACP_NO 
   					    END AS ACP_YR_NO
			      ,D1.ACP_YR
			      ,D1.CVPT_ACP_NO
			      ,D1.REQ_DVSN_CD
			      ,D1.ACP_DPT_CD
			      ,F_DPT_INFO(ACP_DPT_CD,'1')||' / '||D2.USR_NAM AS ACP_DPT_USR_NAM
			      ,D1.RCEP_ID
			      ,D2.USR_NAM
			      ,TO_CHAR(D1.ACP_DH, 'YYYY-MM-DD HH24:MI') AS ACP_DH
			      ,D1.ACP_RUT_CD
			      ,F_CODE_NM('1000927', D1.ACP_RUT_CD) AS ACP_RUT_NM
			      ,F_CODE_NM('1000926', D1.REQR_KND_CD) AS REQR_KND_NM
			      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS CVPTR_NM /*20170726 EUNOK 수정 D1.CVPTR_NM */
			      ,D1.OPEN_YN
			      ,F_CODE_NM('1000932', D1.MNG_TYP_CD) AS MNG_TYP_NM
			      ,DECODE(D1.ZCD,NULL,'','(우)'||D1.ZCD||' '||D1.AD||' '||D1.DTL_AD) AS AD
			      ,D1.TNB
			      ,D1.HPN
			      ,F_CODE_NM('1000936',D1.RSLT_NTF_WAY_CD) AS RSLT_NTF_WAY_NM
			      ,D3.CLM_NM
			      ,D3.WRK_PLAC_NM
			      ,D3.TNB AS SUB_TNB
			      ,D3.AD AS SUB_AD
			      ,D1.CVPT_HNDL_STA_CD
			      ,D1.DOC_ID
			      ,D4.CVPT_TXT 
			      ,D1.TIT_NM
			      ,D7.CVPT_KND_DVSN_CD
			      ,F_CODE_NM('1000599', D7.CVPT_KND_DVSN_CD) AS CVPT_KND_DVSN_NM
			      ,D7.PASV_ADMN_YN
			      ,CASE
			         WHEN (SELECT COUNT(FILE_ID)
			          FROM UBKERAPP.ECM_FILE_LIST_VIEW2 X
			         WHERE D1.DOC_ID = X.DOC_ID ) > 0 THEN '첨부파일 있음'
			         ELSE '첨부파일 없음'
			       END AS ATCH_YN
			   		,D1.CPNM_NM
			   		,d7.DOC_SEN_HIS
			   		,F_CODE_NM('1000941',D1.RPET_YN) AS RPET_YN
			   		,CASE WHEN (SELECT COUNT(A.CVPT_ACP_NO)
					   FROM TBDCPDCP601M A
					  WHERE A.ACP_YR = D1.ACP_YR
					     AND A.REQ_DVSN_CD = D1.REQ_DVSN_CD
					     AND A.CVPT_ACP_NO = D1.CVPT_ACP_NO) > 0 THEN 'Y' ELSE 'N' END AS PRC_YN
				    
				    ,TO_CHAR(TO_DATE(D1.HNDL_DDLN_DT),'YYYY-MM-DD') AS HNDL_DDLN_DT 
				    ,TO_CHAR(TO_DATE(D1.BK_HNDL_DDLN_DT),'YYYY-MM-DD') AS BK_HNDL_DDLN_DT 
				    ,NVL(D1.INNER_YN,'N') AS INNER_YN
				    ,D1.INNER_ORG_NM 
				    
			  FROM TBDCPDCP101M D1
			      ,TBDCMACM001M D2
			      ,TBDCPDCP103M D3
			      ,TBDCPDCP102M D4
			      ,TBDCPDCP201M D7
			 WHERE 1=1 
			   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD(+)
			   AND D1.ACP_YR      = D3.ACP_YR(+)
			   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO(+)
			   AND D1.REQ_DVSN_CD = D4.REQ_DVSN_CD(+)
			   AND D1.ACP_YR      = D4.ACP_YR(+)
			   AND D1.CVPT_ACP_NO = D4.CVPT_ACP_NO(+)
			   AND D1.REQ_DVSN_CD = D7.REQ_DVSN_CD(+)
			   AND D1.ACP_YR      = D7.ACP_YR(+)
			   AND D1.CVPT_ACP_NO = D7.CVPT_ACP_NO(+)
			   AND D1.RCEP_ID = D2.USR_ID(+)
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
			
			]]>
	</select>
	
	<select id="DCP004002POrgListSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002POrgListSelect */
	<![CDATA[
	SELECT DECODE(OGN_ORG_DVSN_CD,'10',F_ORG_INFO(ORG_CD, '1'),'20',ORG_NM) AS ORG_NM
	      ,ORG_CD
	      ,F_CODE_NM('1000119', PUB_DVSN_CD) AS PUB_DVSN_NM
	      ,F_ORG_HRK_NM(COPT_SG_CD) AS COPT_SG_NM
	      ,COPT_SG_CD
	      ,REQ_DVSN_CD
	      ,ACP_YR
	      ,CVPT_ACP_NO
	  FROM TBDCPDCP206L
	 WHERE 1=1
	   AND ORG_HIS_DVSN_CD = 1
	   AND ACP_YR      = #{acpYr}
	   AND CVPT_ACP_NO = #{cvptAcpNo}
	   AND REQ_DVSN_CD = #{reqDvsnCd} 
	 
	]]>
	</select>
	
	
	<select id="DCP004002PHabListSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PHabListSelect */
	<![CDATA[
			SELECT DISTINCT D2.CVPT_KND_CD ,
			       F_CODE_NM('1000940', D2.CVPT_KND_CD) AS CVPT_KND_NM ,
			       F_CODE_NM('1000944', D2.CVPT_KND_DTL_CD) AS CVPT_KND_DTL_NM ,
			       TO_CHAR(D2.ACP_DH, 'YYYY-MM-DD HH24:MI') AS ACP_DH ,
			       CASE WHEN D2.REQ_DVSN_CD = '9' THEN D2.ACP_YR||'-이해-'||D2.RM_CVPT_ACP_NO
   					    ELSE D2.ACP_YR||'-청금-'||D2.RM_CVPT_ACP_NO 
   					    END AS ACP_YR_NO,
			       D2.TIT_NM ,
			       D2.CVPTR_NM ,
			       'O' AS MAIN_YN ,
			       CASE
			         WHEN D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo} THEN 'O'
			         ELSE ''
			       END AS JEBO_YN
			  FROM TBDCPDCP105L D1,
			       TBDCPDCP101M D2
			 WHERE D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
			   AND ((D1.REQ_DVSN_CD =#{reqDvsnCd}
			                   AND D1.ACP_YR = #{acpYr}
			                   AND D1.CVPT_ACP_NO = #{cvptAcpNo})
			            OR (D1.SUC_REQ_DVSN_CD =#{reqDvsnCd}
			                   AND D1.SUC_ACP_YR = #{acpYr}
			                   AND D1.SUC_CVPT_ACP_NO = #{cvptAcpNo}))
			 UNION
			SELECT DISTINCT D3.CVPT_KND_CD ,
			       F_CODE_NM('1000940', D3.CVPT_KND_CD) AS CVPT_KND_NM ,
			       F_CODE_NM('1000944', D3.CVPT_KND_DTL_CD) AS CVPT_KND_DTL_NM ,
			       TO_CHAR(D3.ACP_DH, 'YYYY-MM-DD HH24:MI') AS ACP_DH ,
			       CASE WHEN D3.REQ_DVSN_CD = '9' THEN D3.ACP_YR||'-이해-'||D3.RM_CVPT_ACP_NO
   					    ELSE D3.ACP_YR||'-청금-'||D3.RM_CVPT_ACP_NO 
   					    END AS ACP_YR_NO,
			       D3.TIT_NM ,
			       D3.CVPTR_NM ,
			       '' AS MAIN_YN ,
			       CASE
			         WHEN D2.SUC_REQ_DVSN_CD = #{reqDvsnCd}
			   AND D2.SUC_ACP_YR = #{acpYr}
			   AND D2.SUC_CVPT_ACP_NO = #{cvptAcpNo} THEN 'O'
			         ELSE ''
			       END AS JEBO_YN
			  FROM TBDCPDCP105L D1,
			       TBDCPDCP105L D2,
			       TBDCPDCP101M D3
			 WHERE D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
			   AND D2.SUC_REQ_DVSN_CD = D3.REQ_DVSN_CD
			   AND D2.SUC_ACP_YR = D3.ACP_YR
			   AND D2.SUC_CVPT_ACP_NO = D3.CVPT_ACP_NO
			   AND ((D1.REQ_DVSN_CD =#{reqDvsnCd}
			                   AND D1.ACP_YR = #{acpYr}
			                   AND D1.CVPT_ACP_NO = #{cvptAcpNo})
			            OR (D1.SUC_REQ_DVSN_CD =#{reqDvsnCd}
			                   AND D1.SUC_ACP_YR = #{acpYr}
			                   AND D1.SUC_CVPT_ACP_NO = #{cvptAcpNo}))
			ORDER BY MAIN_YN, ACP_DH DESC
    ]]>
	</select>
	
	<select id="DCP004002PResultList" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PResultList */
	<![CDATA[
				SELECT REQ_DVSN_CD
				      ,ACP_YR
				      ,CVPT_ACP_NO
				      ,DOC_ID
				      ,SRNO
				      ,CVPT_HNDL_DVSN_CD
				      ,F_CODE_NM('1000943', CVPT_HNDL_DVSN_CD) AS CVPT_HNDL_DVSN_NM
				      ,AUD_RFR_MTRL_TRNF_DPT_CD
				      ,AUD_RFR_MTRL_TRNF_DPT_CD
				      ,CASE WHEN CVPT_HNDL_DVSN_CD = '50' THEN F_DPT_INFO(AUD_RFR_MTRL_TRNF_DPT_CD, '1') 
				      		WHEN CVPT_HNDL_DVSN_CD = '70' THEN F_DPT_INFO(TRNF_DPT_CD, '1') 
				      		ELSE NULL END AS TRNF_DPT_NM
				      ,'첨부파일' AS FILEBUTTON
				  FROM TBDCPDCP205L A
				 WHERE 1=1
				   AND REQ_DVSN_CD = #{reqDvsnCd}
				   AND ACP_YR      = #{acpYr}
				   AND CVPT_ACP_NO = #{cvptAcpNo}
	]]>
	</select>
	
	
	<select id="DCP004002PWiTakOrgListSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PWiTakOrgListSelect */
	<![CDATA[
	SELECT DECODE(NVL(OGN_ORG_DVSN_CD,'10'),'10',F_ORG_INFO(ORG_CD, '1'),'20',ORG_NM) AS ORG_NM
	      ,ORG_CD
	      ,F_CODE_NM('1000119', PUB_DVSN_CD) AS PUB_DVSN_NM
	      ,F_ORG_HRK_NM(COPT_SG_CD) AS COPT_SG_NM
	      ,COPT_SG_CD
	      ,REQ_DVSN_CD
	      ,ACP_YR
	      ,CVPT_ACP_NO
	  FROM TBDCPDCP206L
	 WHERE 1=1
	   AND ACP_YR      = #{acpYr}
	   AND CVPT_ACP_NO = #{cvptAcpNo}
	   AND REQ_DVSN_CD = #{reqDvsnCd} 
	   AND SRNO = #{srno}
	   AND ORG_HIS_DVSN_CD = #{orgHisDvsnCd}
	]]>
	</select>
	
	<select id="DCP004002PSelectLawList" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PSelectLawList */
		<![CDATA[
			SELECT D1.REQ_DVSN_CD
			      ,D1.ACP_YR
			      ,D1.CVPT_ACP_NO
			      ,D1.DGE
			      ,D1.LAW_LNK_ID
			      ,D1.LAW_DTL_TXT
			      ,D2.LAW_NM
			 FROM TBDCPDCP204L D1
			     ,TBBADCMR013M D2
			WHERE 1=1
			  AND D1.LAW_LNK_ID  = D2.LAW_LNK_ID(+)
			  AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			  AND D1.ACP_YR      = #{acpYr}
			  AND D1.CVPT_ACP_NO = #{cvptAcpNo}
			  AND D1.DGE IS NULL
			  ]]>
		</select>
		
		<resultMap type="java.util.HashMap" id="dcp004002pMap">
 			<result property="smgCvptHndlDvsnCd" column="SMG_CVPT_HNDL_DVSN_CD" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="smgCvptHndlDvsnNm" column="SMG_CVPT_HNDL_DVSN_NM" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="ansTxt" column="ANS_TXT" jdbcType="CLOB" javaType="java.lang.String" />
 			<result property="docId" column="DOC_ID" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="opmNtfDvsnCd" column="OPM_NTF_DVSN_CD" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="onrApvCmptDh" column="ONR_APV_CMPT_DH" jdbcType="VARCHAR" javaType="java.lang.String" />
 		</resultMap>
 		
		<select id="DCP004002PSelectResultAns" parameterType="paramMap"
		resultMap="dcp004002pMap">
			/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PSelectResultAns */
		<![CDATA[
			SELECT A.SMG_CVPT_HNDL_DVSN_CD
			      ,F_CODE_NM('1000955', A.SMG_CVPT_HNDL_DVSN_CD) AS SMG_CVPT_HNDL_DVSN_NM
			      ,A.ANS_TXT
			      ,A.DOC_ID
			      ,(CASE WHEN A.OPM_NTF_DVSN_CD = 'Y' THEN '통보' ELSE '미통보' END) AS OPM_NTF_DVSN_CD
			      ,TO_CHAR(
                        NVL(C.ONR_APV_CMPT_DH,
                               (SELECT APV_DH
                                FROM TBDCMACM102L T1
                                WHERE T1.ONR_DOC_MNG_CRD_ID = D.APV_RQS_ID
                                AND T1.APV_HIS_SRNO = (SELECT MAX(APV_HIS_SRNO) 
                                                       FROM TBDCMACM102L
                                                       WHERE ONR_DOC_MNG_CRD_ID = D.APV_RQS_ID))
                        ),'YYYY-MM-DD HH24:MI'
                   ) AS ONR_APV_CMPT_DH
			  FROM TBDCPDCP201M A
			  		, TBDCPDCP301M C
                    , TBDCPDCP603M D
			 WHERE 1=1
			   AND A.REQ_DVSN_CD = #{reqDvsnCd}
			   AND A.ACP_YR      = #{acpYr}
			   AND A.CVPT_ACP_NO = #{cvptAcpNo}
			   AND A.REQ_DVSN_CD = C.REQ_DVSN_CD(+)
			   AND A.ACP_YR = C.ACP_YR(+)
			   AND A.CVPT_ACP_NO = C.CVPT_ACP_NO(+)
			   AND C.CVPT_IFM_DVSN_CD(+) = 'A' 
               AND A.REQ_DVSN_CD = D.REQ_DVSN_CD(+)
			   AND A.ACP_YR = D.ACP_YR(+)
			   AND A.CVPT_ACP_NO = D.CVPT_ACP_NO(+)
               AND D.RPRT_CD(+) = 'G10300100'	/*온나라시행문*/
               AND D.APV_STA_CD(+) = '30'
			 ]]>
		</select>
		
		
		<resultMap type="java.util.HashMap" id="dcp004002pMap2">
 			<result property="rsltRprtHndlRsltNm" column="RSLT_RPRT_HNDL_RSLT_NM" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="hndlDptNm" column="HNDL_DPT_NM" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="usrNam" column="USR_NAM" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="frtRegiDh" column="FRT_REGI_DH" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="inspcRsltUnqTxt" column="INSPC_RSLT_UNQ_TXT" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="docId" column="DOC_ID" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="smgCvptHndlDvsnNm" column="SMG_CVPT_HNDL_DVSN_NM" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="opmNtfDvsnCd" column="OPM_NTF_DVSN_CD" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="ansTxt" column="ANS_TXT" jdbcType="CLOB" javaType="java.lang.String" />
 			<result property="reqDvsnCd" column="REQ_DVSN_CD" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="acpYr" column="ACP_YR" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="cvptAcpNo" column="CVPT_ACP_NO" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="dge" column="DGE" jdbcType="VARCHAR" javaType="java.lang.String" />
 			<result property="srno" column="SRNO" jdbcType="VARCHAR" javaType="java.lang.String" />
 		</resultMap>
		
		<select id="DCP004002PResultDetailSelect" parameterType="paramMap"
		resultMap="dcp004002pMap2">
			/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PResultDetailSelect */
		<![CDATA[
		SELECT F_CODE_NM('1000053', D2.RSLT_RPRT_HNDL_RSLT_CD) AS RSLT_RPRT_HNDL_RSLT_NM
		      ,F_DPT_INFO(D1.HNDL_DPT_CD, '1')  AS HNDL_DPT_NM
		      ,D3.USR_NAM
		      ,TO_CHAR(D1.FRT_REGI_DH, 'YYYY-MM-DD') AS FRT_REGI_DH
		      ,D1.INSPC_RSLT_UNQ_TXT
		      ,D1.DOC_ID
		      ,F_CODE_NM('1000955', D1.SMG_CVPT_HNDL_DVSN_CD) AS SMG_CVPT_HNDL_DVSN_NM
		      ,(CASE WHEN D1.OPM_NTF_DVSN_CD = 'Y' THEN '통보' ELSE '미통보' END) AS OPM_NTF_DVSN_CD
		      ,D1.ANS_TXT  
		      ,D1.REQ_DVSN_CD
		      ,D1.ACP_YR
		      ,D1.CVPT_ACP_NO
		      ,D1.DGE
		      ,D1.ANS_DOC_ID
		      ,D1.RPL_DT
		      ,(SELECT 	MIN(SRNO) 
		      	FROM 	TBDCPDCP205L S1
		      	WHERE 	S1.REQ_DVSN_CD = D1.REQ_DVSN_CD
		      	AND		S1.ACP_YR = D1.ACP_YR
		      	AND		S1.CVPT_ACP_NO = D1.CVPT_ACP_NO
		      	) AS SRNO
		  FROM TBDCPDCP401H D1
		      ,TBDCPDCP402L D2
		      ,TBDCMACM001M D3
		      ,TBDCPDCP205L F
		 WHERE 1=1
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
		   AND D1.ACP_YR      = D2.ACP_YR
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
		   AND D1.DGE         = D2.DGE
		   AND D1.HNDL_PEN_ID = D3.USR_ID(+)
		   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
		   AND D1.ACP_YR      = #{acpYr}
		   AND D1.CVPT_ACP_NO = #{cvptAcpNo} 
		   AND		D1.REQ_DVSN_CD = F.REQ_DVSN_CD
   			AND		D1.ACP_YR = F.ACP_YR
   			AND		D1.CVPT_ACP_NO = F.CVPT_ACP_NO
   			AND		( F.SRNO = (SELECT 	MIN(SRNO) 
								FROM 	TBDCPDCP205L A
								WHERE 	A.REQ_DVSN_CD = #{reqDvsnCd}
								AND		A.ACP_YR = #{acpYr}
								AND		A.CVPT_ACP_NO = #{cvptAcpNo} 
								AND		A.CVPT_HNDL_DVSN_CD <> '70') )
		   ]]>
		</select>
		
		<select id="DCP004002PResultChuBunList" parameterType="paramMap"
		resultType="egovMap">
			/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PResultChuBunList */
		<![CDATA[
		SELECT T1.REQ_DVSN_CD
			      ,T1.ACP_YR
			      ,T1.CVPT_ACP_NO
			      ,T1.DGE
			      ,D1.AUD_YR
			      ,D1.AUD_NO
			      ,D1.DSP_RQ_SNO
			      ,D1.AUD_YR||'-'||D1.AUD_NO||'-'||D1.DSP_RQ_SNO AS DSPRQSNO_AUDYRNO
			      ,D1.TIT_TXT
			      ,(SELECT ORG_NM
					  FROM TBDCMACM015M
					 WHERE ORG_CD = D3.RLTN_ORG_CD) AS ORG_NM
			      ,D2.ENF_BRDV_CD
			      ,F_DPT_INFO(D2.ENF_BRDV_CD,'1') AS ENF_BRDV_NM
			      ,(SELECT CD_NM
					  FROM TBDCMACM013C
					 WHERE CMM_CD_DVSN_CD = '1000002'
					   AND CD = D1.DSP_RQ_KND_CD) AS DSP_RQ_KND_NM
			  FROM TBDCPDCP403L T1
			      ,TBBADEAR001M D1
			      ,TBBADEAR002D D2
			      ,TBBADEAR006M D3
			 WHERE 1=1
			   AND T1.AUD_YR     = D1.AUD_YR
			   AND T1.AUD_NO     = D1.AUD_NO
			   AND T1.DSP_RQ_SNO = D1.DSP_RQ_SNO
			   AND T1.AUD_YR     = D2.AUD_YR
			   AND T1.AUD_NO     = D2.AUD_NO
			   AND T1.DSP_RQ_SNO = D2.DSP_RQ_SNO
			   AND T1.AUD_YR     = D3.AUD_YR
			   AND T1.AUD_NO     = D3.AUD_NO
			   AND T1.DSP_RQ_SNO = D3.DSP_RQ_SNO
			   AND T1.REQ_DVSN_CD= #{reqDvsnCd}
			   AND T1.ACP_YR     = #{acpYr}
			   AND T1.CVPT_ACP_NO= #{cvptAcpNo}
			   AND T1.DGE        = #{dge}
		]]>
		</select>
		
		<select id="DCP004002PResultLawList" parameterType="paramMap"
		resultType="egovMap">
			/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.DCP004002PResultLawList */
		<![CDATA[
			SELECT D1.REQ_DVSN_CD
				      ,D1.ACP_YR
				      ,D1.CVPT_ACP_NO
				      ,D1.DGE
				      ,D1.LAW_LNK_ID
				      ,D1.LAW_DTL_TXT
				      ,D2.LAW_NM
				 FROM TBDCPDCP204L D1
				     ,TBBADCMR013M D2
				WHERE 1=1
				  AND D1.LAW_LNK_ID  = D2.LAW_LNK_ID(+)
				  AND D1.REQ_DVSN_CD = #{reqDvsnCd}
				  AND D1.ACP_YR      = #{acpYr}
				  AND D1.CVPT_ACP_NO = #{cvptAcpNo}
				  AND D1.DGE         = #{dge}
				  ]]>
		</select>
		
		<select id="selectDocInfo" parameterType="paramMap"
		resultType="egovMap">
			/* kr.go.bai.eip.dcp.dcp.dao.DCP004002PMapper.selectDocInfo */
			SELECT
                  A.RPRT_NM ,       /*보고서명 */
                  A.APV_STA_CD ,    /*결재상태코드 */
                  A.DOC_ID ,        /*결재문서번호 */
                  A.APV_RQS_ID,     /*결재요청ID */
                  F_OPEN_EDIT(A.LINK_URL) AS DOC_TYPE  /* 편집기구분 */
             FROM TBDCPDCP603M A
              WHERE A.ACP_YR = #{acpYr}
              AND A.REQ_DVSN_CD = #{reqDvsnCd}
              AND A.CVPT_ACP_NO = #{cvptAcpNo}
              AND A.RPRT_CD  = #{rprtCd}
        </select>
</mapper> 
