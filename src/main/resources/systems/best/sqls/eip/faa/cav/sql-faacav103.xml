<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.bai.eip.faa.cav.dao.FAACAV103EMapper">

    <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
    /* kr.go.bai.eip.faa.cav.dao.FAACAV103EMapper.selectMainList */
        <include refid="include.pageSelct" />
        <![CDATA[
                 SELECT T1.STTC_TYP_CD                                                          AS STTC_TYP_CD
                       ,T1.STTC_CLSF_CD                                                         AS STTC_CLSF_CD
                       ,T1.STTC_TYP_SEQ                                                         AS STTC_TYP_SEQ
                       ,T1.STTC_YR                                                              AS STTC_YR
                       ,T1.STTC_STR_MON                                                         AS STTC_STR_MON
                       ,T1.STTC_END_MON                                                         AS STTC_END_MON
                       ,T1.STTC_PROD_STAD_DY                                                    AS STTC_PROD_STAD_DY
                       ,T1.STTC_DTM_DY                                                          AS STTC_DTM_DY
                       
                       ,CASE WHEN T1.STTC_TYP_CD = '10' THEN '핵심통계'
                             WHEN T1.STTC_TYP_CD = '20' THEN '기타통계'
                         END                                                                    AS STTC_TYP_NM                        
                       ,T2.STTC_TIT                                                             AS STTC_TIT
                       ,T1.STTC_YR || '년 ' || STTC_STR_MON || '월 ~ ' || STTC_END_MON || '월'   AS STTC_PRD   
                       ,NVL(TO_CHAR(T1.STTC_DTM_DY,'YYYY"-"MM"-"DD'),'미확정')                   AS STTC_DTM_DY_NM
                       ,CASE WHEN T1.STTC_DTM_DY IS NULL THEN 'N'
                             ELSE 'Y'
                          END                                                                   AS STTC_DTM_DY_YN
                   FROM TWFAACAV200M T1
                       ,TWFAACAV200B T2
                  WHERE 1=1
                    AND T1.STTC_TYP_CD  = T2.STTC_TYP_CD
                    AND T1.STTC_CLSF_CD = T2.STTC_CLSF_CD
        ]]>
        
		<if test="schSttcTypCd != null and schSttcTypCd != ''">
                    AND T1.STTC_TYP_CD  = #{schSttcTypCd}
		</if>     
		
		<if test="schSttcTit != null and schSttcTit != ''">
                    AND T2.STTC_TIT LIKE '%'||#{schSttcTit}||'%'
		</if>  		  
		
		<if test="schSttcDtmDyYn != null and schSttcDtmDyYn != ''">
                    AND CASE WHEN T1.STTC_DTM_DY IS NULL THEN 'N'
                             ELSE 'Y'
                         END = #{schSttcDtmDyYn}
		</if> 
		
				
                  ORDER BY T1.STTC_TYP_CD
                          ,T1.STTC_CLSF_CD 
                          ,T1.STTC_TYP_SEQ
                          		
        <include refid="include.pageOrder" />       
    </select>
    
    <delete id="deleteSttcMain" parameterType="paramMap">
    /* kr.go.bai.eip.faa.cav.dao.FAACAV103EMapper.deleteSttcMain */
        DELETE 
          FROM TWFAACAV200M 
         WHERE STTC_TYP_CD  = #{sttcTypCd}
           AND STTC_CLSF_CD = #{sttcClsfCd}
           AND STTC_TYP_SEQ = #{sttcTypSeq}          
    </delete>
    
    <delete id="deleteSttcDetail" parameterType="paramMap">
    /* kr.go.bai.eip.faa.cav.dao.FAACAV103EMapper.deleteSttcDetail */
        DELETE 
          FROM TWFAACAV200D 
         WHERE STTC_TYP_CD  = #{sttcTypCd}
           AND STTC_CLSF_CD = #{sttcClsfCd}
           AND STTC_TYP_SEQ = #{sttcTypSeq}          
    </delete>    
    
        
</mapper>