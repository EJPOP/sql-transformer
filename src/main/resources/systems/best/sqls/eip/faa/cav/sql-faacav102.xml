<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.bai.eip.faa.cav.dao.FAACAV102EMapper">

    <select id="selectMainList" parameterType="paramMap" resultType="egovMap">
    /* kr.go.bai.eip.faa.cav.dao.FAACAV102EMapper.selectMainList */
        <include refid="include.pageSelct" />
        <![CDATA[
            SELECT STTC_TYP_CD                                   AS STTC_TYP_CD    /* 통계타입코드 */
                  ,CASE WHEN STTC_TYP_CD = '10' THEN '핵심통계'
                        WHEN STTC_TYP_CD = '20' THEN '기타통계'
                    END                                          AS STTC_TYP_NM    /* 통계타입명 */
                  ,STTC_CLSF_CD                                  AS STTC_CLSF_CD   /* 통계종류코드 */
                  ,STTC_TIT                                      AS STTC_TIT       /* 통계제목 */
                  ,STTC_PPS                                      AS STTC_PPS       /* 통계목적 */ 
                  ,WRIT_TG                                       AS WRIT_TG        /* 작성대상 */
                  ,WRIT_STND                                     AS WRIT_STND      /* 작성기준 */
                  ,APC_CALC_OFCL                                 AS APC_CALC_OFCL  /* 적용계산공식 */
                  ,PRDCTN_ERA                                    AS PRDCTN_ERA     /* 생산시기 */
                  ,MNG_DPT_CD                                    AS MNG_DPT_CD     /* 관리부서코드 */
                  ,F_DPT_INFO(MNG_DPT_CD,'1')                    AS MNG_DPT_NM     /* 관리부서명 */       
              FROM TWFAACAV200B
             WHERE 1=1
        ]]>
        
		<if test="schSttcTypCd != null and schSttcTypCd != ''">
               AND STTC_TYP_CD = #{schSttcTypCd}
		</if>
		        
		<if test="schSttcTit != null and schSttcTit != ''">
               AND STTC_TIT LIKE '%'||#{schSttcTit}||'%'
		</if>
			
			ORDER BY STTC_TYP_CD
			        ,STTC_CLSF_CD
        <include refid="include.pageOrder" />       
    </select>
    
    <update id="updateMain" parameterType="paramMap">
    /* kr.go.bai.eip.faa.cav.dao.FAACAV102EMapper.updateMain */
        <![CDATA[
        		UPDATE TWFAACAV200B
        		   SET STTC_TIT        = #{sttcTit}
        		      ,STTC_PPS        = #{sttcPps}
        		      ,WRIT_TG         = #{writTg}
        		      ,WRIT_STND       = #{writStnd}
        		      ,APC_CALC_OFCL   = #{apcCalcOfcl}
        		      ,PRDCTN_ERA      = #{prdctnEra}
        		      ,MNG_DPT_CD      = #{mngDptCd}
                      ,FNL_USR_ID      = #{usrId}
                      ,FNL_DEAL_DPT_CD = #{dptCd}
                      ,FNL_MNU_ID      = #{menuNo}
                      ,FNL_MDF_DH      = SYSDATE
                WHERE STTC_TYP_CD      = #{sttcTypCd}
                  AND STTC_CLSF_CD     = #{sttcClsfCd}
        ]]>
    </update>
    
        
</mapper>