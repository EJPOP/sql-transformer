<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.geb.awd.dao.GEBAWD003PMapper">
	<select id="selectAudDocList" parameterType="paramMap" resultType="egovMap" >
			/* kr.go.bai.eip.geb.awd.dao.GEBAWD003PMapper.selectAudDocList*/
		<include refid="include.pageSelct" />
		       SELECT B.ACP_STEP_NM, A.RPRT_NM, A.FNL_MDF_DH, A.APV_RQS_ID, A.ACP_DVSN_CD, A.ACP_YR, A.ACP_SRNO, A.ACP_STEP_CD, A.DOC_ID, A.SORT_SNO, A.RPRT_CD, A.FRT_USR_ID, A.FNL_USR_ID, A.FNL_DEAL_DPT_CD, A.FNL_MNU_ID, A.FRT_REGI_DH
	             FROM TBBADFRE103M A
	       INNER JOIN TBBADFRE101M B
	               ON A.ACP_DVSN_CD = B.ACP_DVSN_CD
                  AND A.ACP_YR = B.ACP_YR
	              AND A.ACP_SRNO = B.ACP_SRNO
	              AND A.ACP_STEP_CD = B.ACP_STEP_CD
	            WHERE A.RPRT_NM LIKE '%' || #{schText} || '%'
                <if test="acpDvsnCd != null and acpDvsnCd != ''">
                  AND A.ACP_DVSN_CD = #{acpDvsnCd}
                  </if>                   
	              <if test="acpYr != null and acpYr != ''">
	              AND A.ACP_YR = #{acpYr}
	              </if>
	              <if test="acpSrno != null and acpSrno != ''">
	              AND A.ACP_SRNO = #{acpSrno}
	              </if>
	              <if test="acpStepCd != null and acpStepCd != ''">
	              AND A.ACP_STEP_CD = #{acpStepCd}
	              </if>
	              <if test="docId != null and docId != ''">
	              AND A.DOC_ID = #{docId}
	              </if>
         <include refid = "include.pageOrder"/> 
	</select>
	
	<select id="getAudNoByApvRqsId" parameterType="paramMap" resultType="egovMap" >
			/* kr.go.bai.eip.geb.awd.dao.GEBAWD003PMapper.getAudNoByApvRqsId*/
		       select ACP_DVSN_CD
                    , ACP_YR
		            , ACP_SRNO
				  FROM TBBADFRE103M
				 WHERE APV_RQS_ID = #{apvRqsId}
				   AND ROWNUM = 1
	</select>
	
</mapper> 