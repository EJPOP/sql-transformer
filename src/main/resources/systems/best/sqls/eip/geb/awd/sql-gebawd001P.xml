<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.geb.awd.dao.GEBAWD001PMapper">
	<select id="selectAudDocList" parameterType="paramMap" resultType="egovMap" >
			/* kr.go.bai.eip.geb.awd.dao.GEBAWD001PMapper.selectAudDocList*/
		<include refid="include.pageSelct" />
		       SELECT B.AUD_STEP_NM, 
		              A.RPRT_NM, 
		              A.FNL_MDF_DH, 
		              A.APV_RQS_ID, 
		              A.AUD_YR, 
		              A.AUD_NO, 
		              A.AUD_STEP_CD, 
		              A.DOC_ID, 
		              A.SORT_SNO, 
		              A.RPRT_CD, 
		              A.FRT_USR_ID, 
		              A.FNL_USR_ID, 
		              A.FNL_DEAL_DPT_CD, 
		              A.FNL_MNU_ID, 
		              A.FRT_REGI_DH,
		              A.APV_STA_CD,
		              F_CODE_NM('1000773',A.APV_STA_CD) AS APV_STA_NM,
		              F_OPEN_EDIT(A.LINK_URL) AS DOC_TYPE
	             FROM TBBADDED103M A
	       INNER JOIN TBBADDED101M B
	               ON A.AUD_YR = B.AUD_YR
	              AND A.AUD_NO = B.AUD_NO
	              AND A.AUD_STEP_CD = B.AUD_STEP_CD
	            WHERE A.RPRT_NM LIKE '%' || #{schText} || '%'
	              <if test="audYr != null and audYr != ''">
	              AND A.AUD_YR = #{audYr}
	              </if>
	              <if test="audNo != null and audNo != ''">
	              AND A.AUD_NO = #{audNo}
	              </if>
	              <if test="audStepCd != null and audStepCd != ''">
	              AND A.AUD_STEP_CD = #{audStepCd}
	              </if>
	              <if test="docId != null and docId != ''">
	              AND A.DOC_ID = #{docId}
	              </if>
         <include refid = "include.pageOrder"/> 
	</select>
	
	<select id="getAudNoByApvRqsId" parameterType="paramMap" resultType="egovMap" >
			/* kr.go.bai.eip.geb.awd.dao.GEBAWD001PMapper.getAudNoByApvRqsId*/
		       select AUD_YR
		            , AUD_NO
				  FROM TBBADDED103M
				 WHERE APV_RQS_ID = #{apvRqsId}
				   AND ROWNUM = 1
	</select>
	
</mapper> 