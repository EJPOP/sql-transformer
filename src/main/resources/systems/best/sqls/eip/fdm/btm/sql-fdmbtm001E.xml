<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">   
<mapper namespace="kr.go.bai.eip.fdm.btm.dao.FDMBTM001EMapper">	
	
	<select id="selectAudDocTmpList" parameterType="paramMap" resultType="egovMap" >
		 /* kr.go.bai.eip.fdm.btm.dao.FDMBTM001EMapper.selectAudDocTmpList*/		
		 SELECT NUM,
				TSK_KND_CD,
			    TSK_KND_NM,
			    AUD_DOC_TMP_CD,
			    AUD_DOC_TMP_NM,
			    DOC_ID,
			    HWP_DOC_ID
		  FROM (
		  		SELECT ROWNUM AS NUM,
   				 	   TSK_KND_CD,
				 	   F_CODE_NM('1000787',TSK_KND_CD) AS TSK_KND_NM,
				 	   AUD_DOC_TMP_CD,
				 	   F_CODE_NM('1000770',AUD_DOC_TMP_CD) AS AUD_DOC_TMP_NM,
					   DOC_ID,
					   HWP_DOC_ID
			      FROM TBFDMBTM001M
				 WHERE 1 = 1
				   <if test="cbbAudKnd != null and cbbAudKnd != ''">
				   AND TSK_KND_CD  = #{cbbAudKnd}
				   </if>	
		  	   )
		 WHERE 1 = 1
		   <if test="ipbAudDocTmpNm != null and ipbAudDocTmpNm != ''">
		   AND AUD_DOC_TMP_NM LIKE '%' || #{ipbAudDocTmpNm} || '%'
		   </if> 
		   ORDER BY TSK_KND_CD,AUD_DOC_TMP_CD
	</select>
	
	<delete id="deleteFDMBTM001M" parameterType="paramMap">
		/* kr.go.bai.eip.fdm.btm.dao.FDMBTM001EMapper.deleteFDMBTM001M*/		
		DELETE 
		  FROM TBFDMBTM001M 
         WHERE AUD_DOC_TMP_CD IN ( #{audDocTmpCd} )
	</delete>
	
	<select id="selectDocId" parameterType="paramMap" resultType="egovMap" >
		/* kr.go.bai.eip.fdm.btm.dao.FDMBTM001EMapper.selectDocId*/		
		SELECT DECODE(#{docType},'HWP',HWP_DOC_ID,DOC_ID) AS DOC_ID
		     , DOC_ID		                              AS ODT_DOC_ID
		     , HWP_DOC_ID                                 AS HWP_DOC_ID
	      FROM TBFDMBTM001M
		 WHERE AUD_DOC_TMP_CD = #{audDocTmpCd}		  
	</select>
</mapper>
