<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.dcp.dao.CSPDCP616Mapper">

 	<resultMap type="java.util.HashMap" id="hwpDoc_Map">
	
	<result property="cvPetCateCd" column="CV_PET_CATE_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="year" column="YEAR" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acctNo" column="ACCT_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="jubsoono" column="JUBSOONO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acctDate" column="ACCT_DATE" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPeterNm" column="CV_PETER_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPeterAddr" column="CV_PETER_ADDR" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="supOrgNm" column="SUP_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="relOrgNm" column="REL_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="telno" column="TELNO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="title" column="TITLE" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="singohaisu" column="SINGOHAISU" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	<result property="cvPetSumm" column="CV_PET_SUMM" jdbcType="CLOB"	javaType="java.lang.String" />
	
	
	<result property="cvPetHndlDircCd" column="CV_PET_HNDL_DIRC_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="hndlDeptNm" column="HNDL_DEPT_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acctRouteNm" column="ACCT_ROUTE_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	
	<result property="gwanno" column="GWANNO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPetOriginNm" column="CV_PET_ORIGIN_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPetCauseNm" column="CV_PET_CAUSE_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="regulatoryReformItemYn" column="REGULATORY_REFORM_ITEM_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="frequentOccurYn" column="FREQUENT_OCCUR_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="budgetWasteYn" column="BUDGET_WASTE_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />


    </resultMap>
    
 	<select id="CSPDCP616PMainSelect" parameterType="paramMap"
		resultMap="hwpDoc_Map">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP616Mapper.CSPDCP616PMainSelect */
		<![CDATA[
		SELECT D1.CV_PET_CATE_CD
		      ,D1.YEAR
		      ,D1.ACCT_NO
		      ,D1.YEAR||'-'||D1.CV_PET_CATE_CD||'-'||D1.ACCT_NO AS JUBSOONO
		      ,D1.ACCT_DATE
		      ,D1.CV_PETER_NM
		      ,F_ORG_INFO(D1.SUP_ORG_CD, '1') AS SUP_ORG_NM
		      ,F_ORG_INFO(D1.REL_ORG_CD, '1') AS REL_ORG_NM
		      ,D1.CV_PETER_ADDR
		      ,NVL(D1.CV_PETER_TEL, D1.CV_PETER_TEL2) AS TELNO
		      ,D1.TITLE
		      ,D1.CV_PET_SUMM
		      ,D1.CV_PET_HNDL_DIRC_CD
		      ,F_DPT_INFO(D1.HNDL_DEPT_CD, '1') AS HNDL_DEPT_NM
		      ,(SELECT S1.CD_NM
		          FROM CM_ETCCD S1
		         WHERE 1=1
		           AND S1.CD_TYPE = 'AS18'
		           AND S1.CD = D1.ACCT_ROUTE_CD) AS ACCT_ROUTE_NM
		      ,D1.RE_YN
		      ,D1.PUBLIC_YN
		      ,D1.REPEAT_CNT AS SINGOHAISU
		      ,D1.LAST_REPEAT_YEAR||NVL2(D1.LAST_REPEAT_YEAR, '-', '')||D1.LAST_REPEAT_ACCT_NO AS GWANNO
		      ,(SELECT S2.CD_NM
		          FROM CM_ETCCD S2
		         WHERE 1=1 
		           AND S2.CD_TYPE = 'AS11'
		           AND S2.CD      = D1.CV_PET_ORIGIN_CD) AS CV_PET_ORIGIN_NM
		      ,(SELECT S3.CD_NM
		          FROM CM_ETCCD S3
		         WHERE S3.CD_TYPE = 'AS12'
		           AND S3.CD = D1.CV_PET_CAUSE_CD)  AS CV_PET_CAUSE_NM
		      ,D1.REGULATORY_REFORM_ITEM_YN
		      ,D1.FREQUENT_OCCUR_YN
		      ,D1.BUDGET_WASTE_YN
		  FROM AM_CV_PET_HNDL_DOC D1
		 WHERE 1=1
		   AND D1.CV_PET_CATE_CD = #{cvPetCateCd}
		   AND D1.YEAR           = #{year}
		   AND D1.ACCT_NO        = #{acctNo}
		]]>
		
	</select>

</mapper> 
