<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper">
 	
	<resultMap type="java.util.HashMap" id="CSPDCP419PMainSelect">
		<result property="reqDvsnCd" 		column="REQ_DVSN_CD" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="acpYr" 			column="ACP_YR" 			jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="cvptAcpNo" 		column="CVPT_ACP_NO" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="hmpTrnmHstSrno" column="HMP_TRNM_HST_SRNO" jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="dge" 				column="DGE" 				jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="trnmDh" 			column="TRNM_DH" 			jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="trnmCmptYn" 	column="TRNM_CMPT_YN" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="ifId" 			column="IF_ID" 				jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="trnmTxt" 		column="TRNM_TXT" 			jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="ansTxt" 			column="ANS_TXT" 			jdbcType="VARCHAR" javaType="java.lang.String" />
	</resultMap>
	<!-- 홈페이지 통보이력 : 답변만 보임 -->
 	<select id="CSPDCP419PMainSelect" parameterType="paramMap" 	resultMap="CSPDCP419PMainSelect">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CSPDCP419PMainSelect */
		<![CDATA[
			SELECT	/*CSPDCP419PMainSelect*/
					D1.REQ_DVSN_CD
					,D1.ACP_YR
					,D1.CVPT_ACP_NO
					,D1.HMP_TRNM_HST_SRNO
					,D1.DGE
					,TO_CHAR(TRNM_DH, 'YYYY.MM.DD') AS TRNM_DH
					,D1.TRNM_CMPT_YN
					,D1.IF_ID
					,D1.TRNM_TXT
					,D1.ANS_TXT
			FROM 	TBCSPDCP305H D1
			WHERE	D1.REQ_DVSN_CD = #{reqDvsnCd}
			AND		D1.ACP_YR = #{acpYr}
			AND		D1.CVPT_ACP_NO = #{cvptAcpNo}
			AND		(D1.IF_ID = 'EH_INF-SP-CP-012' OR D1.IF_ID IS NULL)
			ORDER 	BY  D1.TRNM_DH DESC
		]]>
	</select>
	
	<select id="CORCOR419PMainSelect" parameterType="paramMap" 	resultMap="CSPDCP419PMainSelect">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CORCOR419PMainSelect */
		<![CDATA[
			SELECT	/*CSPDCP419PMainSelect*/
					D1.REQ_DVSN_CD
					,D1.ACP_YR
					,D1.CVPT_ACP_NO
					,D1.HMP_TRNM_HST_SRNO
					,D1.DGE
					,TO_CHAR(TRNM_DH, 'YYYY.MM.DD') AS TRNM_DH
					,D1.TRNM_CMPT_YN
					,D1.IF_ID
					,D1.TRNM_TXT
					,D1.ANS_TXT
			FROM 	TBCORCOR305H D1
			WHERE	D1.REQ_DVSN_CD = #{reqDvsnCd}
			AND		D1.ACP_YR = #{acpYr}
			AND		D1.CVPT_ACP_NO = #{cvptAcpNo}
			AND		(D1.IF_ID = 'EH_INF-SP-CP-012' OR D1.IF_ID IS NULL)
			ORDER 	BY  D1.TRNM_DH DESC
		]]>
	</select>
	
	<select id="DCPDCP419PMainSelect" parameterType="paramMap" 	resultMap="CSPDCP419PMainSelect">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.DCPDCP419PMainSelect */
		<![CDATA[
			SELECT	/*CSPDCP419PMainSelect*/
					D1.REQ_DVSN_CD
					,D1.ACP_YR
					,D1.CVPT_ACP_NO
					,D1.HMP_TRNM_HST_SRNO
					,D1.DGE
					,TO_CHAR(TRNM_DH, 'YYYY.MM.DD') AS TRNM_DH
					,D1.TRNM_CMPT_YN
					,D1.IF_ID
					,D1.TRNM_TXT
					,D1.ANS_TXT
			FROM 	TBDCPDCP305H D1
			WHERE	D1.REQ_DVSN_CD = #{reqDvsnCd}
			AND		D1.ACP_YR = #{acpYr}
			AND		D1.CVPT_ACP_NO = #{cvptAcpNo}
			AND		(D1.IF_ID = 'EH_INF-SP-CP-012' OR D1.IF_ID IS NULL)
			ORDER 	BY  D1.TRNM_DH DESC
		]]>
	</select>
	
	<insert id="CSPDCP419PImsiInsert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CSPDCP419PImsiInsert */
		<![CDATA[
			INSERT INTO /*CSPDCP419PImsiInsert*/
						TBCSPDCP305H
			(
				 REQ_DVSN_CD
				,ACP_YR
				,CVPT_ACP_NO
				,HMP_TRNM_HST_SRNO
				,DGE
				,TRNM_DH
				,TRNM_CMPT_YN
				,IF_ID
				,TRNM_TXT
				,ANS_TXT
				,FRT_USR_ID
				,FNL_USR_ID
				,FNL_DEAL_DPT_CD
				,FNL_MNU_ID
				,FRT_REGI_DH
				,FNL_MDF_DH
			)
			VALUES
			(
				 #{reqDvsnCd}
				,#{acpYr}
				,#{cvptAcpNo}
				,#{hmpTrnmHstSrno}
				,#{dge}
				,SYSDATE
				,'N'
				,#{ifId}
				,#{trnmTxt}
				,#{ansTxt}
				,#{frtUsrId}
				,#{fnlUsrId}
				,#{fnlDealDptCd}
				,#{fnlMnuId}
				,SYSDATE
				,SYSDATE
			)
		]]>
	</insert>
	
	<insert id="CORCOR419PImsiInsert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CORCOR419PImsiInsert */
		<![CDATA[
			INSERT INTO /*CSPDCP419PImsiInsert*/
						TBCORCOR305H
			(
				 REQ_DVSN_CD
				,ACP_YR
				,CVPT_ACP_NO
				,HMP_TRNM_HST_SRNO
				,DGE
				,TRNM_DH
				,TRNM_CMPT_YN
				,IF_ID
				,TRNM_TXT
				,ANS_TXT
				,FRT_USR_ID
				,FNL_USR_ID
				,FNL_DEAL_DPT_CD
				,FNL_MNU_ID
				,FRT_REGI_DH
				,FNL_MDF_DH
			)
			VALUES
			(
				 #{reqDvsnCd}
				,#{acpYr}
				,#{cvptAcpNo}
				,#{hmpTrnmHstSrno}
				,#{dge}
				,SYSDATE
				,'N'
				,#{ifId}
				,#{trnmTxt}
				,#{ansTxt}
				,#{frtUsrId}
				,#{fnlUsrId}
				,#{fnlDealDptCd}
				,#{fnlMnuId}
				,SYSDATE
				,SYSDATE
			)
		]]>
	</insert>
	
	<insert id="DCPDCP419PImsiInsert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.DCPDCP419PImsiInsert */
		<![CDATA[
			INSERT INTO /*CSPDCP419PImsiInsert*/
						TBDCPDCP305H
			(
				 REQ_DVSN_CD
				,ACP_YR
				,CVPT_ACP_NO
				,HMP_TRNM_HST_SRNO
				,DGE
				,TRNM_DH
				,TRNM_CMPT_YN
				,IF_ID
				,TRNM_TXT
				,ANS_TXT
				,FRT_USR_ID
				,FNL_USR_ID
				,FNL_DEAL_DPT_CD
				,FNL_MNU_ID
				,FRT_REGI_DH
				,FNL_MDF_DH
			)
			VALUES
			(
				 #{reqDvsnCd}
				,#{acpYr}
				,#{cvptAcpNo}
				,#{hmpTrnmHstSrno}
				,#{dge}
				,SYSDATE
				,'N'
				,#{ifId}
				,#{trnmTxt}
				,#{ansTxt}
				,#{frtUsrId}
				,#{fnlUsrId}
				,#{fnlDealDptCd}
				,#{fnlMnuId}
				,SYSDATE
				,SYSDATE
			)
		]]>
	</insert>
	
	<update id="CSPDCP419PImsiUpdate" parameterType="paramMap" >
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CSPDCP419PImsiUpdate */
		<![CDATA[
			UPDATE 	TBCSPDCP305H
			SET 	ANS_TXT = #{ansTxt}
					,FNL_MDF_DH = SYSDATE
					,FNL_USR_ID = #{fnlUsrId}
					,FNL_DEAL_DPT_CD = #{fnlDealDptCd}
					,FNL_MNU_ID = #{fnlMnuId}
			WHERE	1=1
			AND		REQ_DVSN_CD = #{reqDvsnCd}
			AND		ACP_YR = #{acpYr}
			AND		CVPT_ACP_NO = #{cvptAcpNo}
			AND		HMP_TRNM_HST_SRNO =#{hmpTrnmHstSrno}
		]]>
	</update>
	
	<update id="CORCOR419PImsiUpdate" parameterType="paramMap" >
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CORCOR419PImsiUpdate */
		<![CDATA[
			UPDATE 	TBCORCOR305H
			SET 	ANS_TXT = #{ansTxt}
					,FNL_MDF_DH = SYSDATE
					,FNL_USR_ID = #{fnlUsrId}
					,FNL_DEAL_DPT_CD = #{fnlDealDptCd}
					,FNL_MNU_ID = #{fnlMnuId}
			WHERE	1=1
			AND		REQ_DVSN_CD = #{reqDvsnCd}
			AND		ACP_YR = #{acpYr}
			AND		CVPT_ACP_NO = #{cvptAcpNo}
			AND		HMP_TRNM_HST_SRNO =#{hmpTrnmHstSrno}
		]]>
	</update>
	
	<update id="DCPDCP419PImsiUpdate" parameterType="paramMap" >
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.DCPDCP419PImsiUpdate */
		<![CDATA[
			UPDATE 	TBDCPDCP305H
			SET 	ANS_TXT = #{ansTxt}
					,FNL_MDF_DH = SYSDATE
					,FNL_USR_ID = #{fnlUsrId}
					,FNL_DEAL_DPT_CD = #{fnlDealDptCd}
					,FNL_MNU_ID = #{fnlMnuId}
			WHERE	1=1
			AND		REQ_DVSN_CD = #{reqDvsnCd}
			AND		ACP_YR = #{acpYr}
			AND		CVPT_ACP_NO = #{cvptAcpNo}
			AND		HMP_TRNM_HST_SRNO =#{hmpTrnmHstSrno}
		]]>
	</update>

	<delete id="CSPDCP419PImsiDelete" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CSPDCP419PImsiDelete */
	<![CDATA[
		      DELETE 
                FROM TBCSPDCP305H
               WHERE 1=1
                 AND REQ_DVSN_CD 		= #{reqDvsnCd}
                 AND ACP_YR      		= #{acpYr}
                 AND CVPT_ACP_NO 		= #{cvptAcpNo}
                 AND HMP_TRNM_HST_SRNO 	= #{hmpTrnmHstSrno}
	]]>
	</delete>
	
	<delete id="CORCOR419PImsiDelete" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CORCOR419PImsiDelete */
	<![CDATA[
		      DELETE 
                FROM TBCORCOR305H
               WHERE 1=1
                 AND REQ_DVSN_CD 		= #{reqDvsnCd}
                 AND ACP_YR      		= #{acpYr}
                 AND CVPT_ACP_NO 		= #{cvptAcpNo}
                 AND HMP_TRNM_HST_SRNO 	= #{hmpTrnmHstSrno}
	]]>
	</delete>
	
	<delete id="DCPDCP419PImsiDelete" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.DCPDCPDCP419PImsiDelete */
	<![CDATA[
		      DELETE 
                FROM TBDCPDCP305H
               WHERE 1=1
                 AND REQ_DVSN_CD 		= #{reqDvsnCd}
                 AND ACP_YR      		= #{acpYr}
                 AND CVPT_ACP_NO 		= #{cvptAcpNo}
                 AND HMP_TRNM_HST_SRNO 	= #{hmpTrnmHstSrno}
	]]>
	</delete>
	
 	<select id="CSPDCP419PKeySelect" parameterType="paramMap" 	resultType="egovMap">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CSPDCP419PKeySelect */
		<![CDATA[
			SELECT /*CSPDCP419PKeySelect*/
				   NVL(MAX(D1.HMP_TRNM_HST_SRNO),0)+1 AS HMP_TRNM_HST_SRNO
			  FROM TBCSPDCP305H D1
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>
	
	<select id="CORCOR419PKeySelect" parameterType="paramMap" 	resultType="egovMap">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.CORCOR419PKeySelect */
		<![CDATA[
			SELECT /*CSPDCP419PKeySelect*/
				   NVL(MAX(D1.HMP_TRNM_HST_SRNO),0)+1 AS HMP_TRNM_HST_SRNO
			  FROM TBCORCOR305H D1
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>
	
	<select id="DCPDCP419PKeySelect" parameterType="paramMap" 	resultType="egovMap">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP419Mapper.DCPDCP419PKeySelect */
		<![CDATA[
			SELECT /*DCPDCP419PKeySelect*/
				   NVL(MAX(D1.HMP_TRNM_HST_SRNO),0)+1 AS HMP_TRNM_HST_SRNO
			  FROM TBDCPDCP305H D1
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>
	

</mapper> 
