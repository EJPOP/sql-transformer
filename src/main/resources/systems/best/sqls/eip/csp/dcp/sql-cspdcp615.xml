<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.dcp.dao.CSPDCP615Mapper">

 	<resultMap type="java.util.HashMap" id="hwpDoc_Map">
	
	<result property="year" column="YEAR" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acctNo" column="ACCT_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="jubsoono" column="JUBSOONO" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="acctDate" column="ACCT_DATE" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPeterNm" column="CV_PETER_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="cvPeterAddr" column="CV_PETER_ADDR" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="relOrgNm" column="REL_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="relPsonNm" column="REL_PSON_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="belongOrgCd" column="BELONG_ORG_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="title" column="TITLE" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
	<result property="cvPetSumm" column="CV_PET_SUMM" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="inspecSumm" column="INSPEC_SUMM" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="hndlOpinion" column="HNDL_OPINION" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="inform" column="INFORM" jdbcType="CLOB"	javaType="java.lang.String" />
	
	<result property="cvPetHndlRsltCd" column="CV_PET_HNDL_RSLT_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="solveTypeCd" column="SOLVE_TYPE_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	<result property="unsolveTypeCd" column="UNSOLVE_TYPE_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
	
    </resultMap>
    
 	<select id="CSPDCP615PMainSelect" parameterType="paramMap"
		resultMap="hwpDoc_Map">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP615Mapper.CSPDCP615PMainSelect */
		<![CDATA[
		SELECT D1.CV_PET_CATE_CD
		      ,D1.YEAR
		      ,D1.ACCT_NO
		      ,D1.YEAR||'-'||D1.CV_PET_CATE_CD||'-'||D1.ACCT_NO AS JUBSOONO
		      ,TO_CHAR(TO_DATE(D1.ACCT_DATE, 'YYYYMMDD'), 'YYYY.MM.DD') AS ACCT_DATE
		      ,D1.CV_PETER_NM
		      ,D1.CV_PETER_ADDR
		      ,F_ORG_INFO(D1.REL_ORG_CD, '1') AS REL_ORG_NM
		      ,'' AS REL_PSON_NM
		      ,'' AS BELONG_ORG_CD
		      ,D1.TITLE
		      ,D1.CV_PET_SUMM
		      ,D2.INSPEC_SUMM
		      ,D2.HNDL_OPINION
		      ,D2.INFORM
		      ,D2.CV_PET_HNDL_RSLT_CD
		      ,D2.SOLVE_TYPE_CD
		      ,D2.UNSOLVE_TYPE_CD
		  FROM AM_CV_PET_HNDL_DOC D1
		      ,AM_CV_PET_RSLT_RPT D2
		 WHERE 1=1
		   AND D1.CV_PET_CATE_CD = D2.CV_PET_CATE_CD
		   AND D1.YEAR           = D2.YEAR
		   AND D1.ACCT_NO        = D2.ACCT_NO
		   AND D1.CV_PET_CATE_CD = #{cvPetCateCd}
		   AND D1.YEAR           = #{year}
		   AND D1.ACCT_NO        = #{acctNo}
		]]>
		
	</select>

</mapper> 
