<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.dcp.dao.CSPDCP813Mapper">

 	<select id="CSPDCP813EMainSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP813Mapper.CSPDCP813EMainSelect */
		<include refid = "include.pageSelct"/>
		<![CDATA[
			SELECT	T1.STTM_DVSN_CD
					,T1.ACP_YR
					,T1.STTM_ACP_NO
					,DECODE(T1.RM_STTM_ACP_NO,NULL,NULL,T1.ACP_YR||'-'||'청금-'||T1.RM_STTM_ACP_NO) AS ACP_NO
					,T1.HMP_APL_NO
					,T1.STTM_KND_CD
					,F_CODE_NM('1000758',T1.STTM_KND_CD) AS STTM_KND_NM
					,T1.STTM_KND_DTL_CD
					,F_CODE_NM('1000759',T1.STTM_KND_DTL_CD) AS STTM_KND_DTL_NM
					,T1.NAM
					,T1.TIT_NM
					,TO_CHAR(T1.ACP_DH,'YYYY.MM.DD HH24:MI') AS ACP_DH
					,TO_CHAR(T1.FRT_REGI_DH,'YYYY.MM.DD HH24:MI') AS FRT_REGI_DH
					,T1.ACP_RUT_CD
					,F_CODE_NM('1000761',T1.ACP_RUT_CD) AS ACP_RUT_NM
					,T1.HNDL_STA_CD
					,F_CODE_NM('1000760',T1.HNDL_STA_CD) AS HNDL_STA_NM
					,T1.RM_STTM_ACP_NO
			FROM	TBCSPDCP811M T1
			WHERE	T1.STTM_DVSN_CD = '1'
		]]>
		<if test='sttmKndCd != null and sttmKndCd != ""'>
				AND T1.STTM_KND_CD = #{sttmKndCd}
			</if>
		<if test='sttmKndDtlCd != null and sttmKndDtlCd != ""'>
				AND T1.STTM_KND_DTL_CD = #{sttmKndDtlCd}
			</if>
		<if test='acpYr != null and acpYr != ""'>
				AND	T1.ACP_YR = #{acpYr}
			</if>
		<if test='rmSttmAcpNo != null and rmSttmAcpNo != ""'>
				AND	T1.RM_STTM_ACP_NO = #{rmSttmAcpNo}
			</if>
		<if test='frtRegiDhs != null and frtRegiDhs != ""'>
				AND	TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') &gt;= #{frtRegiDhs}
			</if>
		<if test='frtRegiDhe != null and frtRegiDhe != ""'>
				AND	TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') &lt;= #{frtRegiDhe}
			</if>
		<if test='hndlStaCd != null and hndlStaCd != ""'>
				AND	T1.HNDL_STA_CD = #{hndlStaCd}
			</if>
		<if test='titNm != null and titNm != ""'>
				AND	T1.TIT_NM LIKE '%'||#{titNm}||'%'
			</if>
		<if test='hmpAplNo != null and hmpAplNo != ""'>
				AND	T1.HMP_APL_NO = #{hmpAplNo}
			</if>
		<if test='nam != null and nam != ""'>
				AND	T1.NAM LIKE '%'||#{nam}||'%'
			</if>
		<![CDATA[
			ORDER BY T1.ACP_YR DESC,TO_NUMBER(T1.RM_STTM_ACP_NO) DESC
		]]>
		<include refid = "include.pageOrder"/>
	</select>

</mapper>
