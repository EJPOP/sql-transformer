<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.iit.dao.CSPIIT015Mapper">
	<!-- 현행법령목록 조회 -->
	<select id="CSPIIT015EMainSelect" parameterType="paramMap"
		resultType="egovMap">
        <![CDATA[
			SELECT 	A.LAW_ORG_NM, 		/*법령기관명*/
					A.LAW_LNK_ID,			/*법령연결ID*/
					A.LAW_NM,			/*법령명*/
					A.PCM_DT,		/*공포일*/
					A.LAW_DVSN_NM		/*법령구분명*/
			FROM	TBBADCMR013M A	/*PC장비코드*/
			WHERE	1=1
        ]]>
		<if test='searchNm != null and searchNm != ""'>
			<if test='searchCd == "1"'>
	        			AND	A.LAW_ORG_NM LIKE '%'||#{searchNm}||'%'
	        		</if>
			<if test='searchCd == "2"'>
	        			AND	A.LAW_NM LIKE '%'||#{searchNm}||'%'
	        		</if>
			<if test='searchCd == "3"'>
        			AND	A.LAW_DVSN_NM LIKE '%'||#{searchNm}||'%'
       		</if>
       	</if>
        <![CDATA[
        	ORDER BY A.LAW_LNK_ID
        ]]>
	</select>        
	
	<insert id="CSPIIT015EMainInsert" parameterType="paramMap">
        <![CDATA[
        	INSERT INTO TBBADCMR013M       
			(
					ORG_CD,
					LAW_LNK_ID,
					LAW_ORG_NM,
					LAW_NM,
					PCM_DT,
					PCM_NO,
					ENF_DT,
					LAW_DVSN_CD,
					LAW_DVSN_NM,
					LAW_TIT_CD,
					LAW_TIT_NM,
					LAW_TXT,
					FRT_USR_ID,
					FNL_USR_ID,
					FNL_DEAL_DPT_CD,
					FNL_MNU_ID,
					FRT_REGI_DH,
					FNL_MDF_DH
			) VALUES (
					#{orgCd},
					#{lawLnkId},
					#{lawOrgNm},
					#{lawNm},
					#{pcmDt},
					#{pcmNo},
					#{enfDt},
					#{lawDvsnCd},
					#{lawDvsnNm},
					#{lawTitCd},
					#{lawTitNm},
					#{lawTxt},
					#{frtUsrId},
					#{fnlUsrId},
					#{fnlDealDptCd},
					#{fnlMnuId},
					SYSDATE,
					SYSDATE
			)
        ]]>
	</insert>
	
	<delete id="CSPIIT015EMainDelete">
		<![CDATA[
			DELETE	FROM TBBADCMR013M
		]]>
	</delete>
	
	<!-- 현행법령목록 조회 -->
	<select id="CSPIIT015PMainSelect" parameterType="paramMap"
		resultType="egovMap">
		<include refid="include.pageSelct" /> 
        <![CDATA[
			SELECT 	A.LAW_ORG_NM, 		/*법령기관명*/
					A.LAW_LNK_ID,			/*법령연결ID*/
					A.LAW_NM,			/*법령명*/
					A.PCM_DT,		/*공포일*/
					A.LAW_DVSN_NM		/*법령구분명*/
			FROM	TBBADCMR013M A	/*PC장비코드*/
			WHERE	1=1
        ]]>
		<if test='searchNm != null and searchNm != ""'>
			<if test='searchCd == "1"'>
	        			AND	A.LAW_ORG_NM LIKE '%'||#{searchNm}||'%'
	        		</if>
			<if test='searchCd == "2"'>
	        			AND	A.LAW_NM LIKE '%'||#{searchNm}||'%'
	        		</if>
			<if test='searchCd == "3"'>
	        			AND	A.LAW_DVSN_NM LIKE '%'||#{searchNm}||'%'
	        		</if>
	        		
			<if test='searchCd == null or searchCd == ""'>
        			AND	(A.LAW_ORG_NM LIKE '%'||#{searchNm}||'%' OR 
        				A.LAW_NM LIKE '%'||#{searchNm}||'%' OR
        				A.LAW_LNK_ID LIKE '%'||#{searchNm}||'%' OR
        				A.LAW_DVSN_NM LIKE '%'||#{searchNm}||'%')
       		</if>
       	</if>
        <![CDATA[
        	ORDER BY TO_NUMBER(A.LAW_LNK_ID)
        ]]>
        <include refid="include.pageOrder" />
	</select>   
	
</mapper> 
