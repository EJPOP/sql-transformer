<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC " -//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper">

 	<resultMap type="java.util.HashMap" id="cvptTxt">
 		<result property="homeReqId" column="HOME_REQ_ID" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvYy" column="E_RECV_YY" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvNo" column="E_RECV_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvCd" column="E_RECV_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvNm" column="E_RECV_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvDt" column="E_RECV_DT" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqNm" column="REQ_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqTel" column="REQ_TEL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqEml" column="REQ_EML" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqHp" column="REQ_HP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqZip" column="REQ_ZIP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqAddr1" column="REQ_ADDR1" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqAddr2" column="REQ_ADDR2" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqOrg" column="REQ_ORG" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqBsnNo" column="REQ_BSN_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resNm" column="RES_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resTel" column="RES_TEL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resZip" column="RES_ZIP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resAddr1" column="RES_ADDR1" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resAddr2" column="RES_ADDR2" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboCd" column="JEBO_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboNm" column="JEBO_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboTtl" column="JEBO_TTL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="innerYn" column="INNER_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="innerOrgNm" column="INNER_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
		<result property="jeboCn" column="JEBO_CN" jdbcType="CLOB"	javaType="java.lang.String" />
	</resultMap>

 	<select id="CSPDCP711OINSPCP010Select" parameterType="paramMap"
		resultMap="cvptTxt">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP010Select */
		<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1')  AS HOME_REQ_ID
				   ,D1.ACP_YR AS E_RECV_YY
				   ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
				   ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
				   ,F_CODE_NM('1000361', CVPT_HNDL_STA_CD) AS E_RECV_NM
				   ,TO_CHAR(D1.ACP_DH, 'YYYYMMDDHH24MISS') AS E_RECV_DT
				   ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
				   ,D1.TNB AS REQ_TEL
				   ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM )AS REQ_EML
				   ,D1.HPN AS REQ_HP
				   ,D1.ZCD AS REQ_ZIP
				   ,D1.AD AS REQ_ADDR1
				   ,D1.DTL_AD AS REQ_ADDR2
				   ,D1.CPNM_NM AS REQ_ORG
				   ,D1.BZN AS REQ_BSN_NO
				   ,D2.CLM_NM AS RES_NM
				   ,D2.TNB AS RES_TEL
				   ,D2.ZCD AS RES_ZIP
				   ,D2.AD  AS RES_ADDR1
				   ,D2.DTL_AD AS RES_ADDR2
				   ,D1.CVPT_KND_CD  AS JEBO_CD
				   ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
				   ,D1.TIT_NM AS JEBO_TTL
				   ,D1.INNER_YN 
				   ,D1.INNER_ORG_NM
				   ,D3.CVPT_TXT AS JEBO_CN
				 FROM TBCSPDCP101M D1
				     ,TBCSPDCP103M D2
				     ,TBCSPDCP102M D3
				WHERE 1=1
				  AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
				  AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
				  AND D1.ACP_YR      = D2.ACP_YR(+)
				  AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD
				  AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO
				  AND D1.ACP_YR      = D3.ACP_YR
				  AND D1.REQ_DVSN_CD = #{reqDvsnCd}
				  AND D1.CVPT_ACP_NO = #{cvptAcpNo}
				  AND D1.ACP_YR      = #{acpYr}
   ]]>
	</select>

	<insert id="CSPDCP711OSEND010Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSEND010Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_CP_010
						(	IF_SEQ			/*연계순번*/
							,IF_TYPE		/*송수신키구분(송신SND,수신RCV)*/
							,HOME_REQ_ID	/*홈페이지ID*/
							,REQ_NM			/*제보자명*/
							,REQ_TEL		/*제보자전화번호*/
							,REQ_EML		/*제보자이메일*/
							,REQ_HP			/*제보자휴대전화*/
							,REQ_ZIP		/*제보자우편번호*/
							,REQ_ADDR1		/*제보자주소*/
							,REQ_ADDR2		/*제보자상세주소*/
							,REQ_ORG		/*제보자상호명*/
							,REQ_BSN_NO		/*제보자사업자번호*/
							,RES_NM			/*피제보자명*/
							,RES_TEL		/*피제보자전화번호*/
							,RES_ZIP		/*피제보자우편번호*/
							,RES_ADDR1		/*피제보자주소*/
							,RES_ADDR2		/*피제보자상세주소*/
							,JEBO_CD		/*제보종류코드*/
							,JEBO_NM		/*제보종류명*/
							,JEBO_TTL		/*제보제목*/
							,JEBO_CN		/*제보내용*/
							,E_RECV_YY		/*제보년도*/
							,E_RECV_NO		/*제보번호*/
							,E_RECV_CD		/*제보진행상태코드*/
							,E_RECV_NM		/*제보진행상태명*/
							,E_RECV_DT		/*접수일시*/
							,FRT_USR_ID		/*최초사용자ID*/
							,INNER_YN
							,INNER_ORG_NM
						)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{homeReqId}
						,#{reqNm}
						,#{reqTel}
						,#{reqEml}
						,#{reqHp}
					   	,#{reqZip}
					   	,#{reqAddr1}
					   	,#{reqAddr2}
					   	,#{reqOrg}
						,#{reqBsnNo}
						,#{resNm}
						,#{resTel}
						,#{resZip}
						,#{resAddr1}
						,#{resAddr2}
						,#{jeboCd}
						,#{jeboNm}
						,#{jeboTtl}
						,#{jeboCn}
						,#{eRecvYy}
						,#{eRecvNo}
						,#{eRecvCd}
						,#{eRecvNm}
						,#{eRecvDt}
						,#{frtUsrId}
						,#{innerYn}
						,#{innerOrgNm}
					)
		]]>
	</insert>


	<select id="CSPDCP711OINSPCP011Select" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP011Select */
			<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
			      ,D1.ACP_YR AS E_RECV_YY
			      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			      ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
			      ,F_CODE_NM('1000361', D1.CVPT_HNDL_STA_CD) AS E_RECV_NM
			      ,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS') AS E_DEPL_DT
			      ,(SELECT S1.TNB
			         FROM TBDCMACM002M S1 
			        WHERE S1.DPT_CD = D2.HNDL_DPT_CD
			       ) AS E_DEPT_CD
			      ,F_DPT_INFO(D2.HNDL_DPT_CD, '1') AS E_DEPT_NM
			      ,TO_CHAR(SYSDATE, 'YYYYMMDD') AS HOME_OPEN_DT
			  FROM TBCSPDCP101M D1
			  	   ,TBCSPDCP201M D2
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
			   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR      = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	]]>
	</select>

	<insert id="CSPDCP711OSEND011Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSEND011Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_CP_011
					(	IF_SEQ			/*연계순번*/
						,IF_TYPE		/*송수신키구분*/
						,HOME_REQ_ID	/*홈페이지ID*/
						,E_RECV_YY		/*제보년도*/
						,E_RECV_NO		/*제보번호*/
						,E_RECV_CD		/*제보진행상태코드*/
						,E_RECV_NM		/*제보진행상태명*/
						,E_DEPL_DT		/*부서지정일시*/
						,E_DEPT_CD		/*처리부서코드*/
						,E_DEPT_NM		/*처리부서명*/
						,HOME_OPEN_DT	/*공개일자*/
						,FRT_USR_ID		/*최초사용자ID*/
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{homeReqId}
						,#{eRecvYy}
						,#{eRecvNo}
						,#{eRecvCd}
						,#{eRecvNm}
						,#{eDeplDt}
						,#{eDeptCd}
						,#{eDeptNm}
						,#{homeOpenDt}
						,#{frtUsrId}
					)
		]]>
	</insert>

	<select id="CSPDCP711OINSPCP011SucSelect" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP011SucSelect */
			<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
			      ,D1.ACP_YR AS E_RECV_YY
			      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			      ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
			      ,F_CODE_NM('1000361', D1.CVPT_HNDL_STA_CD) AS E_RECV_NM
			      ,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS') AS E_DEPL_DT
			      ,(SELECT S1.TNB
			         FROM TBDCMACM002M S1 
			        WHERE S1.DPT_CD = D2.HNDL_DPT_CD
			       ) AS E_DEPT_CD
			      ,F_DPT_INFO(D2.HNDL_DPT_CD, '1') AS E_DEPT_NM
			      ,TO_CHAR(SYSDATE, 'YYYYMMDD') AS HOME_OPEN_DT
			  FROM TBCSPDCP101M D1
			  	   ,TBCSPDCP201M D2
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = #{sucReqDvsnCd}
			   AND D1.ACP_YR      = #{sucAcpYr}
			   AND D1.CVPT_ACP_NO = #{sucCvptAcpNo}
			   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR      = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	]]>
	</select>

    <resultMap type="java.util.HashMap" id="cspdcp711Map2">
 		<result property="homeReqId" column="HOME_REQ_ID" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eRecvYy" column="E_RECV_YY" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eRecvNo" column="E_RECV_NO" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eRecvCd" column="E_RECV_CD" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eRecvNm" column="E_RECV_NM" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eCmplDt" column="E_CMPL_DT" jdbcType="VARCHAR" javaType="java.lang.String" />
 		<result property="eAnsCn" column="E_ANS_CN" jdbcType="CLOB" javaType="java.lang.String" />
 		<result property="homeOpenDt" column="HOME_OPEN_DT" jdbcType="VARCHAR" javaType="java.lang.String" />
 	</resultMap>

	<select id="CSPDCP711OINSPCP012Select" parameterType="paramMap"
		resultMap="cspdcp711Map2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP012Select */
	<![CDATA[
	SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
	      ,D1.ACP_YR AS E_RECV_YY
	      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
	      ,'60' AS E_RECV_CD
	      ,F_CODE_NM('1000361', '60') AS E_RECV_NM
	      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
	      ,D2.ANS_TXT AS E_ANS_CN
	      ,TO_CHAR(D2.FRT_REGI_DH, 'YYYYMMDD') AS HOME_OPEN_DT
	  FROM TBCSPDCP101M D1
	      ,TBCSPDCP401H D2
	 WHERE 1=1
	   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
	   AND D1.ACP_YR      = D2.ACP_YR
	   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
	   AND D1.ACP_YR      = #{acpYr}
	   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
	   AND D2.DGE         = #{dge}
	]]>
	</select>


	<insert id="CSPDCP711OSEND012Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSEND012Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_CP_012
					(	IF_SEQ			/*연계순번*/
						,IF_TYPE		/*송수신키구분*/
						,HOME_REQ_ID	/*홈페이지id*/
						,E_RECV_YY		/*제보년도*/
						,E_RECV_NO		/*제보번호*/
						,E_RECV_CD		/*제보진행상태코드*/
						,E_RECV_NM		/*제보진행상태명*/
						,HOME_OPEN_DT	/*공개일자*/
						,E_ANS_CN		/*답변내용*/
						,E_CMPL_DT		/*처리일시*/
						,FRT_USR_ID		/*최초사용자ID*/
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{homeReqId}
						,#{eRecvYy}
						,#{eRecvNo}
						,#{eRecvCd}
						,#{eRecvNm}
						,#{homeOpenDt}
						,#{eAnsCn}
						,#{eCmplDt}
						,#{frtUsrId}
					)
		]]>
	</insert>

	<select id="CSPDCP711OINSPCP012SucSelect" parameterType="paramMap"
		resultMap="cspdcp711Map2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP012SucSelect */
	<![CDATA[
	SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
	      ,D1.ACP_YR AS E_RECV_YY
	      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
	      ,'60' AS E_RECV_CD
	      ,F_CODE_NM('1000361', '60') AS E_RECV_NM
	      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
	      ,D2.ANS_TXT AS E_ANS_CN
	      ,TO_CHAR(D2.FRT_REGI_DH, 'YYYYMMDD') AS HOME_OPEN_DT
	  FROM TBCSPDCP101M D1
	      ,TBCSPDCP401H D2
	 WHERE 1=1
	   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
	   AND D1.ACP_YR      = D2.ACP_YR
	   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	   AND (D1.REQ_DVSN_CD,D1.ACP_YR,D1.CVPT_ACP_NO) IN (	SELECT	SUC_REQ_DVSN_CD, SUC_ACP_YR, SUC_CVPT_ACP_NO
	   														FROM	TBCSPDCP105L S1
															WHERE	S1.REQ_DVSN_CD = #{reqDvsnCd}
															AND		S1.ACP_YR = #{acpYr}
															AND		S1.CVPT_ACP_NO = #{cvptAcpNo})
	   AND D2.DGE         = #{dge}
	]]>
	</select>

	<select id="CSPDCP711OINSPCP012_2Select" parameterType="paramMap"
		resultMap="cspdcp711Map2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP012_2Select */
	<![CDATA[
	SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
	      ,D1.ACP_YR AS E_RECV_YY
	      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
	      ,CASE WHEN D1.CVPT_HNDL_STA_CD = '70' THEN D1.CVPT_HNDL_STA_CD
	      		WHEN D2.CVPT_KND_DVSN_CD = '1' AND CVPT_HNDL_DVSN_CD IN ('60') THEN '40'
	      		WHEN D2.CVPT_KND_DVSN_CD = '2' THEN '60'
	      		ELSE '60' END AS E_RECV_CD
	      ,F_CODE_NM('1000361',CASE WHEN D1.CVPT_HNDL_STA_CD = '70' THEN D1.CVPT_HNDL_STA_CD
	      		WHEN D2.CVPT_KND_DVSN_CD = '1' AND CVPT_HNDL_DVSN_CD IN ('60') THEN '40'
	      		WHEN D2.CVPT_KND_DVSN_CD = '2' THEN '60'
	      		ELSE '60' END) AS E_RECV_NM
	      ,CASE WHEN CVPT_HNDL_DVSN_CD NOT IN ('60') THEN TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') ELSE '' END AS E_CMPL_DT
	      ,D2.ANS_TXT AS E_ANS_CN
	      ,TO_CHAR(D2.FNL_MDF_DH, 'YYYYMMDD') AS HOME_OPEN_DT
	  FROM TBCSPDCP101M D1
	      ,TBCSPDCP201M D2
	      ,TBCSPDCP205L D3
	 WHERE 1=1
	   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
	   AND D1.ACP_YR      = D2.ACP_YR
	   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
	   AND D1.ACP_YR      = #{acpYr}
	   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
	   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD
	   AND D1.ACP_YR      = D3.ACP_YR
	   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO
	   AND D3.SRNO = (	SELECT	MIN(Z.SRNO)
	   					FROM 	TBCSPDCP205L Z
	   					WHERE	 Z.REQ_DVSN_CD = #{reqDvsnCd}
					    AND 	Z.ACP_YR      = #{acpYr}
					    AND 	Z.CVPT_ACP_NO = #{cvptAcpNo} )
	]]>
	</select>

	<select id="CSPDCP711OINSPCP012_2SucSelect" parameterType="paramMap"
		resultMap="cspdcp711Map2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP012_2SucSelect */
	<![CDATA[
	SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
	      ,D1.ACP_YR AS E_RECV_YY
	      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
	      ,CASE WHEN D1.CVPT_HNDL_STA_CD = '70' THEN D1.CVPT_HNDL_STA_CD
	      		WHEN D2.CVPT_KND_DVSN_CD = '1' AND CVPT_HNDL_DVSN_CD IN ('60') THEN '40'
	      		WHEN D2.CVPT_KND_DVSN_CD = '2' THEN '60'
	      		ELSE '60' END AS E_RECV_CD
	      ,F_CODE_NM('1000361',CASE WHEN D1.CVPT_HNDL_STA_CD = '70' THEN D1.CVPT_HNDL_STA_CD
	      		WHEN D2.CVPT_KND_DVSN_CD = '1' AND CVPT_HNDL_DVSN_CD IN ('60') THEN '40'
	      		WHEN D2.CVPT_KND_DVSN_CD = '2' THEN '60'
	      		ELSE '60' END) AS E_RECV_NM
	      ,CASE WHEN CVPT_HNDL_DVSN_CD NOT IN ('60') THEN TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') ELSE '' END AS E_CMPL_DT
	      ,D2.ANS_TXT AS E_ANS_CN
	      ,TO_CHAR(D2.FNL_MDF_DH, 'YYYYMMDD') AS HOME_OPEN_DT
	  FROM TBCSPDCP101M D1
	      ,TBCSPDCP201M D2
	      ,TBCSPDCP205L D3
	 WHERE 1=1
	 AND (D1.REQ_DVSN_CD, D1.ACP_YR, D1.CVPT_ACP_NO) IN (SELECT 	Z.SUC_REQ_DVSN_CD,Z.SUC_ACP_YR,Z.SUC_CVPT_ACP_NO
																FROM	TBCSPDCP105L Z
																WHERE	Z.REQ_DVSN_CD = #{reqDvsnCd}
																AND		Z.ACP_YR = #{acpYr}
																AND		Z.CVPT_ACP_NO = #{cvptAcpNo}
															   )
	   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
	   AND D1.ACP_YR      = D2.ACP_YR
	   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
	   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD
	   AND D1.ACP_YR      = D3.ACP_YR
	   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO
	   AND D1.ACP_RUT_CD <> '8'
	   AND D3.SRNO = (	SELECT	MIN(Z.SRNO)
	   					FROM 	TBCSPDCP205L Z
	   					WHERE	 D1.REQ_DVSN_CD = Z.REQ_DVSN_CD
					    AND 	D1.ACP_YR      = Z.ACP_YR
					    AND 	D1.CVPT_ACP_NO = Z.CVPT_ACP_NO )
	]]>
	</select>

	<resultMap type="java.util.HashMap" id="cvptTxt2">
 		<result property="homeReqId" column="HOME_REQ_ID" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqNm" column="REQ_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboCd" column="JEBO_CD" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboNm" column="JEBO_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqTel" column="REQ_TEL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqEml" column="REQ_EML" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqHp" column="REQ_HP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqZip" column="REQ_ZIP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqAddr1" column="REQ_ADDR1" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqAddr2" column="REQ_ADDR2" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqOrg" column="REQ_ORG" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="reqBsnNo" column="REQ_BSN_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resNm" column="RES_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resTel" column="RES_TEL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resZip" column="RES_ZIP" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resAddr1" column="RES_ADDR1" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resAddr2" column="RES_ADDR2" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboModDt" column="JEBO_MOD_DT" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvYy" column="E_RECV_YY" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="eRecvNo" column="E_RECV_NO" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="resOrg" column="RES_ORG" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboTtl" column="JEBO_TTL" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="innerYn" column="INNER_YN" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="innerOrgNm" column="INNER_ORG_NM" jdbcType="VARCHAR"	javaType="java.lang.String" />
 		<result property="jeboCn" column="JEBO_CN" jdbcType="CLOB"	javaType="java.lang.String" />

	</resultMap>

	<select id="CSPDCP711OINSPCP013Select" parameterType="paramMap"
		resultMap="cvptTxt2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP013Select */
		<![CDATA[
		SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
		      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
		      ,D1.CVPT_KND_CD  AS JEBO_CD
			  ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
		      ,D1.TNB AS REQ_TEL
		      ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM ) AS REQ_EML
		      ,D1.HPN AS REQ_HP
		      ,D1.ZCD AS REQ_ZIP
		      ,D1.AD AS REQ_ADDR1
		      ,D1.DTL_AD AS REQ_ADDR2
		      ,D1.CPNM_NM AS REQ_ORG
		      ,D1.BZN AS REQ_BSN_NO
		      ,D2.CLM_NM AS RES_NM
		      ,D2.TNB AS RES_TEL
		      ,D2.ZCD AS RES_ZIP
		      ,D2.AD AS RES_ADDR1
		      ,D2.DTL_AD RES_ADDR2
		      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS JEBO_MOD_DT
		      ,D1.ACP_YR AS E_RECV_YY
			  ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			  ,	D2.WRK_PLAC_NM AS RES_ORG
			  ,D1.TIT_NM AS JEBO_TTL
			  ,NVL(D1.INNER_YN,'N') AS INNER_YN
			  ,D1.INNER_ORG_NM
			  ,D3.CVPT_TXT AS JEBO_CN
		  FROM TBCSPDCP101M D1
		      ,TBCSPDCP103M D2
		      ,TBCSPDCP102M D3
		 WHERE 1=1
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D2.ACP_YR(+)
		   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD
		   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO
		   AND D1.ACP_YR      = D3.ACP_YR
		   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
		   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
		   AND D1.ACP_YR      = #{acpYr}
	]]>
	</select>

	<insert id="CSPDCP711OSEND013Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSEND013Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_CP_013
					(	IF_SEQ
						,IF_TYPE
						,HOME_REQ_ID
						,REQ_NM
						,REQ_TEL
						,REQ_EML
						,REQ_HP
						,REQ_ZIP
						,REQ_ADDR1
						,REQ_ADDR2
						,REQ_ORG
						,REQ_BSN_NO
						,RES_NM
						,RES_TEL
						,RES_ZIP
						,RES_ADDR1
						,RES_ADDR2
						,JEBO_CD
						,JEBO_NM
						,JEBO_TTL
						,JEBO_CN
						,E_RECV_YY
						,E_RECV_NO
						,JEBO_MOD_DT
						,RES_ORG
						,FRT_USR_ID
						,INNER_YN
						,INNER_ORG_NM
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{homeReqId}
						,#{reqNm}
						,#{reqTel}
						,#{reqEml}
						,#{reqHp}
						,#{reqZip}
						,#{reqAddr1}
						,#{reqAddr2}
						,#{reqOrg}
						,#{reqBsnNo}
						,#{resNm}
						,#{resTel}
						,#{resZip}
						,#{resAddr1}
						,#{resAddr2}
						,#{jeboCd}
						,#{jeboNm}
						,#{jeboTtl}
						,#{jeboCn}
						,#{eRecvYy}
						,#{eRecvNo}
						,#{jeboModDt}
						,#{resOrg}
						,#{frtUsrId}
						,#{innerYn}
						,#{innerOrgNm}
					)
		]]>
	</insert>

	<select id="CSPDCP711OINSPCP013SucSelect" parameterType="paramMap"
		resultMap="cvptTxt2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP013SucSelect */
		<![CDATA[
		SELECT /*CSPDCP711OINSPCP013SucSelect*/ D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
		      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
		      ,D1.CVPT_KND_CD  AS JEBO_CD
			  ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
		      ,D1.TNB AS REQ_TEL
		      ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM ) AS REQ_EML
		      ,D1.HPN AS REQ_HP
		      ,D1.ZCD AS REQ_ZIP
		      ,D1.AD AS REQ_ADDR1
		      ,D1.DTL_AD AS REQ_ADDR2
		      ,D1.CPNM_NM AS REQ_ORG
		      ,D1.BZN AS REQ_BSN_NO
		      ,D2.CLM_NM AS RES_NM
		      ,D2.TNB AS RES_TEL
		      ,D2.ZCD AS RES_ZIP
		      ,D2.AD AS RES_ADDR1
		      ,D2.DTL_AD RES_ADDR2
		      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS JEBO_MOD_DT
		      ,D1.ACP_YR AS E_RECV_YY
			   ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			   ,D2.WRK_PLAC_NM AS RES_ORG
			  ,D1.TIT_NM AS JEBO_TTL
			  ,NVL(D1.INNER_YN,'N') AS INNER_YN
			  ,D1.INNER_ORG_NM
			  ,D3.CVPT_TXT AS JEBO_CN
		  FROM TBCSPDCP101M D1
		      ,TBCSPDCP103M D2
		      ,TBCSPDCP102M D3
		 WHERE 1=1
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D2.ACP_YR(+)
		   AND D1.REQ_DVSN_CD = #{sucReqDvsnCd}
		   AND D1.CVPT_ACP_NO = #{sucCvptAcpNo}
		   AND D1.ACP_YR      = #{sucAcpYr}
		   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D3.ACP_YR(+)
	]]>
	</select>

	<!-- 합건된 얘들 해야함. -->
	<select id="CSPDCP711OINSPCP013Suc_2Select" parameterType="paramMap"
		resultMap="cvptTxt2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP013Suc_2Select */
		<![CDATA[
		SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
		      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
		      ,D1.CVPT_KND_CD  AS JEBO_CD
			  ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
		      ,D1.TNB AS REQ_TEL
		      ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM ) AS REQ_EML
		      ,D1.HPN AS REQ_HP
		      ,D1.ZCD AS REQ_ZIP
		      ,D1.AD AS REQ_ADDR1
		      ,D1.DTL_AD AS REQ_ADDR2
		      ,D1.CPNM_NM AS REQ_ORG
		      ,D1.BZN AS REQ_BSN_NO
		      ,D2.CLM_NM AS RES_NM
		      ,D2.TNB AS RES_TEL
		      ,D2.ZCD AS RES_ZIP
		      ,D2.AD AS RES_ADDR1
		      ,D2.DTL_AD RES_ADDR2
		      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS JEBO_MOD_DT
		      ,D1.ACP_YR AS E_RECV_YY
			  ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			  ,	D2.WRK_PLAC_NM AS RES_ORG
			  ,D1.TIT_NM AS JEBO_TTL
			  ,NVL(D1.INNER_YN,'N') AS INNER_YN
			  ,D1.INNER_ORG_NM 
			  ,D3.CVPT_TXT AS JEBO_CN
		  FROM TBCSPDCP101M D1
		      ,TBCSPDCP103M D2
		      ,TBCSPDCP102M D3
		 WHERE 1=1
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D2.ACP_YR(+)
		   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
		   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
		   AND D1.ACP_YR      = #{acpYr}
		   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D3.ACP_YR(+)

	   UNION ALL

	   SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
		      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
		      ,D1.CVPT_KND_CD  AS JEBO_CD
			  ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
		      ,D1.TNB AS REQ_TEL
		      ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM ) AS REQ_EML
		      ,D1.HPN AS REQ_HP
		      ,D1.ZCD AS REQ_ZIP
		      ,D1.AD AS REQ_ADDR1
		      ,D1.DTL_AD AS REQ_ADDR2
		      ,D1.CPNM_NM AS REQ_ORG
		      ,D1.BZN AS REQ_BSN_NO
		      ,D2.CLM_NM AS RES_NM
		      ,D2.TNB AS RES_TEL
		      ,D2.ZCD AS RES_ZIP
		      ,D2.AD AS RES_ADDR1
		      ,D2.DTL_AD RES_ADDR2
		      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS JEBO_MOD_DT
		      ,D1.ACP_YR AS E_RECV_YY
			  ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			  ,	D2.WRK_PLAC_NM AS RES_ORG
			  ,D1.TIT_NM AS JEBO_TTL
			  ,NVL(D1.INNER_YN,'N') AS INNER_YN
			  ,D1.INNER_ORG_NM
			  ,D3.CVPT_TXT AS JEBO_CN
		  FROM TBCSPDCP101M D1
		      ,TBCSPDCP103M D2
		      ,TBCSPDCP102M D3
		 WHERE 1=1
		   AND (D1.REQ_DVSN_CD, D1.ACP_YR, D1.CVPT_ACP_NO) IN (SELECT 	Z.SUC_REQ_DVSN_CD,Z.SUC_ACP_YR,Z.SUC_CVPT_ACP_NO
																FROM	TBCSPDCP105L Z
																WHERE	Z.REQ_DVSN_CD = #{reqDvsnCd}
																AND		Z.ACP_YR = #{acpYr}
																AND		Z.CVPT_ACP_NO = #{cvptAcpNo}
															   )
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D2.ACP_YR(+)
		   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D3.ACP_YR(+)
	]]>
	</select>
	
	<!-- 합건시 추가 되는 애들만 조회 -->
	<select id="CSPDCP711OINSPCP013Suc_3Select" parameterType="paramMap"
		resultMap="cvptTxt2">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP013Suc_3Select */
		<![CDATA[
		SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
		      ,DECODE(D1.REQR_KND_CD,'1',D1.CVPTR_NM,'2',D1.RPST_PEN_NM,'3',D1.RPST_PEN_NM,'4',D1.CVPTR_NM) AS REQ_NM
		      ,D1.CVPT_KND_CD  AS JEBO_CD
			  ,F_CODE_NM('1000047', D1.CVPT_KND_CD) AS JEBO_NM
		      ,D1.TNB AS REQ_TEL
		      ,DECODE(D1.EML_ID,NULL,'',D1.EML_ID||'@'||D1.EML_DMI_NM ) AS REQ_EML
		      ,D1.HPN AS REQ_HP
		      ,D1.ZCD AS REQ_ZIP
		      ,D1.AD AS REQ_ADDR1
		      ,D1.DTL_AD AS REQ_ADDR2
		      ,D1.CPNM_NM AS REQ_ORG
		      ,D1.BZN AS REQ_BSN_NO
		      ,D2.CLM_NM AS RES_NM
		      ,D2.TNB AS RES_TEL
		      ,D2.ZCD AS RES_ZIP
		      ,D2.AD AS RES_ADDR1
		      ,D2.DTL_AD RES_ADDR2
		      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS JEBO_MOD_DT
		      ,D1.ACP_YR AS E_RECV_YY
			  ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			  ,	D2.WRK_PLAC_NM AS RES_ORG
			  ,D1.TIT_NM AS JEBO_TTL
			  ,NVL(D1.INNER_YN,'N') AS INNER_YN
			  ,D1.INNER_ORG_NM 
			  ,D3.CVPT_TXT AS JEBO_CN
		  FROM TBCSPDCP101M D1
		      ,TBCSPDCP103M D2
		      ,TBCSPDCP102M D3
		 WHERE 1=1
		   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D2.ACP_YR(+)
		   AND D1.REQ_DVSN_CD = #{sucReqDvsnCd}
		   AND D1.CVPT_ACP_NO = #{sucCvptAcpNo}
		   AND D1.ACP_YR      = #{sucAcpYr}
		   AND D1.REQ_DVSN_CD = D3.REQ_DVSN_CD(+)
		   AND D1.CVPT_ACP_NO = D3.CVPT_ACP_NO(+)
		   AND D1.ACP_YR      = D3.ACP_YR(+)
	]]>
	</select>

	<select id="CSPDCP711OINSPCP008HmpAplNoCheck" parameterType="paramMap"
		resultType="java.lang.String">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008HmpAplNoCheck */
	<![CDATA[
	SELECT CASE WHEN COUNT(1) = 0 THEN 'Y' ELSE 'N' END AS HMP_APL_NO_YN
	  FROM TBCSPDCP101M
	 WHERE 1=1
	   AND HMP_APL_NO = #{hmpAplNo}
		]]>
	</select>

	<select id="CSPDCP711OINSPCP008CvptAcpNo" parameterType="paramMap"
		resultType="java.lang.String">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008CvptAcpNo */
	<![CDATA[
				SELECT LPAD(TO_CHAR(NVL(MAX(TO_NUMBER(CVPT_ACP_NO)),0)+1),5,0) AS CVPT_ACP_NO
				  FROM TBCSPDCP101M
				 WHERE 1=1
			       AND REQ_DVSN_CD = '1'
			       AND ACP_YR = SUBSTR(#{acpDh}, 1,4)
		]]>
	</select>

	<insert id="CSPDCP711OINSPCP008Insert101M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008Insert101M */
	<![CDATA[
		 INSERT INTO TBCSPDCP101M
	         (
	          ACP_YR
	         ,REQ_DVSN_CD
	         ,CVPT_ACP_NO
	         ,CVPTR_NM
	         ,TNB
	         ,EML_ID
	         ,EML_DMI_NM
	         ,HPN
	         ,ZCD
	         ,AD
	         ,DTL_AD
	         ,CPNM_NM
	         ,BZN
	         ,CVPT_KND_CD
	         ,DOC_ID
	         ,TIT_NM
	         ,CVPT_HNDL_STA_CD
	         ,ACP_RUT_CD
	         ,REQR_KND_CD
	         ,RSLT_NTF_WAY_CD
	         ,HMP_APL_NO
	         ,FRT_USR_ID
			 ,FNL_USR_ID
			 ,FNL_DEAL_DPT_CD
			 ,FNL_MNU_ID
			 ,FRT_REGI_DH
			 ,FNL_MDF_DH
	         )
	         VALUES
	         (
	         SUBSTR(#{acpDh}, 1,4)
	        ,'1'
	        ,#{cvptAcpNo}
	        ,#{cvptrNm}
	        ,REPLACE(REPLACE(#{tnb},'---',''),'--','')
	        ,DECODE(#{emlId},NULL,'',SUBSTR(#{emlId}, 0, INSTR(#{emlId}, '@') -1))
	        ,DECODE(#{emlId},NULL,'',SUBSTR(#{emlId}, INSTR(#{emlId}, '@') + 1, length(#{emlId})))
	        ,REPLACE(REPLACE(#{hpn},'---',''),'010--','')
	        ,REPLACE(#{zcd},'-','')
	        ,#{ad}
	        ,#{dtlAd}
	        ,#{cpnmNm}
	        ,#{bzn}
	        ,#{cvptKndCd}
	        ,#{docId}
	        ,#{titNm}
	        ,'10'
	        ,'7'
	        ,'1'
	        ,'003'
	        ,#{hmpAplNo}
	        ,'HOMPAGE'
			,'HOMPAGE'
			,'0000'
			,'HOMPAGE'
			,SYSDATE
			,SYSDATE
	         )
	 ]]>
	</insert>


	<insert id="CSPDCP711OINSPCP008Insert103M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008Insert103M */
	<![CDATA[
	INSERT INTO TBCSPDCP103M
            (
             REQ_DVSN_CD
            ,ACP_YR
            ,CVPT_ACP_NO
            ,CLM_NM
            ,TNB
            ,ZCD
            ,AD
            ,DTL_AD
            ,WRK_PLAC_NM
            ,FRT_USR_ID
			,FNL_USR_ID
			,FNL_DEAL_DPT_CD
			,FNL_MNU_ID
			,FRT_REGI_DH
			,FNL_MDF_DH
            )
            VALUES
            (
             '1'
            ,SUBSTR(#{acpDh}, 1,4)
            ,#{cvptAcpNo}
            ,#{clmNm}
            ,REPLACE(REPLACE(#{clmTnb},'---',''),'--','')
            ,REPLACE(#{clmZcd},'-','')
            ,#{clmAd}
            ,#{clmDtlAd}
            ,#{wrkPlacNm}
            ,'HOMEPAGE'
			,'HOMEPAGE'
			,'0000'
			,'HOMEPAGE'
			,SYSDATE
			,SYSDATE
            )
	]]>
	</insert>

	<insert id="CSPDCP711OINSPCP008Insert102M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008Insert102M */
	<![CDATA[
	INSERT INTO TBCSPDCP102M
		   (
		    REQ_DVSN_CD
		   ,ACP_YR
		   ,CVPT_ACP_NO
		   ,CVPT_TXT
		   ,FRT_USR_ID
		   ,FNL_USR_ID
		   ,FNL_DEAL_DPT_CD
		   ,FNL_MNU_ID
		   ,FRT_REGI_DH
		   ,FNL_MDF_DH
		   )
		   VALUES
		   (
		   '1'
		   ,SUBSTR(#{acpDh}, 1,4)
		   ,#{cvptAcpNo}
		   ,#{cvptTxt}
		   ,'HOMEPAGE'
		   ,'HOMEPAGE'
		   ,'0000'
		   ,'HOMEPAGE'
		   ,SYSDATE
		   ,SYSDATE
		   )
	]]>
	</insert>

	<insert id="CSPDCP711OINSPCP008Insert202H" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP008Insert202H */
	<![CDATA[
	INSERT INTO TBCSPDCP202H
    (
     REQ_DVSN_CD
    ,ACP_YR
    ,CVPT_ACP_NO
    ,CVPT_DTB_HST_SRNO
    ,CVPT_HNDL_STA_CD
    ,FRT_USR_ID
    ,FNL_USR_ID
    ,FNL_DEAL_DPT_CD
    ,FNL_MNU_ID
    ,FRT_REGI_DH
    ,FNL_MDF_DH
    )VALUES
    (
     '1'
    ,SUBSTR(#{acpDh}, 1,4)
    ,#{cvptAcpNo}
    ,1
    ,'10'
    ,'HOMEPAGE'
    ,'HOMEPAGE'
    ,'0000'
    ,'HOMEPAGE'
    ,SYSDATE
    ,SYSDATE
    )
    ]]>
	</insert>


	<update id="CSPDCP711OINSPCP009Update101M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP009Update101M */
	<![CDATA[
			UPDATE TBCSPDCP101M
			   SET CVPTR_NM     = #{cvptrNm}
			      ,TNB         = REPLACE(REPLACE(#{tnb},'---',''),'--','')
			      ,EML_ID      = DECODE(#{emlId},NULL,'',SUBSTR(#{emlId}, 0, INSTR(#{emlId}, '@') -1))
			      ,EML_DMI_NM  = DECODE(#{emlId},NULL,'',SUBSTR(#{emlId}, INSTR(#{emlId}, '@') + 1, length(#{emlId})))
			      ,HPN         = REPLACE(REPLACE(#{hpn},'---',''),'010--','')
			      ,ZCD         = REPLACE(#{zcd},'-','')
			      ,AD          = #{ad}
			      ,DTL_AD      = #{dtlAd}
			      ,CPNM_NM     = #{cpnmNm}
			      ,BZN         = #{bzn}
			      ,TIT_NM      = #{titNm}
			      ,FNL_MNU_ID      = 'HOMEPAGE'
			      ,FNL_MDF_DH      = SYSDATE
			WHERE 1=1
			  AND HMP_APL_NO = #{hmpAplNo}

	]]>
	</update>

	<update id="CSPDCP711OINSPCP009Update102M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP009Update102M */
	<![CDATA[
		 UPDATE TBCSPDCP102M D1
		    SET CVPT_TXT = #{cvptTxt}
		       ,D1.FNL_MNU_ID      = 'HOMEPAGE'
		       ,D1.FNL_MDF_DH      = SYSDATE
		  WHERE (D1.REQ_DVSN_CD, D1.ACP_YR, D1.CVPT_ACP_NO)  IN (	SELECT  S1.REQ_DVSN_CD, S1.ACP_YR, S1.CVPT_ACP_NO
		                  											FROM 	TBCSPDCP101M S1
		                 											WHERE	S1.HMP_APL_NO = #{hmpAplNo}
		               											)
	]]>
	</update>

	<update id="CSPDCP711OINSPCP009Update103M" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP009Update103M */
	<![CDATA[
		 UPDATE TBCSPDCP103M D1
		    SET D1.CLM_NM          = #{clmNm}
		       ,D1.TNB             = REPLACE(REPLACE(#{clmTnb},'---',''),'--','')
		       ,D1.ZCD             = REPLACE(#{clmZcd},'-','')
		       ,D1.AD              = #{clmAd}
		       ,D1.DTL_AD          = #{clmDtlAd}
		       ,D1.WRK_PLAC_NM     = #{wrkPlacNm}
		       ,D1.FNL_MNU_ID      = 'HOMEPAGE'
		       ,D1.FNL_MDF_DH      = SYSDATE
		  WHERE (D1.REQ_DVSN_CD, D1.ACP_YR, D1.CVPT_ACP_NO)  IN (	SELECT  S1.REQ_DVSN_CD, S1.ACP_YR, S1.CVPT_ACP_NO
		                  											FROM 	TBCSPDCP101M S1
		                 											WHERE	S1.HMP_APL_NO = #{hmpAplNo}
		               											)
	]]>
	</update>

	<!-- 감사청구 홈페이지 통보 -->
	<select id="CSPDCP711EARSend001Select" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711EARSend001Select */
		<![CDATA[
			SELECT	A.REQ_DVSN_CD
					,A.ACP_YR
					,A.CVPT_ACP_NO
					,DECODE(A.REQ_DVSN_CD,'2','국민감사청구','3','공익감사청구') AS REQ_DVSN_NM
					,A.TIT_NM
					,DECODE(A.REQR_KND_CD,'1',A.CVPTR_NM,'2',A.RPST_PEN_NM,'3',A.RPST_PEN_NM,'4',A.CVPTR_NM) AS CVPTR_NM
					,B.REQR_DVSN_CD
					,F_CODE_NM('1000080',B.REQR_DVSN_CD) AS REQR_DVSN_NM
					,DECODE(A.REQ_DVSN_CD,'2',A.ACP_YR||'-국민-'||A.CVPT_ACP_NO,'3',A.ACP_YR||'-공익-'||A.CVPT_ACP_NO) AS REQ_ACP_NO
					,DECODE(A.REQR_KND_CD,'1','',A.CVPTR_NM) AS CPNM_NM
					,A.TNB
					,A.HPN
					,DECODE(A.EML_ID,'','',A.EML_ID||'@'||A.EML_DMI_NM) AS EML_ID
					,TO_CHAR(A.ACP_DH,'YYYY.MM.DD') AS ACP_DT
					,DECODE(#{rsltCd},'08',TO_CHAR(A.CVPT_WDW_DH,'YYYY.MM.DD'),TO_CHAR(TO_DATE(B.AUD_RSLT_RPL_DT),'YYYY.MM.DD')) AS AUD_RSLT_RPL_DT
					,#{homeStaCd} AS CVPT_HNDL_STA_CD
					,#{homeStaNm} AS CVPT_HNDL_STA_NM
					,#{dvsnCd} AS DVSN_CD
					,B.VRF_YN AS VRF_YN
			FROM	TBCSPDCP101M A, TBCSPEAR001M B
			WHERE	A.REQ_DVSN_CD = B.REQ_DVSN_CD
			AND		A.ACP_YR = B.ACP_YR
			AND		A.CVPT_ACP_NO = B.CVPT_ACP_NO
			AND		A.REQ_DVSN_CD = #{reqDvsnCd}
			AND		A.ACP_YR = #{acpYr}
			AND		A.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>

	<insert id="CSPDCP711OSENDEar001Insert" parameterType="paramMap">
	/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSENDEar001Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_AR_001
					(	IF_SEQ
						,IF_TYPE
						,REQ_DVSN_CD
						,ACP_YR
						,CVPT_ACP_NO
						,REQ_DVSN_NM
						,TIT_NM
						,CVPTR_NM
						,REQR_DVSN_CD
						,REQR_DVSN_NM
						,REQ_ACP_NO
						,CPNM_NM
						,TNB
						,HPN
						,EML_ID
						,ACP_DH
						,AUD_RSLT_RPL_DT
						,CVPT_HNDL_STA_CD
						,CVPT_HNDL_STA_NM
						,FRT_USR_ID
						,VRF_YN
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{reqDvsnCd}
						,#{acpYr}
						,#{cvptAcpNo}
						,#{reqDvsnNm}
						,#{titNm}
						,#{cvptrNm}
						,#{reqrDvsnCd}
						,#{reqrDvsnNm}
						,#{reqAcpNo}
						,#{cpnmNm}
						,#{tnb}
						,#{hpn}
						,#{emlId}
						,#{acpDh}
						,#{audRsltRplDt}
						,#{cvptHndlStaCd}
						,#{cvptHndlStaNm}
						,#{frtUsrId}
						,#{vrfYn}
					)
		]]>
	</insert>

	<select id="CSPDCP711EARSend002Select" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711EARSend002Select */
		<![CDATA[
			SELECT	A.REQ_DVSN_CD
					,A.ACP_YR
					,A.CVPT_ACP_NO
					,TO_CHAR(SYSDATE,'YYYY.MM.DD') AS HNDL_DT
					,NVL(B.HNDL_DPT_CD, #{fnlDealDptCd}) AS HNDL_DPT_CD
					,NVL(F_DPT_INFO(B.HNDL_DPT_CD,'1'),F_DPT_INFO(#{fnlDealDptCd},'1')) AS HNDL_DPT_NM
					,NVL(B.HNDL_CHGR_ID,F_USR_INFO(#{sCnb},'1')) AS HNDL_CHGR_ID
					,NVL(F_USR_INFO_BY_ID(B.HNDL_CHGR_ID,'2'),F_USR_INFO(#{sCnb},'2')) AS HNDL_CHGR_NM
					,#{homeStaCd} AS CVPT_HNDL_STA_CD
					,#{homeStaNm} AS CVPT_HNDL_STA_NM
					,'' AS AUD_RSLT_CD
					,'' AS AUD_RSLT_NM
					,#{dvsnCd} AS DVSN_CD
			FROM	TBCSPDCP101M A, TBCSPEAR001M B
			WHERE	A.REQ_DVSN_CD = B.REQ_DVSN_CD
			AND		A.ACP_YR = B.ACP_YR
			AND		A.CVPT_ACP_NO = B.CVPT_ACP_NO
			AND		A.REQ_DVSN_CD = #{reqDvsnCd}
			AND		A.ACP_YR = #{acpYr}
			AND		A.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>

	<insert id="CSPDCP711OSENDEar002Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OSENDEar002Insert */
		<![CDATA[
			INSERT INTO	EH_INF_SP_AR_002
					(	IF_SEQ
						,IF_TYPE
						,REQ_DVSN_CD
						,ACP_YR
						,CVPT_ACP_NO
						,CVPT_HNDL_STA_CD
						,CVPT_HNDL_STA_NM
						,HNDL_DT
						,HNDL_DPT_CD
						,HNDL_DPT_NM
						,HNDL_CHGR_ID
						,HNDL_CHGR_NM
						,AUD_RSLT_CD
						,AUD_RSLT_NM
						,FRT_USR_ID
					)
			VALUES	(	#{ifSeq}
						,'SND'
						,#{reqDvsnCd}
						,#{acpYr}
						,#{cvptAcpNo}
						,#{cvptHndlStaCd}
						,#{cvptHndlStaNm}
						,#{hndlDt}
						,#{hndlDptCd}
						,#{hndlDptNm}
						,#{hndlChgrId}
						,#{hndlChgrNm}
						,#{audRsltCd}
						,#{audRsltNm}
						,#{frtUsrId}
					)

		]]>
	</insert>

	<select id="CSPDCP711EARSend002_2Select" parameterType="paramMap"
		resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711EARSend002_2Select */
		<![CDATA[
			SELECT	A.REQ_DVSN_CD
					,A.ACP_YR
					,A.CVPT_ACP_NO
					,TO_CHAR(SYSDATE,'YYYY.MM.DD') AS HNDL_DT
					,B.HNDL_DPT_CD
					,F_DPT_INFO(B.HNDL_DPT_CD,'1') AS HNDL_DPT_NM
					,B.HNDL_CHGR_ID
					,F_USR_INFO_BY_ID(B.HNDL_CHGR_ID,'2') AS HNDL_CHGR_NM
					,#{homeStaCd} AS CVPT_HNDL_STA_CD
					,#{homeStaNm} AS CVPT_HNDL_STA_NM
					,#{rsltCd} AS AUD_RSLT_CD
					,F_CODE_NM('1000380' , #{rsltCd}) AS AUD_RSLT_NM
					,#{dvsnCd} AS DVSN_CD
			FROM	TBCSPDCP101M A, TBCSPEAR001M B
			WHERE	A.REQ_DVSN_CD = B.REQ_DVSN_CD
			AND		A.ACP_YR = B.ACP_YR
			AND		A.CVPT_ACP_NO = B.CVPT_ACP_NO
			AND		A.REQ_DVSN_CD = #{reqDvsnCd}
			AND		A.ACP_YR = #{acpYr}
			AND		A.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>

	<insert id="CSPDCP711E305Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711E305Insert */
		<![CDATA[
			INSERT INTO	TBCSPDCP305H
					(	REQ_DVSN_CD
						,ACP_YR
						,CVPT_ACP_NO
						,HMP_TRNM_HST_SRNO
						,TRNM_DH
						,TRNM_CMPT_YN
						,IF_ID
						,TRNM_TXT
						,ANS_TXT
						,FRT_USR_ID
      					,FNL_USR_ID
      					,FNL_DEAL_DPT_CD
      					,FNL_MNU_ID
      					,FRT_REGI_DH
      					,FNL_MDF_DH
      				)
      		VALUES	(	#{reqDvsnCd}
						,#{acpYr}
						,#{cvptAcpNo}
						,(	SELECT	NVL(MAX(HMP_TRNM_HST_SRNO),0)+1
							FROM	TBCSPDCP305H
							WHERE	REQ_DVSN_CD = #{reqDvsnCd}
							AND		ACP_YR = #{acpYr}
							AND		CVPT_ACP_NO = #{cvptAcpNo}
						)
						,SYSDATE
						,'Y'
						,#{ifId}
						,#{trnmTxt}
						,#{ansTxt}
       					,#{frtUsrId}
       					,#{fnlUsrId}
       					,#{fnlDealDptCd}
       					,#{fnlMnuId}
       					,SYSDATE
       					,SYSDATE
       				)
		]]>
	</insert>

	<insert id="CSPDCP711E305SucInsert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711E305SucInsert */
		<![CDATA[
			INSERT INTO	TBCSPDCP305H /*CSPDCP711E305SucInsert*/
					(	REQ_DVSN_CD
						,ACP_YR
						,CVPT_ACP_NO
						,HMP_TRNM_HST_SRNO
						,TRNM_DH
						,TRNM_CMPT_YN
						,IF_ID
						,TRNM_TXT
						,ANS_TXT
						,FRT_USR_ID
      					,FNL_USR_ID
      					,FNL_DEAL_DPT_CD
      					,FNL_MNU_ID
      					,FRT_REGI_DH
      					,FNL_MDF_DH
      				)
      		VALUES	(	#{sucReqDvsnCd}
						,#{sucAcpYr}
						,#{sucCvptAcpNo}
						,(	SELECT	NVL(MAX(HMP_TRNM_HST_SRNO),0)+1
							FROM	TBCSPDCP305H
							WHERE	REQ_DVSN_CD = #{sucReqDvsnCd}
							AND		ACP_YR = #{sucAcpYr}
							AND		CVPT_ACP_NO = #{sucCvptAcpNo}
						)
						,SYSDATE
						,'Y'
						,#{ifId}
						,#{trnmTxt}
						,#{ansTxt}
       					,#{frtUsrId}
       					,#{fnlUsrId}
       					,#{fnlDealDptCd}
       					,#{fnlMnuId}
       					,SYSDATE
       					,SYSDATE
       				)
		]]>
	</insert>

	<insert id="CSPDCP711E305Suc_2Insert" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711E305Suc_2Insert */
		<![CDATA[
			INSERT INTO	/*CSPDCP711E305Suc_2Insert*/
						TBCSPDCP305H
					(	REQ_DVSN_CD
						,ACP_YR
						,CVPT_ACP_NO
						,HMP_TRNM_HST_SRNO
						,TRNM_DH
						,TRNM_CMPT_YN
						,IF_ID
						,TRNM_TXT
						,ANS_TXT
						,FRT_USR_ID
      					,FNL_USR_ID
      					,FNL_DEAL_DPT_CD
      					,FNL_MNU_ID
      					,FRT_REGI_DH
      					,FNL_MDF_DH
      				)
	      		SELECT	A.REQ_DVSN_CD
	      				,A.ACP_YR
	      				,A.CVPT_ACP_NO
	      				,(	SELECT	NVL(MAX(HMP_TRNM_HST_SRNO),0)+1
							FROM	TBCSPDCP305H Z
							WHERE	Z.REQ_DVSN_CD = A.REQ_DVSN_CD
							AND		Z.ACP_YR = A.ACP_YR
							AND		Z.CVPT_ACP_NO = A.CVPT_ACP_NO
						)
						,SYSDATE
						,'Y'
						,#{ifId}
						,#{trnmTxt}
						,#{ansTxt}
       					,#{frtUsrId}
       					,#{fnlUsrId}
       					,#{fnlDealDptCd}
       					,#{fnlMnuId}
       					,SYSDATE
       					,SYSDATE
	      		FROM	TBCSPDCP101M A
	      		WHERE	(A.REQ_DVSN_CD, A.ACP_YR,A.CVPT_ACP_NO ) IN (	SELECT 	SUC_REQ_DVSN_CD,SUC_ACP_YR,SUC_CVPT_ACP_NO
																		FROM	TBCSPDCP105L
																		WHERE	REQ_DVSN_CD = #{reqDvsnCd}
																		AND		ACP_YR = #{acpYr}
																		AND		CVPT_ACP_NO = #{cvptAcpNo}
																	  )
		]]>
	</insert>

	<resultMap type="java.util.HashMap" 	id="CSPDCP419PINSPCP012Select">
		<result property="homeReqId"	column="HOME_REQ_ID" 	jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eRecvYy" 	column="E_RECV_YY" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eRecvNo" 	column="E_RECV_NO" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eRecvCd" 	column="E_RECV_CD" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eRecvNm" 	column="E_RECV_NM" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eCmplDt" 	column="E_CMPL_DT" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="eAnsCn" 	column="E_ANS_CN" 		jdbcType="VARCHAR" javaType="java.lang.String" />
		<result property="homeOpenDt" column="HOME_OPEN_DT" 	jdbcType="VARCHAR" javaType="java.lang.String" />
	</resultMap>
	<!-- 중간통보 홈페이지 전송 -->
 	<select id="CSPDCP419PINSPCP012Select" parameterType="paramMap" 	resultMap="CSPDCP419PINSPCP012Select">
 		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP419PINSPCP012Select */
		<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
			      ,D1.ACP_YR AS E_RECV_YY
			      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			      ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
			      ,D3.USR_DFN_TXT_4 AS E_RECV_NM
			      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
			      ,D2.ANS_TXT AS E_ANS_CN
			      ,TO_CHAR(D2.FRT_REGI_DH, 'YYYYMMDD') AS HOME_OPEN_DT
			  FROM TBCSPDCP101M D1
			      ,TBCSPDCP305H D2
			      ,TBDCMACM013C D3
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR      = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
			   AND D3.CMM_CD_DVSN_CD = '1000361'
			   AND D3.CD <> '0000000'
			   AND D1.CVPT_HNDL_STA_CD = D3.CD
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
			   AND D2.HMP_TRNM_HST_SRNO =#{hmpTrnmHstSrno}
		]]>
	</select>

	<update id="CSPDCP419PSendUpdate" parameterType="paramMap" >
		<![CDATA[
			UPDATE 	/*CSPDCP419PSendUpdate*/ TBCSPDCP305H
			SET 	TRNM_DH = SYSDATE
					,TRNM_CMPT_YN = 'Y'
					,IF_ID = #{ifId}
					,TRNM_TXT = #{trnmTxt}
					,ANS_TXT = #{ansTxt}
					,FNL_MDF_DH = SYSDATE
					,FNL_USR_ID = #{fnlUsrId}
					,FNL_DEAL_DPT_CD = #{fnlDealDptCd}
					,FNL_MNU_ID = #{fnlMnuId}
			WHERE	1=1
			AND		REQ_DVSN_CD = #{reqDvsnCd}
			AND		ACP_YR = #{acpYr}
			AND		CVPT_ACP_NO = #{cvptAcpNo}
			AND		HMP_TRNM_HST_SRNO =#{hmpTrnmHstSrno}
		]]>
	</update>

	<select id="CSPDCP516EINSPCP012Select" parameterType="paramMap" resultMap="CSPDCP419PINSPCP012Select">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP516EINSPCP012Select */
		<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
			      ,D1.ACP_YR AS E_RECV_YY
			      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			      ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
			      ,D3.USR_DFN_TXT_4 AS E_RECV_NM
			      ,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
			      ,D2.ANS_TXT AS E_ANS_CN
			      ,TO_CHAR(SYSDATE, 'YYYYMMDD') AS HOME_OPEN_DT
			  FROM TBCSPDCP101M D1
			      ,TBCSPDCP401H D2
			      ,TBDCMACM013C D3
			 WHERE 1=1
			   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR      = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
			   AND D3.CMM_CD_DVSN_CD = '1000361'
			   AND D3.CD <> '0000000'
			   AND D1.CVPT_HNDL_STA_CD = D3.CD
			   AND D1.REQ_DVSN_CD = #{reqDvsnCd}
			   AND D1.ACP_YR      = #{acpYr}
			   AND D1.CVPT_ACP_NO = #{cvptAcpNo}
			   AND D2.DGE = #{dge}
		]]>
	</select>

	<select id="CSPDCP711INSPCP014CheckSelect" parameterType="paramMap" resultType="String">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711INSPCP014CheckSelect */
		<![CDATA[
			SELECT	CVPT_HNDL_STA_CD
			FROM	TBCSPDCP101M
			WHERE	1=1
		]]>
		<if test='hmpAplNo != null and hmpAplNo != ""'>
					AND	HMP_APL_NO = #{hmpAplNo}
				</if>
		<if test='hmpAplNo == null or hmpAplNo == ""'>
					AND	REQ_DVSN_CD ='1'
					AND	ACP_YR = #{acpYr}
					AND	RM_CVPT_ACP_NO = #{rmCvptAcpNo}
				</if>
	</select>

	<update id="CSPDCP711OINSPCP014Update101M" parameterType="paramMap" >
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP014Update101M */
		<![CDATA[
			UPDATE	TBCSPDCP101M
			SET		CVPT_HNDL_STA_CD = #{cvptHndlStaCd}
					,CVPT_WDW_DH = SYSDATE
					,CVPT_WDW_RSN = #{ipAd}
					,WDW_RQS_YN = 'Y'
			WHERE	HMP_APL_NO = #{hmpAplNo}
		]]>
	</update>

	<update id="CSPDCP711OINSPCP014Update101MEmptyHome" parameterType="paramMap" >
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP014Update101MEmptyHome */
		<![CDATA[
			UPDATE	TBCSPDCP101M
			SET		CVPT_HNDL_STA_CD = #{cvptHndlStaCd}
					,CVPT_WDW_DH = SYSDATE
					,CVPT_WDW_RSN = #{ipAd}
					,WDW_RQS_YN = 'Y'
			WHERE	REQ_DVSN_CD = '1'
			AND		RM_CVPT_ACP_NO = #{rmCvptAcpNo}
			AND		ACP_YR = #{acpYr}
		]]>
	</update>

	<insert id="CSPDCP711OINSPCP014Insert202H" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP014Insert202H */
	<![CDATA[
	INSERT INTO TBCSPDCP202H
    (
     REQ_DVSN_CD
    ,ACP_YR
    ,CVPT_ACP_NO
    ,CVPT_DTB_HST_SRNO
    ,CVPT_HNDL_STA_CD
    ,FRT_USR_ID
    ,FNL_USR_ID
    ,FNL_DEAL_DPT_CD
    ,FNL_MNU_ID
    ,FRT_REGI_DH
    ,FNL_MDF_DH
    )
     SELECT	REQ_DVSN_CD, ACP_YR, CVPT_ACP_NO,
     		(	SELECT NVL(MAX(CVPT_DTB_HST_SRNO),0)+1
	     		FROM 	TBCSPDCP202H S1
	     		WHERE 	A.REQ_DVSN_CD =S1.REQ_DVSN_CD
	     		AND		A.ACP_YR = S1.ACP_YR
	     		AND		A.CVPT_ACP_NO = S1.CVPT_ACP_NO
     		)
     		,#{cvptHndlStaCd}
     		,'HOMEPAGE'
		    ,'HOMEPAGE'
		    ,'0000'
		    ,'HOMEPAGE'
		    ,SYSDATE
		    ,SYSDATE
     FROM	TBCSPDCP101M A
     WHERE	HMP_APL_NO = #{hmpAplNo}
    ]]>
	</insert>

	<insert id="CSPDCP711OINSPCP014Insert202HEmptyHome" parameterType="paramMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP711OINSPCP014Insert202HEmptyHome */
	<![CDATA[
	INSERT INTO TBCSPDCP202H
    (
     REQ_DVSN_CD
    ,ACP_YR
    ,CVPT_ACP_NO
    ,CVPT_DTB_HST_SRNO
    ,CVPT_HNDL_STA_CD
    ,FRT_USR_ID
    ,FNL_USR_ID
    ,FNL_DEAL_DPT_CD
    ,FNL_MNU_ID
    ,FRT_REGI_DH
    ,FNL_MDF_DH
    )
     SELECT	REQ_DVSN_CD, ACP_YR, CVPT_ACP_NO,
     		(	SELECT NVL(MAX(CVPT_DTB_HST_SRNO),0)+1
	     		FROM 	TBCSPDCP202H S1
	     		WHERE 	A.REQ_DVSN_CD =S1.REQ_DVSN_CD
	     		AND		A.ACP_YR = S1.ACP_YR
	     		AND		A.CVPT_ACP_NO = S1.CVPT_ACP_NO
     		)
     		,#{cvptHndlStaCd}
     		,'HOMEPAGE'
		    ,'HOMEPAGE'
		    ,'0000'
		    ,'HOMEPAGE'
		    ,SYSDATE
		    ,SYSDATE
     FROM	TBCSPDCP101M A
     WHERE	REQ_DVSN_CD = '1'
     AND	ACP_YR = #{acpYr}
     AND	RM_CVPT_ACP_NO = #{rmCvptAcpNo}
    ]]>
	</insert>

	<select id="CSPDCP420EINSPCP012Select" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP420EINSPCP012Select */
		<![CDATA[
			SELECT	D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1')  AS HOME_REQ_ID
					,D1.ACP_YR AS E_RECV_YY
					,D1.RM_CVPT_ACP_NO AS E_RECV_NO
					,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
					,'취하' AS E_RECV_NM
					,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
					,'귀하께서 제출하신 감사제보(민원)을 취하하여 [감사제보의 처리에 관한 규정] 제18조 제3항([감사원 민원사무처리 규정] 제11조 제2항)에 따라 회신하지 않습니다.' AS E_ANS_CN
					,TO_CHAR(SYSDATE, 'YYYYMMDD') AS HOME_OPEN_DT
			FROM	TBCSPDCP101M D1
			WHERE	D1.REQ_DVSN_CD = #{reqDvsnCd}
			AND		D1.ACP_YR = #{acpYr}
			AND		D1.CVPT_ACP_NO = #{cvptAcpNo}
		]]>
	</select>

	<select id="CSPDCP420EINSPCP012SelectAll" parameterType="paramMap" resultType="egovMap">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP420EINSPCP012SelectAll */
		<![CDATA[
			SELECT	D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1')  AS HOME_REQ_ID
					,D1.ACP_YR AS E_RECV_YY
					,D1.RM_CVPT_ACP_NO AS E_RECV_NO
					,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
					,'취하' AS E_RECV_NM
					,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
					,'귀하께서 제출하신 감사제보(민원)을 취하하여 [감사제보의 처리에 관한 규정] 제18조 제3항([감사원 민원사무처리 규정] 제11조 제2항)에 따라 회신하지 않습니다.' AS E_ANS_CN
					,TO_CHAR(SYSDATE, 'YYYYMMDD') AS HOME_OPEN_DT
			FROM	TBCSPDCP101M D1
			WHERE	D1.REQ_DVSN_CD = #{sucReqDvsnCd}
			AND		D1.ACP_YR = #{sucAcpYr}
			AND		D1.CVPT_ACP_NO = #{sucCvptAcpNo}
		]]>
	</select>

	<resultMap type="java.util.HashMap" id="sendINSPCP811Select">
			<result property="sttmDvsnCd" 			 column="STTM_DVSN_CD" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="acpYr" 						 column="ACP_YR" 						     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmAcpNo" 			 column="STTM_ACP_NO" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="dvsnCd" 			 column="DVSN_CD" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="hmpAplNo" 				 column="HMP_APL_NO" 				     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmKndCd" 			 column="STTM_KND_CD" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmKndDtlCd" 	 column="STTM_KND_DTL_CD" 	     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="nam" 							 column="NAM" 							     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="ein" 							 column="EIN" 							     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="jbNm" 						 column="JB_NM" 						     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="ad" 								 column="AD" 								     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="tnb" 							 column="TNB" 							     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="emlAd" 						 column="EML_AD" 						     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="titNm" 						 column="TIT_NM" 						     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmExcuTxt" 		 column="STTM_EXCU_TXT" 		     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmTxtDh" 			 column="STTM_TXT_DH" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmPlcNm" 			 column="STTM_PLC_NM" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="sttmTxt" 					 column="STTM_TXT" 					     jdbcType="CLOB" javaType="java.lang.String" />
			<result property="rtrnWayTxt" 			 column="RTRN_WAY_TXT" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="rmkTxt" 					 column="RMK_TXT" 					     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="otrOrgNm" 				 column="OTR_ORG_NM" 				     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="inspcAgrYn" 			 column="INSPC_AGR_YN" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="otrInspcAgrYn" 	 column="OTR_INSPC_AGR_YN" 	     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="acpDh" 						 column="ACP_DH" 						     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="hndlStaCd" 			 column="HNDL_STA_CD" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
			<result property="ansTxt" 					 column="ANS_TXT" 					     jdbcType="CLOB" javaType="java.lang.String" />
			<result property="frtRegiDh" 			 column="FRT_REGI_DH" 			     jdbcType="VARCHAR" javaType="java.lang.String" />
	</resultMap>

	<select id="sendINSPCP811Select" parameterType="paramMap" resultMap="sendINSPCP811Select">
		<![CDATA[
			SELECT	T1.STTM_DVSN_CD
					,T1.ACP_YR
					,T1.RM_STTM_ACP_NO AS STTM_ACP_NO
					,#{dvsnCd} AS DVSN_CD
					,T1.HMP_APL_NO
					,T1.STTM_KND_CD
					,T1.STTM_KND_DTL_CD
					,T1.NAM
					,T1.EIN
					,T1.JB_NM
					,T1.AD
					,T1.TNB
					,T1.EML_AD
					,T1.TIT_NM
					,T1.STTM_EXCU_TXT
					,T1.STTM_TXT_DH
					,T1.STTM_PLC_NM
					,T1.STTM_TXT
					,T1.RTRN_WAY_TXT
					,T1.RMK_TXT
					,T1.OTR_ORG_NM
					,T1.INSPC_AGR_YN
					,T1.OTR_INSPC_AGR_YN
					,TO_CHAR(T1.ACP_DH, 'YYYYMMDDHH24MISS') AS ACP_DH
					,T1.HNDL_STA_CD
					,T1.ANS_TXT
					,TO_CHAR(T1.FRT_REGI_DH, 'YYYYMMDDHH24MISS') AS FRT_REGI_DH
			FROM	TBCSPDCP811M T1
			WHERE	T1.STTM_DVSN_CD = '1'
			AND		T1.ACP_YR = #{acpYr}
			AND		T1.STTM_ACP_NO = #{sttmAcpNo}
		]]>
	</select>

	<insert id="sendINSPCP811Insert" parameterType="paramMap">
		<![CDATA[
			INSERT INTO EH_INF_SP_CP_811
					(	IF_SEQ
						,IF_TYPE
						,DVSN_CD
						,HMP_APL_NO
						,STTM_DVSN_CD
						,ACP_YR
						,STTM_ACP_NO
						,STTM_KND_CD
						,STTM_KND_DTL_CD
						,NAM
						,EIN
						,JB_NM
						,AD
						,TNB
						,EML_AD
						,TIT_NM
						,STTM_EXCU_TXT
						,STTM_TXT_DH
						,STTM_PLC_NM
						,STTM_TXT
						,RTRN_WAY_TXT
						,RMK_TXT
						,OTR_ORG_NM
						,INSPC_AGR_YN
						,OTR_INSPC_AGR_YN
						,ACP_DH
						,HNDL_STA_CD
						,ANS_TXT
						,FRT_REGI_DH
					)
				VALUES	(	#{ifSeq}
							,'SND'
							,#{dvsnCd}
							,#{hmpAplNo}
							,#{sttmDvsnCd}
							,#{acpYr}
							,#{sttmAcpNo}
							,#{sttmKndCd}
							,#{sttmKndDtlCd}
							,#{nam}
							,#{ein}
							,#{jbNm}
							,#{ad}
							,#{tnb}
							,#{emlAd}
							,#{titNm}
							,#{sttmExcuTxt}
							,#{sttmTxtDh}
							,#{sttmPlcNm}
							,#{sttmTxt}
							,#{rtrnWayTxt}
							,#{rmkTxt}
							,#{otrOrgNm}
							,#{inspcAgrYn}
							,#{otrInspcAgrYn}
							,#{acpDh}
							,#{hndlStaCd}
							,#{ansTxt}
							,#{frtRegiDh}
						)
		]]>
	</insert>

	<select id="sendINSPCP812Select" parameterType="paramMap" resultType="egovMap">
		<![CDATA[
			SELECT	T2.STTM_DVSN_CD
					,T2.ACP_YR
					,#{rmSttmAcpNo} AS STTM_ACP_NO
					,#{dvsnCd} AS DVSN_CD
					,T2.SRNO
					,T2.RES_NAM
					,T2.RES_TNB
					,T2.RES_JB_NM
					,T2.RES_AD
					,T2.CRP_NM
			FROM	TBCSPDCP812M T2
			WHERE	T2.STTM_DVSN_CD = '1'
			AND		T2.ACP_YR = #{acpYr}
			AND		T2.STTM_ACP_NO = #{sttmAcpNo}
		]]>
	</select>

	<insert id="sendINSPCP812Insert" parameterType="paramMap">
		<![CDATA[
			INSERT INTO
				EH_INF_SP_CP_812
					(  	IF_SEQ
						, IF_TYPE
						, DVSN_CD
						, SRNO
						, HMP_APL_NO
						, STTM_DVSN_CD
						, ACP_YR
						, STTM_ACP_NO
						, RES_NAM
						, RES_TNB
						, RES_JB_NM
						, RES_AD
						, CRP_NM
					)
					VALUES
						(  	#{ifSeq}
							, 'SND'
							, #{dvsnCd}
							, #{srno}
							,#{hmpAplNo}
							,#{sttmDvsnCd}
							,#{acpYr}
							,#{sttmAcpNo}
							, #{resNam}
							, #{resTnb}
							, #{resJbNm}
							, #{resAd}
							, #{crpNm}
						)
		]]>
	</insert>
	
	<select id="CSPDCP516EINSPCP012SucSelect" parameterType="paramMap" resultMap="CSPDCP419PINSPCP012Select">
		/* kr.go.bai.eip.csp.dcp.dao.CSPDCP711Mapper.CSPDCP516EINSPCP012SucSelect */
		<![CDATA[
			SELECT D1.HMP_APL_NO || '|' || D1.CVPT_ACP_NO || '|' || NVL(D1.RM_ACP_KND_CD,'1') AS HOME_REQ_ID
			      ,D1.ACP_YR AS E_RECV_YY
			      ,D1.RM_CVPT_ACP_NO AS E_RECV_NO
			      ,D1.CVPT_HNDL_STA_CD AS E_RECV_CD
			      ,D3.USR_DFN_TXT_4 AS E_RECV_NM
			      ,TO_CHAR(D1.FNL_MDF_DH, 'YYYYMMDDHH24MISS') AS E_CMPL_DT
			      ,D2.ANS_TXT AS E_ANS_CN
			      ,TO_CHAR(D2.FRT_REGI_DH, 'YYYYMMDD') AS HOME_OPEN_DT
			  FROM TBCSPDCP101M D1
			      ,TBCSPDCP401H D2
			      ,TBDCMACM013C D3
			 WHERE 1=1
			   AND (D1.REQ_DVSN_CD, D1.ACP_YR, D1.CVPT_ACP_NO) IN (SELECT 	Z.SUC_REQ_DVSN_CD,Z.SUC_ACP_YR,Z.SUC_CVPT_ACP_NO
																FROM	TBCSPDCP105L Z
																WHERE	Z.REQ_DVSN_CD = #{reqDvsnCd}
																AND		Z.ACP_YR = #{acpYr}
																AND		Z.CVPT_ACP_NO = #{cvptAcpNo}
															   )
			   AND D1.REQ_DVSN_CD = D2.REQ_DVSN_CD
			   AND D1.ACP_YR      = D2.ACP_YR
			   AND D1.CVPT_ACP_NO = D2.CVPT_ACP_NO
			   AND D3.CMM_CD_DVSN_CD = '1000361'
			   AND D3.CD <> '0000000'
			   AND D1.CVPT_HNDL_STA_CD = D3.CD
			   AND D2.DGE = #{dge}
			   AND D1.ACP_RUT_CD <> '8'
		]]>
	</select>
</mapper>
