<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.com.dao.NCOMCodeMapper">

	<select id="CmnCodeSelect" parameterType="paramMap"
		resultType="egovMap">
        <![CDATA[
            SELECT  CMM_CD_DVSN_CD
			      , CD
			      , TSK_CAT_CD
			      , FUNC_CAT_CD
			      , CD_NM
			      , USE_YN
			      , PRD_USE_YN
			      , STR_DT
			      , END_DT
			      , OTPT_SEQ
			      , USR_DFN_TXT_1
			      , USR_DFN_TXT_2
			      , USR_DFN_TXT_3
			      , USR_DFN_TXT_4
			      , USR_DFN_TXT_5
			      , BK_CD_DVSN_NM
			      , BK_CD_NM	
			      , CD_NM||'('||CD||')' AS CDNM_CD	      
			      , '['||CD||']'||CD_NM AS CD_CD_NM
			  FROM TBDCMACM013C
			 WHERE 1=1 
			   AND CD <> '000000000'
		       AND CMM_CD_DVSN_CD = #{cmmCdDvsnCd} 
		       ]]>
		 <if test='audYr == null or audYr == ""'>
		    <if test='cmmCdDvsnCd == "1000739"'>
			    AND SUBSTR(CD, 0,2) LIKE TO_CHAR(SYSDATE, 'YY')
			</if>
		</if>
		<if test='usrDfnTxt1 != null and usrDfnTxt1 != ""'>
			AND USR_DFN_TXT_1 = #{usrDfnTxt1}
		</if>
		<if test='usrDfnTxt2 != null and usrDfnTxt2 != ""'>
			AND USR_DFN_TXT_2 = #{usrDfnTxt2}
		</if>

		<if test='usrDfnTxt3 != null and usrDfnTxt3 != ""'>
			AND USR_DFN_TXT_3 = #{usrDfnTxt3}
		</if>
		<if test='usrDfnTxt4 != null and usrDfnTxt4 != ""'>
			AND USR_DFN_TXT_4 = #{usrDfnTxt4}
		</if>
		<if test='usrDfnTxt5 != null and usrDfnTxt5 != ""'>
			AND USR_DFN_TXT_5 = #{usrDfnTxt5}
		</if>
		<if test='useYn != null and useYn != ""'>
			AND USE_YN = #{useYn}
		</if>
		<if test='cd != null and cd != ""'>
			AND CD = #{cd}
		</if>

		<if test='orderby == "1"'>
			ORDER BY CD_NM
		</if>
		<if test='orderby == "2"'>
			ORDER BY OTPT_SEQ, CD
		</if>
		<if test='orderby == "3"'>
			ORDER BY OTPT_SEQ, CD_NM
		</if>
		<if test='orderby == "4"'>
			ORDER BY CD
		</if>
		<if test='orderby == "5"'>
			ORDER BY DECODE(USE_YN,'Y',1,'N',2), CD_NM
		</if>
		<if test='orderby == null or orderby == ""'>
			ORDER BY OTPT_SEQ, CD
		</if>

	</select>

</mapper> 
