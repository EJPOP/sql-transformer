<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.bai.eip.com.dao.BookMarkMapper">

    <select id="selectBookMark" resultType="String">
    	/*kr.go.bai.eip.com.dao.bookMarkMapper.selectBookMark*/
        SELECT MAX(PGM_ID)
         FROM TBAEPBPS002M
        WHERE CNB = #{cnb}
          AND PGM_ID = #{pgmId}
    </select>

    <insert id="insertBookMark" parameterType="paramMap">
		/*kr.go.bai.eip.com.dao.bookMarkMapper.insertBookMark*/
		INSERT INTO	TBAEPBPS002M
							(	 CNB              /* 사번 */
								,DPT_CD          /* 부서코드 */
								,PGM_ID          /* 메뉴ID */
								,REGI_DT         /* 최초등록일시 */
								,REGI_ID          /* 최초사용자ID */
								,MODI_DT        /* 최종수정일시 */
								,MODI_ID        /* 최종사용자ID */
							)
					VALUES	(
								 #{cnb}
								,#{dptCd}
								,#{pgmId}
								,SYSDATE
								,#{usrId}
								,SYSDATE
								,#{usrId}
							)
	</insert>

	<delete id="deleteBookMark" parameterType="paramMap">
		/*kr.go.bai.eip.com.dao.bookMarkMapper.deleteBookMark*/
		DELETE FROM TBAEPBPS002M
		 WHERE CNB = #{cnb}
           AND PGM_ID = #{pgmId}
	</delete>
    
    <select id="selectMainBookMark" parameterType="egovMap" resultType="paramMap">
        /*kr.go.bai.eip.com.dao.bookMarkMapper.selectMainBookMark*/
        SELECT CNB
              ,DPT_CD
              ,MNU_ID
        FROM   TBAEPBPS003M
        WHERE  1=1
          AND  CNB    = #{cnb}
          AND  DPT_CD = #{dptCd}
          <if test = 'mnuId != null and mnuId != ""'>
            AND  MNU_ID = #{mnuId} 
          </if>
    </select>
    
    <insert id="insertMainBookMark" parameterType="paramMap">
        /*kr.go.bai.eip.com.dao.bookMarkMapper.insertMainBookMark*/
        INSERT INTO TBAEPBPS003M
        (   CNB
           ,DPT_CD
           ,MNU_ID
           ,FRT_USR_ID
           ,FNL_USR_ID
           ,FRT_REGI_DH
           ,FNL_MDF_DH
        ) VALUES (
           #{cnb}
          ,#{dptCd}
          ,#{mnuId}
          ,#{usrId}
          ,#{usrId}
          ,SYSDATE
          ,SYSDATE
        )
    </insert>
    
    <delete id="deleteMainBookMark" parameterType="paramMap">
        /*kr.go.bai.eip.com.dao.bookMarkMapper.deleteMainBookMark*/
        DELETE FROM TBAEPBPS003M
         WHERE CNB    = #{cnb}
           AND DPT_CD = #{dptCd}
           <!--  AND MNU_ID = #{mnuId} -->
    </delete>
    
    <select id="chkMainBookMark" parameterType="paramMap" resultType="Integer">
        /*kr.go.bai.eip.com.dao.bookMarkMapper.chkMainBookMark*/
        SELECT    COUNT(*)
          FROM    TBAEPBPS003M
         WHERE    1=1
           AND    CNB = #{cnb}
           AND    DPT_CD = #{dptCd}
    </select>
</mapper>