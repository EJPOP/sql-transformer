<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="include" >

	<sql id = "pageSelct">
		<![CDATA[ 	
			SELECT * 
			  FROM (		
						SELECT 	T.*
						     , ROW_NUMBER() OVER(
		]]>		
											        <dynamic>
											            <isEmpty property="sortOrder">
											                 $userOrder$
											            </isEmpty>
											            <isNotEmpty property="sortOrder">
											                 $sortOrder$
											            </isNotEmpty>
											       	</dynamic>		
													<![CDATA[ 					                         
															                         ) AS NUM
					        FROM 	( 
									SELECT DT.*
									     , COUNT(1) OVER() AS TOT_CNT
									      $selectOrder$
					        		FROM ( 
        ]]>			
	</sql>
	
	<sql id = "pageOrder">	
		<![CDATA[ 
        							) DT
        ]]>	
			        		<dynamic>
					            <isEmpty property="sortOrder">
					                 $userOrder$
					            </isEmpty>
					            <isNotEmpty property="sortOrder">
					                 $sortOrder$
					            </isNotEmpty>
					       	</dynamic>	
		<![CDATA[
              				) T
					)
				WHERE NUM BETWEEN (((#currPage#- 1) * #pageSize#) + 1) AND (#currPage# * #pageSize#)
			
        ]]>			
	</sql>
	
</sqlMap>
