<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="temp/temp/temp2">

	<select id="template8" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
		SELECT 'TEST1' AS TEST_1
	                  ,'TEST1' AS TEST_2
	                  ,'TEST1' AS TEST_3
	                  ,'111' AS TEST_4
	                  ,'222' AS TEST_5 
	                  , '1' AS KEY
	      FROM DUAL 
	      UNION ALL
	       SELECT 'TEST1' AS TEST_1
	                  ,'TEST1' AS TEST_2
	                  ,'TEST1' AS TEST_3
	                  ,'4444' AS TEST_4
	                  ,'5555' AS TEST_5 
	                  , '2' AS KEY
	      FROM DUAL 
	       UNION ALL
	       SELECT 'TEST2' AS TEST_1
	                  ,'TEST2' AS TEST_2
	                  ,'TEST2' AS TEST_3
	                  ,'12333' AS TEST_4
	                  ,'66666' AS TEST_5 
	                  , '3' AS KEY
	      FROM DUAL 
	       UNION ALL
	       SELECT 'TEST2' AS TEST_1
	                  ,'TEST2' AS TEST_2
	                  ,'TEST2' AS TEST_3
	                  ,'12312456' AS TEST_4
	                  ,'124444' AS TEST_5 
	                  , '4' AS KEY
	      FROM DUAL 
	       UNION ALL
	       SELECT 'TEST3' AS TEST_1
	                  ,'TEST3' AS TEST_2
	                  ,'TEST3' AS TEST_3
	                  ,'576757' AS TEST_4
	                  ,'123123' AS TEST_5 
	                  , '5' AS KEY
	      FROM DUAL 
	      UNION ALL
	       SELECT 'TEST3' AS TEST_1
	                  ,'TEST3' AS TEST_2
	                  ,'TEST3' AS TEST_3
	                  ,'1232136' AS TEST_4
	                  ,'57547457' AS TEST_5
	                  , '6' AS KEY
	      FROM DUAL 
        ]]>
	</select>



	<select id="NCOM0302EnationCdselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT COM040_NATION_CD 
					,COM040_NM_KOR
					,COM040_NM_ENG
					,COM040_ALIAS 
					,COM040_EDU_CODE 
					,COM040_WAG_CODE 
					,COM040_ARS_CODE 
				FROM COM040TL
			ORDER BY COM040_NM_KOR
        ]]>
	</select>

	<select id="NCOM0302Emainselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT D1.SCHOOL_CD 	
					,D1.KEDI_CD 
					,D1.SCHOOL_DIV	
					
					,D1.SCHOOL_NM	
					,D1.AREA_CD		
				
					,D1.ZIP1		
					,D1.ZIP2		
					,D1.ADD1
					,D1.TEL		
					,D1.FAX		
					,D1.MODI_ID	
					,TO_CHAR(D1.MODI_DT,'YYYYMMDD') AS MODI_DT	
					,D1.NATION_CD
				
					,D1.CNV_CD	
					,D1.SCHOOL_ORGNM		
					,D1.HOMEPAGE			
					,D1.LANG_CIRCLE		
					,D1.EMAIL			
					,D1.AGRMNT_YN		
					,D1.SCHOOL_NM_ENG	
					,D1.CANCEL_YN		
					,TO_CHAR(D1.CANCEL_DT,'YYYYMMDD') AS CANCEL_DT
					,D1.CANCEL_ID		
					,D1.BANK_CD			
					,D1.PBOOK_NO			
					,D1.OWNER			
					,D1.INTR_EXCHNG_YN	
					,D1.INTR_EXCHNG_CAMPS
					,TRIM(D1.ECM_DOC_ID) AS ECM_DOC_ID
				FROM COM050TL D1
			   WHERE 1=1
				 AND NVL(AREA_CD,'%')	LIKE #strAreaCd# || '%'
				 AND SCHOOL_DIV 	LIKE #strSchoolDiv# || '%'
				 AND NVL(NATION_CD,'%') 	LIKE #strNationCd# || '%'
				 AND SCHOOL_NM 	LIKE #strSchoolNm# || '%'    
			ORDER BY NATION_CD
					,AREA_CD
					,SCHOOL_DIV
					,SCHOOL_NM
        ]]>
	</select>

	<select id="NCOM0302EmainselectChkTest" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT D1.SCHOOL_CD 	
					,D1.KEDI_CD 
					,D1.SCHOOL_DIV	
					
					,D1.SCHOOL_NM	
					,D1.AREA_CD		
				
					,D1.ZIP1		
					,D1.ZIP2		
					,D1.ADD1
					,D1.TEL		
					,D1.FAX		
					,D1.MODI_ID	
					,TO_CHAR(D1.MODI_DT,'YYYYMMDD') AS MODI_DT	
					,D1.NATION_CD
				
					,D1.CNV_CD	
					,D1.SCHOOL_ORGNM		
					,D1.HOMEPAGE			
					,D1.LANG_CIRCLE		
					,D1.EMAIL			
					,D1.AGRMNT_YN		
					,D1.SCHOOL_NM_ENG	
					,D1.CANCEL_YN		
					,TO_CHAR(D1.CANCEL_DT,'YYYYMMDD') AS CANCEL_DT
					,D1.CANCEL_ID		
					,D1.BANK_CD			
					,D1.PBOOK_NO			
					,D1.OWNER			
					,D1.INTR_EXCHNG_YN	
					,D1.INTR_EXCHNG_CAMPS
					,TRIM(D1.ECM_DOC_ID) AS ECM_DOC_ID
				FROM COM050TL D1
			   WHERE 1=1
				 AND NVL(AREA_CD,'%')	LIKE #strAreaCd# || '%'
				 AND SCHOOL_DIV 	LIKE #strSchoolDiv# || '%'
				 AND NVL(NATION_CD,'%') 	LIKE #strNationCd# || '%'
				 AND SCHOOL_NM 	LIKE #strSchoolNm# || '%'
				 ]]>


		<dynamic>

			<isNotEmpty property="strCancelYnArr">
				<iterate property="strCancelYnArr" prepend="AND KEDI_CD IN"
					open="(" conjunction="," close=")">
					#strCancelYnArr[]#
				</iterate>
			</isNotEmpty>
			<isNotEmpty property="strCancelYn">
				AND KEDI_CD = #strCancelYn#
			</isNotEmpty>

		</dynamic>
  					
				   <![CDATA[       
			ORDER BY NATION_CD
					,AREA_CD
					,SCHOOL_DIV
					,SCHOOL_NM
        ]]>
	</select>

	<insert id="NCOM0302EmainForminsert" parameterClass="paramMap">
        <![CDATA[       
			
	
  INSERT INTO COM050TL
			  (
			  	 SCHOOL_CD	
				,SCHOOL_DIV	
				,SCHOOL_NM	
				,AREA_CD		
				,ZIP1		
				,ZIP2		
				,ADD1			
				,TEL			
				,FAX			
				,MODI_ID		
				,MODI_DT		
				,NATION_CD	
				,CANCEL_YN	
				,CANCEL_DT	
				,CANCEL_ID	
				,BANK_CD		
				,PBOOK_NO	
				,OWNER		
				,ECM_DOC_ID
			  )
			  VALUES
			  (
			  	 #SCHOOL_CD#		
				,#SCHOOL_DIV#	
				,#SCHOOL_NM#		
				,#AREA_CD#		
				,#ZIP1#			
				,#ZIP2#			
				,#ADD1#			
				,#TEL#			
				,#FAX#			
				,#CRT_ID#				
				,SYSDATE				
				,#NATION_CD#		
				,#CANCEL_YN#		
				,#CANCEL_DT#		
				,DECODE(#CANCEL_YN#,'Y',#CRT_ID#,'')		
				,#BANK_CD#		
				,#PBOOK_NO#		
				,#OWNER#	
				,#ECM_DOC_ID#			  
			  )
        ]]>
	</insert>

	<update id="NCOM0302EmainFormupdate" parameterClass="paramMap">
        <![CDATA[
        	  UPDATE COM050TL
        	   	 SET SCHOOL_DIV	= #SCHOOL_DIV# 	
					,SCHOOL_NM	= #SCHOOL_NM# 	
					,AREA_CD		= #AREA_CD# 		
					,ZIP1		= #ZIP1# 		
					,ZIP2		= #ZIP2# 		
					,ADD1			= #ADD1# 			
					,TEL			= #TEL# 			
					,FAX			= #FAX# 			
					,MODI_ID		= #UPD_ID# 				
					,MODI_DT		= SYSDATE 				
					,NATION_CD	= #NATION_CD# 	
					,CANCEL_YN	= #CANCEL_YN# 	
					,CANCEL_DT	= #CANCEL_DT#	
					,CANCEL_ID	= DECODE(#CANCEL_YN#,'Y',#UPD_ID#,'') 	
					,BANK_CD		= #BANK_CD# 		
					,PBOOK_NO	= #PBOOK_NO# 	
					,OWNER		= #OWNER# 		
					,ECM_DOC_ID = #ECM_DOC_ID#
			   WHERE SCHOOL_CD	= #SCHOOL_CD# 	
        ]]>
	</update>

	<delete id="NCOM0302EmainFormdelete" parameterClass="paramMap">
        <![CDATA[
        	  DELETE
        	    FROM COM050TL
			   WHERE SCHOOL_CD	= #SCHOOL_CD# 	
        ]]>
	</delete>


	<select id="NCOM0105EMainselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT NCOM093_SYS_ID              ,
				    NCOM093_SUB_ID          ,
				    NCOM093_PGM_ID          ,
				    NCOM093_PGM_NM          ,
				    NCOM093_PGM_NM_ENG      ,
				    NCOM093_MENU_YN         ,
				    NCOM093_PGM_DIV         ,
				    NCOM093_URL             ,
				    NCOM093_PGM_DESC        ,
				    NCOM093_DISUSE_DT       ,
				    CRT_DTTM                ,
				    CRT_ID                  ,
				    CRT_PGM_ID              ,
				    CRT_IP                  ,
				    UPD_DTTM                ,
				    UPD_ID                  ,
				    UPD_PGM_ID              ,
				    UPD_IP                  ,
				    NCOM093_JOB_DIV         ,
				    NCOM093_DEV_FINISH_DT   ,
				    NCOM093_TEST_FINISH_DT_1,
				    NCOM093_TEST_FINISH_DT_2,
				    NCOM093_MID_MENU_NM     ,
				    NCOM093_PGM_TYPE        ,
				    NCOM093_DEV_MANP        ,
				    NCOM093_DEV_MANP_2      ,
				    NCOM093_DEV_MANP_3      ,
				    NCOM093_PSN_INFO_PGM_YN 
			 FROM NCOM093TL
			WHERE NCOM093_SYS_ID = #strSysId#
        ]]>
	</select>


	<insert id="NCOM0105Emaininsert" parameterClass="paramMap">
        <![CDATA[       
			
	
 		INSERT INTO NCOM093TL (
							   NCOM093_SYS_ID, NCOM093_SUB_ID, NCOM093_PGM_ID, 
							   NCOM093_PGM_NM, NCOM093_PGM_NM_ENG, NCOM093_MENU_YN, 
							   NCOM093_PGM_DIV, NCOM093_URL, NCOM093_PGM_DESC, 
							   NCOM093_DISUSE_DT, CRT_DTTM, CRT_ID, 
							   CRT_PGM_ID, CRT_IP, UPD_DTTM, 
							   UPD_ID, UPD_PGM_ID, UPD_IP, 
							   NCOM093_JOB_DIV, NCOM093_DEV_FINISH_DT, NCOM093_TEST_FINISH_DT_1, 
							   NCOM093_TEST_FINISH_DT_2, NCOM093_MID_MENU_NM, NCOM093_PGM_TYPE, 
							   NCOM093_DEV_MANP, NCOM093_DEV_MANP_2, NCOM093_DEV_MANP_3, 
							   NCOM093_PSN_INFO_PGM_YN) 
						VALUES ( #NCOM093_SYS_ID#,
								 #NCOM093_SUB_ID#,
								 #NCOM093_PGM_ID#,
								 #NCOM093_PGM_NM#,
								 #NCOM093_PGM_NM_ENG#,
								 #NCOM093_MENU_YN#,
								 #NCOM093_PGM_DIV#,
								 #NCOM093_URL#,
								 #NCOM093_PGM_DESC#,
								 #NCOM093_DISUSE_DT#,
								 #CRT_DTTM#,
								 #CRT_ID#,
								 #CRT_PGM_ID#,
								 #CRT_IP#,
								 #UPD_DTTM#,
								 #UPD_ID#,
								 #UPD_PGM_ID#,
								 #UPD_IP#,
								 #NCOM093_JOB_DIV#,
								 #NCOM093_DEV_FINISH_DT#,
								 #NCOM093_TEST_FINISH_DT_1#,
								 #NCOM093_TEST_FINISH_DT_2#,
								 #NCOM093_MID_MENU_NM#,
								 #NCOM093_PGM_TYPE#,
								 #NCOM093_DEV_MANP#,
								 #NCOM093_DEV_MANP_2#,
								 #NCOM093_DEV_MANP_3#,
								 #NCOM093_PSN_INFO_PGM_YN# )
        ]]>
	</insert>


	<update id="NCOM0105Emainupdate" parameterClass="paramMap">
        <![CDATA[
        	  UPDATE NCOM093TL
				SET    NCOM093_SYS_ID           = #NCOM093_SYS_ID#,
				       NCOM093_SUB_ID           = #NCOM093_SUB_ID#,
				       NCOM093_PGM_ID           = #NCOM093_PGM_ID#,
				       NCOM093_PGM_NM           = #NCOM093_PGM_NM#,
				       NCOM093_PGM_NM_ENG       = #NCOM093_PGM_NM_ENG#,
				       NCOM093_MENU_YN          = #NCOM093_MENU_YN#,
				       NCOM093_PGM_DIV          = #NCOM093_PGM_DIV#,
				       NCOM093_URL              = #NCOM093_URL#,
				       NCOM093_PGM_DESC         = #NCOM093_PGM_DESC#,
				       NCOM093_DISUSE_DT        = #NCOM093_DISUSE_DT#,
				       CRT_DTTM                 = #CRT_DTTM#,
				       CRT_ID                   = #CRT_ID#,
				       CRT_PGM_ID               = #CRT_PGM_ID#,
				       CRT_IP                   = #CRT_IP#,
				       UPD_DTTM                 = #UPD_DTTM#,
				       UPD_ID                   = #UPD_ID#,
				       UPD_PGM_ID               = #UPD_PGM_ID#,
				       UPD_IP                   = #UPD_IP#,
				       NCOM093_JOB_DIV          = #NCOM093_JOB_DIV#,
				       NCOM093_DEV_FINISH_DT    = #NCOM093_DEV_FINISH_DT#,
				       NCOM093_TEST_FINISH_DT_1 = #NCOM093_TEST_FINISH_DT_1#,
				       NCOM093_TEST_FINISH_DT_2 = #NCOM093_TEST_FINISH_DT_2#,
				       NCOM093_MID_MENU_NM      = #NCOM093_MID_MENU_NM#,
				       NCOM093_PGM_TYPE         = #NCOM093_PGM_TYPE#,
				       NCOM093_DEV_MANP         = #NCOM093_DEV_MANP#,
				       NCOM093_DEV_MANP_2       = #NCOM093_DEV_MANP_2#,
				       NCOM093_DEV_MANP_3       = #NCOM093_DEV_MANP_3#,
				       NCOM093_PSN_INFO_PGM_YN  = #NCOM093_PSN_INFO_PGM_YN#
				WHERE  NCOM093_PGM_ID           = #NCOM093_PGM_ID#	
				AND	   NCOM093_SUB_ID           = #NCOM093_SUB_ID#
				AND    NCOM093_PGM_ID           = #NCOM093_PGM_ID#
        ]]>
	</update>

	<delete id="NCOM0105Emaindelete" parameterClass="paramMap">
        <![CDATA[
        	  DELETE
        	    FROM NCOM093TL
			   WHERE  NCOM093_PGM_ID           = #NCOM093_PGM_ID#	
				AND	   NCOM093_SUB_ID           = #NCOM093_SUB_ID#
				AND    NCOM093_PGM_ID           = #NCOM093_PGM_ID#
        ]]>
	</delete>



	<select id="NCOM0303EMainselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT MENU_PGM_ID,
			       SYSTEM_ID,
			       SYSTEM_NM,
			       SUB_ID,
			       SUB_NM,
			       MENU_ID,
			       MENU_NM,
			       PGM_ID,
			       PGM_NM,
			       URL,
			       MENU_PATH,
			       UP_MENU_ID,
			       MENU_PARAM,
			       MENU_PRT_STEP,
			       PGM_PRT_STEP,
			       USE_YN,
			       TRIM(ECM_DOC_ID) AS ECM_DOC_ID,
			       '파일 첨부' AS ECM_NAME
			  FROM TEMP_MENU
			  WHERE 1=1
			  ]]>
		<dynamic>
			<isNotEmpty property="strPgmNm">
				AND PGM_NM LIKE '%' || #strPgmNm# || '%'
			</isNotEmpty>

		</dynamic>
		<!-- DECODE(MENU_ID, 'NCOM10', '파일 첨부', NULL) AS ECM_NAME -->
	</select>


	<insert id="NCOM0303Emaininsert" parameterClass="paramMap">
        <![CDATA[       
			
	
 		INSERT INTO TEMP_MENU (MENU_PGM_ID,
                            SYSTEM_ID,
                            SYSTEM_NM,
                            SUB_ID,
                            SUB_NM,
                            MENU_ID,
                            MENU_NM,
                            PGM_ID,
                            PGM_NM,
                            URL,
                            MENU_PATH,
                            UP_MENU_ID,
                            MENU_PARAM,
                            MENU_PRT_STEP,
                            PGM_PRT_STEP,
                            USE_YN,
                            ECM_DOC_ID)
     VALUES (                                                #MENU_PGM_ID#
             ,#SYSTEM_ID#
              ,#SYSTEM_NM#
             ,#SUB_ID#
              ,#SUB_NM#
             ,#MENU_ID#
              ,#MENU_NM#
             ,#PGM_ID#
              ,#PGM_NM#
             ,#URL#
              ,#MENU_PATH#
             ,#UP_MENU_ID#
              ,#MENU_PARAM#
             ,#MENU_PRT_STEP#
              ,#PGM_PRT_STEP#
             ,#USE_YN#
             ,TRIM(#ECM_DOC_ID#)
              )
        ]]>
	</insert>


	<update id="NCOM0303Emainupdate" parameterClass="paramMap">
        <![CDATA[
        	  UPDATE TEMP_MENU
				SET    MENU_PGM_ID   = #MENU_PGM_ID#,
				       SYSTEM_ID     = #SYSTEM_ID#,
				       SYSTEM_NM     = #SYSTEM_NM#,
				       SUB_ID        = #SUB_ID#,
				       SUB_NM        = #SUB_NM#,
				       MENU_ID       = #MENU_ID#,
				       MENU_NM       = #MENU_NM#,
				       PGM_ID        = #PGM_ID#,
				       PGM_NM        = #PGM_NM#,
				       URL           = #URL#,
				       MENU_PATH     = #MENU_PATH#,
				       UP_MENU_ID    = #UP_MENU_ID#,
				       MENU_PARAM    = #MENU_PARAM#,
				       MENU_PRT_STEP = #MENU_PRT_STEP#,
				       PGM_PRT_STEP  = #PGM_PRT_STEP#,
				       USE_YN        = #USE_YN#,
				       ECM_DOC_ID    = TRIM(#ECM_DOC_ID#)
				WHERE  MENU_PGM_ID   = #MENU_PGM_ID#
				AND      SYSTEM_ID     = #SYSTEM_ID#
				AND       SUB_ID        = #SUB_ID#
        ]]>
	</update>

	<delete id="NCOM0303Emaindelete" parameterClass="paramMap">
        <![CDATA[
        	  DELETE
        	    FROM TEMP_MENU
			   WHERE MENU_PGM_ID   = #MENU_PGM_ID#
				AND      SYSTEM_ID     = #SYSTEM_ID#
				AND       SUB_ID        = #SUB_ID#
        ]]>
	</delete>
	
	<select id="ImgTemplateselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT CODE_DIV,
			       CODE,
			       RELATION AS ECM_DOC_ID,
			       '' AS ECM_FILE_INFO
			FROM COM030TL
			WHERE CODE_DIV = 'IMGCODE'
		  ]]>
	</select>
	
	<update id="ImgFileInfoupdate" parameterClass="paramMap">
        <![CDATA[
        	  UPDATE COM030TL
				SET    RELATION   = TRIM(#ECM_DOC_ID#)
				WHERE  CODE_DIV = #CODE_DIV#
				AND    CODE = #CODE#
        ]]>
	</update>
	
	
	<select id="ECMFileInfoeselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
			  SELECT CODE_DIV,
			       CODE,
			       TRIM(RELATION) AS ECM_DOC_ID
			FROM COM030TL
			WHERE CODE_DIV = 'ECMFILE'
		  ]]>
	</select>
	
	<update id="ECMFileInfoupdate" parameterClass="paramMap">
        <![CDATA[
        	  UPDATE COM030TL
				SET    RELATION   = TRIM(#ECM_DOC_ID#)
				WHERE  CODE_DIV = #CODE_DIV#
				AND    CODE = #CODE#
        ]]>
	</update>
</sqlMap> 
