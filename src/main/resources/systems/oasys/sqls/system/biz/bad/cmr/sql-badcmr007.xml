<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/cmr/007">

<select id="badcmr007PMidCatselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
         SELECT A.YE
              , A.LAG_CAT_SNO
              , B.LAG_CAT_TIT_NM
              , A.MID_CAT_SNO
              , A.MID_CAT_TIT_NM
              , A.MID_CAT_TXT
              , A.CHR_DPT_CD
              , A.REGI_DT
              , A.REGN_ID
              , A.MDF_DT
              , A.MDF_PEN_ID
              , A.DEL_YN  
            FROM   TBBADCMR002M A, TBBADCMR001M B 
            WHERE  A.LAG_CAT_SNO = B.LAG_CAT_SNO 
             AND A.YE = B.YE
           ]]>
           <isNotEmpty property="strMidCatSno">	 
                       AND A.MID_CAT_SNO = #strMidCatSno#  /* 중분류번호 */
              </isNotEmpty> 

            <isNotEmpty property="strMidCatTitNm">	 
                       AND A.MID_CAT_TIT_NM LIKE '%'||#strMidCatTitNm#||'%'   /* 중분류제목 */
            </isNotEmpty> 
			 <isNotEmpty property="strLagCatSno">	 
			 AND A.LAG_CAT_SNO =#strLagCatSno#
              </isNotEmpty> 
             <isNotEmpty property="strYear">	 
			 AND A.YE =#strYear#
              </isNotEmpty>  
              
            ORDER BY YE, LAG_CAT_SNO 

       
  </select>
        
	
</sqlMap> 
