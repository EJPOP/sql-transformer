<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/aea/011">
	<select id="FAAAEA011QMainSelect" parameterClass="paramMap" resultClass="resultMap">
	<include refid="include.pageSelct" />
	<![CDATA[
			SELECT 
				A.ORG_CD,
				A.MNG_GD_CD,
				A.MNG_GD_NM,
				A.DOC_NO,
				TO_CHAR(A.REGI_DH,'YYYY.MM.DD') AS REGI_DH,
				A.REGI_DH AS REGI_DH_2,
				A.RPT_DH,
				A.TIT_NM,
				A.RCPT_OM_ORG_NM,
				A.RPT_PEN_NM,/*보고(접수)자*/
				A.APVR_NM,
				A.OPEN_YN_NM,
				A.ENF_RN_NM,
				A.ELCT_DOC_YN_NM,
				A.REGI_DVSN_NM,
				A.REGI_NO_NM,
				A.LST_OPEN_YN,
				A.ENF_DH,
				A.RPT_GD_NM/*보고(접수)부서명*/
			FROM TBFAAAEA046M A
			WHERE A.ORG_CD = #strOrgCd# 
			AND A.RPT_DH BETWEEN #strStrRptDt# AND #strEndRptDt#
		]]>
		<!-- 소관부서 -->
		<isNotEmpty property="strMngGdCd">
			AND A.MNG_GD_CD =#strMngGdCd#  /*strMngGdCd */ 
		</isNotEmpty>
		
		<!-- 문서 제목 -->
		<isNotEmpty property="strTitNm">
			AND A.TIT_NM LIKE '%' || #strTitNm# || '%'					
		</isNotEmpty>
		
		<!-- 문서번호-->
		<isNotEmpty property="strDocNo">
			AND A.DOC_NO LIKE '%' || #strDocNo# || '%'		
		</isNotEmpty>
		
		<!-- 수(발)신기관명 -->
		<isNotEmpty property="strSendRecvName">
			AND A.RCPT_OM_ORG_NM LIKE '%' || #strSendRecvName# || '%'
		</isNotEmpty>
		
		<!-- 보고/검토자 -->
		<isNotEmpty property="strApvrNm">
			AND A.APVR_NM LIKE '%' || #strApvrNm# || '%'					
		</isNotEmpty>
		
		<!-- 문서구분(생산/접수) -->
		<dynamic>	
			<isNotEmpty property="strRegiDvsnNm" prepend="AND">
			A.REGI_DVSN_NM IN
			<iterate open="(" close=")" property="strRegiDvsnNm" conjunction=",">
		                  #strRegiDvsnNm[]#
		    </iterate>
			</isNotEmpty>
		</dynamic>
		
		<!-- 문서종류(전자/비전자) -->
		<dynamic>	
			<isNotEmpty property="strElctDocYnNm" prepend="AND">
			A.ELCT_DOC_YN_NM IN
			<iterate open="(" close=")" property="strElctDocYnNm" conjunction=",">
		                  #strElctDocYnNm[]#
		    </iterate>
			</isNotEmpty>
		</dynamic>
	
		      
		<!-- 공개여부 -->
		<isNotEmpty property="strOpenYnNm">
			AND A.OPEN_YN_NM = #strOpenYnNm#
		</isNotEmpty>  
		
		<include refid="include.pageOrder" />  
	</select>
	
	<!-- 온나라(전자결재)문서등록대장 엑셀다운 -->
	<select id="FAAAEA011EExcelExportSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	
				A.ORG_CD,/*관리기관ID*/
				A.ORG_NM,/*관리기관명*/
				A.MNG_GD_CD,/*관리부서ID*/
				A.MNG_GD_NM,/*관리부서명*/
				A.TIT_NM, /*문서제목*/
				A.DOC_NO,/*문서번호*/
				TO_CHAR(A.RPT_DH,'YYYYMMDDHH24MISS') AS RPT_DH ,/*보고(접수)일자*/
				TO_CHAR(A.REGI_DH,'YYYYMMDDHH24MISS') AS REGI_DH,/*등록(접수)일자*/
				A.RPT_GD_CD,/*보고(접수)부서ID*/
				A.RPT_GD_NM,/*보고(접수)부서명*/
				/*부서표시명*/
				A.RPT_PEN_NM,/*보고(접수)자*/
				A.APVR_NM,/*결재(업무담당)자*/
				A.OPEN_YN_NM,/*공개여부*/
				A.ELCT_DOC_YN_NM,/*전자문서여부*/
				A.ENF_RN_NM,/*시행범위*/
				TO_CHAR(A.ENF_DH,'YYYYMMDDHH24MISS') AS ENF_DH,/*시행일자*/
				A.RCPT_OM_ORG_NM,/*수(발)신기관명*/
				A.REGI_DVSN_NM,/*등록구분*/
				A.REGI_NO_NM,/*생산등록번호*/
				A.LST_OPEN_YN/*목록공개여부*/
			FROM   	TBFAAAEA046M A	
			WHERE	1=1
			AND A.ORG_CD = #strOrgCd# /* strOrgCd */	
			AND A.RPT_DH BETWEEN #strStrRptDt# AND #strEndRptDt#
			
        ]]>
        <!-- 소관부서 -->
		<isNotEmpty property="strMngGdCd">
			AND A.MNG_GD_CD =#strMngGdCd#  /*strMngGdCd */ 
		</isNotEmpty>
		
		<!-- 문서 제목 -->
		<isNotEmpty property="strTitNm">
			AND A.TIT_NM LIKE '%' || #strTitNm# || '%'					
		</isNotEmpty>
		
		<!-- 문서번호-->
		<isNotEmpty property="strDocNo">
			AND A.DOC_NO LIKE '%' || #strDocNo# || '%'
		</isNotEmpty>
		
		<!-- 수(발)신기관명 -->
		<isNotEmpty property="strSendRecvName">
			AND A.RCPT_OM_ORG_NM LIKE '%' || #strSendRecvName# || '%'
		</isNotEmpty>
		
		<!-- 보고/검토자 -->
		<isNotEmpty property="strApvrNm">
			AND A.APVR_NM LIKE '%' || #strApvrNm# || '%'					
		</isNotEmpty>
		
		<!-- 문서구분(생산/접수) -->
		<dynamic>	
			<isNotEmpty property="strRegiDvsnNm" prepend="AND">
			A.REGI_DVSN_NM IN
			<iterate open="(" close=")" property="strRegiDvsnNm" conjunction=",">
		                  #strRegiDvsnNm[]#
		    </iterate>
			</isNotEmpty>
		</dynamic>
		
		
		
		<dynamic>	
			<isNotEmpty property="strRegiDvsnNm" prepend="AND">
			A.REGI_DVSN_NM IN
			<iterate open="(" close=")" property="strRegiDvsnNm" conjunction=",">
		                  #strRegiDvsnNm[]#
		    </iterate>
			</isNotEmpty>
		</dynamic>
		
		
		
		<!-- 문서종류(전자/비전자) -->
		<dynamic>	
			<isNotEmpty property="strElctDocYnNm" prepend="AND">
			A.ELCT_DOC_YN_NM IN
			<iterate open="(" close=")" property="strElctDocYnNm" conjunction=",">
		                  #strElctDocYnNm[]#
		    </iterate>
			</isNotEmpty>
		</dynamic>
	
		      
		<!-- 공개여부 -->
		<isNotEmpty property="strOpenYnNm">
			AND A.OPEN_YN_NM = #strOpenYnNm#
		</isNotEmpty>  
		
        ORDER BY A.REGI_DH DESC
	</select>
	
	<select id="FAAAEA011QOrgCdSelect" parameterClass="paramMap"	resultClass="resultMap">
        <![CDATA[
			SELECT 	
				A.ORG_CD,/*기관ID*/
				A.ORG_NM /*기관명*/
			FROM   	TBFAAAEA047C A	
			ORDER BY A.ORG_NM ASC
		]]>
	</select>
	
	<select id="FAAAEA011QMngGdCdSelectAll" parameterClass="paramMap"	resultClass="resultMap">
	
        <![CDATA[
			SELECT 	
				A.ORG_CD,/*관리부서ID*/
				A.MNG_GD_CD,/*관리부서ID*/
				A.MNG_GD_NM/*관리부서명*/
			FROM   	TBFAAAEA048C A
			WHERE	1=1
			AND A.ORG_CD != A.MNG_GD_CD
		]]>	
	</select>
	
	<select id="FAAAEA011QMngGdCdSelect" parameterClass="paramMap"	resultClass="resultMap">
	
		<include refid="include.pageSelct" />
        <![CDATA[
			SELECT 	
				A.ORG_CD,/*관리부서ID*/
				A.MNG_GD_CD,/*관리부서ID*/
				A.MNG_GD_NM/*관리부서명*/
			FROM   	TBFAAAEA048C A
			WHERE	1=1
			AND A.ORG_CD = #strOrgCd# 	
			AND A.MNG_GD_CD != #strOrgCd# 
		]]>
			<isNotEmpty property="strMngGdNm">
			AND A.MNG_GD_NM  LIKE '%' || #strMngGdNm# || '%'	
			</isNotEmpty>
		
		<include refid="include.pageOrder" />  
	</select>		
	
	
	<select id="FAAAEA011PSelectPopupList" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
			SELECT 
				A.ORG_CD,
				A.ORG_NM,
				A.MNG_GD_CD,
				A.MNG_GD_NM,
				A.DOC_NO,
				TO_CHAR(A.REGI_DH,'YYYY.MM.DD') AS REGI_DH,
				A.REGI_DH AS REGI_DH_2,
				A.RPT_DH,
				A.TIT_NM,
				A.RCPT_OM_ORG_NM,
				A.RPT_PEN_NM,/*보고(접수)자*/
				A.APVR_NM,
				A.OPEN_YN_NM,
				A.ENF_RN_NM,
				A.ELCT_DOC_YN_NM,
				A.REGI_DVSN_NM,
				A.REGI_NO_NM,
				A.LST_OPEN_YN,
				A.ENF_DH,
				A.RPT_GD_NM/*보고(접수)부서명*/
			FROM TBFAAAEA046M A
			WHERE A.ORG_CD = #strOrgCd# 
			  AND A.MNG_GD_CD = #strMngGdCd#
			  AND A.DOC_NO = #strDocNo#
			  AND A.RPT_DH = #strRptDt#
		]]>
	</select>
</sqlMap> 
