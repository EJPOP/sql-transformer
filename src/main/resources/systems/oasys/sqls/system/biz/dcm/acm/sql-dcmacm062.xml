<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="dcm/acm/062">
	<select id="DCMACM062ESelectInit" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
			SELECT  T2.CD, T2.CD_NM, T1.CD AS DVSN_CD
			FROM    TBDCMACM013C T1, TBDCMACM013C T2
			WHERE   T1.CMM_CD_DVSN_CD ='1000822'
			AND     T2.CMM_CD_DVSN_CD ='1000823'
			AND     T2.CD = T1.USR_DFN_TXT_3
		]]>
	</select>
	
	<select id="DCMACM062EMainSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
			SELECT	T1.RWD_NO
					,T1.RWD_DT
					,T1.RWD_SER_CD
					,T1.RWD_SER_DTL_CD
					,T1.RWD_TG_CD
					,T1.RWD_TG_PRD_NM
			FROM	TBDCMACM042M T1
			WHERE	T1.RWD_NO = #strRWD_NO#
		]]>
	</select>
	
	<select id="DCMACM062ESubSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
			SELECT	T1.RWD_NO
					,T1.SRNO
					,T1.RWD_TG_DPT_CD
					,(	SELECT	S1.DPT_NM
						FROM	TBDCMACM002M S1
						WHERE	S1.DPT_CD = T1.RWD_TG_DPT_CD
					) AS RWD_TG_DPT_NM
					,T1.RWD_TG_STF_CNB
					,(	SELECT	S1.USR_NAM
						FROM	TBDCMACM001M S1
						WHERE	S1.CNB = T1.RWD_TG_STF_CNB
					) AS RWD_TG_STF_NM
					,T1.RWD_TG_STF_DPT_CD
					,(	SELECT	S1.DPT_NM
						FROM	TBDCMACM002M S1
						WHERE	S1.DPT_CD = T1.RWD_TG_STF_DPT_CD
					) AS RWD_TG_STF_DPT_NM
					,T1.RWD_TG_STF_RANK_CD
					,(	SELECT	S1.CD_NM
						FROM	TBDCMACM013C S1
						WHERE	S1.CMM_CD_DVSN_CD = '1000173'
						AND		S1.CD = T1.RWD_TG_STF_RANK_CD
					) AS RWD_TG_STF_RANK_NM
			FROM	TBDCMACM043D T1
			WHERE	T1.RWD_NO = #strRWD_NO#
		]]>
	</select>
	
	<select id="DCMACM062ESelectRwdNo" parameterClass="paramMap" resultClass="Integer">
		<![CDATA[
			SELECT	NVL(MAX(RWD_NO),0) +1 AS RWD_NO
			FROM	TBDCMACM042M T1
		]]>
	</select>
	
	<insert id="DCMACM062EMainInsert" parameterClass="paramMap">
		<![CDATA[
			INSERT INTO TBDCMACM042M
					(	RWD_NO
						,RWD_DT
						,RWD_SER_CD
						,RWD_SER_DTL_CD
						,RWD_TG_CD
						,RWD_TG_PRD_NM
						,FRT_USR_ID
						,FNL_USR_ID
						,FNL_DEAL_DPT_CD
						,FNL_MNU_ID
						,FRT_REGI_DH
						,FNL_MDF_DH
					)
				VALUES	(	#RWD_NO#
							,#RWD_DT#
							,#RWD_SER_CD#
							,#RWD_SER_DTL_CD#
							,#RWD_TG_CD#
							,#RWD_TG_PRD_NM#
							,#FNL_USR_ID#
							,#FNL_USR_ID#
							,#FNL_DEAL_DPT_CD#
							,#FNL_MNU_ID#
							,SYSDATE
							,SYSDATE
						)
		]]>
	</insert>
	
	<insert id="DCMACM062ESubInsert" parameterClass="paramMap">
		<![CDATA[
			INSERT INTO TBDCMACM043D
					(	RWD_NO
						,SRNO
						,RWD_TG_DPT_CD
						,RWD_TG_STF_CNB
						,RWD_TG_STF_DPT_CD
						,RWD_TG_STF_RANK_CD
						,FRT_USR_ID
						,FNL_USR_ID
						,FNL_DEAL_DPT_CD
						,FNL_MNU_ID
						,FRT_REGI_DH
						,FNL_MDF_DH
					)
				VALUES	(	#RWD_NO#
							,(	SELECT	NVL(MAX(SRNO),0)+1
								FROM	TBDCMACM043D
								WHERE	RWD_NO = #RWD_NO#
							)
							,#RWD_TG_DPT_CD#
							,#RWD_TG_STF_CNB#
							,#RWD_TG_STF_DPT_CD#
							,#RWD_TG_STF_RANK_CD#
							,#FNL_USR_ID#
							,#FNL_USR_ID#
							,#FNL_DEAL_DPT_CD#
							,#FNL_MNU_ID#
							,SYSDATE
							,SYSDATE
						)
		]]>
	</insert>
	
	<update id="DCMACM062EMainUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBDCMACM042M T1
			SET		RWD_DT = #RWD_DT#
					,RWD_SER_CD = #RWD_SER_CD#
					,RWD_SER_DTL_CD = #RWD_SER_DTL_CD#
					,RWD_TG_CD = #RWD_TG_CD#
					,RWD_TG_PRD_NM = #RWD_TG_PRD_NM#
			WHERE	RWD_NO = #RWD_NO#
		]]>
	</update>
	
	<update id="DCMACM062ESubUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBDCMACM043D T1
			SET		RWD_TG_DPT_CD = #RWD_TG_DPT_CD#
					,RWD_TG_STF_CNB = #RWD_TG_STF_CNB#
					,RWD_TG_STF_DPT_CD = #RWD_TG_STF_DPT_CD#
					,RWD_TG_STF_RANK_CD = #RWD_TG_STF_RANK_CD#
			WHERE	RWD_NO = #RWD_NO#
			AND		SRNO = #SRNO#
		]]>
	</update>
	
	<delete id="DCMACM062ESubDelete" parameterClass="paramMap">
		<![CDATA[
			DELETE
			FROM	TBDCMACM043D T1
			WHERE	T1.RWD_NO = #RWD_NO#
			AND		T1.SRNO = #SRNO#
		]]>
	</delete>
	
	<delete id="DCMACM062ESubAllDelete" parameterClass="paramMap">
		<![CDATA[
			DELETE
			FROM	TBDCMACM043D T1
			WHERE	T1.RWD_NO = #RWD_NO#
		]]>
	</delete>
	
	<delete id="DCMACM062EMainDelete" parameterClass="paramMap">
		<![CDATA[
			DELETE
			FROM	TBDCMACM042M T1
			WHERE	T1.RWD_NO = #RWD_NO#
		]]>
	</delete>
	
</sqlMap> 