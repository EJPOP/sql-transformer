<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/iit/011">
	
	<!-- PC장비코드관리 내역 조회 -->
	<select id="CSPIIT011EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	A.PC_EQP_CD, 				/*코드*/
					A.PC_EQP_NM,			/*코드명*/
					A.USE_DVSN_CD,		/*사용여부*/
					A.REGI_DT,			/*입력일*/
					A.ABRG_DT,			/*폐기일*/
					A.PC_EQP_CD_RMK,	/*비고*/
					A.PC_KND_CD			/*PC장비코드*/
			FROM	TBCSPIIT011C A	/*PC장비코드*/
			WHERE	1=1
        ]]>
        <dynamic>
        	<isNotEmpty property="strUSE_DVSN_CD">
        		AND	A.USE_DVSN_CD = #strUSE_DVSN_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strCD">
        		AND	A.PC_EQP_CD = #strPC_EQP_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strCD_NM">
        		AND	A.PC_EQP_NM LIKE '%'||#strPC_EQP_NM#||'%'
        	</isNotEmpty>
        </dynamic>
        <![CDATA[
        	ORDER BY A.PC_KND_CD ,A.PC_EQP_CD
        ]]>
	</select>        
	
	<insert id="CSPIIT011EMainInsert" parameterClass="paramMap">
        <![CDATA[
        	INSERT INTO TBCSPIIT011C
        	(			
        			PC_EQP_CD,
        			PC_EQP_NM,
        			PC_KND_CD,
        			USE_DVSN_CD,
        			REGI_DT,
        			PC_EQP_CD_RMK,
        			FRT_USR_ID,
					FNL_USR_ID,
					FNL_DEAL_DPT_CD,
					FNL_MNU_ID,
					FRT_REGI_DH,
					FNL_MDF_DH
        	) VALUES (
        			#PC_EQP_CD#,
        			#PC_EQP_NM#,
        			#PC_KND_CD#,
        			#USE_DVSN_CD#,
        			#REGI_DT#,
        			#PC_EQP_CD_RMK#,
        			#FRT_USR_ID#,
					#FNL_USR_ID#,
					#FNL_DEAL_DPT_CD#,
					#FNL_MNU_ID#,
					SYSDATE,
					SYSDATE
        	)
        ]]>
	</insert>
	<select id="CSPIIT011EKeySelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT TO_CHAR(NVL(MAX(TO_NUMBER(PC_EQP_CD))+1, 1)) AS PC_EQP_CD
  			  FROM TBCSPIIT011C
        ]]>
	</select>    
	
	
	<update id="CSPIIT011EMainUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBCSPIIT011C
			SET		PC_EQP_NM = #PC_EQP_NM#,
					USE_DVSN_CD = #USE_DVSN_CD#,
					REGI_DT = #REGI_DT#,
					ABRG_DT = #ABRG_DT#,
					PC_EQP_CD_RMK = #PC_EQP_CD_RMK#,
					FNL_USR_ID = #FNL_USR_ID#,
					FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#,
					FNL_MNU_ID = #FNL_MNU_ID#,
					FNL_MDF_DH = SYSDATE
			WHERE	PC_EQP_CD = #PC_EQP_CD#
		]]>
	</update>
	<delete id="CSPIIT011EMainDelete" parameterClass="paramMap">
		<![CDATA[
			DELETE	
			FROM	TBCSPIIT011C
			WHERE	PC_EQP_CD = #PC_EQP_CD#
		]]>
	</delete>
</sqlMap> 
