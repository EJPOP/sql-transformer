<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/iit/013">
	
	<!-- GCC코드매핑 내역 조회 -->
	<select id="CSPIIT013EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<include refid = "include.pageSelct"/>
		
        <![CDATA[
			SELECT 	A.GCC_ORG_CD, 			/*GCC기관코드*/
					A.ALL_ORG_NM,			/*전체기관명*/
					F_ORG_INFO(A.BAI_ORG_CD, '1') AS BAI_ORG_NM,	/*감사원기관명*/
					A.BAI_ORG_CD,			/*감사원기관코드*/
					A.GCC_CON_HNDL_DVSN_CD,		/*GCC연계처리구분코드*/
					A.CRE_DT,				/*생성일*/
					A.ABLT_DT,				/*폐지일*/
					A.BK_ORG_CD,			/*이전기관코드*/
					A.MPP_YN,				/*매핑여부*/
					A.CON_HNDL_DT
			FROM	TBCSPIIT006M A			/*GCC행정코드기본*/
			WHERE	1=1
        ]]>
        <dynamic>
       	 	<isNotEmpty property="strCON_HNDL_DTS">
        		AND	A.CON_HNDL_DT &gt;= #strCON_HNDL_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strCON_HNDL_DTE">
        		AND	A.CON_HNDL_DT &lt;= #strCON_HNDL_DTE#
        	</isNotEmpty>
        	<isNotEmpty property="strGCC_ORG_CDS">
        		AND	A.GCC_ORG_CD &gt;= #strGCC_ORG_CDS#
        	</isNotEmpty>
        	<isNotEmpty property="strGCC_ORG_CDE">
        		AND	A.GCC_ORG_CD &lt;= #strGCC_ORG_CDE#
        	</isNotEmpty>
        	<isNotEmpty property="strALL_ORG_NM">
        		AND	A.ALL_ORG_NM LIKE '%'||#strALL_ORG_NM#||'%'
        	</isNotEmpty>
        	<isNotEmpty property="strBAI_ORG_CDS">
        		AND	A.BAI_ORG_CD &gt;= #strBAI_ORG_CDS#
        	</isNotEmpty>
        	<isNotEmpty property="strBAI_ORG_CDE">
        		AND	A.BAI_ORG_CD &lt;= #strBAI_ORG_CDE#
        	</isNotEmpty>
        	<isNotEmpty property="strMPP_YN">
        		AND	A.MPP_YN = #strMPP_YN#
        	</isNotEmpty>
        	<isNotEmpty property="strGCC_CON_HNDL_DVSN_CD">
        		AND	A.GCC_CON_HNDL_DVSN_CD = #strGCC_CON_HNDL_DVSN_CD#
        	</isNotEmpty>
        </dynamic>
        <include refid = "include.pageOrder"/> 
	</select>        
	
	<update id="CSPIIT013EMainUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBCSPIIT006M
			SET		BAI_ORG_CD = #BAI_ORG_CD#,
					MPP_YN = DECODE(#MPP_YN#,'Y','Y','N'),
					FNL_USR_ID = #FNL_USR_ID#,
					FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#,
					FNL_MNU_ID = #FNL_MNU_ID#,
					FNL_MDF_DH = SYSDATE
			WHERE	GCC_ORG_CD = #GCC_ORG_CD#
		]]>
	</update>
	
</sqlMap> 
