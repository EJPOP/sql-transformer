<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/007">
	<!-- 감사연번호  -->
	<select id="BADDED007QSelect1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AAA.AUD_YR
			     , AAA.AUD_NO
			     , CASE WHEN AAA.AUD_YR >= '2016' 
			                 THEN F_CODE_NM('1000739',AAA.AUD_KND_CD)
			            ELSE '-' 
			        END                                        AS AUD_YR_NO_KND_NM
			     , AAA.AUD_STEP_SNO
			     , AAA.AUD_DCN
			     , AAA.AUD_DCN_CNT AS AUD_DCN_CNT
			     , AAA.AUD_TASK_CD
			     , AAA.ORG_DVSN_CD
			     , AAA.AUD_KND_CD
			     , AAA.SPV_BRDV_CD
			     , AAA.AUD_WAY_CD
			     , AAA.AUD_SBJ_NM
			     , AAA.AUD_BZT_KND_CD
			     , AAA.BZT_YR
			     , AAA.BZT_SNO
			     , AAA.BZT_TL_CNB
			     , AAA.ORG_CD
			     , AAA.TEAM_SNO
			     , AAA.AUD_STR_DT
			     , AAA.AUD_END_DT
			     , AAA.IN_PSON_CNT
			     , AAA.EXT_PSON_CNT
			     , AAA.IN_PSON_MAN_CNT
			     , AAA.EXT_PSON_MAN_CNT
			     , AAA.ORG_CNT
			     , EEE.DPT_NM AS EXEC_DPT_NM
			     , BBB.ORG_NM
			     , CCC.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , DDD.USR_NAM
			     , FFF.CD_NM AS TRIP_CATE_NM
			     , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, '', '-') || '(' || AAA.AUD_STEP_SNO || ')' AS AUD_NO_INFO
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN AS AUD_DCN_CNT
			             , DD.ORG_CNT
			          FROM (SELECT A.AUD_YR
			                     , A.AUD_NO
			                     , B.AUD_STEP_SNO
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                     , MAX(A.AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(A.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(A.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(A.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(A.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(A.AUD_SBJ_NM) AS AUD_SBJ_NM
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(B.BZT_YR) AS BZT_YR
			                     , MAX(B.BZT_SNO) AS BZT_SNO
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MIN(C.ORG_CD) AS ORG_CD
			                     , MAX(C.TEAM_SNO) AS TEAM_SNO
			                     , MIN(C.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(C.AUD_END_DT) AS AUD_END_DT
			                  FROM TBBADDED001M A
			                     , TBBADDED002M B
			                     , TBBADDED008L C
			                 WHERE 1 = 1
        ]]>
        <isNotEmpty property="strAudYr">	
        					   AND A.AUD_YR = #strAudYr#
        </isNotEmpty>	
        
		<isNotNull property="strAudYrNoKndCd">
			<isNotEmpty property="strAudYrNoKndCd">	 	
	                          /* 감사연번종류코드 - 2015.12.18 yyh */
				               AND SUBSTR(A.AUD_KND_CD,3,1) = #strAudYrNoKndCd# 
			</isNotEmpty>		
		</isNotNull>        
        					                 
        <isNotEmpty property="strAudNoSt">	
        	<![CDATA[        
        					   AND A.AUD_NO >= #strAudNoSt#
        	]]>
        </isNotEmpty>	
        <isNotEmpty property="strAudNoEnd">
        	<![CDATA[  	
        					   AND A.AUD_NO <= #strAudNoEnd#
        	]]>
        </isNotEmpty>				                  
        <![CDATA[
			                   AND B.REL_AUD_YR = A.AUD_YR
			                   AND B.REL_AUD_NO = A.AUD_NO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.BZT_YR = B.BZT_YR
			                   AND C.BZT_SNO = B.BZT_SNO
			                 GROUP BY A.AUD_YR, A.AUD_NO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+INDEX(B, KBBADBADDED006001) */
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) AS ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE BB.BZT_YR(+) = AA.BZT_YR
			           AND BB.BZT_SNO(+) = AA.BZT_SNO
			           AND CC.BZT_YR(+) = AA.BZT_YR
			           AND CC.BZT_SNO(+) = AA.BZT_SNO
			           AND DD.BZT_YR(+) = AA.BZT_YR
			           AND DD.BZT_SNO(+) = AA.BZT_SNO ) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , TBDCMACM002M EEE
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD ='1000030') FFF
			 WHERE BBB.ORG_CD(+) = AAA.ORG_CD
			   AND EEE.DPT_CD(+) = AAA.SPV_BRDV_CD
			   AND FFF.CD(+) = AAA.AUD_BZT_KND_CD
			   AND CCC.CD(+) = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB
			 ORDER BY F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, '', '-') || '(' || AAA.AUD_STEP_SNO || ')'
        ]]>
	</select>
	
	<!-- 감사연번호 paging -->
	<select id="BADDED007QSelectPaging1" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />	
        <![CDATA[       
			SELECT F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || AAA.AUD_STEP_SNO  || ')'
			                                                                AS AUD_NO_INFO			       
			     , CCC.CD_NM || '(' || FFF.CD_NM || ')'                     AS AUD_EXEC_DVSN_CD_NM			       
			     , EEE.DPT_NM                                               AS EXEC_DPT_NM			       
			     , BBB.ORG_NM                                               AS ORG_NM
			     , AAA.ORG_CNT                                              AS ORG_CNT			     			       
			     , TO_CHAR(TO_DATE(AAA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AAA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD
			     , AAA.AUD_DCN                                              AS AUD_DCN
			     , AAA.IN_PSON_CNT  || '(' || AAA.IN_PSON_MAN_CNT  || ')'   AS IN_PSON   
			     , AAA.EXT_PSON_CNT || '(' || AAA.EXT_PSON_MAN_CNT || ')'   AS EXT_PSON   			        
			     , DDD.USR_NAM                                              AS USR_NAM			        
			     , AAA.AUD_SBJ_NM                                           AS AUD_SBJ_NM			        
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN AS AUD_DCN_CNT
			             , DD.ORG_CNT
			          FROM (SELECT A.AUD_YR
			                     , A.AUD_NO
			                     , B.AUD_STEP_SNO
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                     , MAX(A.AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(A.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(A.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(A.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(A.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(A.AUD_SBJ_NM) AS AUD_SBJ_NM
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(B.BZT_YR) AS BZT_YR
			                     , MAX(B.BZT_SNO) AS BZT_SNO
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MIN(C.ORG_CD) AS ORG_CD
			                     , MAX(C.TEAM_SNO) AS TEAM_SNO
			                     , MIN(C.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(C.AUD_END_DT) AS AUD_END_DT
			                  FROM TBBADDED001M A
			                     , TBBADDED002M B
			                     , TBBADDED008L C
			                 WHERE 1 = 1
        ]]>
        <isNotEmpty property="strAudYr">	
        					   AND A.AUD_YR = #strAudYr#
        </isNotEmpty>		
        
		<isNotNull property="strAudYrNoKndCd">
			<isNotEmpty property="strAudYrNoKndCd">	 	
	                          /* 감사연번종류코드 - 2015.12.18 yyh */
				               AND SUBSTR(A.AUD_KND_CD,3,1) = #strAudYrNoKndCd# 
			</isNotEmpty>		
		</isNotNull>          
        				                 
        <isNotEmpty property="strAudNoSt">	
        	<![CDATA[        
        					   AND A.AUD_NO >= #strAudNoSt#
        	]]>
        </isNotEmpty>	
        <isNotEmpty property="strAudNoEnd">
        	<![CDATA[  	
        					   AND A.AUD_NO <= #strAudNoEnd#
        	]]>
        </isNotEmpty>				                  
        <![CDATA[
			                   AND B.REL_AUD_YR = A.AUD_YR
			                   AND B.REL_AUD_NO = A.AUD_NO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.BZT_YR = B.BZT_YR
			                   AND C.BZT_SNO = B.BZT_SNO
			                 GROUP BY A.AUD_YR, A.AUD_NO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+INDEX(B, KBBADBADDED006001) */
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) AS ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE BB.BZT_YR(+) = AA.BZT_YR
			           AND BB.BZT_SNO(+) = AA.BZT_SNO
			           AND CC.BZT_YR(+) = AA.BZT_YR
			           AND CC.BZT_SNO(+) = AA.BZT_SNO
			           AND DD.BZT_YR(+) = AA.BZT_YR
			           AND DD.BZT_SNO(+) = AA.BZT_SNO ) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , TBDCMACM002M EEE
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD ='1000030') FFF
			 WHERE BBB.ORG_CD(+) = AAA.ORG_CD
			   AND EEE.DPT_CD(+) = AAA.SPV_BRDV_CD
			   AND FFF.CD(+) = AAA.AUD_BZT_KND_CD
			   AND CCC.CD(+) = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB      
        ]]>
        <include refid="include.pageOrder" />          
	</select>
	
	<!-- 기관구분  -->
	<select id="BADDED007QSelect2" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AAA.AUD_YR
			     , AAA.AUD_NO
			     , CASE WHEN AAA.AUD_YR >= '2016' 
			                 THEN F_CODE_NM('1000739',AAA.AUD_KND_CD)
			            ELSE '-' 
			        END                                        AS AUD_YR_NO_KND_NM			     
			     , AAA.AUD_STEP_SNO
			     , AAA.AUD_DCN
			     , AAA.AUD_DCN_CNT AS AUD_DCN_CNT
			     , AAA.AUD_TASK_CD
			     , AAA.ORG_DVSN_CD
			     , AAA.AUD_KND_CD
			     , AAA.SPV_BRDV_CD
			     , AAA.AUD_WAY_CD
			     , AAA.AUD_SBJ_NM
			     , AAA.AUD_BZT_KND_CD
			     , AAA.BZT_YR
			     , AAA.BZT_SNO
			     , AAA.BZT_TL_CNB
			     , AAA.ORG_CD
			     , AAA.TEAM_SNO
			     , AAA.AUD_STR_DT
			     , AAA.AUD_END_DT
			     , AAA.IN_PSON_CNT
			     , AAA.EXT_PSON_CNT
			     , AAA.IN_PSON_MAN_CNT
			     , AAA.EXT_PSON_MAN_CNT
			     , AAA.ORG_CNT
			     , BBB.ORG_NM
			     , CCC.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , DDD.USR_NAM
			     , EEE.CD_NM AS AUD_TRIP_CATE_NM
			     , FFF.DPT_NM
			     , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, '', '-') || '(' || AAA.AUD_STEP_SNO || ')' AS AUD_NO_INFO
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN_CNT
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY#	/*인자값 1*/
			                   AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
			                   AND C.ORG_DVSN_CD = #strOrgDvsnCd# /*인자값3*/
			                 GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+INDEX(A, KBBADBADDED005001) USE_MERGE(A,B) */
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN_CNT
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT DISTINCT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO ) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+)) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') EEE
			     , TBDCMACM002M FFF
			 WHERE AAA.ORG_CD = BBB.ORG_CD
			   AND AAA.SPV_BRDV_CD = FFF.DPT_CD
			   AND AAA.AUD_KND_CD = CCC.CD
			   AND AAA.BZT_TL_CNB = DDD.CNB
			   AND AAA.AUD_BZT_KND_CD = EEE.CD
			 ORDER BY BZT_YR, BZT_SNO 
        ]]>
	</select>
	
	<!-- 기관구분 paging -->	
	<select id="BADDED007QSelectPaging2" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[       
			SELECT AAA.BZT_YR
			     , AAA.BZT_SNO
                 , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || AAA.AUD_STEP_SNO  || ')'
                                                                            AS AUD_NO_INFO
			     , CCC.CD_NM || '(' || EEE.CD_NM || ')'                     AS AUD_EXEC_DVSN_CD_NM			       
			     , FFF.DPT_NM                                               AS EXEC_DPT_NM			       
			     , BBB.ORG_NM                                               AS ORG_NM
			     , AAA.ORG_CNT                                              AS ORG_CNT			     			       
			     , TO_CHAR(TO_DATE(AAA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AAA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD
			     , AAA.AUD_DCN                                              AS AUD_DCN
			     , AAA.IN_PSON_CNT  || '(' || AAA.IN_PSON_MAN_CNT  || ')'   AS IN_PSON   
			     , AAA.EXT_PSON_CNT || '(' || AAA.EXT_PSON_MAN_CNT || ')'   AS EXT_PSON   			        
			     , DDD.USR_NAM                                              AS USR_NAM			        
			     , AAA.AUD_SBJ_NM                                           AS AUD_SBJ_NM	
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN_CNT
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY#	/*인자값 1*/
			                   AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
			                   AND C.ORG_DVSN_CD = #strOrgDvsnCd# /*인자값3*/
			                 GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+INDEX(A, KBBADBADDED005001) USE_MERGE(A,B) */
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN_CNT
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT DISTINCT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO ) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+)) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') EEE
			     , TBDCMACM002M FFF
			 WHERE AAA.ORG_CD = BBB.ORG_CD
			   AND AAA.SPV_BRDV_CD = FFF.DPT_CD
			   AND AAA.AUD_KND_CD = CCC.CD
			   AND AAA.BZT_TL_CNB = DDD.CNB
			   AND AAA.AUD_BZT_KND_CD = EEE.CD
        ]]>
        <include refid="include.pageOrder" />          
	</select>	
	
	
	<!-- 대상기관 Master  -->
	<select id="BADDED007QSelect3_1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT A.BZT_YR
			     , A.ORG_CD
			     , MAX(C.ORG_NM) AS ORG_NM
			  FROM TBBADDED008L A
			     , TBBADDED002M B
			     , TBDCMACM015M C
			 WHERE 1 = 1
			   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY# /*인자값1*/
			   AND SUBSTR(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
			   AND A.ORG_CD BETWEEN #strOrgCdSt# AND #strOrgCdEnd# /*인자값3*/
			   AND B.BZT_YR = A.BZT_YR
			   AND B.BZT_SNO = A.BZT_SNO
			   AND B.BZT_DVSN_CD = '1'
			   AND C.ORG_CD = A.ORG_CD
			 GROUP BY A.BZT_YR, A.ORG_CD		 
        ]]>
	</select>

	<!-- 대상기관 Detail -->
	<select id="BADDED007QSelect3_2" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AAA.BZT_YR
			     , AAA.BZT_SNO
			     , AAA.TEAM_SNO
			     , AAA.ORG_CD
			     , F_ORG_INFO(AAA.ORG_CD,'1') AS ORG_NM   /*대표기관명*/
			     , AAA.RGN_CD
			     , AAA.AUD_STR_DT
			     , AAA.AUD_END_DT
			     , AAA.AUD_DCN
			     , AAA.BZT_TL_CNB
			     , AAA.AUD_KND_CD
			     , AAA.SPV_BRDV_CD
			     , AAA.AUD_SBJ_NM
			     , AAA.AUD_NO
			     , AAA.IN_PSON_CNT
			     , AAA.EXT_PSON_CNT
			     , AAA.IN_PSON_MAN_CNT
			     , AAA.EXT_PSON_MAN_CNT
			     , AAA.AUD_DCN_CNT
			     , BBB.CD_NM AS LCL_NM
			     , CCC.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , DDD.DPT_NM
			     , EEE.USR_NAM
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , A.TEAM_SNO
			                     , A.ORG_CD
			                     , A.RGN_CD
			                     , A.AUD_STR_DT
			                     , A.AUD_END_DT
			                     , B.AUD_DCN
			                     , B.BZT_TL_CNB
			                     , C.AUD_KND_CD
			                     , C.SPV_BRDV_CD
			                     , C.AUD_SBJ_NM
			                     , C.AUD_YR || '-' || C.AUD_TASK_CD || '-' || C.ORG_DVSN_CD|| '-' || SUBSTR(C.AUD_KND_CD, 3, 1) || '-' || C.SPV_BRDV_CD || '-' || C.AUD_WAY_CD || '-' || C.AUD_NO AS AUD_NO
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY# 
			                   AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			                   AND A.ORG_CD =#ORG_CD# /*SQL_MASTER의 ORG_CD 대입*/
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , TEAM_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , TEAM_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO, TEAM_SNO ) BB
			             , (SELECT /*+INDEX(B, KBBADBADDED006001) */
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , A.TEAM_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MAX(B.AUD_DCN) AS AUD_DCN_CNT
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO, A.TEAM_SNO ) CC
			         WHERE BB.BZT_YR(+) = AA.BZT_YR
			           AND BB.BZT_SNO(+) = AA.BZT_SNO
			           AND BB.TEAM_SNO(+) = AA.TEAM_SNO
			           AND CC.BZT_YR(+) = AA.BZT_YR
			           AND CC.BZT_SNO(+) = AA.BZT_SNO
			           AND CC.TEAM_SNO(+) = AA.TEAM_SNO ) AAA
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000001') BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM002M DDD
			     , TBDCMACM001M EEE
			 WHERE BBB.CD(+) = AAA.RGN_CD
			   AND CCC.CD(+) = AAA.AUD_KND_CD
			   AND DDD.DPT_CD(+) = AAA.SPV_BRDV_CD
			   AND EEE.CNB(+) = AAA.BZT_TL_CNB		 
        ]]>
	</select>	
	
	<!-- 감사종류  -->
	<select id="BADDED007QSelect4_1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT /*+ LEADING(C,D,A,B,E) INDEX_FFS(C KBBADBADDED002001) */
			       D.AUD_YR
			     , D.AUD_NO
			     , D.AUD_YR || (CASE WHEN D.AUD_YR >= '2016' 
			                              THEN F_CODE_NM('1000739',MAX(D.AUD_KND_CD))
			                         ELSE '-' 
			                     END ) || 
			       D.AUD_NO                               AS AUD_YRNO
			     , MAX(D.AUD_TASK_CD) AS AUD_TASK_CD
			     , MAX(D.ORG_DVSN_CD) AS ORG_DVSN_CD
			     , MAX(D.AUD_KND_CD) AS AUD_KND_CD
			     , MAX(D.SPV_BRDV_CD) AS SPV_BRDV_CD
			     , F_DPT_INFO(MAX(D.SPV_BRDV_CD),'1') DPT_NM
			     , MAX(D.AUD_WAY_CD) AS AUD_WAY_CD
			     , MAX(D.AUD_SBJ_NM) AS AUD_SBJ_NM
			     , MAX(E.ORG_NM) AS ORG_NM
			     , MAX(F.CD_NM) AS AUD_EXEC_DVSN_CD_NM
			  FROM TBBADDED008L B
			     , TBBADDED002M C
			     , TBBADDED001M D
			     , TBDCMACM015M E
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') F
			 WHERE 1=1
			   AND C.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY#  /*인자값1*/
			   AND C.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD# AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값2*/
			   AND C.BZT_YR = B.BZT_YR
			   AND C.BZT_SNO = B.BZT_SNO
			   AND C.BZT_DVSN_CD = '1'
			   AND D.AUD_YR = C.REL_AUD_YR
			   AND D.AUD_NO = C.REL_AUD_NO
        ]]>	
        <isNotEmpty property="strOrgDvsnCd">
			   AND D.ORG_DVSN_CD = #strOrgDvsnCd# /*인자값3*/
		</isNotEmpty>
        <isNotEmpty property="strAudKndCdSt">
       		<![CDATA[  
        	   AND SUBSTRING(D.AUD_KND_CD, 3, 1) >= #strAudKndCdSt#
			]]>
		</isNotEmpty>
        <isNotEmpty property="strAudKndCdEnd">
       		<![CDATA[  
        	   AND SUBSTRING(D.AUD_KND_CD, 3, 1) <= #strAudKndCdEnd#
			]]>        
		</isNotEmpty>
        <![CDATA[              		   
			   AND E.ORG_CD(+) = B.ORG_CD
			   AND F.CD(+) = D.AUD_KND_CD
			 GROUP BY D.AUD_YR, D.AUD_NO
			 ORDER BY AUD_EXEC_DVSN_CD_NM, D.AUD_NO
        ]]>
	</select>


	<select id="BADDED007QSelect4_2" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       	
			SELECT AA.AUD_YR
			     , AA.AUD_NO
			     , AA.ORG_CD
			     , MAX(AA.ORG_NM) AS ORG_NM
			     , AA.DAYS AS DAYS
			     , MAX(AA.CD_NM) AS GEN_TRIP_CATE_NM
			     , MAX(IN_PSON_CNT) AS IN_PSON_CNT
			     , MAX(EXT_PSON_CNT) AS EXT_PSON_CNT
			     , MAX(STT_RMK_PSON_CNT) AS STT_RMK_PSON_CNT
			     , MAX( BB.ORG_DVSN_CD) AS ORG_DVSN_CD
			     , MAX(BB.ORG_TYPE_SUM) AS ORG_TYPE_SUM
			     , MAX(BB.ORG_TYPE_A) AS ORG_TYPE_A
			     , MAX(BB.ORG_TYPE_B) AS ORG_TYPE_B
			     , MAX(BB.ORG_TYPE_C) AS ORG_TYPE_C
			     , MAX(BB.ORG_TYPE_D) AS ORG_TYPE_D
			     , MAX(AA.BZT_DCN) AS BZT_DCN 
			  FROM (SELECT AUD_YR
			             , AUD_NO
			             , ORG_CD
			             , DAYS
			             , MAX(ORG_NM) AS ORG_NM
			             , MAX(CD_NM) CD_NM
			             , MAX(BZT_DCN) BZT_DCN
			             , SUM( CASE
			                                         WHEN A.STF_DVSN_CD = '0' THEN A.AUD_DCN
			                                         ELSE 0
			                                       END) AS IN_PSON_CNT
			             , SUM( CASE
			                                         WHEN A.STF_DVSN_CD = '1' THEN A.AUD_DCN
			                                         ELSE 0
			                                       END) AS EXT_PSON_CNT
			             , SUM( CASE
			                                         WHEN A.STF_DVSN_CD NOT IN ('0'
			                             ,'1') THEN A.AUD_DCN
			                                         ELSE 0
			                                       END) AS STT_RMK_PSON_CNT
			          FROM (SELECT A.AUD_YR
			                     , A.AUD_NO
			                     , B.AUD_DCN AS DAYS
			                     , C.ORG_CD
			                     , D.STF_DVSN_CD
			                     , E.AUD_DCN
			                     , F.ORG_NM
			                     , G.CD_NM
			                     , H.BZT_DCN
			                  FROM TBBADDED001M A
			                     , TBBADDED002M B
			                     , TBBADDED008L C
			                     , TBBADDED005L D
			                     , TBBADDED006L E
			                     , TBDCMACM015M F
			                     , TBDCMACM013C G
			                     , (SELECT BZT_YR
			                             , BZT_SNO
			                             , MAX(BZT_DCN) AS BZT_DCN
			                          FROM TBBADDED011L
			                         GROUP BY BZT_YR, BZT_SNO) H
			                 WHERE 1 =1
			                   AND A.AUD_YR = #AUD_YR# /*인자값1 AUD_YR*/
			                   AND A.AUD_NO = #AUD_NO# /*인자값1 AUD_NO*/
			                   AND B.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD# AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값2*/
			                   AND B.REL_AUD_YR = A.AUD_YR
			                   AND B.REL_AUD_NO = A.AUD_NO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.BZT_YR = B.BZT_YR
			                   AND C.BZT_SNO = B.BZT_SNO
			                   AND D.BZT_YR = C.BZT_YR
			                   AND D.BZT_SNO = C.BZT_SNO
			                   AND D.TEAM_SNO = C.TEAM_SNO
			                   AND E.BZT_YR = D.BZT_YR
			                   AND E.BZT_SNO = D.BZT_SNO
			                   AND E.TEAM_SNO = D.TEAM_SNO
			                   AND E.BGRP_TG_ORG_SNO = C.BGRP_TG_ORG_SNO
			                   AND E.PCT_ALC_SNO = D.PCT_ALC_SNO
			                   AND F.ORG_CD(+) = C.ORG_CD
			                   AND G.CD(+) = B.GEN_BZT_KND_CD
			                   AND G.CMM_CD_DVSN_CD(+) = '10000010'
			                   AND B.BZT_YR = H.BZT_YR(+)
			                   AND B.BZT_SNO = H.BZT_SNO(+) ) A
			         GROUP BY AUD_YR, AUD_NO, ORG_CD, DAYS ) AA
			     , (SELECT AUD_YR
			             , AUD_NO
			             , ORG_CD
			             , CASE
			                         WHEN SUBSTRING(ORG_DVSN_CD, 1, 1) NOT IN ('1'
			                     , '2'
			                     , '3') THEN '9'
			                         ELSE SUBSTRING(ORG_DVSN_CD, 1, 1)
			                       END AS ORG_DVSN_CD
			             , CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '1' THEN 1
			                         ELSE 0
			                       END || CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '2' THEN 1
			                         ELSE 0
			                       END || CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '3' THEN 1
			                         ELSE 0
			                       END || CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) NOT IN ('1'
			                     , '2'
			                     , '3') THEN 1
			                         ELSE 0
			                       END AS ORG_TYPE_SUM
			             , CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '1' THEN 1
			                         ELSE 0
			                       END AS ORG_TYPE_A
			             , CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '2' THEN 1
			                         ELSE 0
			                       END AS ORG_TYPE_B
			             , CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) = '3' THEN 1
			                         ELSE 0
			                       END AS ORG_TYPE_C
			             , CASE
			                         WHEN SUBSTRING(A.ORG_DVSN_CD, 1, 1) NOT IN ('1'
			                     , '2'
			                     , '3') THEN 1
			                         ELSE 0
			                       END AS ORG_TYPE_D
			          FROM (SELECT DISTINCT A.AUD_YR
			                     , A.AUD_NO
			                     , C.BZT_YR
			                     , C.BZT_SNO
			                     , C.ORG_CD
			                     , D.ORG_DVSN_CD
			                  FROM TBBADDED001M A
			                     , TBBADDED002M B
			                     , TBBADDED008L C
			                     , TBDCMACM015M D
			                 WHERE 1=1
			                   AND A.AUD_YR = #AUD_YR# /*인자값1 AUD_YR*/
			                   AND A.AUD_NO = #AUD_NO# /*인자값1 AUD_NO*/
			                   AND B.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD# AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD#  /*인자값2*/
			                   AND B.REL_AUD_YR = A.AUD_YR
			                   AND B.REL_AUD_NO = A.AUD_NO
			                   AND C.BZT_YR = B.BZT_YR
			                   AND C.BZT_SNO = B.BZT_SNO
			                   AND D.ORG_CD(+) = C.ORG_CD ) A ) BB
			 WHERE 1 =1
			   AND BB.AUD_YR = AA.AUD_YR
			   AND BB.AUD_NO = AA.AUD_NO
			   AND BB.ORG_CD = AA.ORG_CD
			   AND AA.AUD_YR = #AUD_YR#  /*인자값1 AUD_YR*/
			   AND AA.AUD_NO = #AUD_NO# /*인자값1 AUD_NO*/
			 GROUP BY AA.AUD_YR, AA.AUD_NO, AA.ORG_CD, AA.DAYS
        ]]>
	</select>
	
	
	<!-- 주관국과  -->
	<select id="BADDED007QSelect5" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AAA.*
			     , BBB.ORG_NM
			     , CCC.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , DDD.USR_NAM
			     , EEE.CD_NM AS AUD_TRIP_CATE_NM
			     , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || AUD_STEP_SNO || ')' AS AUD_YR_NO_KND_NM
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
							   AND C.SPV_BRDV_CD = #strSpvBrdvCd# 	/*주관국과코드*/

			                 GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+) ) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD='1000030') EEE
			 WHERE BBB.ORG_CD = AAA.ORG_CD
			   AND EEE.CD = AAA.AUD_BZT_KND_CD
			   AND CCC.CD = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB
			 ORDER BY BZT_YR, BZT_SNO    
        ]]>
	</select>
	
	<!-- 주관국과  -->
	<select id="BADDED007QSelectPaging5" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" /> 	
        <![CDATA[       
			SELECT 
         		   F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || 
			       AAA.AUD_STEP_SNO  || ')'                                 AS AUD_NO_INFO
			     , CCC.CD_NM || '(' || EEE.CD_NM || ')'                     AS AUD_EXEC_DVSN_CD_NM
			     , F_DPT_INFO(AAA.SPV_BRDV_CD,'1')                          AS EXEC_DPT_NM
			     , BBB.ORG_NM                                               AS ORG_NM
			     , AAA.ORG_CNT                                              AS ORG_CNT
			     , TO_CHAR(TO_DATE(AAA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AAA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD			     
			     , AAA.AUD_DCN                                              AS AUD_DCN
			     , DDD.USR_NAM                                              AS USR_NAM
			     , AAA.IN_PSON_CNT  || '(' || AAA.IN_PSON_MAN_CNT  || ')'   AS IN_PSON   
			     , AAA.EXT_PSON_CNT || '(' || AAA.EXT_PSON_MAN_CNT || ')'   AS EXT_PSON 			     
			     , AAA.AUD_SBJ_NM                                           AS AUD_SBJ_NM	
			     , AAA.BZT_YR
			     , AAA.BZT_SNO		
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB.EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC.EXT_PSON_MAN_CNT
			             , CC.AUD_DCN
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
							   AND C.SPV_BRDV_CD = #strSpvBrdvCd# 	/*주관국과코드*/

			                 GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+) ) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD='1000030') EEE
			 WHERE BBB.ORG_CD = AAA.ORG_CD
			   AND EEE.CD = AAA.AUD_BZT_KND_CD
			   AND CCC.CD = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB    
        ]]>
        <include refid="include.pageOrder" />          
	</select>	
	
	<!-- 업무분류  -->
	<select id="BADDED007QSelect6" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AAA.*
			     , BBB.ORG_NM
			     , CCC.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , DDD.USR_NAM
			     , EEE.DPT_NM
			     , FFF.CD_NM AS AUD_TRIP_CATE_NM
                 , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || AUD_STEP_SNO || ')' AS AUD_YR_NO_KND_NM
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
				  			   AND C.TSK_CAT_CD = #strTskCatCd#
			                GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+)) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , TBDCMACM002M EEE
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') FFF
			 WHERE BBB.ORG_CD = AAA.ORG_CD
			   AND CCC.CD = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB
			   AND EEE.DPT_CD = AAA.SPV_BRDV_CD
			   AND FFF.CD = AAA.AUD_BZT_KND_CD
			 ORDER BY BZT_YR, BZT_SNO        
        ]]>
	</select>
	<select id="BADDED007QSelect6_1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[  
			SELECT CD_NM AS TASK_CATE_NM
			  FROM TBDCMACM013C
			 WHERE CMM_CD_DVSN_CD = '1000120'
			   AND CD = #strTskCatCd# /*인자값 3*/        	
        ]]>
	</select>	
	
	<select id="BADDED007QSelectPaging6" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[       
			SELECT F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || 
			       AAA.AUD_STEP_SNO  || ')'                                 AS AUD_NO_INFO
			     , CCC.CD_NM || '(' || FFF.CD_NM || ')'                     AS AUD_EXEC_DVSN_CD_NM			       
			     , F_DPT_INFO(AAA.SPV_BRDV_CD,'1')                          AS EXEC_DPT_NM			       
			     , BBB.ORG_NM                                               AS ORG_NM
			     , AAA.ORG_CNT                                              AS ORG_CNT
			     , TO_CHAR(TO_DATE(AAA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AAA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD				     
			     , AAA.AUD_DCN                                              AS AUD_DCN
			     , DDD.USR_NAM                                              AS USR_NAM			     
			     , AAA.IN_PSON_CNT  || '(' || AAA.IN_PSON_MAN_CNT  || ')'   AS IN_PSON   
			     , AAA.EXT_PSON_CNT || '(' || AAA.EXT_PSON_MAN_CNT || ')'   AS EXT_PSON 
			     , AAA.AUD_SBJ_NM                                           AS AUD_SBJ_NM	
			     , AAA.BZT_YR
			     , AAA.BZT_SNO		
			  FROM (SELECT AA.*
			             , BB.IN_PSON_CNT
			             , BB. EXT_PSON_CNT
			             , CC.IN_PSON_MAN_CNT
			             , CC. EXT_PSON_MAN_CNT
			             , CC.AUD_DCN
			             , DD.ORG_CNT
			          FROM (SELECT A.BZT_YR
			                     , A.BZT_SNO
			                     , B.AUD_STEP_SNO
			                     , MIN(A.ORG_CD) AS ORG_CD
			                     , MAX(A.TEAM_SNO) AS TEAM_SNO
			                     , MIN(A.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(A.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.BZT_TL_CNB) AS BZT_TL_CNB
			                     , MAX(B.AUD_BZT_KND_CD) AS AUD_BZT_KND_CD
			                     , MAX(C.AUD_YR) AS AUD_YR
			                     , MAX(C.AUD_NO) AS AUD_NO
			                     , MAX(AUD_TASK_CD) AS AUD_TASK_CD
			                     , MAX(C.ORG_DVSN_CD) AS ORG_DVSN_CD
			                     , MAX(C.AUD_KND_CD) AS AUD_KND_CD
			                     , MAX(C.SPV_BRDV_CD) AS SPV_BRDV_CD
			                     , MAX(C.AUD_WAY_CD) AS AUD_WAY_CD
			                     , MAX(C.AUD_SBJ_NM) AS AUD_SBJ_NM
			                  FROM TBBADDED008L A
			                     , TBBADDED002M B
			                     , TBBADDED001M C
			                 WHERE 1 = 1
			                   AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			                   AND B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.BZT_DVSN_CD = '1'
			                   AND C.AUD_YR = B.REL_AUD_YR
			                   AND C.AUD_NO = B.REL_AUD_NO
				  			   AND C.TSK_CAT_CD = #strTskCatCd#
			                GROUP BY A.BZT_YR, A.BZT_SNO, B.AUD_STEP_SNO ) AA
			             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
			                  BZT_YR
			                     , BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
			                                                         ELSE 0
			                                                       END) AS IN_PSON_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE 1
			                                                       END) AS EXT_PSON_CNT
			                  FROM (SELECT DISTINCT BZT_YR
			                             , BZT_SNO
			                             , PCT_CNB
			                             , STF_DVSN_CD
			                          FROM TBBADDED005L) A
			                 GROUP BY BZT_YR, BZT_SNO ) BB
			             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
			                  A.BZT_YR
			                     , A.BZT_SNO
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
			                                                         ELSE 0
			                                                       END) AS IN_PSON_MAN_CNT
			                     , SUM( CASE
			                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
			                                                         ELSE B.AUD_DCN
			                                                       END) AS EXT_PSON_MAN_CNT
			                     , MIN(B.AUD_STR_DT) AS AUD_STR_DT
			                     , MAX(B.AUD_END_DT) AS AUD_END_DT
			                     , MAX(B.AUD_DCN) AS AUD_DCN
			                  FROM TBBADDED005L A
			                     , TBBADDED006L B
			                 WHERE B.BZT_YR = A.BZT_YR
			                   AND B.BZT_SNO = A.BZT_SNO
			                   AND B.TEAM_SNO = A.TEAM_SNO
			                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
			             , (SELECT BZT_YR
			                     , BZT_SNO
			                     , COUNT(DISTINCT ORG_CD) ORG_CNT
			                  FROM TBBADDED008L
			                 GROUP BY BZT_YR, BZT_SNO) DD
			         WHERE AA.BZT_YR = BB.BZT_YR(+)
			           AND AA.BZT_SNO = BB.BZT_SNO(+)
			           AND AA.BZT_YR = CC.BZT_YR(+)
			           AND AA.BZT_SNO = CC.BZT_SNO(+)
			           AND AA.BZT_YR = DD.BZT_YR(+)
			           AND AA.BZT_SNO = DD.BZT_SNO(+)) AAA
			     , TBDCMACM015M BBB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') CCC
			     , TBDCMACM001M DDD
			     , TBDCMACM002M EEE
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') FFF
			 WHERE BBB.ORG_CD = AAA.ORG_CD
			   AND CCC.CD = AAA.AUD_KND_CD
			   AND DDD.CNB = AAA.BZT_TL_CNB
			   AND EEE.DPT_CD = AAA.SPV_BRDV_CD
			   AND FFF.CD = AAA.AUD_BZT_KND_CD
        ]]>
        <include refid="include.pageOrder" />         
	</select>	
	
	
	<!-- 감사자  -->
	<select id="BADDED007QSelect7" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT AA.*
			     , BB.ORG_NM
			     , CC.CD_NM
			     , DD.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , EE.CD_NM AS LCL_NM
			     , FF.USR_NAM
			     , GG.DPT_NM
			  FROM (SELECT /* E.AUD_YR || '-' || SUBSTR(E.AUD_TASK_CD,-1) ||'-'|| E.ORG_DVSN_CD || '-' || E.AUD_KND_CD || '-' || E.SPV_BRDV_CD || '-' || SUBSTR(E.AUD_WAY_CD,-1) ||'-' || E.AUD_NO AS AUD_YRNO */
			               
			               /* 감사연번호 변경 - 2016.04.08 yyh */
			               F_MNG_KND_AUDYRNO(E.AUD_YR, E.AUD_NO, E.AUD_KND_CD, '-') AS AUD_YRNO
			             , A.STF_DVSN_CD
			             , A.PCT_CNB
			             , A.PCT_NM
			             , B.BZT_YR
			             , B.BZT_SNO
			             , B.TEAM_SNO
			             , A.PCT_ALC_SNO
			             , B.BGRP_TG_ORG_SNO
			             , B.AUD_STR_DT
			             , B.AUD_END_DT
			             , B.BZT_DCN
			             , C.ORG_CD
			             , C.RGN_CD
			             , E.AUD_YR
			             , E.AUD_NO
			             , E.AUD_TASK_CD
			             , E.ORG_DVSN_CD
			             , E.AUD_KND_CD
			             , E.AUD_WAY_CD
			             , E.AUD_SBJ_NM
			             , E.AUD_TOT_DRTR_CNB
			             , E.SPV_BRDV_CD
			          FROM TBBADDED005L A
			             , TBBADDED006L B
			             , TBBADDED008L C
			             , TBBADDED002M D
			             , TBBADDED001M E
			         WHERE 1 = 1
			           AND A.PCT_CNB = #strBztTlCnb#
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.TEAM_SNO = A.TEAM_SNO
			           AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			           AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			           AND C.BZT_YR = B.BZT_YR
			           AND C.BZT_SNO = B.BZT_SNO
			           AND C.TEAM_SNO = B.TEAM_SNO
			           AND C.BGRP_TG_ORG_SNO = B.BGRP_TG_ORG_SNO
			           AND D.BZT_YR = A.BZT_YR
			           AND D.BZT_SNO = A.BZT_SNO
			           AND A.STF_DVSN_CD = #strStfDvsnCd# 	/*내부자:0 수견자:1*/
			           AND E.AUD_YR = D.REL_AUD_YR
			           AND E.AUD_NO = D.REL_AUD_NO ) AA
			     , TBDCMACM015M BB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000020') CC
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') DD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000001') EE
			     , TBDCMACM001M FF
			     , TBDCMACM002M GG
			 WHERE AA.ORG_CD = BB.ORG_CD
			   AND AA.STF_DVSN_CD = CC.CD
			   AND AA.AUD_KND_CD = DD.CD
			   AND AA.RGN_CD = EE.CD
			   AND AA.AUD_TOT_DRTR_CNB = FF.CNB
			   AND AA.SPV_BRDV_CD = GG.DPT_CD
			 ORDER BY  AA.AUD_YR ,
               AA.AUD_NO ,
               AA.AUD_TASK_CD,
               AA.ORG_DVSN_CD,
               AA.AUD_KND_CD,
               AA.SPV_BRDV_CD,
               AA.AUD_WAY_CD,
               AA.AUD_NO,
               AA.AUD_STR_DT
        ]]>
	</select>
	
	<select id="BADDED007QSelect7_1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[     
		 select A.USR_NAM
		     , A.DPT_CD
		     , A.RANK_CD
		     , F_CODE_NM('1000173',RANK_CD) AS RANK_NM
		     , A.CNB
		     , B.DPT_NM
		from TBDCMACM001M A
		   , TBDCMACM002M B
		where 1=1 
		 and A.CNB LIKE   #strBztTlCnb# /*인자값 4*/
		and B.DPT_CD = A.DPT_CD	
        ]]>
	</select>	   
	
	<select id="BADDED007QSelectPaging7" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[       
			SELECT 
			       AA.AUD_YRNO                                             AS AUD_NO_INFO
			     , DD.CD_NM                                                AS AUD_EXEC_DVSN_CD_NM
			     , GG.DPT_NM	                                           AS EXEC_DPT_NM		       
			     , FF.USR_NAM                                              AS USR_NAM		       
			     , TO_CHAR(TO_DATE(AA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD			       
			     , AA.BZT_DCN                                              AS AUD_DCN
			     , EE.CD_NM                                                AS LCL_NM			       
			     , BB.ORG_NM                                               AS ORG_NM
			     , AA.AUD_SBJ_NM                                           AS AUD_SBJ_NM
			     
			     , AA.AUD_YR
			     , AA.AUD_NO
			     , AA.AUD_TASK_CD
			     , AA.ORG_DVSN_CD
			     , AA.AUD_KND_CD
			     , AA.SPV_BRDV_CD
			     , AA.AUD_WAY_CD
			     , AA.AUD_STR_DT
			  FROM (SELECT /* E.AUD_YR || '-' || SUBSTR(E.AUD_TASK_CD,-1) ||'-'|| E.ORG_DVSN_CD || '-' || E.AUD_KND_CD || '-' || E.SPV_BRDV_CD || '-' || SUBSTR(E.AUD_WAY_CD,-1) ||'-' || E.AUD_NO AS AUD_YRNO */
			              
			             /* 감사연번호 변경 - 2016.04.08 yyh */
			               F_MNG_KND_AUDYRNO(E.AUD_YR, E.AUD_NO, E.AUD_KND_CD, '-')  AS AUD_YRNO
			             , A.STF_DVSN_CD
			             , A.PCT_CNB
			             , A.PCT_NM
			             , B.BZT_YR
			             , B.BZT_SNO
			             , B.TEAM_SNO
			             , A.PCT_ALC_SNO
			             , B.BGRP_TG_ORG_SNO
			             , B.AUD_STR_DT
			             , B.AUD_END_DT
			             , B.BZT_DCN
			             , C.ORG_CD
			             , C.RGN_CD
			             , E.AUD_YR
			             , E.AUD_NO
			             , E.AUD_TASK_CD
			             , E.ORG_DVSN_CD
			             , E.AUD_KND_CD
			             , E.AUD_WAY_CD
			             , E.AUD_SBJ_NM
			             , E.AUD_TOT_DRTR_CNB
			             , E.SPV_BRDV_CD
			          FROM TBBADDED005L A
			             , TBBADDED006L B
			             , TBBADDED008L C
			             , TBBADDED002M D
			             , TBBADDED001M E
			         WHERE 1 = 1
			           AND A.PCT_CNB = #strBztTlCnb#
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.TEAM_SNO = A.TEAM_SNO
			           AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			           AND SUBSTRING(B.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#
			           AND C.BZT_YR = B.BZT_YR
			           AND C.BZT_SNO = B.BZT_SNO
			           AND C.TEAM_SNO = B.TEAM_SNO
			           AND C.BGRP_TG_ORG_SNO = B.BGRP_TG_ORG_SNO
			           AND D.BZT_YR = A.BZT_YR
			           AND D.BZT_SNO = A.BZT_SNO
			           AND A.STF_DVSN_CD = #strStfDvsnCd# 	/*내부자:0 수견자:1*/
			           AND E.AUD_YR = D.REL_AUD_YR
			           AND E.AUD_NO = D.REL_AUD_NO ) AA
			     , TBDCMACM015M BB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000020') CC
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') DD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000001') EE
			     , TBDCMACM001M FF
			     , TBDCMACM002M GG
			 WHERE AA.ORG_CD = BB.ORG_CD
			   AND AA.STF_DVSN_CD = CC.CD
			   AND AA.AUD_KND_CD = DD.CD
			   AND AA.RGN_CD = EE.CD
			   AND AA.AUD_TOT_DRTR_CNB = FF.CNB
			   AND AA.SPV_BRDV_CD = GG.DPT_CD
        ]]>
        <include refid="include.pageOrder" />          
	</select>
	
	
	<!-- 외부인력활용부서  -->
	<select id="BADDED007QSelect8" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			 SELECT B.BLT_BRDV_CD
			     , (SELECT DPT_NM
			          FROM TBDCMACM002M
			         WHERE DPT_CD = B.BLT_BRDV_CD) 			AS ORG_NM
			     , #strBztStYY#  || '.' || #strBztStMM# 	AS FROM_DATE	
			     , #strBztEndYY# || '.' || #strBztEndMM# 	AS TO_DATE 		
			     , B.BLT_BRDV_CD
			     , A.AUD_STR_DT
			  FROM TBBADDED006L A
			     , TBBADDED005L B
			 WHERE 1 = 1
			   AND SUBSTR(A.AUD_STR_DT, 1, 6) >= #strBztStYY#||#strBztStMM#  	
			   AND SUBSTR(A.AUD_STR_DT, 1, 6) <= #strBztEndYY#||#strBztEndMM# 	
			   AND B.BZT_YR = A.BZT_YR
			   AND B.BZT_SNO = A.BZT_SNO
			   AND B.TEAM_SNO = A.TEAM_SNO
			   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
		]]>
		<isNotEmpty property="strBltBrdvCd">
			   AND B.BLT_BRDV_CD = #strBltBrdvCd#
		</isNotEmpty>	
        <![CDATA[ 				   
			   AND B.STF_DVSN_CD != '0'
			 GROUP BY B.BLT_BRDV_CD,A.AUD_STR_DT       
        ]]>
	</select>

	<select id="BADDED007QSelect8_1" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT F_MNG_KND_AUDYRNO(AA.AUD_YR, AA.AUD_NO, AA.AUD_KND_CD, '-') || '(' || AA.AUD_STEP_SNO || ')' AS AUD_NO
			     , AA.AUD_STR_DT
			     , AA.AUD_END_DT
			     , AA.BZT_DCN
			     , AA.STF_DVSN_CD
			     , '' AS GBUN
			     , AA.PCT_RANK_CD
			     , AA.PCT_NM
			     , AA.AUD_SBJ_NM
			     , BB.ORG_NM
			     , CC.CD_NM
			     , DD.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , EE.USR_NAM
			     , FF.CD_NM AS POS_CLASS_NM
			     , GG.CD_NM AS AUD_TRIP_CATE_NM
			     , AA.BLT_BRDV_CD
			  FROM (SELECT A.BZT_YR
			             , A.BZT_SNO
			             , A.TEAM_SNO
			             , A.PCT_ALC_SNO
			             , A.BGRP_TG_ORG_SNO
			             , A.AUD_STR_DT
			             , A.AUD_END_DT
			             , A.BZT_DCN
			             , B.STF_DVSN_CD
			             , B.PCT_CNB
			             , B.PCT_RANK_CD
			             , B.PCT_NM
			             , C.ORG_CD
			             , E.AUD_YR
			             , E.AUD_NO
			             , E.AUD_TASK_CD
			             , E.ORG_DVSN_CD
			             , E.AUD_KND_CD
			             , E.AUD_WAY_CD
			             , E.AUD_SBJ_NM
			             , E.AUD_TOT_DRTR_CNB
			             , E.SPV_BRDV_CD
			             , D.AUD_STEP_SNO
			             , D.AUD_BZT_KND_CD
			             , B.BLT_BRDV_CD
			          FROM TBBADDED006L A
			             , TBBADDED005L B
			             , TBBADDED008L C
			             , TBBADDED002M D
			             , TBBADDED001M E
			         WHERE 1 = 1
			           AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM#  AND #strBztEndYY#||#strBztEndMM# /*인자값1 FROM~TO*/
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.TEAM_SNO = A.TEAM_SNO
			           AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			           AND B.BLT_BRDV_CD = #strBltBrdvCd# /*인자값2*/
			           AND B.STF_DVSN_CD != '0'
			           AND C.BZT_YR = A.BZT_YR
			           AND C.BZT_SNO = A.BZT_SNO
			           AND C.TEAM_SNO = A.TEAM_SNO
			           AND C.BGRP_TG_ORG_SNO = A.BGRP_TG_ORG_SNO
			           AND D.BZT_YR = A.BZT_YR
			           AND D.BZT_SNO = A.BZT_SNO
			           AND D.BZT_DVSN_CD = '1'
			           AND E.AUD_YR = D.REL_AUD_YR
			           AND E.AUD_NO = D.REL_AUD_NO ) AA
			     , TBDCMACM015M BB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000020') CC
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') DD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') GG
			     , TBDCMACM001M EE
			     , TBDCMACM013C FF
			 WHERE AA.ORG_CD = BB.ORG_CD
			   AND AA.STF_DVSN_CD = CC.CD
			   AND AA.AUD_KND_CD = DD.CD
			   AND AA.AUD_TOT_DRTR_CNB = EE.CNB
			   AND AA.PCT_RANK_CD = FF.CD
			   AND FF.CMM_CD_DVSN_CD = '1000173'
			   AND GG.CD = AA.AUD_BZT_KND_CD
			 ORDER BY PCT_NM, AA.AUD_YR, AA.AUD_NO, AA.AUD_STR_DT, AA.AUD_END_DT         
        ]]>
	</select>
	
	<select id="BADDED007QSelect8_2" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT DPT_NM AS BELONG_DEPT_CD
			  FROM TBDCMACM002M
			 WHERE DPT_CD = #strDptCd# /*인자값3: 로그인한 소속부서*/        
        ]]>
	</select>


	<select id="BADDED007QSelect8_3" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT F_MNG_KND_AUDYRNO(AA.AUD_YR, AA.AUD_NO, AA.AUD_KND_CD, '-') || '(' || AA.AUD_STEP_SNO || ')' AS AUD_NO
			     , AA.AUD_STR_DT
			     , AA.AUD_END_DT
			     , AA.BZT_DCN
			     , AA.STF_DVSN_CD
			     , AA.PCT_RANK_CD
			     , (SELECT CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD='1000173'
			           AND CD = AA.PCT_RANK_CD) AS POS_CLASS_NM
			     , AA.PCT_NM
			     , AA.AUD_SBJ_NM
			     , BB.ORG_NM
			     , SUBSTRING(CC.CD_NM, 1, 2) AS GBUN
			     , DD.CD_NM AS AUD_EXEC_DVSN_CD_NM
			     , EE.USR_NAM
			     , GG.CD_NM AS AUD_TRIP_CATE_NM
			  FROM (SELECT A.BZT_YR
			             , A.BZT_SNO
			             , A.TEAM_SNO
			             , A.PCT_ALC_SNO
			             , A.BGRP_TG_ORG_SNO
			             , A.AUD_STR_DT
			             , A.AUD_END_DT
			             , A.BZT_DCN
			             , B.STF_DVSN_CD
			             , B.PCT_CNB
			             , B.PCT_RANK_CD
			             , B.PCT_NM
			             , C.ORG_CD
			             , E.AUD_YR
			             , E.AUD_NO
			             , E.AUD_TASK_CD
			             , E.ORG_DVSN_CD
			             , E.AUD_KND_CD
			             , E.AUD_WAY_CD
			             , E.AUD_SBJ_NM
			             , E.AUD_TOT_DRTR_CNB
			             , E.SPV_BRDV_CD
			             , D.AUD_STEP_SNO
			             , D.AUD_BZT_KND_CD
			          FROM TBBADDED006L A
			             , TBBADDED005L B
			             , TBBADDED008L C
			             , TBBADDED002M D
			             , TBBADDED001M E
			         WHERE 1 = 1
			           AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM#  AND #strBztEndYY#||#strBztEndMM# /*인자값1 FROM ~ TO*/
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.TEAM_SNO = A.TEAM_SNO
			           AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
					   AND B.BLT_BRDV_CD = #strBltBrdvCd# /*인자값2*/
			           AND B.STF_DVSN_CD != '0'
			           AND C.BZT_YR = A.BZT_YR
			           AND C.BZT_SNO = A.BZT_SNO
			           AND C.TEAM_SNO = A.TEAM_SNO
			           AND C.BGRP_TG_ORG_SNO = A.BGRP_TG_ORG_SNO
			           AND D.BZT_YR = A.BZT_YR
			           AND D.BZT_SNO = A.BZT_SNO
			           AND D.BZT_DVSN_CD = '1'
			           AND E.AUD_YR = D.REL_AUD_YR
			           AND E.AUD_NO = D.REL_AUD_NO
		]]>	
		<isNotEmpty property="strOrgDvsnCd">
		 			   AND E.ORG_DVSN_CD = #strOrgDvsnCd# /*인자값3*/
		</isNotEmpty>		           
        <![CDATA[    
        	          
			          ) AA
			     , TBDCMACM015M BB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000020') CC
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') DD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') GG
			     , TBDCMACM001M EE
			 WHERE AA.ORG_CD = BB.ORG_CD
			   AND AA.STF_DVSN_CD = CC.CD
			   AND AA.AUD_KND_CD = DD.CD
			   AND AA.AUD_TOT_DRTR_CNB = EE.CNB
			   AND GG.CD = AA.AUD_BZT_KND_CD
			 ORDER BY AA.AUD_YR, AA.AUD_NO         
        ]]>
	</select>	
	
	<select id="BADDED007QSelectPaging8" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />	
        <![CDATA[       
			SELECT F_MNG_KND_AUDYRNO(AA.AUD_YR, AA.AUD_NO, AA.AUD_KND_CD, '-')    || '(' || 
			       AA.AUD_STEP_SNO  || ')'                                 AS AUD_NO_INFO
			     , DD.CD_NM || '(' || GG.CD_NM || ')'                      AS AUD_EXEC_DVSN_CD_NM				       
			     , BB.ORG_NM                                               AS ORG_NM			       
			     , TO_CHAR(TO_DATE(AA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			       TO_CHAR(TO_DATE(AA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD
			     , AA.BZT_DCN                                              AS AUD_DCN			       
			     , CC.CD_NM                                                AS GUBUN
			     , FF.CD_NM                                                AS POS_CLASS_NM			     
			     , AA.PCT_NM                                               AS PCT_NM
			     , EE.USR_NAM                                              AS USR_NAM
			     , AA.AUD_SBJ_NM                                           AS AUD_SBJ_NM
			     
			     , AA.AUD_YR
			     , AA.AUD_NO
		         , AA.AUD_STR_DT
		         , AA.AUD_END_DT
		         
			  FROM (SELECT A.BZT_YR
			             , A.BZT_SNO
			             , A.TEAM_SNO
			             , A.PCT_ALC_SNO
			             , A.BGRP_TG_ORG_SNO
			             , A.AUD_STR_DT
			             , A.AUD_END_DT
			             , A.BZT_DCN
			             , B.STF_DVSN_CD
			             , B.PCT_CNB
			             , B.PCT_RANK_CD
			             , B.PCT_NM
			             , C.ORG_CD
			             , E.AUD_YR
			             , E.AUD_NO
			             , E.AUD_TASK_CD
			             , E.ORG_DVSN_CD
			             , E.AUD_KND_CD
			             , E.AUD_WAY_CD
			             , E.AUD_SBJ_NM
			             , E.AUD_TOT_DRTR_CNB
			             , E.SPV_BRDV_CD
			             , D.AUD_STEP_SNO
			             , D.AUD_BZT_KND_CD
			             , B.BLT_BRDV_CD
			          FROM TBBADDED006L A
			             , TBBADDED005L B
			             , TBBADDED008L C
			             , TBBADDED002M D
			             , TBBADDED001M E
			         WHERE 1 = 1
			           AND SUBSTRING(A.AUD_STR_DT, 1, 6) BETWEEN #strBztStYY#||#strBztStMM#  AND #strBztEndYY#||#strBztEndMM# /*인자값1 FROM~TO*/
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.TEAM_SNO = A.TEAM_SNO
			           AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
			           AND B.BLT_BRDV_CD = #strBltBrdvCd# /*인자값2*/
			           AND B.STF_DVSN_CD != '0'
			           AND C.BZT_YR = A.BZT_YR
			           AND C.BZT_SNO = A.BZT_SNO
			           AND C.TEAM_SNO = A.TEAM_SNO
			           AND C.BGRP_TG_ORG_SNO = A.BGRP_TG_ORG_SNO
			           AND D.BZT_YR = A.BZT_YR
			           AND D.BZT_SNO = A.BZT_SNO
			           AND D.BZT_DVSN_CD = '1'
			           AND E.AUD_YR = D.REL_AUD_YR
			           AND E.AUD_NO = D.REL_AUD_NO ) AA
			     , TBDCMACM015M BB
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000020') CC
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007') DD
			     , (SELECT CD
			             , CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000030') GG
			     , TBDCMACM001M EE
			     , TBDCMACM013C FF
			 WHERE AA.ORG_CD = BB.ORG_CD
			   AND AA.STF_DVSN_CD = CC.CD
			   AND AA.AUD_KND_CD = DD.CD
			   AND AA.AUD_TOT_DRTR_CNB = EE.CNB
			   AND AA.PCT_RANK_CD = FF.CD
			   AND FF.CMM_CD_DVSN_CD = '1000173'
			   AND GG.CD = AA.AUD_BZT_KND_CD
        ]]>
        <include refid="include.pageOrder" /> 	        
	</select>
		
	<!-- 기관별 실시명세  -->
	<select id="BADDED007QSelect9" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
				SELECT AAA.*
				     , BBB.ORG_NM
				     , BBB.ORG_CD
				     , CCC.CD_NM
				     , DDD.CD_NM AS AUD_EXEC_DVSN_CD_NM
				     , EEE.DPT_NM
				     , FFF.CD_NM AS AUD_TRIP_CATE_NM
			         , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-') || '(' || AUD_STEP_SNO || ')' AS AUD_YR_NO_KND_NM 
				  FROM (SELECT AA.*
				             , BB.IN_PSON_CNT
				             , BB. EXT_PSON_CNT
				             , CC.IN_PSON_MAN_CNT
				             , CC. EXT_PSON_MAN_CNT
				             , CC.AUD_DCN
				          FROM (SELECT /*+ USE_HASH(A,B,C)*/
				                  A.BZT_YR
				                     , A.BZT_SNO
				                     , A.TEAM_SNO
				                     , A.BZT_YR||'-'||A.BZT_SNO||'('||A.TEAM_SNO||')' AS TOTAL_NO
				                     , A.ORG_CD
				                     , A.AUD_STR_DT
				                     , A.AUD_END_DT
				                     , B.AUD_STEP_SNO
				                     , B.AUD_BZT_KND_CD
				                     , C.AUD_YR
				                     , C.AUD_NO
				                     , C.ORG_DVSN_CD
				                     , C.AUD_KND_CD
				                     , C.SPV_BRDV_CD
				                     , C.AUD_SBJ_NM
				                  FROM TBBADDED008L A
				                     , TBBADDED002M B
				                     , TBBADDED001M C
				                 WHERE 1 = 1
				                   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY# /*인자값1*/
				                   AND A.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD#  AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값2*/

				                   AND B.BZT_YR = A.BZT_YR
				                   AND B.BZT_SNO = A.BZT_SNO
				                   AND B.BZT_DVSN_CD = '1'
				                   AND C.AUD_YR = B.REL_AUD_YR
				                   AND C.AUD_NO = B.REL_AUD_NO
        ]]>
        <isNotEmpty property="strOrgCdSt">
        	<![CDATA[      
								    AND A.ORG_CD >= #strOrgCdSt# 
        	]]>
        </isNotEmpty>
                <isNotEmpty property="strOrgCdEnd">
        	<![CDATA[      
								    AND A.ORG_CD <= #strOrgCdEnd# 
        	]]>
        </isNotEmpty>        	 							  
        
        <isNotEmpty property="strAudKndCdSt">
        	<![CDATA[      
								   AND SUBSTRING(C.AUD_KND_CD, 3, 1) >= #strAudKndCdSt# 
        	]]>
        </isNotEmpty>
        <isNotEmpty property="strAudKndCdEnd">
        	<![CDATA[ 
								   AND SUBSTRING(C.AUD_KND_CD, 3, 1) <= #strAudKndCdEnd#
        	]]>
        </isNotEmpty>        
        <isNotEmpty property="#strOrgDvsnCd#">
        						  AND C.ORG_DVSN_CD  =  #strOrgDvsnCd#  /*인자값5*/
        </isNotEmpty>
         <![CDATA[              				
				 				 
				                       ) AA
				             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
				                  BZT_YR
				                     , BZT_SNO
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
				                                                         ELSE 0
				                                                       END) AS IN_PSON_CNT
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
				                                                         ELSE 1
				                                                       END) AS EXT_PSON_CNT
				                  FROM (SELECT DISTINCT BZT_YR
				                             , BZT_SNO
				                             , PCT_CNB
				                             , STF_DVSN_CD
				                          FROM TBBADDED005L) A
				                 GROUP BY BZT_YR, BZT_SNO ) BB
				             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
				                  A.BZT_YR
				                     , A.BZT_SNO
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
				                                                         ELSE 0
				                                                       END) AS IN_PSON_MAN_CNT
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
				                                                         ELSE B.AUD_DCN
				                                                       END) AS EXT_PSON_MAN_CNT
				                     , MAX(B.AUD_DCN) AS AUD_DCN
				                  FROM TBBADDED005L A
				                     , TBBADDED006L B
				                 WHERE B.BZT_YR = A.BZT_YR
				                   AND B.BZT_SNO = A.BZT_SNO
				                   AND B.TEAM_SNO = A.TEAM_SNO
				                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
				                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
				         WHERE AA.BZT_YR = BB.BZT_YR(+)
				           AND AA.BZT_SNO = BB.BZT_SNO(+)
				           AND AA.BZT_YR = CC.BZT_YR(+)
				           AND AA.BZT_SNO = CC.BZT_SNO(+) ) AAA
				     , TBDCMACM015M BBB
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000119') CCC
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000007') DDD
				     , TBDCMACM002M EEE
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000030') FFF
				 WHERE 1=1
				   AND BBB.ORG_CD = AAA.ORG_CD
				   AND CCC.CD = AAA.ORG_DVSN_CD
				   AND DDD.CD = AAA.AUD_KND_CD
				   AND EEE.DPT_CD = AAA.SPV_BRDV_CD
				   AND FFF.CD = AAA.AUD_BZT_KND_CD
				 ORDER BY AAA.ORG_CD, AAA.BZT_YR, AAA.BZT_SNO       
        ]]>
	</select>
	
	<select id="BADDED007QSelectPaging9" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[      
                SELECT 
	                   BBB.ORG_NM                                               AS ORG_NM	
	                 , CCC.CD_NM                                                AS ORG_DVSN
				     , F_MNG_KND_AUDYRNO(AAA.AUD_YR, AAA.AUD_NO, AAA.AUD_KND_CD, '-')  || '(' || 
				       AAA.AUD_STEP_SNO  || ')'                                 AS AUD_NO_INFO 
				     , DDD.CD_NM || '(' || FFF.CD_NM || ')'                     AS AUD_EXEC_DVSN_CD_NM					
				     , EEE.DPT_NM                                               AS EXEC_DPT_NM
				     , TO_CHAR(TO_DATE(AAA.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
				       TO_CHAR(TO_DATE(AAA.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD				
				     , AAA.AUD_DCN                                              AS AUD_DCN
				     , AAA.IN_PSON_CNT  || '(' || AAA.IN_PSON_MAN_CNT  || ')'   AS IN_PSON   
				     , AAA.EXT_PSON_CNT || '(' || AAA.EXT_PSON_MAN_CNT || ')'   AS EXT_PSON  			     
				     , AAA.AUD_SBJ_NM                                           AS AUD_SBJ_NM	
				     , AAA.ORG_CD 		     
				     , AAA.BZT_YR 
				     , AAA.BZT_SNO 		
				  FROM (SELECT AA.*
				             , BB.IN_PSON_CNT
				             , BB. EXT_PSON_CNT
				             , CC.IN_PSON_MAN_CNT
				             , CC. EXT_PSON_MAN_CNT
				             , CC.AUD_DCN
				          FROM (SELECT /*+ USE_HASH(A,B,C)*/
				                  A.BZT_YR
				                     , A.BZT_SNO
				                     , A.TEAM_SNO
				                     , A.BZT_YR||'-'||A.BZT_SNO||'('||A.TEAM_SNO||')' AS TOTAL_NO
				                     , A.ORG_CD
				                     , A.AUD_STR_DT
				                     , A.AUD_END_DT
				                     , B.AUD_STEP_SNO
				                     , B.AUD_BZT_KND_CD
				                     , C.AUD_YR
				                     , C.AUD_NO
				                     , C.ORG_DVSN_CD
				                     , C.AUD_KND_CD
				                     , C.SPV_BRDV_CD
				                     , C.AUD_SBJ_NM
				                  FROM TBBADDED008L A
				                     , TBBADDED002M B
				                     , TBBADDED001M C
				                 WHERE 1 = 1
				                   AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY# /*인자값1*/
				                   AND A.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD#  AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값2*/

				                   AND B.BZT_YR = A.BZT_YR
				                   AND B.BZT_SNO = A.BZT_SNO
				                   AND B.BZT_DVSN_CD = '1'
				                   AND C.AUD_YR = B.REL_AUD_YR
				                   AND C.AUD_NO = B.REL_AUD_NO
        ]]>
        <isNotEmpty property="strOrgCdSt">
        	<![CDATA[      
								    AND A.ORG_CD >= #strOrgCdSt# 
        	]]>
        </isNotEmpty>
                <isNotEmpty property="strOrgCdEnd">
        	<![CDATA[      
								    AND A.ORG_CD <= #strOrgCdEnd# 
        	]]>
        </isNotEmpty>        	 							  
        
        <isNotEmpty property="strAudKndCdSt">
        	<![CDATA[      
								   AND SUBSTRING(C.AUD_KND_CD, 3, 1) >= #strAudKndCdSt# 
        	]]>
        </isNotEmpty>
        <isNotEmpty property="strAudKndCdEnd">
        	<![CDATA[ 
								   AND SUBSTRING(C.AUD_KND_CD, 3, 1) <= #strAudKndCdEnd#
        	]]>
        </isNotEmpty>        
        <isNotEmpty property="#strOrgDvsnCd#">
        						  AND C.ORG_DVSN_CD  =  #strOrgDvsnCd#  /*인자값5*/
        </isNotEmpty>
         <![CDATA[              				
				 				 
				                       ) AA
				             , (SELECT /*+ INDEX(A KBBADBADDED005001) */
				                  BZT_YR
				                     , BZT_SNO
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 1
				                                                         ELSE 0
				                                                       END) AS IN_PSON_CNT
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
				                                                         ELSE 1
				                                                       END) AS EXT_PSON_CNT
				                  FROM (SELECT DISTINCT BZT_YR
				                             , BZT_SNO
				                             , PCT_CNB
				                             , STF_DVSN_CD
				                          FROM TBBADDED005L) A
				                 GROUP BY BZT_YR, BZT_SNO ) BB
				             , (SELECT /*+ USE_NL_WITH_INDEX(A, KBBADBADDED005001)*/
				                  A.BZT_YR
				                     , A.BZT_SNO
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN B.AUD_DCN
				                                                         ELSE 0
				                                                       END) AS IN_PSON_MAN_CNT
				                     , SUM( CASE
				                                                         WHEN A.STF_DVSN_CD = '0' THEN 0
				                                                         ELSE B.AUD_DCN
				                                                       END) AS EXT_PSON_MAN_CNT
				                     , MAX(B.AUD_DCN) AS AUD_DCN
				                  FROM TBBADDED005L A
				                     , TBBADDED006L B
				                 WHERE B.BZT_YR = A.BZT_YR
				                   AND B.BZT_SNO = A.BZT_SNO
				                   AND B.TEAM_SNO = A.TEAM_SNO
				                   AND B.PCT_ALC_SNO = A.PCT_ALC_SNO
				                 GROUP BY A.BZT_YR, A.BZT_SNO ) CC
				         WHERE AA.BZT_YR = BB.BZT_YR(+)
				           AND AA.BZT_SNO = BB.BZT_SNO(+)
				           AND AA.BZT_YR = CC.BZT_YR(+)
				           AND AA.BZT_SNO = CC.BZT_SNO(+) ) AAA
				     , TBDCMACM015M BBB
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000119') CCC
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000007') DDD
				     , TBDCMACM002M EEE
				     , (SELECT CD
				             , CD_NM
				          FROM TBDCMACM013C
				         WHERE CMM_CD_DVSN_CD = '1000030') FFF
				 WHERE 1=1
				   AND BBB.ORG_CD = AAA.ORG_CD
				   AND CCC.CD = AAA.ORG_DVSN_CD
				   AND DDD.CD = AAA.AUD_KND_CD
				   AND EEE.DPT_CD = AAA.SPV_BRDV_CD
				   AND FFF.CD = AAA.AUD_BZT_KND_CD
        ]]>
        <include refid="include.pageOrder" /> 	        
	</select>	
	
	
	<!-- 감사 미실시명세  -->
	<select id="BADDED007QSelect10" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT (SELECT ORG_NM
			          FROM TBDCMACM015M
			         WHERE ORG_CD = (A.COPT_SG_CD || '000000000')) AS OFFC_ORG_NM
			     , A.ORG_CD
			     , SUBSTRING(A.ORG_CD, 1, 3)|| '-' ||SUBSTRING(A.ORG_CD, 4, 3) ||'-'|| SUBSTRING(A.ORG_CD, 7, 3) ||'-'|| SUBSTRING(A.ORG_CD, 10, 3) AS ORG_RES
			     , ORG_NM
			  FROM TBDCMACM015M A
			 WHERE 1=1
		]]>	 
		<isNotEmpty property="strOrgCdSt">
			<![CDATA[ 
			   AND A.ORG_CD >= #strOrgCdSt# 
			]]>
		</isNotEmpty>
		<isNotEmpty property="strOrgCdEnd">
			<![CDATA[ 
			   AND A.ORG_CD <= #strOrgCdEnd# 
			]]>
		</isNotEmpty>
        <![CDATA[    			 
			   AND NOT EXISTS (SELECT 'Y'
			          			FROM TBBADDED008L B
					           WHERE 1 = 1
					             AND B.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD# AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값1*/
					             AND A.ORG_CD = B.ORG_CD)
			   AND ORG_DGE_CD = 2
			   AND USE_DVSN_NO = 'Y'
			 ORDER BY ORG_CD        
        ]]>
	</select>
	
	<select id="BADDED007QSelectPaging10" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[       
			SELECT A.ORG_CD
			     , SUBSTRING(A.ORG_CD, 1, 3)  || '-' ||
			       SUBSTRING(A.ORG_CD, 4, 3)  || '-' || 
			       SUBSTRING(A.ORG_CD, 7, 3)  || '-' || 
			       SUBSTRING(A.ORG_CD, 10, 3) || '(2차)'                                AS ORG_RES
			     , (SELECT ORG_NM
			          FROM TBDCMACM015M
			         WHERE ORG_CD = (A.COPT_SG_CD || '000000000'))   || '-' || ORG_NM   AS ORG_INFO
			  FROM TBDCMACM015M A
			 WHERE 1=1
		]]>	 
		<isNotEmpty property="strOrgCdSt">
			<![CDATA[ 
			   AND A.ORG_CD >= #strOrgCdSt# 
			]]>
		</isNotEmpty>
		<isNotEmpty property="strOrgCdEnd">
			<![CDATA[ 
			   AND A.ORG_CD <= #strOrgCdEnd# 
			]]>
		</isNotEmpty>
        <![CDATA[    			 
			   AND NOT EXISTS (SELECT 'Y'
			          			FROM TBBADDED008L B
					           WHERE 1 = 1
					             AND B.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD# AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD# /*인자값1*/
					             AND A.ORG_CD = B.ORG_CD)
			   AND ORG_DGE_CD = 2
			   AND USE_DVSN_NO = 'Y'  
        ]]>
        <include refid="include.pageOrder" />         
	</select>	
	
	<!-- 출장지역별 명세 목록출력  -->
	<select id="BADDED007QSelect11" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
			SELECT A.BZT_YR,
			       A.BZT_SNO,
			       A.TEAM_SNO,
			       A.BGRP_TG_ORG_SNO,
			       A.RGN_CD,
			       A.ORG_CD,
			       A.RGN_NM AS LCL_NM,
			       A.ORG_NM,
			       A.AUD_SBJ_NM,
			       SUBSTR(A.AUD_STR_DT, 5, 2) || '.' || SUBSTR(A.AUD_STR_DT, 7, 2) || '~' || SUBSTR(A.AUD_END_DT, 5, 2) || '.' || SUBSTR(A.AUD_END_DT, 7, 2) AS AUD_DT,
			       F_CODE_NM('1000173', B.PCT_RANK_CD) || ' ' || B.PCT_NM ||
			       CASE WHEN NVL(B.NOP_CNT, 0) > 0 THEN ' 외' || B.NOP_CNT
			       END AS INWON
			  FROM(SELECT A.BZT_YR,
			               A.BZT_SNO,
			               A.TEAM_SNO,
			               A.BGRP_TG_ORG_SNO,
			               A.RGN_CD,
			               A.ORG_CD,
			               A.AUD_STR_DT,
			               A.AUD_END_DT,
			               C.AUD_SBJ_NM,
			               C.AUD_KND_CD,
			               F_CODE_NM('1000001', A.RGN_CD) RGN_NM, /*지역명*/
			               F_ORG_INFO(A.ORG_CD,'1') AS ORG_NM   /*대표기관명*/
			          FROM TBBADDED008L A,
			               TBBADDED002M B,
			               TBBADDED001M C
			         WHERE 1 = 1
			           AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY#
			           AND A.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD#  AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD#
			           AND A.RGN_CD IS NOT NULL
			           AND A.ORG_CD != '999000000000'
			           AND EXISTS (SELECT *
			                  FROM TBBADDED001M
			                 WHERE 1=1
			                   AND SUBSTR(AUD_KND_CD, 3, 1) IN ('1','2','3',' 5','6') )
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.BZT_DVSN_CD = '1'
			           AND C.AUD_YR = B.REL_AUD_YR
			           AND C.AUD_NO = B.REL_AUD_NO
						]]>	 
						<isNotEmpty property="strOrgCdSt">
							<![CDATA[ 
							   AND A.ORG_CD >= #strOrgCdSt# 
							]]>
						</isNotEmpty>
						<isNotEmpty property="strOrgCdEnd">
							<![CDATA[ 
							   AND A.ORG_CD <= #strOrgCdEnd# 
							]]>
						</isNotEmpty>
				        <![CDATA[   			           
			          GROUP BY A.BZT_YR,
			               A.BZT_SNO,
			               A.TEAM_SNO,
			               A.BGRP_TG_ORG_SNO,
			               A.RGN_CD,
			               A.ORG_CD,
			               A.AUD_STR_DT,
			               A.AUD_END_DT,
			               C.AUD_SBJ_NM,
			               C.AUD_KND_CD
			                ) A,
			       (SELECT BB.BZT_YR,
			               BB.BZT_SNO,
			               BB.TEAM_SNO,
			               BB.BGRP_TG_ORG_SNO,
			               BB2.PCT_NM,
			               BB2.PCT_RANK_CD,
			               BB.NOP_CNT
			          FROM (SELECT BZT_YR,
			                       BZT_SNO,
			                       TEAM_SNO,
			                       BGRP_TG_ORG_SNO,
			                       COUNT(*) - 1 AS NOP_CNT,
			                       MIN(PCT_ALC_SNO) AS PCT_ALC_SNO
			                  FROM TBBADDED006L
			                 GROUP BY BZT_YR,
			                       BZT_SNO,
			                       TEAM_SNO,
			                       BGRP_TG_ORG_SNO) BB,
			               TBBADDED005L BB2
			         WHERE BB.BZT_YR=BB2.BZT_YR
			           AND BB.BZT_SNO = BB2.BZT_SNO
			           AND BB.TEAM_SNO = BB2.TEAM_SNO
			           AND BB.PCT_ALC_SNO = BB2.PCT_ALC_SNO) B
			 WHERE A.BZT_YR   = B.BZT_YR
			   AND A.BZT_SNO  = B.BZT_SNO
			   AND A.TEAM_SNO = B.TEAM_SNO
			   AND A.BGRP_TG_ORG_SNO = B.BGRP_TG_ORG_SNO
			 ORDER BY RGN_CD       
        ]]>
	</select>
	
	<select id="BADDED007QSelectPaging11" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />	
        <![CDATA[       
			SELECT A.RGN_CD                                                     AS RGN_CD
			      ,A.RGN_NM                                                     AS LCL_NM
			      ,A.AUD_SBJ_NM                                                 AS AUD_SBJ_NM
			      ,A.ORG_NM                                                     AS ORG_NM
			      ,SUBSTR(A.AUD_STR_DT, 5, 2) || '.' || 
			       SUBSTR(A.AUD_STR_DT, 7, 2) || '~' || 
			       SUBSTR(A.AUD_END_DT, 5, 2) || '.' || 
			       SUBSTR(A.AUD_END_DT, 7, 2)                                   AS AUD_DT
                  ,F_CODE_NM('1000173', B.PCT_RANK_CD) || ' ' || 
                   B.PCT_NM ||
			       CASE WHEN NVL(B.NOP_CNT, 0) > 0 THEN ' 외' || B.NOP_CNT
			       END                                                          AS INWON
			  FROM(SELECT A.BZT_YR,
			               A.BZT_SNO,
			               A.TEAM_SNO,
			               A.BGRP_TG_ORG_SNO,
			               A.RGN_CD,
			               A.ORG_CD,
			               A.AUD_STR_DT,
			               A.AUD_END_DT,
			               C.AUD_SBJ_NM,
			               C.AUD_KND_CD,
			               F_CODE_NM('1000001', A.RGN_CD) RGN_NM, /*지역명*/
			               F_ORG_INFO(A.ORG_CD,'1') AS ORG_NM   /*대표기관명*/
			          FROM TBBADDED008L A,
			               TBBADDED002M B,
			               TBBADDED001M C
			         WHERE 1 = 1
			           AND A.BZT_YR BETWEEN #strBztStYY# AND #strBztEndYY#
			           AND A.AUD_STR_DT BETWEEN #strBztStYY#||#strBztStMM#||#strBztStDD#  AND #strBztEndYY#||#strBztEndMM#||#strBztEndDD#
			           AND A.RGN_CD IS NOT NULL
			           AND A.ORG_CD != '999000000000'
			           AND EXISTS (SELECT *
			                  FROM TBBADDED001M
			                 WHERE 1=1
			                   AND SUBSTR(AUD_KND_CD, 3, 1) IN ('1','2','3',' 5','6') )
			           AND B.BZT_YR = A.BZT_YR
			           AND B.BZT_SNO = A.BZT_SNO
			           AND B.BZT_DVSN_CD = '1'
			           AND C.AUD_YR = B.REL_AUD_YR
			           AND C.AUD_NO = B.REL_AUD_NO
						]]>	 
						<isNotEmpty property="strOrgCdSt">
							<![CDATA[ 
							   AND A.ORG_CD >= #strOrgCdSt# 
							]]>
						</isNotEmpty>
						<isNotEmpty property="strOrgCdEnd">
							<![CDATA[ 
							   AND A.ORG_CD <= #strOrgCdEnd# 
							]]>
						</isNotEmpty>
				        <![CDATA[   			           
			          GROUP BY A.BZT_YR,
			               A.BZT_SNO,
			               A.TEAM_SNO,
			               A.BGRP_TG_ORG_SNO,
			               A.RGN_CD,
			               A.ORG_CD,
			               A.AUD_STR_DT,
			               A.AUD_END_DT,
			               C.AUD_SBJ_NM,
			               C.AUD_KND_CD
			                ) A,
			       (SELECT BB.BZT_YR,
			               BB.BZT_SNO,
			               BB.TEAM_SNO,
			               BB.BGRP_TG_ORG_SNO,
			               BB2.PCT_NM,
			               BB2.PCT_RANK_CD,
			               BB.NOP_CNT
			          FROM (SELECT BZT_YR,
			                       BZT_SNO,
			                       TEAM_SNO,
			                       BGRP_TG_ORG_SNO,
			                       COUNT(*) - 1 AS NOP_CNT,
			                       MIN(PCT_ALC_SNO) AS PCT_ALC_SNO
			                  FROM TBBADDED006L
			                 GROUP BY BZT_YR,
			                       BZT_SNO,
			                       TEAM_SNO,
			                       BGRP_TG_ORG_SNO) BB,
			               TBBADDED005L BB2
			         WHERE BB.BZT_YR=BB2.BZT_YR
			           AND BB.BZT_SNO = BB2.BZT_SNO
			           AND BB.TEAM_SNO = BB2.TEAM_SNO
			           AND BB.PCT_ALC_SNO = BB2.PCT_ALC_SNO) B
			 WHERE A.BZT_YR   = B.BZT_YR
			   AND A.BZT_SNO  = B.BZT_SNO
			   AND A.TEAM_SNO = B.TEAM_SNO
			   AND A.BGRP_TG_ORG_SNO = B.BGRP_TG_ORG_SNO
        ]]>
        <include refid="include.pageOrder" />         
	</select>
	
	
	<!-- 대상기관 명세 목록출력  -->
	<select id="BADDED007QSelect3" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
		SELECT  A.BZT_YR,
		        A.ORG_CD,
		        A.ORG_NM,
		        B.BZT_YR AS B_BZT_YR,
		        B.BZT_SNO,
		        B.TEAM_SNO,
		        B.ORG_CD AS B_ORG_CD,
		        F_ORG_INFO(B.ORG_CD,'1') AS B_ORG_NM,   /*대표기관명*/
		        B.RGN_CD,
		        B.AUD_STR_DT,
		        B.AUD_END_DT,
		        B.AUD_DCN,
		        B.BZT_TL_CNB,
		        B.AUD_KND_CD,
		        B.SPV_BRDV_CD,
		        B.AUD_SBJ_NM,
		        B.AUD_NO,
		        B.IN_PSON_CNT,
		        B.EXT_PSON_CNT,
		        B.IN_PSON_MAN_CNT,
		        B.EXT_PSON_MAN_CNT,
		        B.AUD_DCN_CNT,
		        B.LCL_NM,
		        B.AUD_EXEC_DVSN_CD_NM,
		        B.DPT_NM,
		        B.USR_NAM
		FROM 
		        (select A.BZT_YR,
		               A.ORG_CD,
		               max(C.ORG_NM) as ORG_NM
		          from TBBADDED008L A,
		               TBBADDED002M B,
		               TBDCMACM015M C
		         where 1 = 1
		           and A.BZT_YR between #strBztStYY# and #strBztEndYY# /*인자값1*/
		           and SUBSTR(A.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM# /*인자값2*/
		           and A.ORG_CD between #strOrgCdSt# AND #strOrgCdEnd# /*인자값3*/
		           and B.BZT_YR = A.BZT_YR
		           and B.BZT_SNO = A.BZT_SNO
		           and B.BZT_DVSN_CD = '1'
		           and C.ORG_CD = A.ORG_CD
		         group by A.BZT_YR,
		               A.ORG_CD) A,
		        (   select  AAA.BZT_YR,
		                    AAA.BZT_SNO,
		                    AAA.TEAM_SNO,
		                    AAA.ORG_CD,
		                    AAA.RGN_CD,
		                    AAA.AUD_STR_DT,
		                    AAA.AUD_END_DT,
		                    AAA.AUD_DCN,
		                    AAA.BZT_TL_CNB,
		                    AAA.AUD_KND_CD,
		                    AAA.SPV_BRDV_CD,
		                    AAA.AUD_SBJ_NM,
		                    AAA.AUD_NO,
		                    AAA.IN_PSON_CNT,
		                    AAA.EXT_PSON_CNT,
		                    AAA.IN_PSON_MAN_CNT,
		                    AAA.EXT_PSON_MAN_CNT,
		                    AAA.AUD_DCN_CNT,
		                    BBB.CD_NM as LCL_NM,
		                    CCC.CD_NM as AUD_EXEC_DVSN_CD_NM,
		                    DDD.DPT_NM,
		                    EEE.USR_NAM
		              from (select AA.BZT_YR,
		                           AA.BZT_SNO,
		                           AA.TEAM_SNO,
		                           AA.ORG_CD,
		                           AA.RGN_CD,
		                           AA.AUD_STR_DT,
		                           AA.AUD_END_DT,
		                           AA.AUD_DCN,
		                           AA.BZT_TL_CNB,
		                           AA.AUD_KND_CD,
		                           AA.SPV_BRDV_CD,
		                           AA.AUD_SBJ_NM ,
		                           AA.AUD_NO,
		                           BB.IN_PSON_CNT,
		                           BB. EXT_PSON_CNT,
		                           CC.IN_PSON_MAN_CNT,
		                           CC. EXT_PSON_MAN_CNT ,
		                           CC.AUD_DCN_cnt
		                      FROM (select A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO,
		                                   A.ORG_CD,
		                                   A.RGN_CD,
		                                   A.AUD_STR_DT,
		                                   A.AUD_END_DT,
		                                   B.AUD_DCN,
		                                   B.BZT_TL_CNB,
		                                   C.AUD_KND_CD,
		                                   C.SPV_BRDV_CD,
		                                   C.AUD_SBJ_NM ,
		                       
		                                   /* C.AUD_YR || '-' || C.AUD_TASK_CD || '-' || C.ORG_DVSN_CD|| '-' || substr(C.AUD_KND_CD, 3, 1) || '-' || C.SPV_BRDV_CD || '-' || C.AUD_WAY_CD || '-' || C.AUD_NO as AUD_NO */
		                                   
		                                   /* 감사연번호 수정 - 2016.04.08 yyh */
		                                   F_MNG_KND_AUDYRNO(C.AUD_YR, C.AUD_NO, C.AUD_KND_CD, '-') as AUD_NO
		                                   
		                              from TBBADDED008L A,
		                                   TBBADDED002M B,
		                                   TBBADDED001M C
		                             where 1 = 1
		                               and A.BZT_YR between #strBztStYY# and #strBztEndYY#
		                               and substring(A.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM#
		                               and A.ORG_CD between #strOrgCdSt# AND #strOrgCdEnd# /*인자값3*/
		                               and B.BZT_YR = A.BZT_YR
		                               and B.BZT_SNO = A.BZT_SNO
		                               and B.BZT_DVSN_CD = '1'
		                               and C.AUD_YR = B.REL_AUD_YR
		                               and C.AUD_NO = B.REL_AUD_NO ) AA,
		                           (select 
		                                   BZT_YR,
		                                   BZT_SNO,
		                                   TEAM_SNO,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 1
		                                         else 0
		                                       end) as IN_PSON_CNT,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 0
		                                         else 1
		                                       end) as EXT_PSON_CNT
		                              from (select distinct BZT_YR,
		                                           BZT_SNO,
		                                           TEAM_SNO,
		                                           PCT_CNB ,
		                                           STF_DVSN_CD
		                                      from TBBADDED005L
		                                      WHERE BZT_YR between #strBztStYY# and #strBztEndYY#
		                                    ) A
		                             group by BZT_YR,
		                                   BZT_SNO,
		                                   TEAM_SNO ) BB,
		                           (select 
		                                   A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then B.AUD_DCN
		                                         else 0
		                                       end) as IN_PSON_MAN_CNT,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 0
		                                         else B.AUD_DCN
		                                       end) as EXT_PSON_MAN_CNT,
		                                   MAX(B.AUD_DCN) as AUD_DCN_cnt
		                              from TBBADDED005L A,
		                                   TBBADDED006L B
		                             where B.BZT_YR = A.BZT_YR
		                               and B.BZT_SNO = A.BZT_SNO
		                               and B.TEAM_SNO = A.TEAM_SNO
		                               and B.PCT_ALC_SNO = A.PCT_ALC_SNO
		                               and B.BZT_YR between #strBztStYY# and #strBztEndYY#
		                               and substring(B.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM#
		                             group by A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO ) CC
		                     where BB.BZT_YR(+) = AA.BZT_YR
		                       and BB.BZT_SNO(+) = AA.BZT_SNO
		                       and BB.TEAM_SNO(+) = AA.TEAM_SNO
		                       and CC.BZT_YR(+) = AA.BZT_YR
		                       and CC.BZT_SNO(+) = AA.BZT_SNO
		                       and CC.TEAM_SNO(+) = AA.TEAM_SNO ) AAA,
		                   (select CD,
		                           CD_NM
		                      from TBDCMACM013C
		                     where CMM_CD_DVSN_CD = '1000001') BBB,
		                   (select CD,
		                           CD_NM
		                      from TBDCMACM013C
		                     where CMM_CD_DVSN_CD = '1000007') CCC,
		                   TBDCMACM002M DDD,
		                   TBDCMACM001M EEE
		             where BBB.CD(+) = AAA.RGN_CD
		               and CCC.CD(+) = AAA.AUD_KND_CD
		               and DDD.DPT_CD(+) = AAA.SPV_BRDV_CD
		               and EEE.CNB(+) = AAA.BZT_TL_CNB
		        ) B
		
		WHERE A.BZT_YR = B.BZT_YR
		  AND A.ORG_CD = B.ORG_CD      
		      order by A.BZT_YR,A.ORG_CD;
        ]]>
	</select>	

	<!-- 대상기관 명세 목록출력 페이징 -->
	<select id="BADDED007QSelectPaging3" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[  
        SELECT      
		      A.BZT_YR
		     ,A.ORG_CD  
             ,B.AUD_NO                                               AS AUD_NO_INFO		
             ,B.AUD_EXEC_DVSN_CD_NM                                  AS AUD_EXEC_DVSN_CD_NM
		     ,B.DPT_NM                                               AS EXEC_DPT_NM
  	         ,TO_CHAR(TO_DATE(B.AUD_STR_DT),'YYYY.MM.DD') || '~' ||  
			  TO_CHAR(TO_DATE(B.AUD_END_DT),'YYYY.MM.DD')            AS AUD_PRD			
		     ,B.AUD_DCN                                              AS AUD_DCN
  	         ,B.IN_PSON_CNT  || '(' || B.IN_PSON_MAN_CNT  || ')'     AS IN_PSON   
			 ,B.EXT_PSON_CNT || '(' || B.EXT_PSON_MAN_CNT || ')'     AS EXT_PSON 		
		     ,B.USR_NAM                                              AS USR_NAM
		     ,LCL_NM                                                 AS LCL_NM
		     ,F_ORG_INFO(B.ORG_CD,'1')                               AS ORG_NM
	         ,B.AUD_SBJ_NM                                           AS AUD_SBJ_NM
		FROM 
		        (select A.BZT_YR,
		               A.ORG_CD,
		               max(C.ORG_NM) as ORG_NM
		          from TBBADDED008L A,
		               TBBADDED002M B,
		               TBDCMACM015M C
		         where 1 = 1
		           and A.BZT_YR between #strBztStYY# and #strBztEndYY# /*인자값1*/
		           and SUBSTR(A.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM# /*인자값2*/
		           and A.ORG_CD between #strOrgCdSt# AND #strOrgCdEnd# /*인자값3*/
		           and B.BZT_YR = A.BZT_YR
		           and B.BZT_SNO = A.BZT_SNO
		           and B.BZT_DVSN_CD = '1'
		           and C.ORG_CD = A.ORG_CD
		         group by A.BZT_YR,
		               A.ORG_CD) A,
		        (   select  AAA.BZT_YR,
		                    AAA.BZT_SNO,
		                    AAA.TEAM_SNO,
		                    AAA.ORG_CD,
		                    AAA.RGN_CD,
		                    AAA.AUD_STR_DT,
		                    AAA.AUD_END_DT,
		                    AAA.AUD_DCN,
		                    AAA.BZT_TL_CNB,
		                    AAA.AUD_KND_CD,
		                    AAA.SPV_BRDV_CD,
		                    AAA.AUD_SBJ_NM,
		                    AAA.AUD_NO,
		                    AAA.IN_PSON_CNT,
		                    AAA.EXT_PSON_CNT,
		                    AAA.IN_PSON_MAN_CNT,
		                    AAA.EXT_PSON_MAN_CNT,
		                    AAA.AUD_DCN_CNT,
		                    BBB.CD_NM as LCL_NM,
		                    CCC.CD_NM as AUD_EXEC_DVSN_CD_NM,
		                    DDD.DPT_NM,
		                    EEE.USR_NAM
		              from (select AA.BZT_YR,
		                           AA.BZT_SNO,
		                           AA.TEAM_SNO,
		                           AA.ORG_CD,
		                           AA.RGN_CD,
		                           AA.AUD_STR_DT,
		                           AA.AUD_END_DT,
		                           AA.AUD_DCN,
		                           AA.BZT_TL_CNB,
		                           AA.AUD_KND_CD,
		                           AA.SPV_BRDV_CD,
		                           AA.AUD_SBJ_NM ,
		                           AA.AUD_NO,
		                           BB.IN_PSON_CNT,
		                           BB. EXT_PSON_CNT,
		                           CC.IN_PSON_MAN_CNT,
		                           CC. EXT_PSON_MAN_CNT ,
		                           CC.AUD_DCN_cnt
		                      FROM (select A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO,
		                                   A.ORG_CD,
		                                   A.RGN_CD,
		                                   A.AUD_STR_DT,
		                                   A.AUD_END_DT,
		                                   B.AUD_DCN,
		                                   B.BZT_TL_CNB,
		                                   C.AUD_KND_CD,
		                                   C.SPV_BRDV_CD,
		                                   C.AUD_SBJ_NM ,
		                       
		                                   /* C.AUD_YR || '-' || C.AUD_TASK_CD || '-' || C.ORG_DVSN_CD|| '-' || substr(C.AUD_KND_CD, 3, 1) || '-' || C.SPV_BRDV_CD || '-' || C.AUD_WAY_CD || '-' || C.AUD_NO as AUD_NO */
		                                   
		                                   /* 감사연번호 변경 - 2016.04.08 yyh */
		                                   F_MNG_KND_AUDYRNO(C.AUD_YR, C.AUD_NO, C.AUD_KND_CD, '-')  as AUD_NO
		                                   
		                              from TBBADDED008L A,
		                                   TBBADDED002M B,
		                                   TBBADDED001M C
		                             where 1 = 1
		                               and A.BZT_YR between #strBztStYY# and #strBztEndYY#
		                               and substring(A.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM#
		                               and A.ORG_CD between #strOrgCdSt# AND #strOrgCdEnd# /*인자값3*/
		                               and B.BZT_YR = A.BZT_YR
		                               and B.BZT_SNO = A.BZT_SNO
		                               and B.BZT_DVSN_CD = '1'
		                               and C.AUD_YR = B.REL_AUD_YR
		                               and C.AUD_NO = B.REL_AUD_NO ) AA,
		                           (select 
		                                   BZT_YR,
		                                   BZT_SNO,
		                                   TEAM_SNO,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 1
		                                         else 0
		                                       end) as IN_PSON_CNT,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 0
		                                         else 1
		                                       end) as EXT_PSON_CNT
		                              from (select distinct BZT_YR,
		                                           BZT_SNO,
		                                           TEAM_SNO,
		                                           PCT_CNB ,
		                                           STF_DVSN_CD
		                                      from TBBADDED005L
		                                      WHERE BZT_YR between #strBztStYY# and #strBztEndYY#
		                                    ) A
		                             group by BZT_YR,
		                                   BZT_SNO,
		                                   TEAM_SNO ) BB,
		                           (select 
		                                   A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then B.AUD_DCN
		                                         else 0
		                                       end) as IN_PSON_MAN_CNT,
		                                   sum(
		                                       case
		                                         when A.STF_DVSN_CD = '0' then 0
		                                         else B.AUD_DCN
		                                       end) as EXT_PSON_MAN_CNT,
		                                   MAX(B.AUD_DCN) as AUD_DCN_cnt
		                              from TBBADDED005L A,
		                                   TBBADDED006L B
		                             where B.BZT_YR = A.BZT_YR
		                               and B.BZT_SNO = A.BZT_SNO
		                               and B.TEAM_SNO = A.TEAM_SNO
		                               and B.PCT_ALC_SNO = A.PCT_ALC_SNO
		                               and B.BZT_YR between #strBztStYY# and #strBztEndYY#
		                               and substring(B.AUD_STR_DT, 1, 6) between #strBztStYY#||#strBztStMM# and #strBztEndYY#||#strBztEndMM#
		                             group by A.BZT_YR,
		                                   A.BZT_SNO,
		                                   A.TEAM_SNO ) CC
		                     where BB.BZT_YR(+) = AA.BZT_YR
		                       and BB.BZT_SNO(+) = AA.BZT_SNO
		                       and BB.TEAM_SNO(+) = AA.TEAM_SNO
		                       and CC.BZT_YR(+) = AA.BZT_YR
		                       and CC.BZT_SNO(+) = AA.BZT_SNO
		                       and CC.TEAM_SNO(+) = AA.TEAM_SNO ) AAA,
		                   (select CD,
		                           CD_NM
		                      from TBDCMACM013C
		                     where CMM_CD_DVSN_CD = '1000001') BBB,
		                   (select CD,
		                           CD_NM
		                      from TBDCMACM013C
		                     where CMM_CD_DVSN_CD = '1000007') CCC,
		                   TBDCMACM002M DDD,
		                   TBDCMACM001M EEE
		             where BBB.CD(+) = AAA.RGN_CD
		               and CCC.CD(+) = AAA.AUD_KND_CD
		               and DDD.DPT_CD(+) = AAA.SPV_BRDV_CD
		               and EEE.CNB(+) = AAA.BZT_TL_CNB
		        ) B
		
		WHERE A.BZT_YR = B.BZT_YR
		  AND A.ORG_CD = B.ORG_CD 
        ]]>
        <include refid="include.pageOrder" />           
	</select>	
	
	
	<!-- 감사종류별 명세 목록출력  -->
	<select id="BADDED007QSelect4" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[       
		SELECT   A.AUD_YR
		        ,A.AUD_NO
		        ,A.AUD_YRNO
		        ,A.AUD_TASK_CD
		        ,A.ORG_DVSN_CD
		        ,A.AUD_KND_CD
		        ,A.SPV_BRDV_CD
		        ,A.DPT_NM
		        ,A.AUD_WAY_CD
		        ,A.AUD_SBJ_NM
		        ,A.ORG_NM
		        ,A.AUD_EXEC_DVSN_CD_NM
		        ,B.AUD_YR AS B_AUD_YR
		        ,B.AUD_NO AS B_AUD_NO
		        ,B.ORG_CD
		        ,B.ORG_NM AS B_ORG_NM
		        ,B.DAYS
		        ,B.GEN_TRIP_CATE_NM
		        ,B.IN_PSON_CNT
		        ,B.EXT_PSON_CNT
		        ,B.STT_RMK_PSON_CNT
		        ,B.ORG_DVSN_CD AS B_ORG_DVSN_CD
		        ,B.ORG_TYPE_SUM
		        ,B.ORG_TYPE_A
		        ,B.ORG_TYPE_B
		        ,B.ORG_TYPE_C
		        ,B.ORG_TYPE_D
		        ,B.BZT_DCN
		FROM (
		        select 
		                       D.AUD_YR,
		                       D.AUD_NO,
		                       F_MNG_KND_AUDYRNO(D.AUD_YR, D.AUD_NO, '', '-')      as AUD_YRNO,
		                       max(D.AUD_TASK_CD) as AUD_TASK_CD,
		                       max(D.ORG_DVSN_CD) as ORG_DVSN_CD,
		                       max(D.AUD_KND_CD) as AUD_KND_CD,
		                       max(D.SPV_BRDV_CD) as SPV_BRDV_CD,
		                       F_DPT_INFO(max(D.SPV_BRDV_CD),'1') DPT_NM,  /*부서명*/               
		                       max(D.AUD_WAY_CD) as AUD_WAY_CD,
		                       max(D.AUD_SBJ_NM) as AUD_SBJ_NM,
		                       F_ORG_INFO(MAX(B.ORG_CD),'1') ORG_NM,
		                       F_CODE_NM('1000007',MAX(D.AUD_KND_CD)) AUD_EXEC_DVSN_CD_NM
		                       from TBBADDED008L B,
		                       TBBADDED002M C,
		                       TBBADDED001M D
		                 where 1=1
		                   and C.BZT_YR between #strBztStYY# and #strBztEndYY# /*인자값1*/
		                   and C.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
		            
		                   and C.BZT_YR = B.BZT_YR
		                   and C.BZT_SNO = B.BZT_SNO
		                   and C.BZT_DVSN_CD = '1'
		                   and D.AUD_YR = C.REL_AUD_YR
		                   and D.AUD_NO = C.REL_AUD_NO
		                   and substring(D.AUD_KND_CD, 3, 1) between #strAudKndCdSt# and #strAudKndCdEnd#
		                 group by D.AUD_YR,
		                          D.AUD_NO               
		         order by AUD_EXEC_DVSN_CD_NM,
		                  d.AUD_NO
		     ) A,
		     (
		          Select   /*+NO_MERGE*/
		                   AA.AUD_YR,  /*감사년도*/
		                   AA.AUD_NO,  /*감사순번*/
		                   AA.ORG_CD,  /*기관코드*/
		                   max(AA.ORG_NM) as ORG_NM,  /*기관명*/
		                   AA.DAYS as DAYS,  /*감사일수*/
		                   max(AA.CD_NM) as GEN_TRIP_CATE_NM,  /* 집행상태명*/
		                   max(IN_PSON_CNT) as IN_PSON_CNT,  /*내부인원*/
		                   max(EXT_PSON_CNT) as EXT_PSON_CNT,  /*수견인원*/
		                   max(STT_RMK_PSON_CNT) as STT_RMK_PSON_CNT, /*차출등*/
		                   max( BB.ORG_DVSN_CD) as ORG_DVSN_CD,
		                   max(BB.ORG_TYPE_SUM) as ORG_TYPE_SUM,  /*기관합계*/
		                   max(BB.ORG_TYPE_A) as ORG_TYPE_A,
		                   max(BB.ORG_TYPE_B) as ORG_TYPE_B,
		                   max(BB.ORG_TYPE_C) as ORG_TYPE_C,
		                   max(BB.ORG_TYPE_D) as ORG_TYPE_D,
		                   max(AA.BZT_DCN) as BZT_DCN  /*출장기간*/
		              from (select MAX(ROWNUM),
		                           AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                           DAYS,
		                           max(ORG_NM) as ORG_NM,
		                           max(CD_NM) CD_NM,
		                           max(BZT_DCN) BZT_DCN,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD = '0' then A.AUD_DCN
		                                 else 0
		                               end) as IN_PSON_CNT,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD = '1' then A.AUD_DCN
		                                 else 0
		                               end) as EXT_PSON_CNT,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD not in ('0','1') then A.AUD_DCN
		                                 else 0
		                               end) as STT_RMK_PSON_CNT
		                      from (select a.AUD_YR,
		                                   A.AUD_NO,
		                                   B.AUD_DCN as DAYS,
		                                   C.ORG_CD,
		                                   D.STF_DVSN_CD,
		                                   E.AUD_DCN,
		                                   F_ORG_INFO(C.ORG_CD,'1') ORG_NM,
		                                   F_CODE_NM('1000007',B.GEN_BZT_KND_CD) CD_NM,  
		                                   H.BZT_DCN
		                              from TBBADDED001M A,
		                                   TBBADDED002M B,
		                                   TBBADDED008L C,
		                                   TBBADDED005L D,
		                                   TBBADDED006L E,
		                                   (SELECT BZT_YR,
		                                           BZT_SNO,
		                                           MAX(BZT_DCN) AS BZT_DCN
		                                      FROM TBBADDED011L
		                                     GROUP BY BZT_YR,
		                                           BZT_SNO) H
		                             where 1 =1
		                               and A.AUD_YR = A.AUD_YR /*인자값1 AUD_YR*/
		                               and B.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#/*인자값2*/
		                               and B.REL_AUD_YR = A.AUD_YR
		                               and B.REL_AUD_NO = A.AUD_NO
		                               and B.BZT_DVSN_CD = '1'
		                               and C.BZT_YR = B.BZT_YR
		                               and C.BZT_SNO = B.BZT_SNO
		                               and D.BZT_YR = C.BZT_YR
		                               and D.BZT_SNO = C.BZT_SNO
		                               and D.TEAM_SNO = C.TEAM_SNO
		                               and E.BZT_YR = D.BZT_YR
		                               and E.BZT_SNO = D.BZT_SNO
		                               and E.TEAM_SNO = D.TEAM_SNO
		                               and E.BGRP_TG_ORG_SNO = C.BGRP_TG_ORG_SNO
		                               and E.PCT_ALC_SNO = D.PCT_ALC_SNO
		                               and B.BZT_YR = H.BZT_YR(+)
		                               and B.BZT_SNO = H.BZT_SNO(+) ) A
		                     group by AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                           DAYS ) AA,
		                   (select ROWNUM,
		                           AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                                   case
		                                     when substring(ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then '9'
		                                     else substring(ORG_DVSN_CD, 1, 1)
		                                   end as ORG_DVSN_CD,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '1' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '2' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '3' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then 1
		                                     else 0
		                                   end as ORG_TYPE_SUM,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '1' then 1
		                                     else 0
		                                   end as ORG_TYPE_A,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '2' then 1
		                                     else 0
		                                   end as ORG_TYPE_B,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '3' then 1
		                                     else 0
		                                   end as ORG_TYPE_C,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then 1
		                                     else 0
		                                   end as ORG_TYPE_D
		                      from (select distinct A.AUD_YR,
		                                   A.AUD_NO,
		                                   C.BZT_YR,
		                                   C.BZT_SNO,
		                                   C.ORG_CD,
		                                   D.ORG_DVSN_CD
		                              from TBBADDED001M A,
		                                   TBBADDED002M B,
		                                   TBBADDED008L C,
		                                   TBDCMACM015M D
		                             where 1=1
		                               and A.AUD_YR = A.AUD_YR /*인자값1 AUD_YR*/
		                               and B.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
		                               and B.REL_AUD_YR = A.AUD_YR
		                               and B.REL_AUD_NO = A.AUD_NO
		                               and C.BZT_YR = B.BZT_YR
		                               and C.BZT_SNO = B.BZT_SNO
		                               and D.ORG_CD(+) = C.ORG_CD ) A ) BB
		             where 1 =1
		               and BB.AUD_YR = AA.AUD_YR
		               and BB.AUD_NO = AA.AUD_NO
		               and BB.ORG_CD = AA.ORG_CD
		             group by AA.AUD_YR,
		                   AA.AUD_NO,
		                   AA.ORG_CD,
		                   AA.DAYS
		     ) B
		WHERE A.AUD_YR = B.AUD_YR
		  AND A.AUD_NO = B.AUD_NO
	      order by A.AUD_YR,A.AUD_NO;
        ]]>
	</select>	

	<select id="BADDED007QSelectPaging4" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />		
        <![CDATA[       
		SELECT   A.AUD_YR
		        ,A.AUD_NO
		        ,A.AUD_YRNO
		        ,A.AUD_TASK_CD
		        ,A.ORG_DVSN_CD
		        ,A.AUD_KND_CD
		        ,A.SPV_BRDV_CD
		        ,A.DPT_NM
		        ,A.AUD_WAY_CD
		        ,A.AUD_SBJ_NM
		        ,A.ORG_NM
		        ,A.AUD_EXEC_DVSN_CD_NM
		        ,B.AUD_YR AS B_AUD_YR
		        ,B.AUD_NO AS B_AUD_NO
		        ,B.ORG_CD
		        ,B.ORG_NM AS B_ORG_NM
		        ,B.DAYS
		        ,B.GEN_TRIP_CATE_NM
		        ,B.IN_PSON_CNT
		        ,B.EXT_PSON_CNT
		        ,B.STT_RMK_PSON_CNT
		        ,B.ORG_DVSN_CD AS B_ORG_DVSN_CD
		        ,B.ORG_TYPE_SUM
		        ,B.ORG_TYPE_A
		        ,B.ORG_TYPE_B
		        ,B.ORG_TYPE_C
		        ,B.ORG_TYPE_D
		        ,B.BZT_DCN
		FROM (
		        select 
		                       D.AUD_YR,
		                       D.AUD_NO,
		                       F_MNG_KND_AUDYRNO(D.AUD_YR, D.AUD_NO, max(D.AUD_KND_CD), '-') as AUD_YRNO,
		                       max(D.AUD_TASK_CD) as AUD_TASK_CD,
		                       max(D.ORG_DVSN_CD) as ORG_DVSN_CD,
		                       max(D.AUD_KND_CD) as AUD_KND_CD,
		                       max(D.SPV_BRDV_CD) as SPV_BRDV_CD,
		                       F_DPT_INFO(max(D.SPV_BRDV_CD),'1') DPT_NM,  /*부서명*/               
		                       max(D.AUD_WAY_CD) as AUD_WAY_CD,
		                       max(D.AUD_SBJ_NM) as AUD_SBJ_NM,
		                       F_ORG_INFO(MAX(B.ORG_CD),'1') ORG_NM,
		                       F_CODE_NM('1000007',MAX(D.AUD_KND_CD)) AUD_EXEC_DVSN_CD_NM
		                       from TBBADDED008L B,
		                       TBBADDED002M C,
		                       TBBADDED001M D
		                 where 1=1
		                   and C.BZT_YR between #strBztStYY# and #strBztEndYY# /*인자값1*/
		                   and C.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
		            
		                   and C.BZT_YR = B.BZT_YR
		                   and C.BZT_SNO = B.BZT_SNO
		                   and C.BZT_DVSN_CD = '1'
		                   and D.AUD_YR = C.REL_AUD_YR
		                   and D.AUD_NO = C.REL_AUD_NO
		                   and substring(D.AUD_KND_CD, 3, 1) between #strAudKndCdSt# and #strAudKndCdEnd#
		                 group by D.AUD_YR,
		                          D.AUD_NO               
		         order by AUD_EXEC_DVSN_CD_NM,
		                  d.AUD_NO
		     ) A,
		     (
		          Select   /*+NO_MERGE*/
		                   AA.AUD_YR,  /*감사년도*/
		                   AA.AUD_NO,  /*감사순번*/
		                   AA.ORG_CD,  /*기관코드*/
		                   max(AA.ORG_NM) as ORG_NM,  /*기관명*/
		                   AA.DAYS as DAYS,  /*감사일수*/
		                   max(AA.CD_NM) as GEN_TRIP_CATE_NM,  /* 집행상태명*/
		                   max(IN_PSON_CNT) as IN_PSON_CNT,  /*내부인원*/
		                   max(EXT_PSON_CNT) as EXT_PSON_CNT,  /*수견인원*/
		                   max(STT_RMK_PSON_CNT) as STT_RMK_PSON_CNT, /*차출등*/
		                   max( BB.ORG_DVSN_CD) as ORG_DVSN_CD,
		                   max(BB.ORG_TYPE_SUM) as ORG_TYPE_SUM,  /*기관합계*/
		                   max(BB.ORG_TYPE_A) as ORG_TYPE_A,
		                   max(BB.ORG_TYPE_B) as ORG_TYPE_B,
		                   max(BB.ORG_TYPE_C) as ORG_TYPE_C,
		                   max(BB.ORG_TYPE_D) as ORG_TYPE_D,
		                   max(AA.BZT_DCN) as BZT_DCN  /*출장기간*/
		              from (select MAX(ROWNUM),
		                           AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                           DAYS,
		                           max(ORG_NM) as ORG_NM,
		                           max(CD_NM) CD_NM,
		                           max(BZT_DCN) BZT_DCN,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD = '0' then A.AUD_DCN
		                                 else 0
		                               end) as IN_PSON_CNT,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD = '1' then A.AUD_DCN
		                                 else 0
		                               end) as EXT_PSON_CNT,
		                           sum(
		                               case
		                                 when A.STF_DVSN_CD not in ('0','1') then A.AUD_DCN
		                                 else 0
		                               end) as STT_RMK_PSON_CNT
		                      from (select a.AUD_YR,
		                                   A.AUD_NO,
		                                   B.AUD_DCN as DAYS,
		                                   C.ORG_CD,
		                                   D.STF_DVSN_CD,
		                                   E.AUD_DCN,
		                                   F_ORG_INFO(C.ORG_CD,'1') ORG_NM,
		                                   F_CODE_NM('1000007',B.GEN_BZT_KND_CD) CD_NM,  
		                                   H.BZT_DCN
		                              from TBBADDED001M A,
		                                   TBBADDED002M B,
		                                   TBBADDED008L C,
		                                   TBBADDED005L D,
		                                   TBBADDED006L E,
		                                   (SELECT BZT_YR,
		                                           BZT_SNO,
		                                           MAX(BZT_DCN) AS BZT_DCN
		                                      FROM TBBADDED011L
		                                     GROUP BY BZT_YR,
		                                           BZT_SNO) H
		                             where 1 =1
		                               and A.AUD_YR = A.AUD_YR /*인자값1 AUD_YR*/
		                               and B.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM#/*인자값2*/
		                               and B.REL_AUD_YR = A.AUD_YR
		                               and B.REL_AUD_NO = A.AUD_NO
		                               and B.BZT_DVSN_CD = '1'
		                               and C.BZT_YR = B.BZT_YR
		                               and C.BZT_SNO = B.BZT_SNO
		                               and D.BZT_YR = C.BZT_YR
		                               and D.BZT_SNO = C.BZT_SNO
		                               and D.TEAM_SNO = C.TEAM_SNO
		                               and E.BZT_YR = D.BZT_YR
		                               and E.BZT_SNO = D.BZT_SNO
		                               and E.TEAM_SNO = D.TEAM_SNO
		                               and E.BGRP_TG_ORG_SNO = C.BGRP_TG_ORG_SNO
		                               and E.PCT_ALC_SNO = D.PCT_ALC_SNO
		                               and B.BZT_YR = H.BZT_YR(+)
		                               and B.BZT_SNO = H.BZT_SNO(+) ) A
		                     group by AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                           DAYS ) AA,
		                   (select ROWNUM,
		                           AUD_YR,
		                           AUD_NO,
		                           ORG_CD,
		                                   case
		                                     when substring(ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then '9'
		                                     else substring(ORG_DVSN_CD, 1, 1)
		                                   end as ORG_DVSN_CD,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '1' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '2' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '3' then 1
		                                     else 0
		                                   end ||
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then 1
		                                     else 0
		                                   end as ORG_TYPE_SUM,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '1' then 1
		                                     else 0
		                                   end as ORG_TYPE_A,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '2' then 1
		                                     else 0
		                                   end as ORG_TYPE_B,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) = '3' then 1
		                                     else 0
		                                   end as ORG_TYPE_C,
		                                   case
		                                     when substring(A.ORG_DVSN_CD, 1, 1) not in ('1', '2', '3') then 1
		                                     else 0
		                                   end as ORG_TYPE_D
		                      from (select distinct A.AUD_YR,
		                                   A.AUD_NO,
		                                   C.BZT_YR,
		                                   C.BZT_SNO,
		                                   C.ORG_CD,
		                                   D.ORG_DVSN_CD
		                              from TBBADDED001M A,
		                                   TBBADDED002M B,
		                                   TBBADDED008L C,
		                                   TBDCMACM015M D
		                             where 1=1
		                               and A.AUD_YR = A.AUD_YR /*인자값1 AUD_YR*/
		                               and B.AUD_STR_DT between #strBztStYY#||#strBztStMM# AND #strBztEndYY#||#strBztEndMM# /*인자값2*/
		                               and B.REL_AUD_YR = A.AUD_YR
		                               and B.REL_AUD_NO = A.AUD_NO
		                               and C.BZT_YR = B.BZT_YR
		                               and C.BZT_SNO = B.BZT_SNO
		                               and D.ORG_CD(+) = C.ORG_CD ) A ) BB
		             where 1 =1
		               and BB.AUD_YR = AA.AUD_YR
		               and BB.AUD_NO = AA.AUD_NO
		               and BB.ORG_CD = AA.ORG_CD
		             group by AA.AUD_YR,
		                   AA.AUD_NO,
		                   AA.ORG_CD,
		                   AA.DAYS
		     ) B
		WHERE A.AUD_YR = B.AUD_YR
		  AND A.AUD_NO = B.AUD_NO
        ]]>
        <include refid="include.pageOrder" /> 
	</select>	
</sqlMap> 

