<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/bii/324">
	
	<resultMap class="java.util.HashMap" id="subBai01Map">
		<result property="ENF_DT" 			column="ENF_DT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="RLTN_ORG_NM" 		column="RLTN_ORG_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_KND_NM"	column="DSP_RQ_KND_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_TXT" 			column="TIT_TXT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SUMPRT_TXT" 		column="SUMPRT_TXT" 	jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="AUD_YR" 			column="AUD_YR" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_NO"			column="AUD_NO" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_SNO" 		column="DSP_RQ_SNO" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>	
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="subBai02Map">
		<result property="SMT_DT"		column="SMT_DT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_ORG_NM"	column="REL_ORG_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="HNDL_RSLT_NM"	column="HNDL_RSLT_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_TXT"		column="TIT_TXT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_INF_TXT"	column="AUD_INF_TXT"	jdbcType="CLOB"		javaType="java.lang.String"/>
		<result property="YE"			column="YE" 			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SRNO"			column="SRNO" 			jdbcType="VARCHAR2" javaType="java.lang.String"/>
	</resultMap>
	
	
	<resultMap class="java.util.HashMap" id="subBai05Map">
		<result property="NTF_DVSN_NM"		column="NTF_DVSN_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ORG_NM"			column="ORG_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_NM"			column="TIT_NM" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="CRIM_WRDO_TXT"	column="CRIM_WRDO_TXT" 	jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="ORG_CD"			column="ORG_CD" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="NTF_DVSN_CD"		column="NTF_DVSN_CD"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="YR"				column="YR"				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DPT_CD"			column="DPT_CD"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="NNB"				column="NNB"			jdbcType="VARCHAR2"	javaType="java.lang.String"/>
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="subBai06Map">
		<result property="ACP_DT"						column="ACP_DT" 					jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ETC_INSP_MTRL_CLC_DVSN_NM"	column="ETC_INSP_MTRL_CLC_DVSN_NM"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="CLC_RUT_NM"					column="CLC_RUT_NM" 				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_ORG_NM"					column="REL_ORG_NM" 				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_NM"						column="TIT_NM"						jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ETC_INSP_MTRL_TXT"			column="ETC_INSP_MTRL_TXT"			jdbcType="CLOB"		javaType="java.lang.String"/>
		<result property="YE"							column="YE" 						jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SRNO"							column="SRNO" 						jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="CHAR_DEPT_CD"							column="CHAR_DEPT_CD" 						jdbcType="VARCHAR2" javaType="java.lang.String"/>
	</resultMap>
	
	<!-- 기본정보 조회 -->   
	<select id="CSPBII324PSubBai01Select" parameterClass="paramMap" resultMap="subBai01Map">
		<![CDATA[       
			SELECT TO_CHAR(TO_DATE(B.ENF_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS ENF_DT
			     , (SELECT E.ORG_NM                                                           
				      FROM TBDCMACM015M E                                          
					 WHERE E.ORG_CD = B.RLTN_ORG_CD)     AS RLTN_ORG_NM
			     , F_CODE_NM('1000002', A.DSP_RQ_KND_CD) AS DSP_RQ_KND_NM
			     , A.TIT_TXT
			     , C.SUMPRT_TXT
			     , A.AUD_YR
			     , A.AUD_NO
			     , A.DSP_RQ_SNO
			  FROM TBBADEAR001M A    
			     , TBBADEAR002D B
			     , TBBADEAR005M C
			 WHERE A.AUD_YR     = B.AUD_YR
			   AND A.AUD_NO	    = B.AUD_NO
			   AND A.DSP_RQ_SNO = B.DSP_RQ_SNO
			   AND A.AUD_YR     = C.AUD_YR
			   AND A.AUD_NO	    = C.AUD_NO
			   AND A.DSP_RQ_SNO = C.DSP_RQ_SNO
			   AND (A.AUD_YR, A.AUD_NO, A.DSP_RQ_SNO) IN (SELECT D.AUD_YR
			                                                   , D.AUD_NO
			                                                   , D.DSP_RQ_SNO
			                                                FROM TBBADEAR007M D
						                                   WHERE D.EIN = #strEin#)	     
		]]>
	</select>
	
	
	<select id="CSPBII324PSubBai02Select" parameterClass="paramMap" resultMap="subBai02Map">
		<![CDATA[       
			SELECT TO_CHAR(TO_DATE(A.SMT_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS SMT_DT
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.REL_ORG_CD)     AS REL_ORG_NM
			     , F_CODE_NM('1000042', A.HNDL_RSLT_CD) AS HNDL_RSLT_NM
			     , A.TIT_TXT
			     , B.AUD_INF_TXT
			     , A.YE
			     , A.SRNO
			  FROM TBCSPBII100M A
			     , TBCSPBII101L B
			 WHERE A.YE = B.YE
			   AND A.SRNO = B.SRNO
			   AND (A.YE, A.SRNO) IN (SELECT C.YE
			                               , C.SRNO
			                            FROM TBCSPBII130L C
			                           WHERE C.EIN = #strEin#)
		]]>
	</select>
	
	<select id="CSPBII324PSubBai04Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT (SELECT C.ORG_NM
			          FROM TBDCMACM015M C
			         WHERE C.ORG_CD = B.ORG_CD) AS ORG_NM
			     , B.DSP_RQ_NM
			     , A.AUD_SBJ
			     , A.AUD_EPS_SBJ
			     , B.ORG_CD
			     , B.AUD_YR
			     , B.AUD_SRNO
			     , B.EXPOT_MNG_SRNO
			     , B.SRNO
			  FROM TBFAAAEA019M A
			     , TBFAAAEA021M B
			     , TBFAAAEA032M C
			 WHERE A.ORG_CD   = B.ORG_CD
			   AND A.AUD_YR   = B.AUD_YR
			   AND A.AUD_SRNO = B.AUD_SRNO
			   AND B.ORG_CD   = C.ORG_CD
			   AND B.AUD_YR   = C.AUD_YR
			   AND B.AUD_SRNO = C.AUD_SRNO
			   AND B.EXPOT_MNG_SRNO = C.EXPOT_MNG_SRNO
			   AND B.SRNO     = C.SRNO  
			   AND C.EIN      = #strEin#
			   
		]]>
	</select>
	
	<select id="CSPBII324PSubBai05Select" parameterClass="paramMap" resultMap="subBai05Map">
		<![CDATA[       
			SELECT F_CODE_NM('1000412', A.NTF_DVSN_CD) AS NTF_DVSN_NM
                 , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.ORG_CD)        AS ORG_NM
			     , A.TIT_NM
			     , B.CRIM_WRDO_TXT
			     , A.ORG_CD
			     , A.NTF_DVSN_CD
			     , A.YR
			     , A.DPT_CD
			     , A.NNB
			  FROM TBBADGDA001M A
			     , TBBADGDA001L B
			 WHERE A.ORG_CD      = B.ORG_CD
   			   AND A.NTF_DVSN_CD = B.NTF_DVSN_CD
   			   AND A.NNB         = B.NNB
   			   AND B.EIN         = #strEin#
		]]>
	</select>
	
	
	<select id="CSPBII324PSubBai06Select" parameterClass="paramMap" resultMap="subBai06Map">
		<![CDATA[       	
			SELECT A.YE
			     , A.SRNO
			     , TO_CHAR(TO_DATE(A.ACP_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS ACP_DT
			     , A.CHAR_DEPT_CD
			     , F_CODE_NM('1000402', A.ETC_INSP_MTRL_CLC_DVSN_CD)    AS ETC_INSP_MTRL_CLC_DVSN_NM
			     , A.CLC_RUT_NM
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.REL_ORG_CD)    AS REL_ORG_NM
			     , A.TIT_NM
			     , A.ETC_INSP_MTRL_TXT
			  FROM TBCSPBII400L A			     
			 WHERE (A.YE, A.SRNO) IN (SELECT B.YE
			                               , B.SRNO
			                            FROM TBCSPBII401L B
			                           WHERE B.EIN = #strEin#)      				  
		]]>
	</select>
	
	<select id="CSPBII324PSubBai07Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[    
			SELECT A.YE
                 , A.SRNO
			     , TO_CHAR(TO_DATE(A.EVL_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS EVL_DT
			     , F_CODE_NM('1000070', A.EVL_MTRL_DVSN_CD)             AS EVL_MTRL_DVSN_NM 		    
			     , (SELECT C.DPT_NM                                                          
			          FROM TBDCMACM002M C                                          
			         WHERE C.DPT_CD = A.EVL_DPT_CD)        AS EVL_DPT_NM
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.BLT_ORG_CD)        AS BLT_ORG_NM
			     , A.PST_NM
			  FROM TBCSPBII500L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.YE DESC, A.SRNO DESC	    	   				    
		]]>
	</select>
	
	
</sqlMap> 
