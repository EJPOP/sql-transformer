<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="csp/nbk/411">

	<typeAlias alias="bigDecimal" type="java.math.BigDecimal"/>
	<typeAlias alias="lendIjInfoVO" type="org.ebai.iportal.biz.csp.nbk.vo.LendIjInfoVO"/>
	<parameterMap id="PrcEstExprDtUpdateParam" class="java.util.HashMap">
		<parameter property="I_MOUI_NO"		jdbcType="VARCHAR"	javaType="java.lang.String" mode="IN" />
	</parameterMap>
	<select id="CSPNBK411ELendDealListSelect" parameterClass="paramMap" resultClass="resultMap">
	<![CDATA[
		WITH /* CSPNBK411ELendDealListSelect */
		MAX_LEND_IJ AS
		(
			SELECT	MAX(D4.LEND_DEAL_DT_SLN) AS MAX_LEND_DEAL_DT_SLN
			FROM	TBCSPNBK205L D4
			WHERE	D4.LEND_KND_CD = #lendKndCd#
			AND		D4.MOUI_NO = #mouiNo#
			AND		D4.LEND_DEAL_DT = #lendDealDt#
			AND		D4.CNL_YN = 'N'
		),
		CLSNG_YN_DATA AS 
		(
			SELECT 	DISTINCT D4.CLSNG_YN
			FROM	TBCSPNBK502M D4
			WHERE	D4.DEAL_DT = TO_CHAR(SYSDATE, 'YYYYMMDD')
		)
		SELECT	D1.LEND_KND_CD
				, D1.MOUI_NO
				, D1.LEND_DEAL_DT
				, D1.LEND_DEAL_DT_SLN
				, TO_CHAR(D1.PET_DH, 'HH24:MI') AS PET_DH
				, D1.DEPTS_PMT_DVSN_CD
				, DECODE( D1.DEPTS_PMT_DVSN_CD, 'D', DEAL_PRN, NULL ) AS D_DEAL_PRN
				, DECODE( D1.DEPTS_PMT_DVSN_CD, 'D'
						, (
							CASE
								WHEN FLOOR( D1.DEAL_PRN / ((SELECT D1.SET_TXT FROM TBCSPNBK003M D1 WHERE D1.OP_MTRL_MNG_CD = '7')*12) ) > 999
								THEN
									CASE
										WHEN FLOOR( D1.DEAL_PRN / ((SELECT D1.SET_TXT FROM TBCSPNBK003M D1 WHERE D1.OP_MTRL_MNG_CD = '7')*12) ) - TRUNC( FLOOR( D1.DEAL_PRN / ((SELECT D1.SET_TXT FROM TBCSPNBK003M D1 WHERE D1.OP_MTRL_MNG_CD = '7')*12) ), -3 ) > 0
										THEN TRUNC( FLOOR( D1.DEAL_PRN / ((SELECT D1.SET_TXT FROM TBCSPNBK003M D1 WHERE D1.OP_MTRL_MNG_CD = '7')*12) ), -3 ) + 1000
										ELSE TRUNC( FLOOR( D1.DEAL_PRN / ((SELECT D1.SET_TXT FROM TBCSPNBK003M D1 WHERE D1.OP_MTRL_MNG_CD = '7')*12) ), -3 )
									END
								ELSE 0
							END
						)
						, NULL 
				) AS EMN_RPM_PRN
				, DECODE( D1.DEPTS_PMT_DVSN_CD, 'C', DEAL_PRN, NULL ) AS C_DEAL_PRN
				, D1.INT_AM
				, D1.LEND_BL AS AF_LEND_BL
				, ( CASE WHEN D1.LEND_DEAL_DT = TO_CHAR(SYSDATE, 'YYYYMMDD') THEN '출력' ELSE NULL END ) AS BBK_PRT_BTN_NM
				, D1.LAG_WDL_RMK
				, (
					CASE 
						WHEN ( SELECT D5.CLSNG_YN FROM CLSNG_YN_DATA D5 ) = 'N' AND D1.LEND_DEAL_DT = TO_CHAR(SYSDATE, 'YYYYMMDD')
						THEN 
							CASE
								WHEN D1.LEND_DEAL_DT_SLN = ( SELECT D3.MAX_LEND_DEAL_DT_SLN FROM MAX_LEND_IJ D3 )
								THEN '취소'
								ELSE NULL
							END
						ELSE NULL
					END
				) AS CNL_YN_BTN_NM
				, D1.CNL_YN
				, D1.CNL_RMK
				, D1.SMB_DEAL_DT_1
				, D1.SMB_SLN_1
				, D1.SMB_DEAL_DT_2
				, D1.SMB_SLN_2
		FROM	TBCSPNBK205L D1
		WHERE	D1.LEND_KND_CD = #lendKndCd#
		AND		D1.MOUI_NO = #mouiNo#
		AND		D1.LEND_DEAL_DT = #lendDealDt#
		AND		D1.CNL_YN = 'N'
		AND		D1.LEND_DEAL_DVSN_CD = '0'
		ORDER BY D1.PET_DH
	]]>
	</select>
	
	<select id="CSPNBK411ELendHistListSelect" parameterClass="paramMap" resultClass="resultMap">
	<![CDATA[
		SELECT	/* CSPNBK411ELendHistListSelect */
				BBK_PRT_YN
				, D1.PET_DH
				, DECODE( D1.DEPTS_PMT_DVSN_CD, 'D', D1.DEAL_PRN, NULL ) AS LEND_PRN
				, DECODE( D1.DEPTS_PMT_DVSN_CD, 'C', D1.DEAL_PRN, NULL ) AS RPM_PRN
				, D1.INT_AM
				, D1.LEND_BL
				, D1.LAG_WDL_RMK
				, D1.LEND_KND_CD
				, D1.MOUI_NO
				, D1.LEND_DEAL_DT
				, D1.LEND_DEAL_DT_SLN
		FROM	TBCSPNBK205L D1
		WHERE	D1.LEND_KND_CD = #lendKndCd#
		AND		D1.MOUI_NO = #mouiNo#
		AND		D1.LEND_DEAL_DT BETWEEN #beginLendDealDt# AND #endLendDealDt#
		AND		D1.CNL_YN = 'N'
	]]>
	<isNotEmpty property="bbkPrtYn" prepend="AND">
				D1.BBK_PRT_YN = #bbkPrtYn#
	</isNotEmpty>
	<![CDATA[
		ORDER BY D1.PET_DH DESC
	]]>
	</select>
	
	<update id="CSPNBK411PrvtLendUpdate" parameterClass="paramMap">
	<![CDATA[
		UPDATE	/* CSPNBK411PrvtLendUpdate */ TBCSPNBK203D
		SET		EXPR_DT = #EXPR_DT#
				, GRT_YN = #GRT_YN#
				, GRT_OPT_MOUI_NO = #OP_MOUI_NO#
				, GRT_PET_DH = SYSDATE
				, GRT_MOUI_NO = #GRT_MOUI_NO#
				, GRT_AM = DECODE( GRT_YN, 'N', 0, #LEND_AM# )
				, GRT_BL = #GRT_BL#
				, EMN_RPM_PRN = #EMN_RPM_PRN#
				, FNL_USR_ID = #FNL_USR_ID#
				, FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
				, FNL_MNU_ID = #FNL_MNU_ID#
				, FNL_MDF_DH = SYSDATE
		WHERE	LEND_KND_CD = #LEND_KND_CD#
		AND		MOUI_NO = #MOUI_NO#
		AND		LEND_SLN = #LEND_SLN#
	]]>
	</update>
	
	<select id="CSPNBK411ELendIdvtMChgCheckSelect" parameterClass="paramMap" resultClass="int">
	<![CDATA[
		SELECT	/* CSPNBK411ELendIdvtMChgCheckSelect */ COUNT(D1.LEND_SLN) AS CNT
		FROM	TBCSPNBK203D D1
		WHERE  	D1.LEND_KND_CD = #LEND_KND_CD#
		AND    	D1.MOUI_NO    = #MOUI_NO#
		AND    	D1.LEND_SLN  = #LEND_SLN#
		AND		( D1.GRT_MOUI_NO != #GRT_MOUI_NO#
				OR D1.GRT_AM != #GRT_AM#
				OR D1.GRT_BL != #GRT_BL# )
	]]>
	</select>
	
	<insert id="CSPNBK411ELendIdvtMListInsert" parameterClass="paramMap">
	<![CDATA[
		INSERT INTO /* CSPNBK411ELendIdvtMListInsert */ TBCSPNBK204L
		(
			LEND_KND_CD
			, MOUI_NO
			, LEND_SLN
			, LEND_IDVT_HIS_SLN
			, LEND_DEAL_DT
			, LEND_DEAL_DT_SLN
			, DEAL_BK_LEND_BL
			, DEAL_AF_LEND_BL
			, GRT_OPT_MOUI_NO
			, GRT_PET_DH
			, GRT_AM
			, DEAL_BK_GRT_BL
			, DEAL_AF_GRT_BL
			, FRT_USR_ID
			, FNL_USR_ID
			, FNL_DEAL_DPT_CD
			, FNL_MNU_ID
			, FRT_REGI_DH
			, FNL_MDF_DH
		)
		SELECT	D1.LEND_KND_CD
				, D1.MOUI_NO
				, D1.LEND_SLN
				, (
					SELECT 	NVL(MAX(D1.LEND_IDVT_HIS_SLN), 0) + 1 
					FROM   	TBCSPNBK204L D1
					WHERE  	D1.LEND_KND_CD = #LEND_KND_CD#
					AND    	D1.MOUI_NO    = #MOUI_NO#
					AND    	D1.LEND_SLN  = #LEND_SLN#
				) AS LEND_IDVT_HIS_SLN
				, TO_CHAR(SYSDATE, 'YYYYMMDD') AS LEND_DEAL_DT 
				, #LEND_DEAL_DT_SLN# AS LEND_DEAL_DT_SLN
				, (
					CASE
						WHEN #DEPTS_PMT_DVSN_CD# = 'C'  
						THEN LEND_BL + #LEND_AM# 
						ELSE 0
					END
				) AS DEAL_BK_LEND_BL
				, D1.LEND_BL AS DEAL_AF_LEND_BL
				, D1.GRT_OPT_MOUI_NO
				, D1.GRT_PET_DH
				, D1.GRT_AM
				, (
					CASE
						WHEN D1.GRT_YN = 'Y'
						THEN 
							CASE
								WHEN #DEPTS_PMT_DVSN_CD# = 'C'
								THEN GRT_BL + #LEND_AM#
								ELSE 0
							END
						ELSE GRT_AM
					END
				) AS DEAL_BK_GRT_BL
				, D1.GRT_BL AS DEAL_AF_GRT_BL
				, #USR_ID# AS FRT_USR_ID
				, #USR_ID# AS FNL_USR_ID
				, #DPT_CD# AS FNL_DEAL_DPT_CD
				, #MNU_ID# AS FNL_MNU_ID
				, SYSDATE AS FRT_REGI_DH
				, SYSDATE AS FNL_MDF_DH
		FROM	TBCSPNBK203D D1
		WHERE  	D1.LEND_KND_CD = #LEND_KND_CD#
		AND    	D1.MOUI_NO    = #MOUI_NO#
		AND    	D1.LEND_SLN  = #LEND_SLN#
	]]>
	</insert>
	
	<insert id="CSPNBK411ELendMsInsert" parameterClass="paramMap">
	<![CDATA[
		INSERT INTO /* CSPNBK411ELendMsInsert */ TBCSPNBK202M
		(
			LEND_KND_CD
			, MOUI_NO
			, LEND_OAA_DT
			, LEND_OAA_OPT_MOUI_NO
			, LEND_BL
			, FNL_RPM_DT
			, EMN_RPM_WAY_DVSN_CD
			, EMN_RPM_DY
			, ARR_RPM_PRN_SUM_AM
			, BBK_ISUE_DT
			, FNL_OTPT_ROW_NO
			, FNL_OTPT_DT
			, FRT_USR_ID
			, FNL_USR_ID
			, FNL_DEAL_DPT_CD
			, FNL_MNU_ID
			, FRT_REGI_DH
			, FNL_MDF_DH
		)
		VALUES
		(
			#LEND_KND_CD#
			, #MOUI_NO#
			, TO_CHAR(SYSDATE, 'YYYYMMDD')
			, #OPT_MOUI_NO#
			, #LEND_AM#
			, TO_CHAR(SYSDATE, 'YYYYMMDD')
			, #EMN_RPM_WAY_DVSN_CD#
			, '25'
			, 0
			, TO_CHAR(SYSDATE, 'YYYYMMDD')
			, 0
			, NULL
			, #USR_ID#
			, #USR_ID#
			, #DPT_CD#
			, #MNU_ID#
			, SYSDATE
			, SYSDATE
		)
	]]>
	</insert>
	
	<update id="CSPNBK411ELendMsLendBlUpdate" parameterClass="paramMap">
	<![CDATA[
		UPDATE	/* CSPNBK411ELendMsLendBlUpdate */ TBCSPNBK202M D1
		SET		FNL_USR_ID = #USR_ID#
				, FNL_DEAL_DPT_CD = #DPT_CD#
				, FNL_MNU_ID = #MNU_ID#
				, FNL_MDF_DH = SYSDATE
	]]>
	<isEqual property="CNL_YN" compareValue="Y">
				, FNL_RPM_DT = (
									SELECT	D2.BK_FNL_RPM_DT
									FROM	TBCSPNBK205L D2
									WHERE	D2.LEND_KND_CD = #LEND_KND_CD#
									AND		D2.MOUI_NO = #MOUI_NO#
									AND		D2.LEND_DEAL_DT = #LEND_DEAL_DT#
									AND		D2.LEND_DEAL_DT_SLN = #LEND_DEAL_DT_SLN#
								)
	</isEqual>
	<isEqual property="CNL_YN" compareValue="N">
				, FNL_RPM_DT = TO_CHAR(SYSDATE, 'YYYYMMDD')
	</isEqual>
	<isEqual property="DEPTS_PMT_DVSN_CD" compareValue="C">
		<isEqual property="CNL_YN" compareValue="Y">
				, LEND_BL = LEND_BL + #LEND_AM#
		</isEqual>
		<isEqual property="CNL_YN" compareValue="N">
				, LEND_BL = LEND_BL - #LEND_AM#
		</isEqual>
	</isEqual>
	<isEqual property="DEPTS_PMT_DVSN_CD" compareValue="D">
		<isEqual property="CNL_YN" compareValue="Y">
				, LEND_BL = LEND_BL - #LEND_AM#
		</isEqual>
		<isEqual property="CNL_YN" compareValue="N">
				, LEND_BL = LEND_BL + #LEND_AM#
		</isEqual>
	</isEqual>
	<![CDATA[
		WHERE	LEND_KND_CD = #LEND_KND_CD#
		AND		MOUI_NO = #MOUI_NO#
	]]>
	</update>
	
	<select id="CSPNBK411ENewLendDealDtSlnSelect" parameterClass="lendIjInfoVO" resultClass="String">
	<![CDATA[
		SELECT	/* CSPNBK411ENewLendDealDtSlnSelect */ NVL(MAX(D1.LEND_DEAL_DT_SLN), 0) + 1 AS LEND_DEAL_DT_SLN
		FROM 	TBCSPNBK205L D1
		WHERE 	D1.LEND_KND_CD = #lendKndCd# 
		AND 	D1.MOUI_NO = #mouiNo#
		AND 	D1.LEND_DEAL_DT = #lendDealDt#
	]]>
	</select>
	
	<insert id="CSPNBK411ELendIjInsert" parameterClass="lendIjInfoVO">
	<![CDATA[
		INSERT INTO /* CSPNBK411ELendIjInsert */ TBCSPNBK205L
		(
			LEND_KND_CD
			, MOUI_NO
			, LEND_DEAL_DT
			, LEND_DEAL_DT_SLN
			, OPT_MOUI_NO
			, PET_DH
			, DEAL_PRN
			, INT_AM
			, DEPTS_PMT_DVSN_CD
			, ARR_YN
			, BK_FNL_RPM_DT
			, LEND_BL
			, LAG_WDL_RMK
			, CNL_YN
			, BBK_PRT_YN
			, LEND_DEAL_DVSN_CD
			, SMB_DEAL_DT_1
			, SMB_SLN_1
			, SMB_DEAL_DT_2
			, SMB_SLN_2
			, FRT_USR_ID
			, FNL_USR_ID
			, FNL_DEAL_DPT_CD
			, FNL_MNU_ID
			, FRT_REGI_DH
			, FNL_MDF_DH				
		)
		VALUES
		(
			#lendKndCd#
			,#mouiNo#
			,#lendDealDt#
			,#lendDealDtSln#
			,#optMouiNo#
			,SYSDATE
			,#dealPrn#
			,#intAm#
			,#deptsPmtDvsnCd#
			,#arrYn#
			,#bkFnlRpmDt#
			,#lendBl#
			,#lagWdlRmk#
			,'N'
			,#bbkPrtYn#
			,#lendDealDvsnCd#
			,#smbDealDt1#
			,#smbSln1#
			,#smbDealDt2#
			,#smbSln2#
			,#usrId#
			,#usrId#
			,#dptCd#
			,#mnuId#
			,SYSDATE
			,SYSDATE
		)
	]]>
	</insert>
	
	<update id="CSPNBK411ELendIjUpdate" parameterClass="lendIjInfoVO">
	<![CDATA[
		UPDATE	/* CSPNBK411ELendIjUpdate */ TBCSPNBK205L
		SET		CNL_YN = #cnlYn#
				, CNL_OPT_MOUI_NO = #optMouiNo#
				, CNL_PET_DH = SYSDATE
				, CNL_RMK = #cnlRmk#
				, FNL_USR_ID = #usrId#
				, FNL_DEAL_DPT_CD = #dptCd#
				, FNL_MNU_ID = #mnuId#
				, FNL_MDF_DH = SYSDATE
		WHERE	LEND_KND_CD = #lendKndCd#
		AND		MOUI_NO = #mouiNo#
		AND		LEND_DEAL_DT = #lendDealDt#
		AND		LEND_DEAL_DT_SLN = #lendDealDtSln#
	]]>
	</update>
	
	<select id="CSPNBK411ENewLendSlnSelect" parameterClass="paramMap" resultClass="String">
	<![CDATA[
		SELECT	/* CSPNBK411ENewLendSlnSelect */ NVL(MAX(D1.LEND_SLN), 0) + 1 AS LEND_SLN
		FROM	TBCSPNBK203D D1
		WHERE 	D1.LEND_KND_CD = #LEND_KND_CD# 
		AND 	D1.MOUI_NO = #MOUI_NO#
	]]>
	</select>
	
	<insert id="CSPNBK411ELendPrvtMsInsert" parameterClass="paramMap">
	<![CDATA[
		INSERT INTO /* CSPNBK411ELendPrvtMsInsert */ TBCSPNBK203D
		(
			LEND_KND_CD
			, MOUI_NO
			, LEND_SLN
			, OPT_MOUI_NO
			, PET_DH
			, LEND_AM
			, LEND_BL
			, LEND_DT
			, EXPR_DT
			, GRT_YN
			, GRT_OPT_MOUI_NO
			, GRT_PET_DH
			, GRT_MOUI_NO
			, GRT_AM
			, GRT_BL
			, CNL_YN
			, EMN_RPM_PRN
			, FRT_USR_ID
			, FNL_USR_ID
			, FNL_DEAL_DPT_CD
			, FNL_MNU_ID
			, FRT_REGI_DH
			, FNL_MDF_DH
		)
		VALUES
		(
			#LEND_KND_CD#
			, #MOUI_NO#
			, #LEND_SLN#
			, #OPT_MOUI_NO#
			, SYSDATE
			, #LEND_AM#
			, #LEND_AM#
			, TO_CHAR(SYSDATE, 'YYYYMMDD')
			, #EXPR_DT#
			, #GRT_YN#
			, #OPT_MOUI_NO#
			, DECODE( #GRT_YN#, 'Y', SYSDATE, NULL )
			, DECODE( #GRT_YN#, 'Y', #GRT_MOUI_NO#, NULL )
			, DECODE( #GRT_YN#, 'Y', #GRT_AM#, NULL )
			, DECODE( #GRT_YN#, 'Y', #GRT_AM#, NULL )
			, 'N'
			, #EMN_RPM_PRN#
			, #USR_ID#
			, #USR_ID#
			, #DPT_CD#
			, #MNU_ID#
			, SYSDATE
			, SYSDATE
		)
	]]>
	</insert>
	
	<update id="CSPNBK411ELendPrvtMsCancelUpdate" parameterClass="paramMap">
	<![CDATA[
		UPDATE	/* CSPNBK411ELendPrvtMsCancelUpdate */ TBCSPNBK203D D1
		SET		D1.CNL_YN = #CNL_YN#
				, D1.CNL_OPT_MOUI_NO = #OPT_MOUI_NO#
				, D1.CNL_PET_DH = SYSDATE
		WHERE	( D1.LEND_KND_CD , D1.MOUI_NO, D1.LEND_SLN ) = (
					SELECT 	D2.LEND_KND_CD , D2.MOUI_NO, D2.LEND_SLN
					FROM	TBCSPNBK204L D2
					WHERE	D2.LEND_KND_CD = #LEND_KND_CD#
					AND		D2.MOUI_NO = #MOUI_NO#
					AND		D2.LEND_DEAL_DT = #LEND_DEAL_DT#
					AND		D2.LEND_DEAL_DT_SLN = #LEND_DEAL_DT_SLN#
				)
	]]>
	</update>
	
	<update id="CSPNBK411EPrvtMsLendBlUpdate" parameterClass="paramMap">
	<![CDATA[
		UPDATE	/* CSPNBK411EPrvtMsLendBlUpdate */ TBCSPNBK203D
		SET		LEND_BL = ( CASE WHEN LEND_BL - #LEND_AM# >= 0 THEN LEND_BL - #LEND_AM# ELSE 0 END )
				, GRT_BL = ( CASE WHEN GRT_BL - #LEND_AM# >= 0 THEN GRT_BL - #LEND_AM# ELSE 0 END )
				, FNL_USR_ID = #USR_ID#
				, FNL_DEAL_DPT_CD = #DPT_CD#
				, FNL_MNU_ID = #MNU_ID#
				, FNL_MDF_DH = SYSDATE
		WHERE	LEND_KND_CD = #LEND_KND_CD#
		AND		MOUI_NO = #MOUI_NO#
		AND		LEND_SLN = #LEND_SLN#
	]]>
	</update>
	
	<select id="CSPNBK411ELendMsCheckSelect" parameterClass="paramMap" resultClass="int">
	<![CDATA[
		SELECT	/* CSPNBK411ELendMsCheckSelect */ COUNT(*) AS CNT
		FROM	TBCSPNBK202M D1
		WHERE	D1.LEND_KND_CD = #LEND_KND_CD#
		AND		D1.MOUI_NO = #MOUI_NO#
	]]>
	</select>
	
	<update id="CSPNBK411ELendPrvtBlBackUpdate" parameterClass="paramMap">
	<![CDATA[
		UPDATE	/* CSPNBK411ELendPrvtBlBackUpdate */ TBCSPNBK203D D1
		SET		( D1.LEND_BL, D1.GRT_BL ) = (
					SELECT	D2.DEAL_BK_LEND_BL, D2.DEAL_BK_GRT_BL
					FROM	TBCSPNBK204L D2
					WHERE	D2.LEND_KND_CD = D1.LEND_KND_CD
					AND		D2.MOUI_NO = D1.MOUI_NO
					AND		D2.LEND_SLN = D1.LEND_SLN
					AND		D2.LEND_DEAL_DT = #LEND_DEAL_DT#
					AND		D2.LEND_DEAL_DT_SLN = #LEND_DEAL_DT_SLN#
				)
				, FNL_USR_ID = #USR_ID#
				, FNL_DEAL_DPT_CD = #DPT_CD#
				, FNL_MNU_ID = #MNU_ID#
				, FNL_MDF_DH = SYSDATE
		WHERE	( D1.LEND_KND_CD, D1.MOUI_NO, D1.LEND_SLN ) IN (
					SELECT	D3.LEND_KND_CD, D3.MOUI_NO, D3.LEND_SLN
					FROM	TBCSPNBK204L D3
					WHERE	D3.LEND_KND_CD = #LEND_KND_CD#
					AND		D3.MOUI_NO = #MOUI_NO#
					AND		D3.LEND_DEAL_DT = #LEND_DEAL_DT#
					AND		D3.LEND_DEAL_DT_SLN = #LEND_DEAL_DT_SLN#
				)
	]]>
	</update>
	
	<select id="CSPNBK411LendBlByMouiNoSelect" parameterClass="paramMap" resultClass="bigDecimal">
	<![CDATA[
		SELECT	/* CSPNBK411LendBlByMouiNoSelect */
				D1.LEND_BL
		FROM	TBCSPNBK202M D1
		WHERE	D1.LEND_KND_CD = #lendKndCd#
		AND		D1.MOUI_NO = #mouiNo#
	]]>
	</select>
	
	<procedure id="CSPNBK411PrcEstExprDtUpdate" parameterMap="PrcEstExprDtUpdateParam">
	<![CDATA[  /* CSPNBK411PrcEstExprDtUpdate */ ]]>
	{ CALL PRC_EST_EXPR_DT_UPDATE(?) }
	</procedure>
</sqlMap>