<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/cav/073">
	<!--은행코드 목록조회-->
	<select id="FAACAV073EselectBankList" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/073/FAACAV073EselectBankList */ ]]>
		SELECT 
		    CD
		   ,CD_NM 
		FROM TBDCMACM013C
		WHERE CMM_CD_DVSN_CD = '1000712'	
	</select> 
	
	
	<!--관서정보 목록조회-->
	<select id="FAACAV073EMainSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/073/FAACAV073EMainSelect */ ]]>
		<include refid="include.pageSelct" />
		SELECT 
			COPT_CD||ACNT_CD||BLL_CD||PROF_DRTR_SRNO||DL_XPN_RCDB_PBSVT_SRNO AS ACCMN_ID
			,COPT_CD
			,ACNT_CD
			,BLL_CD
			,PROF_DRTR_SRNO
			,DL_XPN_RCDB_PBSVT_SRNO
			,GOV_NM 
			,ACNT_NM
			,COPT_NM
			,GOV_CHIF_PST_NM
			,ACNT_PST_NM
			,BZN
			,EIN AS RRN
			,PROF_DRTR_NM
			,TNB
			,WRIT_PEN_NM
			,ZCD
			,AD
			,EAN_1 AS ACNB_1
			,EAN_2 AS ACNB_2
			,EAN_3 AS ACNB_3
			,EAN_4 AS ACNB_4
			,EAN_5 AS ACNB_5
			,EAN_6 AS ACNB_6
			,BNK_CD_1
			,BNK_CD_2
			,BNK_CD_3
			,BNK_CD_4
			,BNK_CD_5
			,BNK_CD_6
			,FRT_REGI_DH
			,FRT_USR_ID
			,FNL_MDF_DH
			,FNL_USR_ID
			,FNL_DEAL_DPT_CD
			,FNL_MNU_ID
		FROM TWFAACAV074M
		WHERE 1 = 1
		<isNotEmpty property="strAccMnId1">
			AND COPT_CD = #strAccMnId1#
		</isNotEmpty>
		<isNotEmpty property="strAccMnId2">
			AND ACNT_CD = #strAccMnId2#
		</isNotEmpty>
		<isNotEmpty property="strAccMnId3">
			AND BLL_CD = #strAccMnId3#
		</isNotEmpty>
		<isNotEmpty property="strAccMnId4">
			AND PROF_DRTR_SRNO = #strAccMnId4#
		</isNotEmpty>
		<isNotEmpty property="strAccMnId5">
			AND DL_XPN_RCDB_PBSVT_SRNO = #strAccMnId5#
		</isNotEmpty>
		<isNotEmpty property="strUseYn">
			AND USE_YN = #strUseYn#
		</isNotEmpty>
		<include refid="include.pageOrder" />
		ORDER BY COPT_CD
			,ACNT_CD
			,BLL_CD
			,PROF_DRTR_SRNO
			,DL_XPN_RCDB_PBSVT_SRNO
	</select> 
	
	<!--관서정보 insert-->
	<update id="FAACAV073EMainInsert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/073/FAACAV073EMainInsert */ ]]>
		<![CDATA[ 	
			MERGE INTO TWFAACAV074M
		    USING DUAL
			   ON ( 
				   COPT_CD||ACNT_CD||BLL_CD||PROF_DRTR_SRNO||DL_XPN_RCDB_PBSVT_SRNO = #COPT_CD#||#ACNT_CD#||#BLL_CD#||#PROF_DRTR_SRNO#||#DL_XPN_RCDB_PBSVT_SRNO#
			  	   )
			WHEN MATCHED  THEN 		
				UPDATE SET
					GOV_NM                  = #GOV_NM#
					,ACNT_NM                 = #ACNT_NM#
					,COPT_NM                 = #COPT_NM#
					,GOV_CHIF_PST_NM         = #GOV_CHIF_PST_NM#
					,ACNT_PST_NM             = #ACNT_PST_NM#
					,BZN                     = #BZN#
					,EIN                     = #RRN#
					,PROF_DRTR_NM            = #PROF_DRTR_NM#
					,TNB                     = #TNB#
					,WRIT_PEN_NM             = #WRIT_PEN_NM#
					,ZCD                     = #ZCD#
					,AD                      = #AD#
					,EAN_1                  = #ACNB_1#
					,EAN_2                  = #ACNB_2#
					,EAN_3                  = #ACNB_3#
					,EAN_4                  = #ACNB_4#
					,EAN_5                  = #ACNB_5#
					,EAN_6                  = #ACNB_6#
					,BNK_CD_1                = #BNK_CD_1#
					,BNK_CD_2                = #BNK_CD_2#
					,BNK_CD_3                = #BNK_CD_3#
					,BNK_CD_4                = #BNK_CD_4#
					,BNK_CD_5                = #BNK_CD_5#
					,BNK_CD_6                = #BNK_CD_6#
					,FNL_MDF_DH              = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
					,FNL_USR_ID              = 'TEST'
		]]>	    
		<![CDATA[
            WHEN NOT MATCHED THEN 
				INSERT 
					(
						COPT_CD
						,ACNT_CD
						,BLL_CD
						,PROF_DRTR_SRNO
						,DL_XPN_RCDB_PBSVT_SRNO
						,GOV_NM 
						,ACNT_NM
						,COPT_NM
						,GOV_CHIF_PST_NM
						,ACNT_PST_NM
						,BZN
						,EIN
						,PROF_DRTR_NM
						,TNB
						,WRIT_PEN_NM
						,ZCD
						,AD
						,EAN_1
						,EAN_2
						,EAN_3
						,EAN_4
						,EAN_5
						,EAN_6
						,BNK_CD_1
						,BNK_CD_2
						,BNK_CD_3
						,BNK_CD_4
						,BNK_CD_5
						,BNK_CD_6
						,USE_YN
						,FRT_REGI_DH
						,FRT_USR_ID
						,FNL_MDF_DH
						,FNL_USR_ID
						,FNL_DEAL_DPT_CD
						,FNL_MNU_ID	
					) VALUES (
						#COPT_CD#
						,#ACNT_CD#
						,#BLL_CD#
						,#PROF_DRTR_SRNO#
						,#DL_XPN_RCDB_PBSVT_SRNO#
						,#GOV_NM#
						,#ACNT_NM#
						,#COPT_NM#
						,#GOV_CHIF_PST_NM#
						,#ACNT_PST_NM#
						,#BZN#
						,#RRN#
						,#PROF_DRTR_NM#
						,#TNB#
						,#WRIT_PEN_NM#
						,#ZCD#
						,#AD#
						,#ACNB_1#
						,#ACNB_2#
						,#ACNB_3#
						,#ACNB_4#
						,#ACNB_5#
						,#ACNB_6#
						,'Y'
						,#BNK_CD_1#
						,#BNK_CD_2#
						,#BNK_CD_3#
						,#BNK_CD_4#
						,#BNK_CD_5#
						,#BNK_CD_6#
						,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
						,'TEST'
						,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
						,'TEST'
						,'TEST'
						,'TEST'
					)
		]]>		
		
	</update>
	
	<!--관서정보 delete-->
	<update id="FAACAV073EMainDelete" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/073/FAACAV073EMainDelete */ ]]>
		UPDATE TWFAACAV074M SET
		USE_YN = 'N'
		WHERE COPT_CD||ACNT_CD||BLL_CD||PROF_DRTR_SRNO||DL_XPN_RCDB_PBSVT_SRNO = #COPT_CD#||#ACNT_CD#||#BLL_CD#||#PROF_DRTR_SRNO#||#DL_XPN_RCDB_PBSVT_SRNO#
	</update>
</sqlMap> 
