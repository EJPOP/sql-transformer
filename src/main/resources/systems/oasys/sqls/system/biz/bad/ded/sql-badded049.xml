<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/049">

	<select id="badded049EDistricDivselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
        SELECT DEP_RGN_CD
             , F_CODE_NM('1000001',ARV_RGN_CD) AS ARV_RGN_NM
             , ARV_RGN_CD
             , RGN_DVSN_CD
             , MDF_DT
             , CPRG_LN_DVSN_CD
          FROM TBBADDED014B A, TBDCMACM013C B
          
          WHERE 1=1
          AND B.CMM_CD_DVSN_CD = '1000001'
          AND A.ARV_RGN_CD = B.CD
     
        ]]>
        <isNotEmpty property="strDepRgnCd">	 
			  AND A.DEP_RGN_CD = #strDepRgnCd#		 /*지역코드*/
		</isNotEmpty>   
		        <isNotEmpty property="strRgnNm">	 
			  AND B.CD_NM LIKE  '%'||#strRgnNm#||'%'		 /*지역코드*/
		</isNotEmpty>   
		        <isNotEmpty property="strRgnDvsnCd">	 
			  AND A.RGN_DVSN_CD = #strRgnDvsnCd#		 /*지역코드*/
		</isNotEmpty>   
		ORDER BY F_CODE_NM ('1000001', ARV_RGN_CD)
        </select>
        
	<insert id="badded049EDistricDivinsert" parameterClass="paramMap">
		INSERT
		INTO
		TBBADDED014B
		( DEP_RGN_CD
		, ARV_RGN_CD
		, RGN_DVSN_CD
		, MDF_DT
		, CPRG_LN_DVSN_CD
		
		, FNL_MNU_ID
		, FRT_USR_ID
		, FNL_USR_ID
		, FNL_DEAL_DPT_CD
		, FRT_REGI_DH
		, FNL_MDF_DH
		)
		VALUES
		( #DEP_RGN_CD#
		, #ARV_RGN_CD#
		, #RGN_DVSN_CD#
		, #MDF_DT# 
        , #CPRG_LN_DVSN_CD#
        
		, #FNL_MNU_ID#
		, #FRT_USR_ID#
		, #FNL_USR_ID#
		, #FNL_DEAL_DPT_CD#
		, SYSDATE
		, SYSDATE

		)
	</insert>
	
	
	<update id="badded049EDistricDivupdate" parameterClass="paramMap">
		UPDATE TBBADDED014B
		SET DEP_RGN_CD = #DEP_RGN_CD#
		  , ARV_RGN_CD = #ARV_RGN_CD#
	      , MDF_DT = TO_CHAR(SYSDATE,'yyyymmdd')
		  , CPRG_LN_DVSN_CD = #CPRG_LN_DVSN_CD#
		  
		  , FNL_MDF_DH = SYSDATE
		  , FNL_USR_ID = #FNL_USR_ID#
		  , FNL_DEAL_DPT_CD =	#FNL_DEAL_DPT_CD#
		  , FNL_MNU_ID = #FNL_MNU_ID#

		<isNotNull prepend="," property="RGN_DVSN_CD">
			RGN_DVSN_CD = #RGN_DVSN_CD#
		</isNotNull>
				WHERE 1 = 1
		AND DEP_RGN_CD =  #DEP_RGN_CD#
		AND ARV_RGN_CD = #ARV_RGN_CD#


	</update>
	
	
	<delete id="badded049EDistricDivdelete" parameterClass="paramMap">
		DELETE
		TBBADDED014B
		WHERE 1 = 1
		AND DEP_RGN_CD =  #DEP_RGN_CD#
		AND ARV_RGN_CD = #ARV_RGN_CD#

	</delete>
		
</sqlMap> 
