<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/iit/017">
	
	<!-- PC장비코드관리 내역 조회 -->
	<select id="CSPIIT017EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	CON_NO,
					GCC_CON_HNDL_DVSN_CD,
					CD_APC_DT,
					BK_DVSN_CD,
					GCC_ORG_CD,
					ALL_ORG_NM,
					LOWT_ORG_NM,
					ORG_DGE_DVSN_CD,
					ORG_RAK_NO,
					BLT_ORG_DGE_DVSN_CD,
					GCC_SNCL_ORG_CD,
					GCC_HHT_ORG_CD,
					GCC_RPST_ORG_CD,
					TYP_CAT_LAG_CD,
					TYP_CAT_MID_CD,
					TYP_CAT_SALL_CD,
					CRE_DT,
					ABLT_DT,
					ABLT_YN_CD,
					BK_ORG_CD,
					CON_HNDL_DT,
					CON_HNDL_STA_CD
			FROM	TBCSPIIT007O A	
			WHERE	CON_HNDL_STA_CD = 'W'
        ]]>
	</select>        
	
	
	<select id="CSPIIT017EMainSelect2" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	GCC_ORG_CD,
			BAI_ORG_CD,
			ALL_ORG_NM,
			LOWT_ORG_NM,
			ORG_DGE_DVSN_CD,
			ORG_RAK_NO,
			BLT_ORG_DGE_DVSN_CD,
			GCC_SNCL_ORG_CD,
			GCC_HHT_ORG_CD,
			GCC_RPST_ORG_CD,
			TYP_CAT_LAG_CD,
			TYP_CAT_MID_CD,
			TYP_CAT_SALL_CD,
			CRE_DT,
			ABLT_DT,
			ABLT_YN_CD,
			BK_ORG_CD,
			REGI_DT,
			CD_APC_DT,
			GCC_CON_HNDL_DVSN_CD,
			CON_HNDL_DT,
			BK_DVSN_CD,
			MPP_YN,
			ONR_YO
			FROM	TBCSPIIT006M A	
			WHERE	GCC_ORG_CD = #GCC_ORG_CD#
        ]]>
	</select>   
	
	<insert id="CSPIIT017EMainInsert" parameterClass="paramMap">
        <![CDATA[
        	INSERT INTO TBCSPIIT006M
        	(			
        			GCC_ORG_CD,
					BAI_ORG_CD,
					ALL_ORG_NM,
					LOWT_ORG_NM,
					ORG_DGE_DVSN_CD,
					ORG_RAK_NO,
					BLT_ORG_DGE_DVSN_CD,
					GCC_SNCL_ORG_CD,
					GCC_HHT_ORG_CD,
					GCC_RPST_ORG_CD,
					TYP_CAT_LAG_CD,
					TYP_CAT_MID_CD,
					TYP_CAT_SALL_CD,
					CRE_DT,
					ABLT_DT,
					ABLT_YN_CD,
					BK_ORG_CD,
					REGI_DT,
					CD_APC_DT,
					GCC_CON_HNDL_DVSN_CD,
					CON_HNDL_DT,
					BK_DVSN_CD,
					MPP_YN,
					FRT_USR_ID,
					FNL_USR_ID,
					FNL_DEAL_DPT_CD,
					FNL_MNU_ID,
					FRT_REGI_DH,
					FNL_MDF_DH
        	) VALUES (
        			#GCC_ORG_CD#,
        			'',
        			#ALL_ORG_NM#,
        			#LOWT_ORG_NM#,
        			#ORG_DGE_DVSN_CD#,
        			#ORG_RAK_NO#,
        			#BLT_ORG_DGE_DVSN_CD#,
        			#GCC_SNCL_ORG_CD#,
        			#GCC_HHT_ORG_CD#,
        			#GCC_RPST_ORG_CD#,
        			#TYP_CAT_LAG_CD#,
					#TYP_CAT_MID_CD#,
					#TYP_CAT_SALL_CD#,
					#CRE_DT#,
					#ABLT_DT#,
					#ABLT_YN_CD#,
					#BK_ORG_CD#,
					TO_CHAR(SYSDATE,'YYYYMMDD'),
					#CD_APC_DT#,
					#GCC_CON_HNDL_DVSN_CD#,
					TO_CHAR(SYSDATE,'YYYYMMDD'),
					#BK_DVSN_CD#,
					'N',
					'BATCH',
					'BATCH',
					'BATCH',
					'BATCH',
					SYSDATE,
					SYSDATE
        	)
        ]]>
	</insert>
	
	<update id="CSPIIT017EConHndlStaCdUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBCSPIIT007O
			SET		CON_HNDL_STA_CD = 'C',
					CON_HNDL_DT = TO_CHAR(SYSDATE,'YYYYMMDD')
			WHERE	CON_NO = #CON_NO#
		]]>
	</update>
	
	<update id="CSPIIT017EGccUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBCSPIIT006M
			SET		BAI_ORG_CD = #BAI_ORG_CD#,
					ALL_ORG_NM = TRIM(#ALL_ORG_NM#),
					LOWT_ORG_NM = TRIM(#LOWT_ORG_NM#),
					ORG_DGE_DVSN_CD = TRIM(#ORG_DGE_DVSN_CD#),
					ORG_RAK_NO = TRIM(#ORG_RAK_NO#),
					BLT_ORG_DGE_DVSN_CD = TRIM(#BLT_ORG_DGE_DVSN_CD#),
					GCC_SNCL_ORG_CD = TRIM(#GCC_SNCL_ORG_CD#),
					GCC_HHT_ORG_CD = TRIM(#GCC_HHT_ORG_CD#),
					GCC_RPST_ORG_CD = TRIM(#GCC_RPST_ORG_CD#),
					TYP_CAT_LAG_CD = TRIM(#TYP_CAT_LAG_CD#),
					TYP_CAT_MID_CD = TRIM(#TYP_CAT_MID_CD#),
					TYP_CAT_SALL_CD = TRIM(#TYP_CAT_SALL_CD#),
					CRE_DT = TRIM(#CRE_DT#),
					ABLT_DT = TRIM(#ABLT_DT#),
					ABLT_YN_CD = TRIM(#ABLT_YN_CD#),
					BK_ORG_CD = TRIM(#BK_ORG_CD#),
					REGI_DT = TO_CHAR(SYSDATE,'YYYYMMDD'),
					CD_APC_DT = TRIM(#CD_APC_DT#),
					GCC_CON_HNDL_DVSN_CD = TRIM(#GCC_CON_HNDL_DVSN_CD#),
					CON_HNDL_DT = TO_CHAR(SYSDATE,'YYYYMMDD'),
					BK_DVSN_CD = TRIM(#BK_DVSN_CD#),
					MPP_YN = 'N',
					FNL_USR_ID = 'BATCH',
					FNL_MDF_DH = SYSDATE
			WHERE	GCC_ORG_CD = #GCC_ORG_CD#
		]]>
	</update>
	
</sqlMap> 
