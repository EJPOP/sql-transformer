<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ear/013">
	<!--처분요구상세 조회  -->
	<select id="BADEAR013QMainSelect" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />	
        <![CDATA[
			SELECT MASTER.AUD_YR                                              AS AUD_YR ,  				/*감사년도*/
			       MASTER.AUD_NO                                              AS AUD_NO ,  				/*감사순번*/
			       F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                                  AS AUD_YR_NO,             /*화면에 보여주는 관리번호 수정 - 2015.12.22 yyh*/
			       MASTER.DSP_RQ_SNO                                          AS DSP_RQ_SNO , 			/*처분요구순번*/
			       (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )                       AS AUD_STR_DT , 			/*감사시작일자*/
			       AUD.SPV_BRDV_CD                                            AS SPV_BRDV_CD , 			/*주관부서코드*/
			       AUD.AUD_KND_CD                                             AS AUD_KND_CD ,  			/*감사종류코드*/
			       AUD.AUD_SBJ_NM                                             AS AUD_SBJ_NM ,  			/*감사사항명*/
			       RTRIM(DETAIL.ENF_DT)                                       AS ENF_DT ,      			/*시행일*/
			       DETAIL.ENF_BRDV_CD                                         AS ENF_BRDV_CD ,  		/*시행국과코드*/
			       DETAIL.ENFM_MNG_BRDV_CD                                    AS ENFM_MNG_BRDV_CD , 	/*집행관리국과코드*/
                   (SELECT ORG_NM
                      FROM TBDCMACM015M
                     WHERE ORG_CD = (SELECT MIN(RLTN_ORG_CD)
                                       FROM TBBADEAR006M
                                      WHERE AUD_YR     = MASTER.AUD_YR
                                        AND AUD_NO     = MASTER.AUD_NO
                                        AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO))  AS RLTN_ORG_CD ,      	/*관계기관코드*/                  
                   (SELECT CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000002' 
			           AND CD = MASTER.DSP_RQ_KND_CD)                         AS DSP_RQ_KND_CD ,   		/*처분종류코드*/
			       MASTER.TIT_TXT                                             AS DISP_TIT_TXT ,    		/*처분명*/
			       DETAIL.NOP_CNT                                             AS NOP_CNT ,         		/*인원수*/
			       DETAIL.PNL_DRIN_PSVT_AM                                    AS PNL_DRIN_PSVT_AM , 	/*추징회수보전금액*/
			       (NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + NVL(DETAIL.RSR_AM,0) + NVL(DETAIL.SPLP_AM,0)) AS DISP_REQ_AM ,      	/*환추급금액*/
			       CASE WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND (DETAIL.DTM_YN <> 'Y' OR DETAIL.DTM_YN IS NULL) THEN '미결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND  NVL(DETAIL.DTM_YN,'N') = 'Y' THEN '완결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '2' THEN '확정'
			       		ELSE ''
			        END AS DTM_STA_CD ,       	/*집행상태*/			       
			       NVL(DETAIL.DTM_YN, '0')                                    AS DTM_YN ,           	/*확정여부*/
			       (SELECT DPT_NM
			          FROM TBDCMACM002M
			         WHERE DPT_CD = AUD.SPV_BRDV_CD)                          AS EXEC_DPT_NM,         	/*주관부서명*/ 
                   (SELECT CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000007' 
			           AND CD = AUD.AUD_KND_CD)                               AS AUD_EXEC_DVSN_CD_NM , 	/*감사종류명*/ 
			       (SELECT DPT_NM
			          FROM TBDCMACM002M
			         WHERE DPT_CD = DETAIL.ENF_BRDV_CD)	                      AS OPER_BURDIV_NM,       	/*시행국과명*/       
                   (SELECT CD_NM
			          FROM TBDCMACM013C
			         WHERE CMM_CD_DVSN_CD = '1000002' 
			           AND CD = MASTER.DSP_RQ_KND_CD)                         AS DSP_RQ_KND_CD_NM ,    	/*처분종류명*/
                   (SELECT ORG_NM
                      FROM TBDCMACM015M
                     WHERE ORG_CD = (SELECT MIN(RLTN_ORG_CD)
                                       FROM TBBADEAR008M
                                      WHERE AUD_YR     = MASTER.AUD_YR
                                        AND AUD_NO     = MASTER.AUD_NO
                                        AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO))  AS COMPTAUTH_NM,          /*소관청명*/          
			       NVL(DETAIL.DSP_RQ_APV_STA_CD, '0')                         AS DSP_RQ_APV_STA_CD,     /*처분요구결재상태코드*/
			       CPLT_DT,
			       F_ORG_INFO(REL.ENFM_MNG_ORG_CD,'1')                        AS ENFM_MNG_ORG_NM,       /*조치기관 - 2017.05.15 yyh*/
			       CASE WHEN DETAIL.SND_STA_CD = '3' THEN '송부'
			            ELSE '미송부'          
			        END                                                       AS SND_STA_NM,            /*송부여부 - 2017.07.05 yyh*/   
			        
			       CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			        END                                                       AS DTM_STA_NM1,            /*처분상태추가 - 2018.02.23 yyh*/
			        (SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
			         FROM TBBADDED145M T1 
			        INNER JOIN TBBADDED146M T2
		               ON T1.AUD_YR      = T2.AUD_YR
		              AND T1.AUD_NO      = T2.AUD_NO
		              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
		              AND T1.APVR_CD     = T2.APVR_CD
		              AND T1.DOC_ID      = T2.DOC_ID 
		              AND T1.AFF_SNO     = T2.AFF_SNO
		              AND T1.AUD_STEP_CD = 'A1070'
		              AND T1.AUD_YR      > '2017'
		              AND T1.APVR_CD     = 'A1070'
		            WHERE T1.AUD_YR      = MASTER.AUD_YR
		              AND T1.AUD_NO      = MASTER.AUD_NO
		              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM	/* 부의 위임여부 - 2022.01.03 EUNOK */
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                          
			       ,TBBADDED001M AUD 
			       ,(SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD)      AS RLTN_ORG_CD
			               ,MIN(ENFM_MNG_ORG_CD)  AS ENFM_MNG_ORG_CD 
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL			       
			  WHERE  1=1                                                            
			    AND  MASTER.AUD_YR     = DETAIL.AUD_YR                              
			    AND  MASTER.AUD_NO     = DETAIL.AUD_NO                               
			    AND  MASTER.DSP_RQ_SNO = DETAIL.DSP_RQ_SNO                              
			    AND  MASTER.AUD_YR     = AUD.AUD_YR                                 
			    AND  MASTER.AUD_NO     = AUD.AUD_NO 
			    AND  MASTER.AUD_YR     = REL.AUD_YR(+)
			    AND  MASTER.AUD_NO     = REL.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = REL.DSP_RQ_SNO(+) 	
			    AND  DETAIL.SND_STA_CD = '3'   /*송부여부 - 송부*/    
		]]>	    
		<isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        
        <!-- 일자검색추가 - 2018.03.26 yyh -->
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>	
		
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt#
		</isNotEmpty>  
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty> 
								
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
		
		
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>
		
		
		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)  
            </isNotEmpty> 
		</isNotNull>
		
		<include refid="include.pageOrder" />
    </select>     
    
    
	<!--처분요구상세 조회 상세 -->
	<select id="BADEAR013QMainDtlSelect" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />	
        <![CDATA[
            SELECT MASTER.AUD_YR                                              AS AUD_YR ,  				/*감사년도*/
			       MASTER.AUD_NO                                              AS AUD_NO ,  				/*감사순번*/
			       F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                                  AS AUD_YR_NO,             /*화면에 보여주는 관리번호 수정 - 2015.12.22 yyh*/			       
			       MASTER.DSP_RQ_SNO                                          AS DSP_RQ_SNO , 			/*처분요구순번*/
			       (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )                       AS AUD_STR_DT , 			/*감사시작일자*/
			       AUD.SPV_BRDV_CD                                            AS SPV_BRDV_CD , 			/*주관부서코드*/
			       AUD.AUD_KND_CD                                             AS AUD_KND_CD ,  			/*감사종류코드*/
			       AUD.AUD_SBJ_NM                                             AS AUD_SBJ_NM ,  			/*감사사항명*/
			       RTRIM(DETAIL.ENF_DT)                                       AS ENF_DT ,      			/*시행일*/
			       DETAIL.ENF_BRDV_CD                                         AS ENF_BRDV_CD ,  		/*시행국과코드*/
			       DETAIL.ENFM_MNG_BRDV_CD                                    AS ENFM_MNG_BRDV_CD , 	/*집행관리국과코드*/
                   (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.RLTN_ORG_CD)                         AS RLTN_ORG_CD ,      	/*관계기관코드*/
                   (SELECT CD_NM
                      FROM TBDCMACM013C
                     WHERE CMM_CD_DVSN_CD = '1000002'
                       AND CD = MASTER.DSP_RQ_KND_CD)                         AS DSP_RQ_KND_CD ,   		/*처분종류코드*/
                   MASTER.TIT_TXT                                             AS DISP_TIT_TXT ,    		/*처분명*/
			       DETAIL.NOP_CNT                                             AS NOP_CNT ,         		/*인원수*/
			       DETAIL.PNL_DRIN_PSVT_AM                                    AS PNL_DRIN_PSVT_AM , 	/*추징회수보전금액*/
			       (NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + NVL(DETAIL.RSR_AM,0) + NVL(DETAIL.SPLP_AM,0)) AS DISP_REQ_AM ,      	/*환추급금액*/
			       CASE WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND (DETAIL.DTM_YN <> 'Y' OR DETAIL.DTM_YN IS NULL) THEN '미결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND  NVL(DETAIL.DTM_YN,'N') = 'Y' THEN '완결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '2' THEN '확정'
			       		ELSE ''
			        END AS DTM_STA_CD ,       	/*집행상태*/			       
			       NVL(DETAIL.DTM_YN, '0')                                    AS DTM_YN ,           	/*확정여부*/
                   (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = AUD.SPV_BRDV_CD)                          AS EXEC_DPT_NM,         	/*주관부서명*/ 
                   (SELECT CD_NM
                      FROM TBDCMACM013C
                     WHERE CMM_CD_DVSN_CD = '1000007'
                       AND CD = AUD.AUD_KND_CD)                               AS AUD_EXEC_DVSN_CD_NM , 	/*감사종류명*/  
                   (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = DETAIL.ENF_BRDV_CD)                       AS OPER_BURDIV_NM,       	/*시행국과명*/  
                   (SELECT CD_NM
                      FROM TBDCMACM013C
                     WHERE CMM_CD_DVSN_CD = '1000002'
                       AND CD = MASTER.DSP_RQ_KND_CD)                         AS DSP_RQ_KND_CD_NM ,    	/*처분종류명*/  
                   (SELECT ORG_NM
                      FROM TBDCMACM015M
                     WHERE ORG_CD = COPT.COPT_OFI_CD)                         AS COMPTAUTH_NM,         	/*소관청명*/
			       NVL(DETAIL.DSP_RQ_APV_STA_CD, '0')                         AS DSP_RQ_APV_STA_CD,    	/*처분요구결재상태코드*/
			       CPLT_DT,
                   (SELECT ORG_NM
                      FROM TBDCMACM015M
                     WHERE ORG_CD = REL.ENFM_MNG_ORG_CD)                      AS ENFM_MNG_ORG_NM,       /*조치기관 - 2017.05.15 yyh*/
			       CASE WHEN DETAIL.SND_STA_CD = '3' THEN '송부'
			            ELSE '미송부'          
			        END                                                       AS SND_STA_NM,            /*송부여부 - 2017.07.05 yyh*/  
			        
			       CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			        END                                                       AS DTM_STA_NM1,            /*처분상태추가 - 2018.02.23 yyh*/
			       (SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
				         FROM TBBADDED145M T1 
				        INNER JOIN TBBADDED146M T2
			               ON T1.AUD_YR      = T2.AUD_YR
			              AND T1.AUD_NO      = T2.AUD_NO
			              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
			              AND T1.APVR_CD     = T2.APVR_CD
			              AND T1.DOC_ID      = T2.DOC_ID 
			              AND T1.AFF_SNO     = T2.AFF_SNO
			              AND T1.AUD_STEP_CD = 'A1070'
			              AND T1.AUD_YR      > '2017'
			              AND T1.APVR_CD     = 'A1070'
			            WHERE T1.AUD_YR      = MASTER.AUD_YR
			              AND T1.AUD_NO      = MASTER.AUD_NO
			              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM,	/* 부의 위임여부 - 2022.01.03 EUNOK */
			        (SELECT T1.REFER_DVSN_CD 
				         FROM TBBADDED145M T1 
				        INNER JOIN TBBADDED146M T2
			               ON T1.AUD_YR      = T2.AUD_YR
			              AND T1.AUD_NO      = T2.AUD_NO
			              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
			              AND T1.APVR_CD     = T2.APVR_CD
			              AND T1.DOC_ID      = T2.DOC_ID 
			              AND T1.AFF_SNO     = T2.AFF_SNO
			              AND T1.AUD_STEP_CD = 'A1070'
			              AND T1.AUD_YR      > '2017'
			              AND T1.APVR_CD     = 'A1070'
			            WHERE T1.AUD_YR      = MASTER.AUD_YR
			              AND T1.AUD_NO      = MASTER.AUD_NO
			              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_CD	/* 부의 위임여부 - 2022.01.06 EUNOK */			        			       
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                          
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD)     AS RLTN_ORG_CD
			               ,MIN(ENFM_MNG_ORG_CD) AS ENFM_MNG_ORG_CD
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			  WHERE  1=1                                                            
			    AND  MASTER.AUD_YR     = DETAIL.AUD_YR                              
			    AND  MASTER.AUD_NO     = DETAIL.AUD_NO                               
			    AND  MASTER.DSP_RQ_SNO = DETAIL.DSP_RQ_SNO                              
			    AND  MASTER.AUD_YR     = AUD.AUD_YR                                 
			    AND  MASTER.AUD_NO     = AUD.AUD_NO 
			    AND  MASTER.AUD_YR     = REL.AUD_YR(+)
			    AND  MASTER.AUD_NO     = REL.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = REL.DSP_RQ_SNO(+)  
			    AND  MASTER.AUD_YR     = COPT.AUD_YR(+)
			    AND  MASTER.AUD_NO     = COPT.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = COPT.DSP_RQ_SNO(+) 
			    AND  MASTER.AUD_YR     = DVSN.AUD_YR(+)
			    AND  MASTER.AUD_NO     = DVSN.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = DVSN.DSP_RQ_SNO(+) 			    
		]]>	    	
        <isNotEmpty property="strAudYrSt">    			    
			    AND  MASTER.AUD_YR = #strAudYrSt# 
		</isNotEmpty>   	
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND  AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty> 
		
		<isNotEmpty property="strReferDvsnCd">
				/*부의 위임여부를 선택했을때*/
				AND EXISTS (SELECT 1
					FROM TBBADDED145M T1 INNER JOIN TBBADDED146M T2
				    	ON T1.AUD_YR      = T2.AUD_YR
				    	AND T1.AUD_NO      = T2.AUD_NO
				        AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
				        AND T1.APVR_CD     = T2.APVR_CD
				        AND T1.DOC_ID      = T2.DOC_ID 
				        AND T1.AFF_SNO     = T2.AFF_SNO
				        AND T1.AUD_STEP_CD = 'A1070'
				        AND T1.AUD_YR      > '2017'
				        AND T1.APVR_CD     = 'A1070'
				        WHERE T1.AUD_YR    = MASTER.AUD_YR
				        AND T1.AUD_NO      = MASTER.AUD_NO
				        AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO
				        AND T1.REFER_DVSN_CD = #strReferDvsnCd#)
		</isNotEmpty>			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
			<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/     
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>		
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
		
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty>
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	 
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
		
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>		
		
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>		
		   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 

		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>
		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1)
		</isNotEmpty>		

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>
		
		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>
		
		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3" prepend="OR" >
				 (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391','395','396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390" prepend="OR" >
				 MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd395" prepend="OR" >
				 MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결)체크시*/
			</isNotEmpty>			
			<isNotEmpty property="strDspRqKndCd4" prepend="OR">
				 (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd495" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd5" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6" prepend="OR">
				 /* (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시*/
				 MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
			
			<isNotEmpty property="strDspRqKndCd623" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620" prepend="OR">
				 MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
		<isEqual property="strDspRqKndYn" compareValue="Y">
			  )
		</isEqual>
			 
	    /**
	     * 금액구분
	     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
	     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
	     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
	     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>		
		
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)  
            </isNotEmpty> 
		</isNotNull>	
		
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 송부여부 - 2017.07.05 yyh 	*/
		<isNotEmpty property="strSndStaCd">
			<isEqual property="strSndStaCd" compareValue="1">
				/* 송부 */
			 	AND DETAIL.SND_STA_CD = '3'
			</isEqual>
			<isEqual property="strSndStaCd" compareValue="2">
				/* 미송부 */
			  	AND NVL(DETAIL.SND_STA_CD,'X') != '3'					
			</isEqual>	
		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.20 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.20 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.20 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.20 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
		
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	
		<include refid="include.pageOrder" />
    </select>           


	<select id="BADEAR013QMainReportSelect" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
			SELECT MASTER.AUD_YR                                              AS AUD_YR ,  				/*감사년도*/
			       MASTER.AUD_NO                                              AS AUD_NO ,  				/*감사순번*/
			       F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') 
			                                                                  AS AUD_YR_NO,             /*화면에 보여주는 관리번호 수정 - 2015.12.22 yyh*/			       
			       MASTER.DSP_RQ_SNO                                          AS DSP_RQ_SNO , 			/*처분요구순번*/
			       (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )                       AS AUD_STR_DT , 			/*감사시작일자*/
			       AUD.SPV_BRDV_CD                                            AS SPV_BRDV_CD , 			/*주관부서코드*/
			       AUD.AUD_KND_CD                                             AS AUD_KND_CD ,  			/*감사종류코드*/
			       AUD.AUD_SBJ_NM                                             AS AUD_SBJ_NM ,  			/*감사사항명*/
			       RTRIM(DETAIL.ENF_DT)                                       AS ENF_DT ,      			/*시행일*/
			       DETAIL.ENF_BRDV_CD                                         AS ENF_BRDV_CD ,  		/*시행국과코드*/
			       DETAIL.ENFM_MNG_BRDV_CD                                    AS ENFM_MNG_BRDV_CD , 	/*집행관리국과코드*/
			       F_ORG_INFO(REL.RLTN_ORG_CD,'1')                            AS RLTN_ORG_CD ,      	/*관계기관코드*/
			       F_CODE_NM('1000002',MASTER.DSP_RQ_KND_CD)                  AS DSP_RQ_KND_CD ,   		/*처분종류코드*/
			       MASTER.TIT_TXT                                             AS DISP_TIT_TXT ,    		/*처분명*/
			       DETAIL.NOP_CNT                                             AS NOP_CNT ,         		/*인원수*/
			       DETAIL.PNL_DRIN_PSVT_AM                                    AS PNL_DRIN_PSVT_AM , 	/*추징회수보전금액*/
			       (NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + NVL(DETAIL.RSR_AM,0) + NVL(DETAIL.SPLP_AM,0)) AS DISP_REQ_AM ,      	/*환추급금액*/
			       CASE WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND (DETAIL.DTM_YN <> 'Y' OR DETAIL.DTM_YN IS NULL) THEN '미결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '1' AND  NVL(DETAIL.DTM_YN,'N') = 'Y' THEN '완결'
			       		WHEN NVL(DETAIL.DTM_STA_CD, '0') = '2' THEN '확정'
			       		ELSE ''
			        END AS DTM_STA_CD ,       	/*집행상태*/			       
			       NVL(DETAIL.DTM_YN, '0')                                    AS DTM_YN ,           	/*확정여부*/
			       F_DPT_INFO(AUD.SPV_BRDV_CD,'1' )                           AS EXEC_DPT_NM,         	/*주관부서명*/ 
			       F_CODE_NM('1000007',AUD.AUD_KND_CD)                        AS AUD_EXEC_DVSN_CD_NM , 	/*감사종류명*/ 
			       F_DPT_INFO(DETAIL.ENF_BRDV_CD,'1' )                        AS OPER_BURDIV_NM,       	/*시행국과명*/       
			       F_CODE_NM('1000002',MASTER.DSP_RQ_KND_CD)                  AS DSP_RQ_KND_CD_NM ,    	/*처분종류명*/       
			       F_ORG_INFO(COPT.COPT_OFI_CD,'1')                           AS COMPTAUTH_NM,         	/*소관청명*/
			       NVL(DETAIL.DSP_RQ_APV_STA_CD, '0')                         AS DSP_RQ_APV_STA_CD     	/*처분요구결재상태코드*/
			       , CPLT_DT
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                          
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */			       
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) AS RLTN_ORG_CD
			               ,MIN(ENFM_MNG_ORG_CD) AS  ENFM_MNG_ORG_CD
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			        
			  WHERE  1=1                                                            
			    AND  MASTER.AUD_YR     = DETAIL.AUD_YR                              
			    AND  MASTER.AUD_NO     = DETAIL.AUD_NO                               
			    AND  MASTER.DSP_RQ_SNO = DETAIL.DSP_RQ_SNO                              
			    AND  MASTER.AUD_YR     = AUD.AUD_YR                                 
			    AND  MASTER.AUD_NO     = AUD.AUD_NO 
			    AND  MASTER.AUD_YR     = REL.AUD_YR(+)
			    AND  MASTER.AUD_NO     = REL.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = REL.DSP_RQ_SNO(+)  
			    AND  MASTER.AUD_YR     = COPT.AUD_YR(+)
			    AND  MASTER.AUD_NO     = COPT.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = COPT.DSP_RQ_SNO(+) 
			    AND  MASTER.AUD_YR     = DVSN.AUD_YR(+)
			    AND  MASTER.AUD_NO     = DVSN.AUD_NO(+)    
			    AND  MASTER.DSP_RQ_SNO = DVSN.DSP_RQ_SNO(+) 		
			    
		]]>	      	
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt#
		</isNotEmpty>
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty>  		
		   			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
        	<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>		
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
		
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty> 
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	    	
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
		
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>			
					    
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>		
		   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 
		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>
		
		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) 
		</isNotEmpty>	 

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>

		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3" prepend="OR" >
				 (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391','395','396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390" prepend="OR" >
				 MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd395" prepend="OR" >
				 MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결) 체크시*/
			</isNotEmpty>		
			<isNotEmpty property="strDspRqKndCd4" prepend="OR">
				 (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd495" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd5" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6" prepend="OR">
				 /* (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시 */
				 MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>	
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
						
			<isNotEmpty property="strDspRqKndCd623" prepend="OR">
				 MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620" prepend="OR">
				 MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8" prepend="OR">
				 MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
		<isEqual property="strDspRqKndYn" compareValue="Y">
			  )
		</isEqual>
			 
	    /**
	     * 금액구분
	     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
	     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
	     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
	     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>			
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>		
		
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)  
            </isNotEmpty> 
		</isNotNull>
				
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.21 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.21 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
						
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	
    </select>           

 <!-- DFNT_NMS(CLOB) 항목 추가 - 2018.07.26  -->
 <resultMap class="java.util.HashMap" id="excelselect">
     <result property="AUD_YR_NO_NM"           column="AUD_YR_NO_NM"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DSP_RQ_SNO"             column="DSP_RQ_SNO"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENF_DT"                 column="ENF_DT"               jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="HNDL_DDLN_DT"           column="HNDL_DDLN_DT"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="AUD_STR_DT"             column="AUD_STR_DT"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="AUD_KND_NM"             column="AUD_KND_NM"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="AUD_SBJ_NM"             column="AUD_SBJ_NM"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="SPV_BRDV_CD"            column="SPV_BRDV_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="SPV_BRDV_NM"            column="SPV_BRDV_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DSP_RQ_KND_CD"          column="DSP_RQ_KND_CD"        jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DSP_RQ_KND_NM"          column="DSP_RQ_KND_NM"        jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DISP_TIT_TXT"           column="DISP_TIT_TXT"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="COPT_OFI_CD"            column="COPT_OFI_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="COPT_OFI_NM"            column="COPT_OFI_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="RLTN_ORG_CD"            column="RLTN_ORG_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="RLTN_ORG_NM"            column="RLTN_ORG_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_MNG_ORG_CD"        column="ENFM_MNG_ORG_CD"      jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_MNG_ORG_NM"        column="ENFM_MNG_ORG_NM"      jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_MNG_ORG_CNT"       column="ENFM_MNG_ORG_CNT"     jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_MNG_BRDV_NM"       column="ENFM_MNG_BRDV_NM"     jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENF_BRDV_CD"            column="ENF_BRDV_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENF_BRDV_NM"            column="ENF_BRDV_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DOC_SEN_NO"             column="DOC_SEN_NO"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="NOP_CNT"                column="NOP_CNT"              jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DISP_REQ_AM"            column="DISP_REQ_AM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DTM_STA_NM1"            column="DTM_STA_NM1"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DTM_STA_NM2"            column="DTM_STA_NM2"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="WRDO_TYP_CD"            column="WRDO_TYP_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="WRDO_TYP_NM"            column="WRDO_TYP_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="WRDO_CAU_CD"            column="WRDO_CAU_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="WRDO_CAU_NM"            column="WRDO_CAU_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ACNT_SBJ_NM"            column="ACNT_SBJ_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ETR_PEN_ID"             column="ETR_PEN_ID"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="PNL_DRIN_PSVT_AM"       column="PNL_DRIN_PSVT_AM"     jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="RSR_AM_PLUS_SPLP_AM"    column="RSR_AM_PLUS_SPLP_AM"  jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="RSR_AM"                 column="RSR_AM"               jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="SPLP_AM"                column="SPLP_AM"              jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="EFT_AMT"                column="EFT_AMT"              jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="BGT_RDC_AM"             column="BGT_RDC_AM"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="INC_ICR_AM"             column="INC_ICR_AM"           jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="PPL_BDN_RDT_AM"         column="PPL_BDN_RDT_AM"       jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="FRTN_INCR_AM"           column="FRTN_INCR_AM"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="EXPN_RTNL_AM"           column="EXPN_RTNL_AM"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="EXPOT_Y_EFCT_AM"        column="EXPOT_Y_EFCT_AM"      jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="CPLT_DT"                column="CPLT_DT"              jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_WHLS_DTM_DT"       column="ENFM_WHLS_DTM_DT"     jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ORG_DVSN_CD"            column="ORG_DVSN_CD"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ORG_DVSN_NM"            column="ORG_DVSN_NM"          jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="PSC_RQT_NOP_CNT"        column="PSC_RQT_NOP_CNT"      jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="AUD_TRGT_ORG"           column="AUD_TRGT_ORG"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="RLTN_ORG_NMS"           column="RLTN_ORG_NMS"         jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="ENFM_MNG_ORG_NMS"       column="ENFM_MNG_ORG_NMS"     jdbcType="VARCHAR2"    javaType="java.lang.String"/>
     <result property="DFNT_NMS"               column="DFNT_NMS"             jdbcType="CLOB"        javaType="java.lang.String"/>
     <result property="IMMUN_EXAM_NM"          column="IMMUN_EXAM_NM"        jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 적극행정면책 검토명 항목 추가 - 2020.02.21 les -->
     <result property="IMMUN_EXAM_NM2"         column="IMMUN_EXAM_NM2"       jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 면책여부명 항목 추가 - 2020.02.21 les -->
     <result property="PASV_ADMN_EXAM_YN"      column="PASV_ADMN_EXAM_YN"    jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 소극행정검토내용 항목 추가 - 2020.02.21 les -->
     <result property="SELF_YN"                column="SELF_YN"              jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 자율여부 항목 추가 - 2020.02.21 les -->
     <result property="HMP_OPEN_YN"            column="HMP_OPEN_YN"          jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 홈페이지공개여부 항목 추가 - 2021.09.07 EUNOK -->
     <result property="REFER_DVSN_NM"          column="REFER_DVSN_NM"        jdbcType="VARCHAR2"    javaType="java.lang.String"/> <!-- 부의위임여부 항목 추가 - 2022.01.03 EUNOK -->
     
  </resultMap>
  
	<!--처분요구 조회 엑셀용 -->
	<select id="BADEAR013QExcelSelect" parameterClass="paramMap" resultMap="excelselect">
        <![CDATA[
			SELECT F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') 
			                                                    AS AUD_YR_NO_NM
			     , F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                    AS DSP_RQ_SNO
			     , DETAIL.ENF_DT                                AS ENF_DT
			     , DETAIL.HNDL_DDLN_DT                          AS HNDL_DDLN_DT
			     , (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )         AS AUD_STR_DT
			      , F_CODE_NM_YEAR('1000007',AUD.AUD_KND_CD,MASTER.AUD_YR) AS AUD_KND_NM    /*감사종류*/
			      , AUD.AUD_SBJ_NM                              AS AUD_SBJ_NM               /*감사사항*/
			      , AUD.SPV_BRDV_CD                             AS SPV_BRDV_CD              /*주관부서코드*/
                  , (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = AUD.SPV_BRDV_CD)            AS SPV_BRDV_NM 		        /*주관부서명*/
                  , MASTER.DSP_RQ_KND_CD                        AS DSP_RQ_KND_CD            /*처분종류코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000002'
                        AND CD = MASTER.DSP_RQ_KND_CD)          AS DSP_RQ_KND_NM            /*처분종류*/
			      , MASTER.TIT_TXT                              AS DISP_TIT_TXT             /*처분요구제목*/
			      , COPT.COPT_OFI_CD                            AS COPT_OFI_CD              /*1차기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = COPT.COPT_OFI_CD)          AS COPT_OFI_NM              /*1차기관*/
                  , REL.RLTN_ORG_CD                             AS RLTN_ORG_CD              /*소관기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.RLTN_ORG_CD)           AS RLTN_ORG_NM              /*소관기관*/
                  , REL.ENFM_MNG_ORG_CD                         AS ENFM_MNG_ORG_CD          /*조치기관코드*/         
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.ENFM_MNG_ORG_CD)       AS ENFM_MNG_ORG_NM          /*조치기관*/                  
			      , REL.ENFM_MNG_ORG_CNT                        AS ENFM_MNG_ORG_CNT         /*집행기관수*/                  
                  , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENFM_MNG_BRDV_CD)   AS ENFM_MNG_BRDV_NM         /*이행국과*/
			      , DETAIL.ENF_BRDV_CD                          AS ENF_BRDV_CD              /*시행부서코드*/                      
			      , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENF_BRDV_CD)        AS ENF_BRDV_NM              /*시행부서*/
                  , DETAIL.DOC_SEN_NO                           AS DOC_SEN_NO               /*시행문번호*/
			      , DETAIL.NOP_CNT                              AS NOP_CNT                  /*인원*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + 
			        NVL(DETAIL.RSR_AM,0)           + 
			        NVL(DETAIL.SPLP_AM,0)                       AS DISP_REQ_AM  /*금액*/
			      , CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			         END                                        AS DTM_STA_NM1             /*처분상태변경 - 2018.02.23 yyh*/	
			      , CASE WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') != 'Y'  THEN '미결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') = 'Y' THEN '완결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '2' THEN '확정'
			         END                                        AS DTM_STA_NM2              /*집행*/
			      , DETAIL.WRDO_TYP_CD                          AS WRDO_TYP_CD              /*비위유형*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000121'
                        AND CD = DETAIL.WRDO_TYP_CD)            AS WRDO_TYP_NM              /*비위유형*/
                  , DETAIL.WRDO_CAU_CD                          AS WRDO_CAU_CD              /*비위원인*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000006'
                        AND CD = DETAIL.WRDO_CAU_CD)            AS WRDO_CAU_NM              /*비위원인*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| ACNT_YE ||'-'|| F_CODE_NM('1000004',DSP_RQ_ACNT_CD) || '(' || DSP_RQ_ACNT_CD || ')') ORDER BY ACNT_SBJ_SNO), '//text()'), 3)
		               FROM TBBADEAR003M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO            
		              GROUP BY AUD_YR, AUD_NO, DSP_RQ_SNO)      AS ACNT_SBJ_NM				/*회계사항명*/
			      , NVL2((SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A,', '|| (SELECT X.USR_NAM FROM TBDCMACM001M X WHERE X.CNB = ETR_PEN_ID) ||'('||ETR_PEN_ID||')' ) ORDER BY  ETR_PEN_ID), '//text()'),3) 
			           FROM TBBADEAR004M
			          WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
			          GROUP BY AUD_YR
			                  ,AUD_NO
			                  ,DSP_RQ_SNO),'OOO','')                      AS ETR_PEN_ID               /*적출자*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0)              AS PNL_DRIN_PSVT_AM         /*추징회수보전금액*/
			      , NVL(DETAIL.RSR_AM,0) + 
			        NVL(DETAIL.SPLP_AM,0)                       AS RSR_AM_PLUS_SPLP_AM      /*환추급금액*/
			        
			      , NVL(DETAIL.RSR_AM,0)                        AS RSR_AM                   /*환급금액*/
			      , NVL(DETAIL.SPLP_AM,0)                       AS SPLP_AM                  /*추급금액*/
			        
			      , NVL(DETAIL.BGT_RDC_AM,0)     + 
			        NVL(DETAIL.INC_ICR_AM,0)     + 
			        NVL(DETAIL.PPL_BDN_RDT_AM,0) + 
			        NVL(DETAIL.FRTN_INCR_AM,0)   + 
			        NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EFT_AMT                  /*기대효과금액*/
			      , NVL(DETAIL.BGT_RDC_AM,0)                    AS BGT_RDC_AM               /*예산절감금액*/
			      , NVL(DETAIL.INC_ICR_AM,0)                    AS INC_ICR_AM               /*수입증대금액*/    
			      , NVL(DETAIL.PPL_BDN_RDT_AM,0)                AS PPL_BDN_RDT_AM           /*국민부담경감금액*/
			      , NVL(DETAIL.FRTN_INCR_AM,0)                  AS FRTN_INCR_AM             /*재산증가금액*/
			      , NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EXPN_RTNL_AM             /*지출합리화금액*/
			      , NVL(DETAIL.EXPOT_Y_EFCT_AM,0)               AS EXPOT_Y_EFCT_AM          /*사후적금액*/
			      , DETAIL.CPLT_DT                              AS CPLT_DT                  /*완결일 */
			      , DETAIL.ENFM_WHLS_DTM_DT                     AS ENFM_WHLS_DTM_DT         /*완결확정일*/
			      , MASTER.ORG_DVSN_CD                          AS ORG_DVSN_CD              /*기관구분코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000119'
                        AND CD = MASTER.ORG_DVSN_CD)            AS ORG_DVSN_NM		        /*기관구분*/
                  , DETAIL.PSC_RQT_NOP_CNT	                    AS PSC_RQT_NOP_CNT          /*별도고발인원*/
			      , (SELECT CASE WHEN COUNT(DISTINCT ORG_CD)>1 
                                     THEN F_ORG_INFO(MIN(ORG_CD),'1')||'외 '||TO_CHAR(COUNT(DISTINCT ORG_CD)-1)||'' 
                                ELSE F_ORG_INFO(MIN(ORG_CD),'1') 
                            END
                      FROM TBBADDED008L
                     WHERE 1 = 1
                       AND (BZT_YR, BZT_SNO) IN (SELECT BZT_YR
                                                       ,BZT_SNO
                                                   FROM TBBADDED002M
                                                  WHERE 1=1
                                                    AND REL_AUD_YR = MASTER.AUD_YR
                                                    AND REL_AUD_NO = MASTER.AUD_NO ))
			                                                    AS AUD_TRGT_ORG             /*감사대상기관*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT ORG_NM
                                                                          FROM TBDCMACM015M
                                                                          WHERE ORG_CD = RLTN_ORG_CD) ) ORDER BY RLTN_ORG_CD), '//text()'), 3) 
                       FROM TBBADEAR006M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
                      GROUP BY AUD_YR ,
                            AUD_NO ,
                            DSP_RQ_SNO)                         AS RLTN_ORG_NMS
                            
                   , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT ORG_NM
                                                                           FROM TBDCMACM015M
                                                                          WHERE ORG_CD = ENFM_MNG_ORG_CD) ) ORDER BY RLTN_ORG_CD), '//text()'), 3) 
                       FROM TBBADEAR006M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
                      GROUP BY AUD_YR ,
                            AUD_NO ,
                            DSP_RQ_SNO)                         AS ENFM_MNG_ORG_NMS  
                            
                   , DECODE(NVL(#strPrivacy#,'N'),'Y',
					       (SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| DFNT_NAM || MAX('(' || F_CODE_NM('1000011', D1.HND_RQ_KND_CD) || '>' || F_CODE_NM('1000003', D2.ENFM_SHP_CD) || ')') )
					                                         ORDER BY DFNT_NAM), '//text()').getClobVal(), 3) , '&gt;' , '>' )
					          FROM TBBADEAR007M D1 ,
					               (SELECT S1.AUD_YR ,
					                       S1.AUD_NO ,
					                       S1.DSP_RQ_SNO ,
					                       S1.RLTN_ORG_CD ,
					                       S1.DFNT_SNO ,
					                       S1.ENFM_SNO ,
					                       S1.ENFM_SHP_CD
					                  FROM TBBADFRE008M S1
					                 WHERE S1.ENFM_SNO = (SELECT MAX(ENFM_SNO)
					                          FROM TBBADFRE008M
					                         WHERE AUD_YR = S1.AUD_YR
					                           AND AUD_NO = S1.AUD_NO
					                           AND DSP_RQ_SNO = S1.DSP_RQ_SNO
					                           AND RLTN_ORG_CD = S1.RLTN_ORG_CD
					                           AND DFNT_SNO = S1.DFNT_SNO) ) D2
					         WHERE 1=1
					           AND D1.AUD_YR = D2.AUD_YR(+)
					           AND D1.AUD_NO = D2.AUD_NO(+)
					           AND D1.DSP_RQ_SNO = D2.DSP_RQ_SNO(+)
					           AND D1.RLTN_ORG_CD = D2.RLTN_ORG_CD(+)
					           AND D1.DFNT_SNO = D2.DFNT_SNO(+)
					           AND D1.AUD_YR = MASTER.AUD_YR
					           AND D1.AUD_NO = MASTER.AUD_NO
					           AND D1.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
					         GROUP BY DFNT_NAM), NVL2((SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| DFNT_NAM || MAX('(' || F_CODE_NM('1000011', D1.HND_RQ_KND_CD) || '>' || F_CODE_NM('1000003', D2.ENFM_SHP_CD) || ')') )
					                                         ORDER BY DFNT_NAM), '//text()').getClobVal(), 3) , '&gt;' , '>' )
					          FROM TBBADEAR007M D1 ,
					               (SELECT S1.AUD_YR ,
					                       S1.AUD_NO ,
					                       S1.DSP_RQ_SNO ,
					                       S1.RLTN_ORG_CD ,
					                       S1.DFNT_SNO ,
					                       S1.ENFM_SNO ,
					                       S1.ENFM_SHP_CD
					                  FROM TBBADFRE008M S1
					                 WHERE S1.ENFM_SNO = (SELECT MAX(ENFM_SNO)
					                          FROM TBBADFRE008M
					                         WHERE AUD_YR = S1.AUD_YR
					                           AND AUD_NO = S1.AUD_NO
					                           AND DSP_RQ_SNO = S1.DSP_RQ_SNO
					                           AND RLTN_ORG_CD = S1.RLTN_ORG_CD
					                           AND DFNT_SNO = S1.DFNT_SNO) ) D2
					         WHERE 1=1
					           AND D1.AUD_YR = D2.AUD_YR(+)
					           AND D1.AUD_NO = D2.AUD_NO(+)
					           AND D1.DSP_RQ_SNO = D2.DSP_RQ_SNO(+)
					           AND D1.RLTN_ORG_CD = D2.RLTN_ORG_CD(+)
					           AND D1.DFNT_SNO = D2.DFNT_SNO(+)
					           AND D1.AUD_YR = MASTER.AUD_YR
					           AND D1.AUD_NO = MASTER.AUD_NO
					           AND D1.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
					         GROUP BY DFNT_NAM),'OOO',''))       
					         AS DFNT_NMS                                                 
				  , F_CODE_NM('1000918', DETAIL.IMMUN_EXAM_CD)  AS IMMUN_EXAM_NM     /*통계자료 입력 적극행정면책 검토명*/
                  , F_CODE_NM('1000919', DETAIL.IMMUN_EXAM_CD2) AS IMMUN_EXAM_NM2    /*통계자료 입력 면책여부명*/
                  , NVL(DETAIL.PASV_ADMN_EXAM_YN, 'N')          AS PASV_ADMN_EXAM_YN /*소극행정검토내용*/
                  , NVL(DETAIL.SELF_YN, 'N')                    AS SELF_YN           /*자율여부*/         
			      , NVL(DETAIL.HMP_OPEN_YN, 'N')                AS HMP_OPEN_YN       /*홈페이지공개여부*/  
			      ,(SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
			         FROM TBBADDED145M T1 
			        INNER JOIN TBBADDED146M T2
		               ON T1.AUD_YR      = T2.AUD_YR
		              AND T1.AUD_NO      = T2.AUD_NO
		              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
		              AND T1.APVR_CD     = T2.APVR_CD
		              AND T1.DOC_ID      = T2.DOC_ID 
		              AND T1.AFF_SNO     = T2.AFF_SNO
		              AND T1.AUD_STEP_CD = 'A1070'
		              AND T1.AUD_YR      > '2017'
		              AND T1.APVR_CD     = 'A1070'
		            WHERE T1.AUD_YR      = MASTER.AUD_YR
		              AND T1.AUD_NO      = MASTER.AUD_NO
		              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM	/* 부의 위임여부 - 2021.01.03 EUNOK */
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                     
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */			       
			       ,(
			         SELECT AUD_YR
			              , AUD_NO
			              , DSP_RQ_SNO
			              , MIN(RLTN_ORG_CD) 		AS RLTN_ORG_CD
			              , MIN(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CD
			              , COUNT(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CNT
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			  WHERE 1=1                                                            
			    AND MASTER.AUD_YR     	= DETAIL.AUD_YR                              
			    AND MASTER.AUD_NO     	= DETAIL.AUD_NO                               
			    AND MASTER.DSP_RQ_SNO 	= DETAIL.DSP_RQ_SNO                              
			    AND MASTER.AUD_YR     	= AUD.AUD_YR                                 
			    AND MASTER.AUD_NO     	= AUD.AUD_NO 
			    AND MASTER.AUD_YR     	= REL.AUD_YR(+)
			    AND MASTER.AUD_NO     	= REL.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= REL.DSP_RQ_SNO(+)  
			    AND MASTER.AUD_YR     	= COPT.AUD_YR(+)
			    AND MASTER.AUD_NO     	= COPT.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= COPT.DSP_RQ_SNO(+)			        	
			    AND MASTER.AUD_YR       = DVSN.AUD_YR(+)
			    AND MASTER.AUD_NO       = DVSN.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO   = DVSN.DSP_RQ_SNO(+) 			    		    
		]]> 	
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt# 
		</isNotEmpty>
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty>  
					   			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
        	<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>			
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
						    
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty>
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	    	
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
					    
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>	
							    
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>
				   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 
 
		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>	 

		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) 
		</isNotEmpty>	

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>

		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1">
				 OR MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2">
				 OR MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3">
				 OR (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391', '395', '396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390">
				OR MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd395">
				OR MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결) 체크시*/
			</isNotEmpty>		
			<isNotEmpty property="strDspRqKndCd4">
				OR (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490">
				OR MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd495">
				OR MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd5">
				OR MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611">
				OR MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6">
				/* OR (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시*/
				OR MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>	
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625">
				OR MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
			
			<isNotEmpty property="strDspRqKndCd623">
				OR MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620">
				OR MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7">
				OR MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8">
				OR MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
			<isEqual property="strDspRqKndYn" compareValue="Y"> 
			 ) 
			</isEqual>
		
			    /**
			     * 금액구분
			     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
			     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
			     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
			     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>	
				
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)
            </isNotEmpty> 
		</isNotNull>
					
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.21 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.21 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
								
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	

    </select>           
    
    
	<!--처분요구 조회 엑셀용 (관계자 레벨) -->
	<select id="BADEAR013QExcelDtlSelect" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
			SELECT F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') 
			                                                    AS AUD_YR_NO_NM
			     , F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                    AS DSP_RQ_SNO
			     , DETAIL.ENF_DT                                AS ENF_DT
			     , DETAIL.HNDL_DDLN_DT                          AS HNDL_DDLN_DT
			     , (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )         AS AUD_STR_DT
			      , F_CODE_NM_YEAR('1000007',AUD.AUD_KND_CD,MASTER.AUD_YR) AS AUD_KND_NM    /*감사종류*/
			      , AUD.AUD_SBJ_NM                              AS AUD_SBJ_NM               /*감사사항*/
			      , AUD.SPV_BRDV_CD                             AS SPV_BRDV_CD              /*주관부서코드*/
                  , (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = AUD.SPV_BRDV_CD)            AS SPV_BRDV_NM 		        /*주관부서명*/
                  , MASTER.DSP_RQ_KND_CD                        AS DSP_RQ_KND_CD            /*처분종류코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000002'
                        AND CD = MASTER.DSP_RQ_KND_CD)          AS DSP_RQ_KND_NM            /*처분종류*/
			      , MASTER.TIT_TXT                              AS DISP_TIT_TXT             /*처분요구제목*/
			      , COPT.COPT_OFI_CD                            AS COPT_OFI_CD              /*1차기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = COPT.COPT_OFI_CD)          AS COPT_OFI_NM              /*1차기관*/
                  , REL.RLTN_ORG_CD                             AS RLTN_ORG_CD              /*소관기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.RLTN_ORG_CD)           AS RLTN_ORG_NM              /*소관기관*/
                  , REL.ENFM_MNG_ORG_CD                         AS ENFM_MNG_ORG_CD          /*조치기관코드*/         
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.ENFM_MNG_ORG_CD)       AS ENFM_MNG_ORG_NM          /*조치기관*/                  
			      , REL.ENFM_MNG_ORG_CNT                        AS ENFM_MNG_ORG_CNT         /*집행기관수*/                  
                  , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENFM_MNG_BRDV_CD)   AS ENFM_MNG_BRDV_NM         /*이행국과*/
			      , DETAIL.ENF_BRDV_CD                          AS ENF_BRDV_CD              /*시행부서코드*/                      
			      , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENF_BRDV_CD)        AS ENF_BRDV_NM              /*시행부서*/
                  , DETAIL.DOC_SEN_NO                           AS DOC_SEN_NO               /*시행문번호*/
			      , DETAIL.NOP_CNT                              AS NOP_CNT                  /*인원*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + 
			        NVL(DETAIL.RSR_AM,0)           + 
			        NVL(DETAIL.SPLP_AM,0)                       AS DISP_REQ_AM  /*금액*/
			      , CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			         END                                        AS DTM_STA_NM1             /*처분상태변경 - 2018.02.23 yyh*/	
			      , CASE WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') != 'Y'  THEN '미결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') = 'Y' THEN '완결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '2' THEN '확정'
			         END                                        AS DTM_STA_NM2              /*집행*/
			      , DETAIL.WRDO_TYP_CD                          AS WRDO_TYP_CD              /*비위유형*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000121'
                        AND CD = DETAIL.WRDO_TYP_CD)            AS WRDO_TYP_NM              /*비위유형*/
                  , DETAIL.WRDO_CAU_CD                          AS WRDO_CAU_CD              /*비위원인*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000006'
                        AND CD = DETAIL.WRDO_CAU_CD)            AS WRDO_CAU_NM              /*비위원인*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| ACNT_YE ||'-'|| F_CODE_NM('1000004',DSP_RQ_ACNT_CD) || '(' || DSP_RQ_ACNT_CD || ')') ORDER BY ACNT_SBJ_SNO), '//text()'), 3)
		               FROM TBBADEAR003M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO            
		              GROUP BY AUD_YR, AUD_NO, DSP_RQ_SNO)      AS ACNT_SBJ_NM				/*회계사항명*/
			      , NVL2((SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A,', '|| (SELECT X.USR_NAM FROM TBDCMACM001M X WHERE X.CNB = ETR_PEN_ID) ||'('||ETR_PEN_ID||')' ) ORDER BY  ETR_PEN_ID), '//text()'),3) 
			           FROM TBBADEAR004M
			          WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
			          GROUP BY AUD_YR
			                  ,AUD_NO
			                  ,DSP_RQ_SNO),'OOO','')                      AS ETR_PEN_ID               /*적출자*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0)              AS PNL_DRIN_PSVT_AM         /*추징회수보전금액*/
			      , NVL(DETAIL.RSR_AM,0) + 
			        NVL(DETAIL.SPLP_AM,0)                       AS RSR_AM_PLUS_SPLP_AM      /*환추급금액*/
			        
			      , NVL(DETAIL.RSR_AM,0)                        AS RSR_AM                   /*환급금액*/
			      , NVL(DETAIL.SPLP_AM,0)                       AS SPLP_AM                  /*추급금액*/
			        
			      , NVL(DETAIL.BGT_RDC_AM,0)     + 
			        NVL(DETAIL.INC_ICR_AM,0)     + 
			        NVL(DETAIL.PPL_BDN_RDT_AM,0) + 
			        NVL(DETAIL.FRTN_INCR_AM,0)   + 
			        NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EFT_AMT                  /*기대효과금액*/
			      , NVL(DETAIL.BGT_RDC_AM,0)                    AS BGT_RDC_AM               /*예산절감금액*/
			      , NVL(DETAIL.INC_ICR_AM,0)                    AS INC_ICR_AM               /*수입증대금액*/    
			      , NVL(DETAIL.PPL_BDN_RDT_AM,0)                AS PPL_BDN_RDT_AM           /*국민부담경감금액*/
			      , NVL(DETAIL.FRTN_INCR_AM,0)                  AS FRTN_INCR_AM             /*재산증가금액*/
			      , NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EXPN_RTNL_AM             /*지출합리화금액*/
			      , NVL(DETAIL.EXPOT_Y_EFCT_AM,0)               AS EXPOT_Y_EFCT_AM          /*사후적금액*/
			      , DETAIL.CPLT_DT                              AS CPLT_DT                  /*완결일 */
			      , DETAIL.ENFM_WHLS_DTM_DT                     AS ENFM_WHLS_DTM_DT         /*완결확정일*/
			      , MASTER.ORG_DVSN_CD                          AS ORG_DVSN_CD              /*기관구분코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000119'
                        AND CD = MASTER.ORG_DVSN_CD)            AS ORG_DVSN_NM		        /*기관구분*/
                  , DETAIL.PSC_RQT_NOP_CNT	                    AS PSC_RQT_NOP_CNT          /*별도고발인원*/
			      , (SELECT CASE WHEN COUNT(DISTINCT ORG_CD)>1 
                                     THEN F_ORG_INFO(MIN(ORG_CD),'1')||'외 '||TO_CHAR(COUNT(DISTINCT ORG_CD)-1)||'' 
                                ELSE F_ORG_INFO(MIN(ORG_CD),'1') 
                            END
                      FROM TBBADDED008L
                     WHERE 1 = 1
                       AND (BZT_YR, BZT_SNO) IN (SELECT BZT_YR
                                                       ,BZT_SNO
                                                   FROM TBBADDED002M
                                                  WHERE 1=1
                                                    AND REL_AUD_YR = MASTER.AUD_YR
                                                    AND REL_AUD_NO = MASTER.AUD_NO ))
			                                                    AS AUD_TRGT_ORG             /*감사대상기관*/

			      , ORG.RLTN_ORG_CD                             AS DFNT_RLTN_ORG_CD
			      , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = ORG.RLTN_ORG_CD)           AS DFNT_RLTN_ORG_NM
                  , ORG.ENFM_MNG_ORG_CD                         AS DFNT_ENFM_MNG_ORG_CD                        
                  , F_ORG_INFO(ORG.ENFM_MNG_ORG_CD,'1')         AS DFNT_ENFM_MNG_ORG_NM 
                        
                        
                  , T1.ENFM_DT                                  AS ORG_ENFM_DT       /* 조치기관이행일자 */
                  , F_CODE_NM('1000003', T1.ENFM_SHP_CD)        AS ORG_ENFM_SHP_NM   /* 조치기관이행형태 */
                  , T1.PNL_AM                                   AS ORG_PNL_AM        /* 조치기관이행금액 */
                  , T1.ENFM_HIS                                 AS ORG_ENFM_HIS      /* 조치기관이행내역 */
                  , DECODE(NVL(#strPrivacy#,'N'),'Y',
                  	DFNT.DFNT_NAM,NVL2(DFNT.DFNT_NAM,'OOO','')) AS DFNT_NAM          /* 관계자성명 */
                  , F_CODE_NM('1000057', DFNT.OCP_CD)           AS OCP_NM            /* 관계자직종 */
                  , DFNT.PST_NM                                 AS PST_NM            /* 관계자직위 */
                  , F_CODE_NM('1000058', DFNT.RANK_CD)          AS RANK_NM           /* 관계자직급 */                  
                  , F_CODE_NM('1000011', DFNT.HND_RQ_KND_CD)    AS HND_RQ_KND_NM     /* 관계자조치요구 */
                  , DFNT.AM                                     AS DFNT_AM           /* 관계자관련금액 */
                  , T2.ENFM_DT                                  AS ENFM_DT           /* 관련자이행일자 */
                  , F_CODE_NM('1000003', T2.ENFM_SHP_CD)        AS ENFM_SHP_NM       /* 관련자이행형태 */
                  , T2.PNL_AM                                   AS PNL_AM            /* 관련자이행금액 */
                  , T2.ENFM_HIS                                 AS ENFM_HIS          /* 관련자이행내역 */
                  , F_CODE_NM('1000918', DETAIL.IMMUN_EXAM_CD)  AS IMMUN_EXAM_NM     /*통계자료 입력 적극행정면책 검토명*/
                  , F_CODE_NM('1000919', DETAIL.IMMUN_EXAM_CD2) AS IMMUN_EXAM_NM2    /*통계자료 입력 면책여부명*/
                  , NVL(DETAIL.PASV_ADMN_EXAM_YN, 'N')          AS PASV_ADMN_EXAM_YN /*소극행정검토내용*/
                  , NVL(DETAIL.SELF_YN, 'N')                    AS SELF_YN           /*자율여부*/
                  , NVL(DETAIL.HMP_OPEN_YN, 'N')                AS HMP_OPEN_YN       /*홈페이지공개여부*/
                  , (SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
			         FROM TBBADDED145M T1 
			        INNER JOIN TBBADDED146M T2
		               ON T1.AUD_YR      = T2.AUD_YR
		              AND T1.AUD_NO      = T2.AUD_NO
		              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
		              AND T1.APVR_CD     = T2.APVR_CD
		              AND T1.DOC_ID      = T2.DOC_ID 
		              AND T1.AFF_SNO     = T2.AFF_SNO
		              AND T1.AUD_STEP_CD = 'A1070'
		              AND T1.AUD_YR      > '2017'
		              AND T1.APVR_CD     = 'A1070'
		            WHERE T1.AUD_YR      = MASTER.AUD_YR
		              AND T1.AUD_NO      = MASTER.AUD_NO
		              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM	/* 부의 위임여부 - 2021.01.03 EUNOK */
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                     
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */			       
			       ,(
			         SELECT AUD_YR
			              , AUD_NO
			              , DSP_RQ_SNO
			              , MIN(RLTN_ORG_CD) 		AS RLTN_ORG_CD
			              , MIN(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CD
			              , COUNT(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CNT
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			        
			       ,TBBADEAR006M ORG

			       ,TBBADEAR007M DFNT

                   ,(SELECT B.*
                       FROM (SELECT AUD_YR
                                   ,AUD_NO
                                   ,DSP_RQ_SNO
                                   ,RLTN_ORG_CD
                                   ,MAX(ENFM_SNO) AS ENFM_SNO
                               FROM TBBADFRE006M   /* 관계기관집행전말 */
                              WHERE 1=1
                              GROUP BY AUD_YR
                                      ,AUD_NO
                                      ,DSP_RQ_SNO
                                      ,RLTN_ORG_CD) A
                           ,TBBADFRE006M B
                      WHERE A.AUD_YR      = B.AUD_YR
                        AND A.AUD_NO      = B.AUD_NO
                        AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                        AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                        AND A.ENFM_SNO    = B.ENFM_SNO) T1		
                                           					       
                   ,(SELECT B.*
                       FROM (SELECT AUD_YR
                                   ,AUD_NO
                                   ,DSP_RQ_SNO
                                   ,RLTN_ORG_CD
                                   ,DFNT_SNO
                                   ,MAX(ENFM_SNO) AS ENFM_SNO
                               FROM TBBADFRE008M   /* 관계자집행전말 */
                              WHERE 1=1
                              GROUP BY AUD_YR
                                      ,AUD_NO
                                      ,DSP_RQ_SNO
                                      ,RLTN_ORG_CD
                                      ,DFNT_SNO) A
                           ,TBBADFRE008M B
                      WHERE A.AUD_YR      = B.AUD_YR
                        AND A.AUD_NO      = B.AUD_NO
                        AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                        AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                        AND A.DFNT_SNO    = B.DFNT_SNO
                        AND A.ENFM_SNO    = B.ENFM_SNO) T2			       
			  WHERE 1=1                                                            
			    AND MASTER.AUD_YR     	= DETAIL.AUD_YR                              
			    AND MASTER.AUD_NO     	= DETAIL.AUD_NO                               
			    AND MASTER.DSP_RQ_SNO 	= DETAIL.DSP_RQ_SNO                              
			    AND MASTER.AUD_YR     	= AUD.AUD_YR                                 
			    AND MASTER.AUD_NO     	= AUD.AUD_NO 
			    AND MASTER.AUD_YR     	= REL.AUD_YR(+)
			    AND MASTER.AUD_NO     	= REL.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= REL.DSP_RQ_SNO(+)  
			    AND MASTER.AUD_YR     	= COPT.AUD_YR(+)
			    AND MASTER.AUD_NO     	= COPT.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= COPT.DSP_RQ_SNO(+)			        	
			    AND MASTER.AUD_YR       = DVSN.AUD_YR(+)
			    AND MASTER.AUD_NO       = DVSN.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO   = DVSN.DSP_RQ_SNO(+) 
			    
                AND MASTER.AUD_YR       = ORG.AUD_YR(+)
                AND MASTER.AUD_NO       = ORG.AUD_NO(+)
                AND MASTER.DSP_RQ_SNO   = ORG.DSP_RQ_SNO(+)
                
                AND ORG.AUD_YR          = T1.AUD_YR(+)
                AND ORG.AUD_NO          = T1.AUD_NO(+)
                AND ORG.DSP_RQ_SNO      = T1.DSP_RQ_SNO(+)
                AND ORG.RLTN_ORG_CD     = T1.RLTN_ORG_CD(+)			    
   			    
                AND ORG.AUD_YR          = DFNT.AUD_YR(+)
                AND ORG.AUD_NO          = DFNT.AUD_NO(+)
                AND ORG.DSP_RQ_SNO      = DFNT.DSP_RQ_SNO(+)
                AND ORG.RLTN_ORG_CD     = T1.RLTN_ORG_CD(+)
			    
                AND DFNT.AUD_YR         = T2.AUD_YR(+)
                AND DFNT.AUD_NO         = T2.AUD_NO(+)
                AND DFNT.DSP_RQ_SNO     = T2.DSP_RQ_SNO(+)
                AND DFNT.RLTN_ORG_CD    = T2.RLTN_ORG_CD(+)
                AND DFNT.DFNT_SNO       = T2.DFNT_SNO(+)			    		    
		]]> 	
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt# 
		</isNotEmpty>
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty>  
					   			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
        	<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/   
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>		
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
						    
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty>
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	    	
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
					    
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>	
							    
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>	
		   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 
 
		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>	 

		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) 
		</isNotEmpty>	

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>

		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1">
				 OR MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2">
				 OR MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3">
				 OR (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391', '395', '396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390">
				OR MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd395">
				OR MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결) 체크시*/
			</isNotEmpty>			
			<isNotEmpty property="strDspRqKndCd4">
				OR (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490">
				OR MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd495">
				OR MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd5">
				OR MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611">
				OR MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6">
				/* OR (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시*/
				OR MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>	
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625">
				OR MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
			
			<isNotEmpty property="strDspRqKndCd623">
				OR MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620">
				OR MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7">
				OR MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8">
				OR MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
			<isEqual property="strDspRqKndYn" compareValue="Y"> 
			 ) 
			</isEqual>
		
			    /**
			     * 금액구분
			     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
			     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
			     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
			     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>	
				
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)  
            </isNotEmpty> 
		</isNotNull>
					
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>					
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.21 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.21 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
								
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	

    </select>           
        
	<!--처분요구 검색 파라미터 -->
	<select id="BADEAR013QMainSelectParam" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
		    SELECT #strAudYrSt#                             AS PARAM1       /*감사년도시작*/
		         , #strAudGrnNoSt#                          AS PARAM2       /*감사번호시작*/
		         , #strAudYrSt#                             AS PARAM3       /*감사년도*/    
		         , #strAudGrnNoSt#                          AS PARAM4       /*감사번호*/
		         , #strSbjNm#                               AS PARAM5       /*감사사항명*/    
		         , CASE WHEN #strAudKndCd# ='' OR #strAudKndCd# IS NULL 
		                THEN '전체' 
		                ELSE  F_CODE_NM_YEAR('1000007',#strAudKndCd#,#strAudYrSt#) 
		            END                                     AS PARAM6       /*감사종류*/    
		         , F_DPT_INFO(#strSpvBrdvCdSt#,'1' )        AS PARAM7       /*감사부서*/ 
		         , F_DPT_INFO(#strSpvBrdvCdEnd#,'1' )       AS PARAM8       /*감사부서*/
		         , #strOrgDvsnCd#                           AS PARAM9       /*기관구분*/
		         , F_ORG_INFO(#strCoptOfiCdSt#,'1')         AS PARAM10      /*소관청시작*/
		         , F_ORG_INFO(#strCoptOfiCdEnd#,'1')        AS PARAM11      /*소관청종료*/
		         , F_ORG_INFO(#strRltnOrgCdSt#,'1')         AS PARAM12      /*관계기관시작*/
		         , F_ORG_INFO(#strRltnOrgCdEnd#,'1')        AS PARAM13      /*관계기관종료*/    
		         , F_CODE_NM('1000121',DECODE(SUBSTR(#strWrdoTypCdSt#,1,1),'1','100000000','200000000'))    
		                                                    AS PARAM14      /*비위유형시작*/
		         , F_CODE_NM('1000121',#strWrdoTypCdEnd#)   AS PARAM15      /*비위유형종료*/ 
		         , F_DPT_INFO(#strEnfmMngBrdvCdSt#,'1' )    AS PARAM16      /*집행부서*/ 
		         , F_DPT_INFO(#strEnfmMngBrdvCdEnd#,'1' )   AS PARAM17      /*집행부서*/     
		         , F_USR_INFO(#strEtrPenId#,'2')            AS PARAM18      /*감사자*/       
		         , #strDfntNam#                             AS PARAM19      /*관련자*/    
		         , F_DPT_INFO(#strEnfBrdvCdSt#,'1' )        AS PARAM20      /*시행부서*/     
		         , F_DPT_INFO(#strEnfBrdvCdEnd#,'1' )       AS PARAM21      /*시행부서*/     
		         , SUBSTR(CASE WHEN #strDspRqKndCd1#='' OR #strDspRqKndCd1# IS NULL
		                THEN '' ELSE '/판정' END
		         ||CASE WHEN #strDspRqKndCd3#='' OR #strDspRqKndCd3# IS NULL
		                THEN '' ELSE '/시정' END  
		         ||CASE WHEN #strDspRqKndCd4#='' OR #strDspRqKndCd4# IS NULL
		                THEN '' ELSE '/주의' END    
		         ||CASE WHEN #strDspRqKndCd5#='' OR #strDspRqKndCd5# IS NULL
		                THEN '' ELSE '/개선' END   
		         ||CASE WHEN #strDspRqKndCd6#='' OR #strDspRqKndCd6# IS NULL
		                THEN '' ELSE '/통보' END   
		         ||CASE WHEN #strDspRqKndCd620#='' OR #strDspRqKndCd620# IS NULL
		                THEN '' ELSE '/인사자료통보' END   
		         ||CASE WHEN #strDspRqKndCd2#='' OR #strDspRqKndCd2# IS NULL
		                THEN '' ELSE '/징계' END   
		         ||CASE WHEN #strDspRqKndCd390#='' OR #strDspRqKndCd390# IS NULL
		                THEN '' ELSE '/현지시정' END
		         ||CASE WHEN #strDspRqKndCd395#='' OR #strDspRqKndCd395# IS NULL
		                THEN '' ELSE '/시정(국장전결)' END          
		         ||CASE WHEN #strDspRqKndCd490#='' OR #strDspRqKndCd490# IS NULL
		                THEN '' ELSE '/현지주의' END
		         ||CASE WHEN #strDspRqKndCd495#='' OR #strDspRqKndCd495# IS NULL
		                THEN '' ELSE '/주의(국장전결)' END   
		         ||CASE WHEN #strDspRqKndCd611#='' OR #strDspRqKndCd611# IS NULL
		                THEN '' ELSE '/권고' END   
		         ||CASE WHEN #strDspRqKndCd623#='' OR #strDspRqKndCd623# IS NULL
		                THEN '' ELSE '/통보(비위)' END   
		         ||CASE WHEN #strDspRqKndCd7#='' OR #strDspRqKndCd7# IS NULL
		                THEN '' ELSE '/고발등' END ,2)          AS PARAM22 /*처분종류*/
		         , #strTitTxt#                                  AS PARAM23 /*처분제목*/  
		         , CASE WHEN #strDtmStaCd# = '0' THEN '미확정'
		                WHEN #strDtmStaCd# = '1' THEN '처분확정'
		                WHEN #strDtmStaCd# = '2' THEN '집행확정'
		                ELSE '전체'
		            END                                         AS PARAM24 /*처분상태*/  
		         , CASE WHEN #strDtmYn# = '1' THEN '미결'
		                WHEN #strDtmYn# = '2' THEN '완결'
		                WHEN #strDtmYn# = '3' THEN '완결확정'
		                ELSE '전체'
		            END                                         AS PARAM25 /*집행상태*/  
		         ,  CASE WHEN #strAmDivCd# = '1' THEN '추징회수보전금액'
		                 WHEN #strAmDivCd# = '2' THEN '환급금액'
		                 WHEN #strAmDivCd# = '3' THEN '추급금액'
		                 WHEN #strAmDivCd# = '4' THEN '예산절감금액'
		                 WHEN #strAmDivCd# = '5' THEN '수입증대금액'
		                 WHEN #strAmDivCd# = '6' THEN '국민부담경감액'
		                 WHEN #strAmDivCd# = '7' THEN '부당금액'
		                 WHEN #strAmDivCd# = '8' THEN '자체처리요구금액'
		             END                                        AS PARAM26 /*처분상태*/  
		         , #strAmSt#                                    AS PARAM27 /*금액*/  
		         , #strAmEnd#                                   AS PARAM28 /*금액*/
		         ,(SELECT USR_DFN_TXT_1
                     FROM TBDCMACM013C
                    WHERE CMM_CD_DVSN_CD = '1000742'
                      AND CD = #strDvsnCd#)                     AS PARAM29 /*특별자료 -> 실시구분으로 변경 - 2016.05.09 yyh*/
		         , CASE WHEN #strOrd1# = '1' THEN '감사연번호'
		                WHEN #strOrd1# = '2' THEN '시행일자'
		            END                                         AS PARAM30 /*정렬순서*/
		         , CASE WHEN #strOrd2# = '1' THEN '내림차순'
		                WHEN #strOrd2# = '2' THEN '오름차순'
		            END                                         AS PARAM31 /*정렬순서*/   
		            
		         ,#strAudYrNoKndCdStNm#    AS PARAM32
		         ,''                       AS PARAM33
		      FROM DUAL;    
		]]>
    </select>        
    
    <select id="BADEAR013QExcelSelectPrivacy" parameterClass="paramMap" resultMap="excelselect">
        <![CDATA[
			SELECT F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') 
			                                                    AS AUD_YR_NO_NM
			     , F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                    AS DSP_RQ_SNO
			     , DETAIL.ENF_DT                                AS ENF_DT
			     , DETAIL.HNDL_DDLN_DT                          AS HNDL_DDLN_DT
			     , (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )         AS AUD_STR_DT
			      , F_CODE_NM_YEAR('1000007',AUD.AUD_KND_CD,MASTER.AUD_YR) AS AUD_KND_NM    /*감사종류*/
			      , AUD.AUD_SBJ_NM                              AS AUD_SBJ_NM               /*감사사항*/
			      , AUD.SPV_BRDV_CD                             AS SPV_BRDV_CD              /*주관부서코드*/
                  , (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = AUD.SPV_BRDV_CD)            AS SPV_BRDV_NM 		        /*주관부서명*/
                  , MASTER.DSP_RQ_KND_CD                        AS DSP_RQ_KND_CD            /*처분종류코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000002'
                        AND CD = MASTER.DSP_RQ_KND_CD)          AS DSP_RQ_KND_NM            /*처분종류*/
			      , MASTER.TIT_TXT                              AS DISP_TIT_TXT             /*처분요구제목*/
			      , COPT.COPT_OFI_CD                            AS COPT_OFI_CD              /*1차기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = COPT.COPT_OFI_CD)          AS COPT_OFI_NM              /*1차기관*/
                  , REL.RLTN_ORG_CD                             AS RLTN_ORG_CD              /*소관기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.RLTN_ORG_CD)           AS RLTN_ORG_NM              /*소관기관*/
                  , REL.ENFM_MNG_ORG_CD                         AS ENFM_MNG_ORG_CD          /*조치기관코드*/         
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.ENFM_MNG_ORG_CD)       AS ENFM_MNG_ORG_NM          /*조치기관*/                  
			      , REL.ENFM_MNG_ORG_CNT                        AS ENFM_MNG_ORG_CNT         /*집행기관수*/                  
                  , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENFM_MNG_BRDV_CD)   AS ENFM_MNG_BRDV_NM         /*이행국과*/
			      , DETAIL.ENF_BRDV_CD                          AS ENF_BRDV_CD              /*시행부서코드*/                      
			      , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENF_BRDV_CD)        AS ENF_BRDV_NM              /*시행부서*/
                  , DETAIL.DOC_SEN_NO                           AS DOC_SEN_NO               /*시행문번호*/
			      , DETAIL.NOP_CNT                              AS NOP_CNT                  /*인원*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + 
			        NVL(DETAIL.RSR_AM,0)           + 
			        NVL(DETAIL.SPLP_AM,0)                       AS DISP_REQ_AM  /*금액*/
			      , CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			         END                                        AS DTM_STA_NM1             /*처분상태변경 - 2018.02.23 yyh*/	
			      , CASE WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') != 'Y'  THEN '미결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') = 'Y' THEN '완결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '2' THEN '확정'
			         END                                        AS DTM_STA_NM2              /*집행*/
			      , DETAIL.WRDO_TYP_CD                          AS WRDO_TYP_CD              /*비위유형*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000121'
                        AND CD = DETAIL.WRDO_TYP_CD)            AS WRDO_TYP_NM              /*비위유형*/
                  , DETAIL.WRDO_CAU_CD                          AS WRDO_CAU_CD              /*비위원인*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000006'
                        AND CD = DETAIL.WRDO_CAU_CD)            AS WRDO_CAU_NM              /*비위원인*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| ACNT_YE ||'-'|| F_CODE_NM('1000004',DSP_RQ_ACNT_CD) || '(' || DSP_RQ_ACNT_CD || ')') ORDER BY ACNT_SBJ_SNO), '//text()'), 3)
		               FROM TBBADEAR003M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO            
		              GROUP BY AUD_YR, AUD_NO, DSP_RQ_SNO)      AS ACNT_SBJ_NM				/*회계사항명*/
			      , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A,', '|| (SELECT X.USR_NAM FROM TBDCMACM001M X WHERE X.CNB = ETR_PEN_ID) ||'('||ETR_PEN_ID||')' ) ORDER BY  ETR_PEN_ID), '//text()'),3) 
			           FROM TBBADEAR004M
			          WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
			          GROUP BY AUD_YR
			                  ,AUD_NO
			                  ,DSP_RQ_SNO)                      AS ETR_PEN_ID               /*적출자*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0)              AS PNL_DRIN_PSVT_AM         /*추징회수보전금액*/
			      , NVL(DETAIL.RSR_AM,0) + 
			        NVL(DETAIL.SPLP_AM,0)                       AS RSR_AM_PLUS_SPLP_AM      /*환추급금액*/
			        
			      , NVL(DETAIL.RSR_AM,0)                        AS RSR_AM                   /*환급금액*/
			      , NVL(DETAIL.SPLP_AM,0)                       AS SPLP_AM                  /*추급금액*/
			        
			      , NVL(DETAIL.BGT_RDC_AM,0)     + 
			        NVL(DETAIL.INC_ICR_AM,0)     + 
			        NVL(DETAIL.PPL_BDN_RDT_AM,0) + 
			        NVL(DETAIL.FRTN_INCR_AM,0)   + 
			        NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EFT_AMT                  /*기대효과금액*/
			      , NVL(DETAIL.BGT_RDC_AM,0)                    AS BGT_RDC_AM               /*예산절감금액*/
			      , NVL(DETAIL.INC_ICR_AM,0)                    AS INC_ICR_AM               /*수입증대금액*/    
			      , NVL(DETAIL.PPL_BDN_RDT_AM,0)                AS PPL_BDN_RDT_AM           /*국민부담경감금액*/
			      , NVL(DETAIL.FRTN_INCR_AM,0)                  AS FRTN_INCR_AM             /*재산증가금액*/
			      , NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EXPN_RTNL_AM             /*지출합리화금액*/
			      , NVL(DETAIL.EXPOT_Y_EFCT_AM,0)               AS EXPOT_Y_EFCT_AM          /*사후적금액*/
			      , DETAIL.CPLT_DT                              AS CPLT_DT                  /*완결일 */
			      , DETAIL.ENFM_WHLS_DTM_DT                     AS ENFM_WHLS_DTM_DT         /*완결확정일*/
			      , MASTER.ORG_DVSN_CD                          AS ORG_DVSN_CD              /*기관구분코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000119'
                        AND CD = MASTER.ORG_DVSN_CD)            AS ORG_DVSN_NM		        /*기관구분*/
                  , DETAIL.PSC_RQT_NOP_CNT	                    AS PSC_RQT_NOP_CNT          /*별도고발인원*/
			      , (SELECT CASE WHEN COUNT(DISTINCT ORG_CD)>1 
                                     THEN F_ORG_INFO(MIN(ORG_CD),'1')||'외 '||TO_CHAR(COUNT(DISTINCT ORG_CD)-1)||'' 
                                ELSE F_ORG_INFO(MIN(ORG_CD),'1') 
                            END
                      FROM TBBADDED008L
                     WHERE 1 = 1
                       AND (BZT_YR, BZT_SNO) IN (SELECT BZT_YR
                                                       ,BZT_SNO
                                                   FROM TBBADDED002M
                                                  WHERE 1=1
                                                    AND REL_AUD_YR = MASTER.AUD_YR
                                                    AND REL_AUD_NO = MASTER.AUD_NO ))
			                                                    AS AUD_TRGT_ORG             /*감사대상기관*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT ORG_NM
                                                                          FROM TBDCMACM015M
                                                                          WHERE ORG_CD = RLTN_ORG_CD) ) ORDER BY RLTN_ORG_CD), '//text()'), 3) 
                       FROM TBBADEAR006M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
                      GROUP BY AUD_YR ,
                            AUD_NO ,
                            DSP_RQ_SNO)                         AS RLTN_ORG_NMS
                            
                   , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT ORG_NM
                                                                           FROM TBDCMACM015M
                                                                          WHERE ORG_CD = ENFM_MNG_ORG_CD) ) ORDER BY RLTN_ORG_CD), '//text()'), 3) 
                       FROM TBBADEAR006M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
                      GROUP BY AUD_YR ,
                            AUD_NO ,
                            DSP_RQ_SNO)                         AS ENFM_MNG_ORG_NMS  
                            
                   , DECODE(NVL(#strPrivacy#,'N'),'Y',
					       (SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| DFNT_NAM || MAX('(' || F_CODE_NM('1000011', D1.HND_RQ_KND_CD) || '>' || F_CODE_NM('1000003', D2.ENFM_SHP_CD) || ')') )
					                                         ORDER BY DFNT_NAM), '//text()').getClobVal(), 3) , '&gt;' , '>' )
					          FROM TBBADEAR007M D1 ,
					               (SELECT S1.AUD_YR ,
					                       S1.AUD_NO ,
					                       S1.DSP_RQ_SNO ,
					                       S1.RLTN_ORG_CD ,
					                       S1.DFNT_SNO ,
					                       S1.ENFM_SNO ,
					                       S1.ENFM_SHP_CD
					                  FROM TBBADFRE008M S1
					                 WHERE S1.ENFM_SNO = (SELECT MAX(ENFM_SNO)
					                          FROM TBBADFRE008M
					                         WHERE AUD_YR = S1.AUD_YR
					                           AND AUD_NO = S1.AUD_NO
					                           AND DSP_RQ_SNO = S1.DSP_RQ_SNO
					                           AND RLTN_ORG_CD = S1.RLTN_ORG_CD
					                           AND DFNT_SNO = S1.DFNT_SNO) ) D2
					         WHERE 1=1
					           AND D1.AUD_YR = D2.AUD_YR(+)
					           AND D1.AUD_NO = D2.AUD_NO(+)
					           AND D1.DSP_RQ_SNO = D2.DSP_RQ_SNO(+)
					           AND D1.RLTN_ORG_CD = D2.RLTN_ORG_CD(+)
					           AND D1.DFNT_SNO = D2.DFNT_SNO(+)
					           AND D1.AUD_YR = MASTER.AUD_YR
					           AND D1.AUD_NO = MASTER.AUD_NO
					           AND D1.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
					         GROUP BY DFNT_NAM), NVL2((SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| DFNT_NAM || MAX('(' || F_CODE_NM('1000011', D1.HND_RQ_KND_CD) || '>' || F_CODE_NM('1000003', D2.ENFM_SHP_CD) || ')') )
					                                         ORDER BY DFNT_NAM), '//text()').getClobVal(), 3) , '&gt;' , '>' )
					          FROM TBBADEAR007M D1 ,
					               (SELECT S1.AUD_YR ,
					                       S1.AUD_NO ,
					                       S1.DSP_RQ_SNO ,
					                       S1.RLTN_ORG_CD ,
					                       S1.DFNT_SNO ,
					                       S1.ENFM_SNO ,
					                       S1.ENFM_SHP_CD
					                  FROM TBBADFRE008M S1
					                 WHERE S1.ENFM_SNO = (SELECT MAX(ENFM_SNO)
					                          FROM TBBADFRE008M
					                         WHERE AUD_YR = S1.AUD_YR
					                           AND AUD_NO = S1.AUD_NO
					                           AND DSP_RQ_SNO = S1.DSP_RQ_SNO
					                           AND RLTN_ORG_CD = S1.RLTN_ORG_CD
					                           AND DFNT_SNO = S1.DFNT_SNO) ) D2
					         WHERE 1=1
					           AND D1.AUD_YR = D2.AUD_YR(+)
					           AND D1.AUD_NO = D2.AUD_NO(+)
					           AND D1.DSP_RQ_SNO = D2.DSP_RQ_SNO(+)
					           AND D1.RLTN_ORG_CD = D2.RLTN_ORG_CD(+)
					           AND D1.DFNT_SNO = D2.DFNT_SNO(+)
					           AND D1.AUD_YR = MASTER.AUD_YR
					           AND D1.AUD_NO = MASTER.AUD_NO
					           AND D1.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
					         GROUP BY DFNT_NAM),'OOO',''))       
					         AS DFNT_NMS                                                 
				  , F_CODE_NM('1000918', DETAIL.IMMUN_EXAM_CD)  AS IMMUN_EXAM_NM     /*통계자료 입력 적극행정면책 검토명*/
                  , F_CODE_NM('1000919', DETAIL.IMMUN_EXAM_CD2) AS IMMUN_EXAM_NM2    /*통계자료 입력 면책여부명*/
                  , NVL(DETAIL.PASV_ADMN_EXAM_YN, 'N')          AS PASV_ADMN_EXAM_YN /*소극행정검토내용*/
                  , NVL(DETAIL.SELF_YN, 'N')                    AS SELF_YN           /*자율여부*/         
			      , NVL(DETAIL.HMP_OPEN_YN, 'N')                AS HMP_OPEN_YN       /*홈페이지공개여부*/  
			      ,(SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
			         FROM TBBADDED145M T1 
			        INNER JOIN TBBADDED146M T2
		               ON T1.AUD_YR      = T2.AUD_YR
		              AND T1.AUD_NO      = T2.AUD_NO
		              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
		              AND T1.APVR_CD     = T2.APVR_CD
		              AND T1.DOC_ID      = T2.DOC_ID 
		              AND T1.AFF_SNO     = T2.AFF_SNO
		              AND T1.AUD_STEP_CD = 'A1070'
		              AND T1.AUD_YR      > '2017'
		              AND T1.APVR_CD     = 'A1070'
		            WHERE T1.AUD_YR      = MASTER.AUD_YR
		              AND T1.AUD_NO      = MASTER.AUD_NO
		              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM	/* 부의 위임여부 - 2021.01.03 EUNOK */
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                     
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */			       
			       ,(
			         SELECT AUD_YR
			              , AUD_NO
			              , DSP_RQ_SNO
			              , MIN(RLTN_ORG_CD) 		AS RLTN_ORG_CD
			              , MIN(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CD
			              , COUNT(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CNT
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			  WHERE 1=1                                                            
			    AND MASTER.AUD_YR     	= DETAIL.AUD_YR                              
			    AND MASTER.AUD_NO     	= DETAIL.AUD_NO                               
			    AND MASTER.DSP_RQ_SNO 	= DETAIL.DSP_RQ_SNO                              
			    AND MASTER.AUD_YR     	= AUD.AUD_YR                                 
			    AND MASTER.AUD_NO     	= AUD.AUD_NO 
			    AND MASTER.AUD_YR     	= REL.AUD_YR(+)
			    AND MASTER.AUD_NO     	= REL.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= REL.DSP_RQ_SNO(+)  
			    AND MASTER.AUD_YR     	= COPT.AUD_YR(+)
			    AND MASTER.AUD_NO     	= COPT.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= COPT.DSP_RQ_SNO(+)			        	
			    AND MASTER.AUD_YR       = DVSN.AUD_YR(+)
			    AND MASTER.AUD_NO       = DVSN.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO   = DVSN.DSP_RQ_SNO(+) 			    		    
		]]> 	
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt# 
		</isNotEmpty>
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty>  
					   			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
        	<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>			
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
						    
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty>
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	    	
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
					    
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>	
							    
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>
				   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 
 
		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>	 

		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) 
		</isNotEmpty>	

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>

		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1">
				 OR MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2">
				 OR MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3">
				 OR (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391', '395', '396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390">
				OR MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd395">
				OR MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결) 체크시*/
			</isNotEmpty>		
			<isNotEmpty property="strDspRqKndCd4">
				OR (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490">
				OR MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd495">
				OR MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd5">
				OR MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611">
				OR MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6">
				/* OR (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시*/
				OR MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>	
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625">
				OR MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
			
			<isNotEmpty property="strDspRqKndCd623">
				OR MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620">
				OR MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7">
				OR MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8">
				OR MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
			<isEqual property="strDspRqKndYn" compareValue="Y"> 
			 ) 
			</isEqual>
		
			    /**
			     * 금액구분
			     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
			     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
			     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
			     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>	
				
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)
            </isNotEmpty> 
		</isNotNull>
					
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.21 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.21 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
								
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	

    </select>
    
    <!--처분요구 조회 엑셀용 (관계자 레벨) -->
	<select id="BADEAR013QExcelDtlSelectPrivacy" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
			SELECT F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') 
			                                                    AS AUD_YR_NO_NM
			     , F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                    AS DSP_RQ_SNO
			     , DETAIL.ENF_DT                                AS ENF_DT
			     , DETAIL.HNDL_DDLN_DT                          AS HNDL_DDLN_DT
			     , (SELECT MIN(AUD_STR_DT)
			          FROM TBBADDED002M
			         WHERE REL_AUD_YR = MASTER.AUD_YR
			           AND REL_AUD_NO = MASTER.AUD_NO )         AS AUD_STR_DT
			      , F_CODE_NM_YEAR('1000007',AUD.AUD_KND_CD,MASTER.AUD_YR) AS AUD_KND_NM    /*감사종류*/
			      , AUD.AUD_SBJ_NM                              AS AUD_SBJ_NM               /*감사사항*/
			      , AUD.SPV_BRDV_CD                             AS SPV_BRDV_CD              /*주관부서코드*/
                  , (SELECT DPT_NM 
                      FROM TBDCMACM002M 
                     WHERE DPT_CD = AUD.SPV_BRDV_CD)            AS SPV_BRDV_NM 		        /*주관부서명*/
                  , MASTER.DSP_RQ_KND_CD                        AS DSP_RQ_KND_CD            /*처분종류코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000002'
                        AND CD = MASTER.DSP_RQ_KND_CD)          AS DSP_RQ_KND_NM            /*처분종류*/
			      , MASTER.TIT_TXT                              AS DISP_TIT_TXT             /*처분요구제목*/
			      , COPT.COPT_OFI_CD                            AS COPT_OFI_CD              /*1차기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = COPT.COPT_OFI_CD)          AS COPT_OFI_NM              /*1차기관*/
                  , REL.RLTN_ORG_CD                             AS RLTN_ORG_CD              /*소관기관코드*/
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.RLTN_ORG_CD)           AS RLTN_ORG_NM              /*소관기관*/
                  , REL.ENFM_MNG_ORG_CD                         AS ENFM_MNG_ORG_CD          /*조치기관코드*/         
                  , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = REL.ENFM_MNG_ORG_CD)       AS ENFM_MNG_ORG_NM          /*조치기관*/                  
			      , REL.ENFM_MNG_ORG_CNT                        AS ENFM_MNG_ORG_CNT         /*집행기관수*/                  
                  , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENFM_MNG_BRDV_CD)   AS ENFM_MNG_BRDV_NM         /*이행국과*/
			      , DETAIL.ENF_BRDV_CD                          AS ENF_BRDV_CD              /*시행부서코드*/                      
			      , (SELECT DPT_NM 
                       FROM TBDCMACM002M 
                      WHERE DPT_CD = DETAIL.ENF_BRDV_CD)        AS ENF_BRDV_NM              /*시행부서*/
                  , DETAIL.DOC_SEN_NO                           AS DOC_SEN_NO               /*시행문번호*/
			      , DETAIL.NOP_CNT                              AS NOP_CNT                  /*인원*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0) + 
			        NVL(DETAIL.RSR_AM,0)           + 
			        NVL(DETAIL.SPLP_AM,0)                       AS DISP_REQ_AM  /*금액*/
			      , CASE WHEN DETAIL.SND_STA_CD = '3' THEN DECODE(DETAIL.DTM_STA_CD, 0, '미확정', '확정')
			            ELSE '미송부'
			         END                                        AS DTM_STA_NM1             /*처분상태변경 - 2018.02.23 yyh*/	
			      , CASE WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') != 'Y'  THEN '미결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '1' AND  NVL(DETAIL.DTM_YN,'0') = 'Y' THEN '완결'
			             WHEN NVL(DETAIL.DTM_STA_CD,'0') = '2' THEN '확정'
			         END                                        AS DTM_STA_NM2              /*집행*/
			      , DETAIL.WRDO_TYP_CD                          AS WRDO_TYP_CD              /*비위유형*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000121'
                        AND CD = DETAIL.WRDO_TYP_CD)            AS WRDO_TYP_NM              /*비위유형*/
                  , DETAIL.WRDO_CAU_CD                          AS WRDO_CAU_CD              /*비위원인*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000006'
                        AND CD = DETAIL.WRDO_CAU_CD)            AS WRDO_CAU_NM              /*비위원인*/
                  , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| ACNT_YE ||'-'|| F_CODE_NM('1000004',DSP_RQ_ACNT_CD) || '(' || DSP_RQ_ACNT_CD || ')') ORDER BY ACNT_SBJ_SNO), '//text()'), 3)
		               FROM TBBADEAR003M
                      WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO            
		              GROUP BY AUD_YR, AUD_NO, DSP_RQ_SNO)      AS ACNT_SBJ_NM				/*회계사항명*/
			      , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A,', '|| (SELECT X.USR_NAM FROM TBDCMACM001M X WHERE X.CNB = ETR_PEN_ID) ||'('||ETR_PEN_ID||')' ) ORDER BY  ETR_PEN_ID), '//text()'),3) 
			           FROM TBBADEAR004M
			          WHERE AUD_YR     = DETAIL.AUD_YR
                        AND AUD_NO     = DETAIL.AUD_NO
                        AND DSP_RQ_SNO = DETAIL.DSP_RQ_SNO
			          GROUP BY AUD_YR
			                  ,AUD_NO
			                  ,DSP_RQ_SNO)                      AS ETR_PEN_ID               /*적출자*/
			      , NVL(DETAIL.PNL_DRIN_PSVT_AM,0)              AS PNL_DRIN_PSVT_AM         /*추징회수보전금액*/
			      , NVL(DETAIL.RSR_AM,0) + 
			        NVL(DETAIL.SPLP_AM,0)                       AS RSR_AM_PLUS_SPLP_AM      /*환추급금액*/
			        
			      , NVL(DETAIL.RSR_AM,0)                        AS RSR_AM                   /*환급금액*/
			      , NVL(DETAIL.SPLP_AM,0)                       AS SPLP_AM                  /*추급금액*/
			        
			      , NVL(DETAIL.BGT_RDC_AM,0)     + 
			        NVL(DETAIL.INC_ICR_AM,0)     + 
			        NVL(DETAIL.PPL_BDN_RDT_AM,0) + 
			        NVL(DETAIL.FRTN_INCR_AM,0)   + 
			        NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EFT_AMT                  /*기대효과금액*/
			      , NVL(DETAIL.BGT_RDC_AM,0)                    AS BGT_RDC_AM               /*예산절감금액*/
			      , NVL(DETAIL.INC_ICR_AM,0)                    AS INC_ICR_AM               /*수입증대금액*/    
			      , NVL(DETAIL.PPL_BDN_RDT_AM,0)                AS PPL_BDN_RDT_AM           /*국민부담경감금액*/
			      , NVL(DETAIL.FRTN_INCR_AM,0)                  AS FRTN_INCR_AM             /*재산증가금액*/
			      , NVL(DETAIL.EXPN_RTNL_AM,0)                  AS EXPN_RTNL_AM             /*지출합리화금액*/
			      , NVL(DETAIL.EXPOT_Y_EFCT_AM,0)               AS EXPOT_Y_EFCT_AM          /*사후적금액*/
			      , DETAIL.CPLT_DT                              AS CPLT_DT                  /*완결일 */
			      , DETAIL.ENFM_WHLS_DTM_DT                     AS ENFM_WHLS_DTM_DT         /*완결확정일*/
			      , MASTER.ORG_DVSN_CD                          AS ORG_DVSN_CD              /*기관구분코드*/
                  , (SELECT CD_NM
                       FROM TBDCMACM013C
                      WHERE CMM_CD_DVSN_CD = '1000119'
                        AND CD = MASTER.ORG_DVSN_CD)            AS ORG_DVSN_NM		        /*기관구분*/
                  , DETAIL.PSC_RQT_NOP_CNT	                    AS PSC_RQT_NOP_CNT          /*별도고발인원*/
			      , (SELECT CASE WHEN COUNT(DISTINCT ORG_CD)>1 
                                     THEN F_ORG_INFO(MIN(ORG_CD),'1')||'외 '||TO_CHAR(COUNT(DISTINCT ORG_CD)-1)||'' 
                                ELSE F_ORG_INFO(MIN(ORG_CD),'1') 
                            END
                      FROM TBBADDED008L
                     WHERE 1 = 1
                       AND (BZT_YR, BZT_SNO) IN (SELECT BZT_YR
                                                       ,BZT_SNO
                                                   FROM TBBADDED002M
                                                  WHERE 1=1
                                                    AND REL_AUD_YR = MASTER.AUD_YR
                                                    AND REL_AUD_NO = MASTER.AUD_NO ))
			                                                    AS AUD_TRGT_ORG             /*감사대상기관*/

			      , ORG.RLTN_ORG_CD                             AS DFNT_RLTN_ORG_CD
			      , (SELECT ORG_NM
                       FROM TBDCMACM015M
                      WHERE ORG_CD = ORG.RLTN_ORG_CD)           AS DFNT_RLTN_ORG_NM
                  , ORG.ENFM_MNG_ORG_CD                         AS DFNT_ENFM_MNG_ORG_CD                        
                  , F_ORG_INFO(ORG.ENFM_MNG_ORG_CD,'1')         AS DFNT_ENFM_MNG_ORG_NM 
                        
                        
                  , T1.ENFM_DT                                  AS ORG_ENFM_DT       /* 조치기관이행일자 */
                  , F_CODE_NM('1000003', T1.ENFM_SHP_CD)        AS ORG_ENFM_SHP_NM   /* 조치기관이행형태 */
                  , T1.PNL_AM                                   AS ORG_PNL_AM        /* 조치기관이행금액 */
                  , T1.ENFM_HIS                                 AS ORG_ENFM_HIS      /* 조치기관이행내역 */
                  , DECODE(NVL(#strPrivacy#,'N'),'Y',
                  	DFNT.DFNT_NAM,NVL2(DFNT.DFNT_NAM,'OOO','')) AS DFNT_NAM          /* 관계자성명 */
                  , F_CODE_NM('1000057', DFNT.OCP_CD)           AS OCP_NM            /* 관계자직종 */
                  , DFNT.PST_NM                                 AS PST_NM            /* 관계자직위 */
                  , F_CODE_NM('1000058', DFNT.RANK_CD)          AS RANK_NM           /* 관계자직급 */                  
                  , F_CODE_NM('1000011', DFNT.HND_RQ_KND_CD)    AS HND_RQ_KND_NM     /* 관계자조치요구 */
                  , DFNT.AM                                     AS DFNT_AM           /* 관계자관련금액 */
                  , T2.ENFM_DT                                  AS ENFM_DT           /* 관련자이행일자 */
                  , F_CODE_NM('1000003', T2.ENFM_SHP_CD)        AS ENFM_SHP_NM       /* 관련자이행형태 */
                  , T2.PNL_AM                                   AS PNL_AM            /* 관련자이행금액 */
                  , T2.ENFM_HIS                                 AS ENFM_HIS          /* 관련자이행내역 */
                  , F_CODE_NM('1000918', DETAIL.IMMUN_EXAM_CD)  AS IMMUN_EXAM_NM     /*통계자료 입력 적극행정면책 검토명*/
                  , F_CODE_NM('1000919', DETAIL.IMMUN_EXAM_CD2) AS IMMUN_EXAM_NM2    /*통계자료 입력 면책여부명*/
                  , NVL(DETAIL.PASV_ADMN_EXAM_YN, 'N')          AS PASV_ADMN_EXAM_YN /*소극행정검토내용*/
                  , NVL(DETAIL.SELF_YN, 'N')                    AS SELF_YN           /*자율여부*/
                  , NVL(DETAIL.HMP_OPEN_YN, 'N')                AS HMP_OPEN_YN       /*홈페이지공개여부*/
                  , (SELECT F_CODE_NM('1000774',T1.REFER_DVSN_CD) 
			         FROM TBBADDED145M T1 
			        INNER JOIN TBBADDED146M T2
		               ON T1.AUD_YR      = T2.AUD_YR
		              AND T1.AUD_NO      = T2.AUD_NO
		              AND T1.AUD_STEP_CD = T2.AUD_STEP_CD
		              AND T1.APVR_CD     = T2.APVR_CD
		              AND T1.DOC_ID      = T2.DOC_ID 
		              AND T1.AFF_SNO     = T2.AFF_SNO
		              AND T1.AUD_STEP_CD = 'A1070'
		              AND T1.AUD_YR      > '2017'
		              AND T1.APVR_CD     = 'A1070'
		            WHERE T1.AUD_YR      = MASTER.AUD_YR
		              AND T1.AUD_NO      = MASTER.AUD_NO
		              AND T2.DSP_RQ_SNO  = MASTER.AUD_DSP_RQ_SNO) AS REFER_DVSN_NM	/* 부의 위임여부 - 2021.01.03 EUNOK */
			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                     
			       ,TBBADDED001M AUD 
			       ,TBBADEAR035L DVSN /* 추가 2016.05.03 yyh */			       
			       ,(
			         SELECT AUD_YR
			              , AUD_NO
			              , DSP_RQ_SNO
			              , MIN(RLTN_ORG_CD) 		AS RLTN_ORG_CD
			              , MIN(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CD
			              , COUNT(ENFM_MNG_ORG_CD) 	AS ENFM_MNG_ORG_CNT
			          FROM TBBADEAR006M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        )  REL
			       ,(
			         SELECT AUD_YR
			               ,AUD_NO
			               ,DSP_RQ_SNO
			               ,MIN(RLTN_ORG_CD) COPT_OFI_CD 
			          FROM TBBADEAR008M
			        WHERE 1=1
			        GROUP BY AUD_YR
			                ,AUD_NO
			                ,DSP_RQ_SNO
			        ) COPT
			        
			       ,TBBADEAR006M ORG

			       ,TBBADEAR007M DFNT

                   ,(SELECT B.*
                       FROM (SELECT AUD_YR
                                   ,AUD_NO
                                   ,DSP_RQ_SNO
                                   ,RLTN_ORG_CD
                                   ,MAX(ENFM_SNO) AS ENFM_SNO
                               FROM TBBADFRE006M   /* 관계기관집행전말 */
                              WHERE 1=1
                              GROUP BY AUD_YR
                                      ,AUD_NO
                                      ,DSP_RQ_SNO
                                      ,RLTN_ORG_CD) A
                           ,TBBADFRE006M B
                      WHERE A.AUD_YR      = B.AUD_YR
                        AND A.AUD_NO      = B.AUD_NO
                        AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                        AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                        AND A.ENFM_SNO    = B.ENFM_SNO) T1		
                                           					       
                   ,(SELECT B.*
                       FROM (SELECT AUD_YR
                                   ,AUD_NO
                                   ,DSP_RQ_SNO
                                   ,RLTN_ORG_CD
                                   ,DFNT_SNO
                                   ,MAX(ENFM_SNO) AS ENFM_SNO
                               FROM TBBADFRE008M   /* 관계자집행전말 */
                              WHERE 1=1
                              GROUP BY AUD_YR
                                      ,AUD_NO
                                      ,DSP_RQ_SNO
                                      ,RLTN_ORG_CD
                                      ,DFNT_SNO) A
                           ,TBBADFRE008M B
                      WHERE A.AUD_YR      = B.AUD_YR
                        AND A.AUD_NO      = B.AUD_NO
                        AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                        AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                        AND A.DFNT_SNO    = B.DFNT_SNO
                        AND A.ENFM_SNO    = B.ENFM_SNO) T2			       
			  WHERE 1=1                                                            
			    AND MASTER.AUD_YR     	= DETAIL.AUD_YR                              
			    AND MASTER.AUD_NO     	= DETAIL.AUD_NO                               
			    AND MASTER.DSP_RQ_SNO 	= DETAIL.DSP_RQ_SNO                              
			    AND MASTER.AUD_YR     	= AUD.AUD_YR                                 
			    AND MASTER.AUD_NO     	= AUD.AUD_NO 
			    AND MASTER.AUD_YR     	= REL.AUD_YR(+)
			    AND MASTER.AUD_NO     	= REL.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= REL.DSP_RQ_SNO(+)  
			    AND MASTER.AUD_YR     	= COPT.AUD_YR(+)
			    AND MASTER.AUD_NO     	= COPT.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO 	= COPT.DSP_RQ_SNO(+)			        	
			    AND MASTER.AUD_YR       = DVSN.AUD_YR(+)
			    AND MASTER.AUD_NO       = DVSN.AUD_NO(+)    
			    AND MASTER.DSP_RQ_SNO   = DVSN.DSP_RQ_SNO(+) 
			    
                AND MASTER.AUD_YR       = ORG.AUD_YR(+)
                AND MASTER.AUD_NO       = ORG.AUD_NO(+)
                AND MASTER.DSP_RQ_SNO   = ORG.DSP_RQ_SNO(+)
                
                AND ORG.AUD_YR          = T1.AUD_YR(+)
                AND ORG.AUD_NO          = T1.AUD_NO(+)
                AND ORG.DSP_RQ_SNO      = T1.DSP_RQ_SNO(+)
                AND ORG.RLTN_ORG_CD     = T1.RLTN_ORG_CD(+)			    
   			    
                AND ORG.AUD_YR          = DFNT.AUD_YR(+)
                AND ORG.AUD_NO          = DFNT.AUD_NO(+)
                AND ORG.DSP_RQ_SNO      = DFNT.DSP_RQ_SNO(+)
                AND ORG.RLTN_ORG_CD     = T1.RLTN_ORG_CD(+)
			    
                AND DFNT.AUD_YR         = T2.AUD_YR(+)
                AND DFNT.AUD_NO         = T2.AUD_NO(+)
                AND DFNT.DSP_RQ_SNO     = T2.DSP_RQ_SNO(+)
                AND DFNT.RLTN_ORG_CD    = T2.RLTN_ORG_CD(+)
                AND DFNT.DFNT_SNO       = T2.DFNT_SNO(+)			    		    
		]]> 	
        <isNotEmpty property="strAudYrSt">    			    
			    AND MASTER.AUD_YR = #strAudYrSt# 
		</isNotEmpty>
		<isNotEmpty property="strAudGrnNoSt">	
		    	AND AUD.AUD_GRN_NO = #strAudGrnNoSt#
		</isNotEmpty>  
					   			
        <isNotEmpty property="strEtrPenId">
 			    /*화면 감사자를 입력했을때 */    
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR004M ETR
			                 WHERE 1=1
			                   AND ETR.AUD_YR     = MASTER.AUD_YR
			                   AND ETR.AUD_NO     = MASTER.AUD_NO
			                   AND ETR.DSP_RQ_SNO = MASTER.DSP_RQ_SNO
			                   AND ETR_PEN_ID =#strEtrPenId#
			                )       
        </isNotEmpty>
        <isNotEmpty property="strDfntNam">		
			    /*관련자를 입력했을때*/
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M DFNT
			                 WHERE 1=1
			                   AND  DFNT.AUD_YR      = MASTER.AUD_YR                            
			                   AND  DFNT.AUD_NO      = MASTER.AUD_NO                             
			                   AND  DFNT.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  DFNT.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND DFNT_NAM  LIKE #strDfntNam#||'%'
			                )
		</isNotEmpty>
        <isNotEmpty property="strSbjNm">		
			    /*화면의 감사사항을 입력 했을때*/
			    AND  AUD.AUD_SBJ_NM LIKE '%'||#strSbjNm# ||'%'
		</isNotEmpty>	 
        <isNotEmpty property="strAudKndCd">   
			    /*화면의 감사종류을 입력 했을때*/
			    AND  SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudKndCd#,3,1) 
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdSt">
        	<isNotEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM - TO 입력 했을때*/
				    AND AUD.SPV_BRDV_CD >=#strSpvBrdvCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strSpvBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 감사부서 FROM 만 입력 했을때*/
				    AND AUD.SPV_BRDV_CD =#strSpvBrdvCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strSpvBrdvCdEnd">
        	<![CDATA[		
				/*화면의 감사부서 TO 입력 했을때*/   
			    AND AUD.SPV_BRDV_CD <=#strSpvBrdvCdEnd#
			]]>		
		</isNotEmpty>	
		
		<isNotEmpty property="strMngDptCdSt">
			<isNotEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM - TO 입력 했을때*/
				    AND AUD.MNG_DPT_CD >=#strMngDptCdSt#
				]]>
			</isNotEmpty>
			<isEmpty property="strMngDptCdEnd">
	        	<![CDATA[		
					/*화면의 현관리부서 FROM 만 입력 했을때*/     
				    AND AUD.MNG_DPT_CD =#strMngDptCdSt#
				]]>
			</isEmpty>
		</isNotEmpty>
		<isNotEmpty property="strMngDptCdEnd">
        	<![CDATA[		
				/*화면의 현관리부서 TO 입력 했을때*/     
			    AND AUD.MNG_DPT_CD <=#strMngDptCdEnd#
			]]>		
		</isNotEmpty>		
				
		<isEqual property="strDtDivCd" compareValue="1">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENF_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>
		<isEqual property="strDtDivCd" compareValue="2">
				/*검색일자가 시행일자일때*/
			    AND DETAIL.ENFM_WHLS_DTM_DT BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231')
		</isEqual>		
		<isNotEmpty property="strEnfBrdvCdSt">
			<isNotEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM - TO 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD >= #strEnfBrdvCdSt#
				]]>		
			</isNotEmpty>		
			<isEmpty property="strEnfBrdvCdEnd">
	        	<![CDATA[		
					/*화면의 시행부서 FROM 만 입력 했을때*/
				    AND DETAIL.ENF_BRDV_CD = #strEnfBrdvCdSt#
				]]>			
			</isEmpty>		
		</isNotEmpty>		
		<isNotEmpty property="strEnfBrdvCdEnd">
        	<![CDATA[		
        		/*화면의 시행부서 TO 입력 했을때*/
			    AND DETAIL.ENF_BRDV_CD <=#strEnfBrdvCdEnd#
			]]>		
		</isNotEmpty>			
						    
		<!-- 1차기관 from ~ to에서 1개로만 수정 - 2016.05.04 yyh -->	    
		<isNotEmpty property="strCoptOfiCdSt">
			<isEqual property="strCoptOfiCdInClude" compareValue="N">
				/* 소속기관 불포함 */
			    AND COPT.COPT_OFI_CD = #strCoptOfiCdSt#
			</isEqual>
			<isEqual property="strCoptOfiCdInClude" compareValue="Y">
				/* 소속기관 포함 */
			    AND COPT.COPT_OFI_CD LIKE  REPLACE(#strCoptOfiCdSt#,'000','')  || '%'
			</isEqual>
		</isNotEmpty>
			    
		<!-- check box에서 select box로 변경하여 주석처리 - 2016.05.03 yyh -->	    	
		<!-- 기타 관련 수정 - 2017.09.07 yyh -->   	
		<isNotEmpty property="strOrgDvsnCd">
			<isEqual property="strOrgDvsnCd" compareValue="31">
			<![CDATA[
				AND MASTER.ORG_DVSN_CD > #strOrgDvsnCd#
			]]>		
			</isEqual>
			<isNotEqual property="strOrgDvsnCd" compareValue="31">
				AND MASTER.ORG_DVSN_CD = #strOrgDvsnCd#
			</isNotEqual>
		</isNotEmpty>
					    
		<!-- 공공기관구분 추가 - 2018.01.22 yyh -->   	
		<isNotEmpty property="strPubDvsnCd">
				AND (SELECT PUB_DVSN_CD 
				       FROM TBDCMACM015M 
				      WHERE ORG_CD = DETAIL.COPT_OFI_CD) = #strPubDvsnCd#
		</isNotEmpty>	
							    
		<!-- 기존 소관기관 구간 조회 -->
		<isEqual property="strOrgInqDvsnCd" compareValue="1">
		   <!-- 소관기관 한개에서 from ~ to로 변경함 - 2016.05.03 yyh -->
			<isNotEmpty property="strRltnOrgCdSt">
				<isEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM 만 입력 했을때*/
				   AND REL.RLTN_ORG_CD = #strRltnOrgCdSt#				
				</isEmpty>
				<isNotEmpty property="strRltnOrgCdEnd">
				   /*화면의 관계기관 FROM - TO를 다 입력 했을때*/
				   AND REL.RLTN_ORG_CD BETWEEN #strRltnOrgCdSt# AND #strRltnOrgCdEnd#
				</isNotEmpty>
			</isNotEmpty>		
			<isEmpty property="strRltnOrgCdSt">
				<isNotEmpty property="strRltnOrgCdEnd">
				    /*화면의 관계기관 TO만 다 입력 했을때*/
				    AND REL.RLTN_ORG_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd#	
				</isNotEmpty>
			</isEmpty>
		</isEqual>
		
		<!-- 소관기관 복수 조회 - 2019.10.01 yyh -->
		<isEqual property="strOrgInqDvsnCd" compareValue="2">
			<isNotEmpty property="strSelectOrgCds">
				   AND REL.RLTN_ORG_CD IN
						<iterate property="strSelectOrgCds" open="(" close=")" conjunction=",">
							#strSelectOrgCds[]#
						</iterate>
			</isNotEmpty>			
		</isEqual>	
		   
		<isNotEmpty property="strEnfmMngOrgCdSt">
			<isEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM 만 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD LIKE #strEnfmMngOrgCdSt#||'%'				
			</isEmpty>
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			   /*화면의 집행기관 FROM - TO를 다 입력 했을때*/
			   AND REL.ENFM_MNG_ORG_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd#
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngOrgCdSt">
			<isNotEmpty property="strEnfmMngOrgCdEnd">
			    /*화면의 집행기관 TO만 다 입력 했을때*/
			    AND REL.ENFM_MNG_ORG_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd#	
			</isNotEmpty>
		</isEmpty>	 
 
		<isNotEmpty property="strEnfmMngBrdvCdSt">
			<isEmpty property="strEnfmMngBrdvCdEnd">
				/*화면의 집행부서 FROM 만 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999')  /*LIKE 개념*/			
			</isEmpty>
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 FROM - TO를 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isNotEmpty>		
		<isEmpty property="strEnfmMngBrdvCdSt">
			<isNotEmpty property="strEnfmMngBrdvCdEnd">
			    /*화면의 집행부서 TO만 다 입력 했을때*/
			    AND DETAIL.ENFM_MNG_BRDV_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999')
			</isNotEmpty>
		</isEmpty>	 

		<!-- from ~ to에서 조건 한개로 변경 - 2016.05.03 yyh -->
		<isNotEmpty property="strWrdoTypCdSt">
			    AND SUBSTR(DETAIL.WRDO_TYP_CD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) 
		</isNotEmpty>	

		/* 제목,내용 검색 수정 - 2018.08.07 yyh */ 
		/* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */
		<isNotEmpty property="strTitTxt">
			 	AND  ( 1 = 2 
			 	
				/* 제목 */			
				<isEqual property="strTxtGb1" compareValue="Y">
					<![CDATA[			 	
				 	         OR MASTER.TIT_TXT LIKE '%'||#strTitTxt#||'%'
					]]>				 	 
				</isEqual>
						
				/* 키워드 검색 */			
				<isEqual property="strTxtGb2" compareValue="Y">
					<![CDATA[			 	
					 	     OR		(
					 	        	   SELECT COUNT(1)
					 	        	     FROM TBBADEAR037M
					    				WHERE AUD_YR     = MASTER.AUD_YR                              
					                      AND AUD_NO     = MASTER.AUD_NO                               
					                      AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
					 	        	      AND KYWD       LIKE '%'||#strTitTxt#||'%'
					 	        	) > 0 
					]]>				 	 
				</isEqual>
						
				/* 내용 검색 */
				<isEqual property="strTxtGb3" compareValue="Y">
					<![CDATA[			
						     OR  (
						          SELECT COUNT(1)
						 	        FROM TBBADEAR005M
						    	   WHERE AUD_YR     = MASTER.AUD_YR                              
						             AND AUD_NO     = MASTER.AUD_NO                               
						             AND DSP_RQ_SNO = MASTER.DSP_RQ_SNO    
						 	         AND (
						 	              	SUMPRT_TXT      LIKE '%'||#strTitTxt#||'%'
						 	              OR 
						 	                DSP_RQ_HND_SBJ  LIKE '%'||#strTitTxt#||'%'
						 	             )
						         ) > 0
					]]>				 				        
				</isEqual>			 	        	
			 	     )
		</isNotEmpty>

		<isEqual property="strDtmStaCd" compareValue="0">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') = '0'
		</isEqual>
		<isEqual property="strDtmStaCd" compareValue="1">
				 AND  NVL(DETAIL.DTM_STA_CD,'0') IN ('1','2')
		</isEqual>

		<isEqual property="strDspRqKndYn" compareValue="Y">
			   AND ( 1=2
		</isEqual>
			<isNotEmpty property="strDspRqKndCd1">
				 OR MASTER.DSP_RQ_KND_CD LIKE '1%' /*판정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd2">
				 OR MASTER.DSP_RQ_KND_CD LIKE '2%'  /*징계체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd3">
				 OR (MASTER.DSP_RQ_KND_CD LIKE '3%' AND MASTER.DSP_RQ_KND_CD NOT IN ('390', '391', '395', '396')) /*시정체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd390">
				OR MASTER.DSP_RQ_KND_CD IN ('390', '391') /*현지시정체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd395">
				OR MASTER.DSP_RQ_KND_CD IN ('395', '396') /*시정(국장전결) 체크시*/
			</isNotEmpty>			
			<isNotEmpty property="strDspRqKndCd4">
				OR (MASTER.DSP_RQ_KND_CD LIKE '4%' AND MASTER.DSP_RQ_KND_CD NOT IN ('490','495')) /*주의 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd490">
				OR MASTER.DSP_RQ_KND_CD = '490' /*현지주의 체크시*/
			</isNotEmpty>
			<isNotEmpty property="strDspRqKndCd495">
				OR MASTER.DSP_RQ_KND_CD = '495' /*주의(국장전결) 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd5">
				OR MASTER.DSP_RQ_KND_CD LIKE '5%' /*개선  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd611">
				OR MASTER.DSP_RQ_KND_CD = '611' /*권고  체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd6">
				/* OR (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보  체크시*/
				OR MASTER.DSP_RQ_KND_CD IN ('610','620','621','630')
			</isNotEmpty>	
			
			/* 통보(시정완료):625 추가 - 2017.03.23 yyh */
			<isNotEmpty property="strDspRqKndCd625">
				OR MASTER.DSP_RQ_KND_CD = '625' 
			</isNotEmpty>
			
			<isNotEmpty property="strDspRqKndCd623">
				OR MASTER.DSP_RQ_KND_CD = '623' /*통보(비위)*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd620">
				OR MASTER.DSP_RQ_KND_CD IN ('620','621')  /*인사자료통보 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd7">
				OR MASTER.DSP_RQ_KND_CD LIKE '7%'  /*고발등 체크시*/
			</isNotEmpty>	
			<isNotEmpty property="strDspRqKndCd8">
				OR MASTER.DSP_RQ_KND_CD LIKE '8%'  /*모범 체크시*/
			</isNotEmpty>	
			<isEqual property="strDspRqKndYn" compareValue="Y"> 
			 ) 
			</isEqual>
		
			    /**
			     * 금액구분
			     * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액
			     * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액
			     * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액
			     */
		<isEqual property="strAmDivCd" compareValue="1">
			     /*화면의 추징회수보전금액을 선택시*/
			    AND DETAIL.PNL_DRIN_PSVT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>			     
		<isEqual property="strAmDivCd" compareValue="2">
			    /*화면의 환급금액을 선택시*/
			    AND DETAIL.RSR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)		
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="3">
			    /*화면의 추급금액을 선택시*/
			    AND DETAIL.SPLP_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)	
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="4">
			    /*화면의 예산절감금액을 선택시*/
			    AND DETAIL.BGT_RDC_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="5">
			    /*화면의 수입증대금액을 선택시*/
			    AND DETAIL.INC_ICR_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="6">
			    /*화면의 국민부담경감금액을 선택시*/
			    AND DETAIL.PPL_BDN_RDT_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="7">
			    /*화면의 부당금액을 선택시*/
			    AND DETAIL.IJS_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isEqual property="strAmDivCd" compareValue="8">
			    /*화면의 자체처리요구금액을 선택시*/
			    AND DETAIL.SLF_HNDL_RQ_AM BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999)
		</isEqual>	
		<isNotEmpty property="strDtmYn">
			<isEqual property="strDtmYn" compareValue="1">
			    /* 
			        확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 
			       '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh    
			    */    			
			    /*'1'=집행중 */
       			<![CDATA[			    
				AND (	
				        NVL(DETAIL.DTM_STA_CD, '0') != '2'
         			 OR 
         			   	( 	
         			   		NVL(DETAIL.DTM_STA_CD, '0') = '2' 
						AND 
     						DETAIL.ENFM_WHLS_DTM_DT > #strStdDt#
     					)
     				)				
				]]>
			</isEqual>
			<isEqual property="strDtmYn" compareValue="2">
			    /*'2'=집행완료 선택시*/
			    <![CDATA[
			    AND NVL(DETAIL.DTM_STA_CD,'0')  = '2'        
			    AND DETAIL.ENFM_WHLS_DTM_DT    <= #strStdDt# 
				]]>
			</isEqual>
		</isNotEmpty>
		
		/*조치코드만 입력했을때 - 2015.06.12 yyh*/		
		<isNotEmpty property="strHndCd">
			<isEmpty property="strEnfmShpCd">		
			    AND EXISTS (SELECT 1
			                  FROM TBBADEAR007M HND
			                 WHERE 1=1
			                   AND  HND.AUD_YR      = MASTER.AUD_YR                            
			                   AND  HND.AUD_NO      = MASTER.AUD_NO                             
			                   AND  HND.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  HND.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  HND.HND_CD      = #strHndCd#
			                )
			</isEmpty>
		</isNotEmpty>
		
		/*집행형태만 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
			                  FROM TBBADFRE008M ENFM
			                 WHERE 1=1
			                   AND  ENFM.AUD_YR      = MASTER.AUD_YR                            
			                   AND  ENFM.AUD_NO      = MASTER.AUD_NO                             
			                   AND  ENFM.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                            
			                   AND  ENFM.RLTN_ORG_CD = REL.RLTN_ORG_CD
			                   AND  ENFM.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isEmpty>
		</isNotEmpty>			
		
		/*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/
		<isNotEmpty property="strEnfmShpCd">
			<isNotEmpty property="strHndCd">	
			    AND EXISTS (SELECT 1
                              FROM TBBADEAR007M A
                                  ,TBBADFRE008M B
                             WHERE 1=1
                               AND A.AUD_YR      = MASTER.AUD_YR
                               AND A.AUD_NO      = MASTER.AUD_NO  
                               AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO     
                               AND A.RLTN_ORG_CD = REL.RLTN_ORG_CD
                               AND A.AUD_YR      = B.AUD_YR
                               AND A.AUD_NO      = B.AUD_NO
                               AND A.DSP_RQ_SNO  = B.DSP_RQ_SNO
                               AND A.RLTN_ORG_CD = B.RLTN_ORG_CD
                               AND A.DFNT_SNO    = B.DFNT_SNO
                               AND A.HND_CD      = #strHndCd#
                               AND B.ENFM_SHP_CD = #strEnfmShpCd#
			                )
			</isNotEmpty>
		</isNotEmpty>	
				
		/* 감사연번종류코드 추가 - 2015.12.22 yyh */		
		<isNotNull property="strAudYrNoKndCdSt">
			<isNotEmpty property="strAudYrNoKndCdSt">
				/*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */
                AND SUBSTR(AUD.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1)  
            </isNotEmpty> 
		</isNotNull>
					
		/* 
			실시구분조건 추가 - 2016.05.03 yyh
			재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh  
		*/
		<isNotEmpty property="strDvsnCd">
			<isEqual property="strDvsnCd" compareValue="6">
				/* 재심의 */
			 	AND EXISTS ( SELECT 1
			    	           FROM TBBADFRE012M A /*심사심의접수기본*/
			         	      WHERE A.ACP_DVSN_CD = '2'
			            	    AND A.AUD_YR      = MASTER.AUD_YR
			                	AND A.AUD_NO      = MASTER.AUD_NO
			                 	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                    
			            	)
			</isEqual>
			<isEqual property="strDvsnCd" compareValue="A">
				/* 특수관리 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADFRE011M A  /*특수관리기본*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO
			                 	AND A.RLTN_ORG_CD(+) = REL.RLTN_ORG_CD                          
			             	)					
			</isEqual>	
			<isEqual property="strDvsnCd" compareValue="B">
				/* 감사결정례 */
			  	AND  EXISTS (SELECT 1
			    	           FROM TBBADEAR034M A  /*감사결정례*/
			        	      WHERE A.AUD_YR      = MASTER.AUD_YR
			            	    AND A.AUD_NO      = MASTER.AUD_NO
			                	AND A.DSP_RQ_SNO  = MASTER.DSP_RQ_SNO                          
			             	)					
			</isEqual>						
			
			<isEqual property="strDvsnCd" compareValue="Z">
				/* 판정유보사항여부 - 2018.08.07 yyh */
			  	AND  DETAIL.JUD_RST_SBJ_CD IN ('1','2')
			</isEqual>	
						
			<isNotEqual property="strDvsnCd" compareValue="6">
				<isNotEqual property="strDvsnCd" compareValue="A">
					<isNotEqual property="strDvsnCd" compareValue="B">
						<isNotEqual property="strDvsnCd" compareValue="Z">
							AND DVSN.DVSN_CD = #strDvsnCd#
							AND DVSN.TSK_KEY1 IS NOT NULL
						</isNotEqual>					
					</isNotEqual>
				</isNotEqual>
			</isNotEqual>

		</isNotEmpty>
		
		/* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd">
				AND DETAIL.IMMUN_EXAM_CD = #strImmunExamCd#
		</isNotEmpty>
		
		/* 통계자료 입력 면책여부 코드 - 2020.02.21 les */
		<isNotEmpty property="strImmunExamCd2">
				AND DETAIL.IMMUN_EXAM_CD2 = #strImmunExamCd2#
		</isNotEmpty>
		
		/* 소극행정검토내용 - 2020.02.21 les */
		<isNotEmpty property="strPasvAdmnExamYn">
				AND DETAIL.PASV_ADMN_EXAM_YN = #strPasvAdmnExamYn#
		</isNotEmpty>
		
		/* 자율여부 - 2020.02.21 les */
		<isNotEmpty property="strSelfYn">
				AND DETAIL.SELF_YN = #strSelfYn#
		</isNotEmpty>
								
		<isEqual property="strOrd1" compareValue="1">
			<isEqual property="strOrd2" compareValue="1">
			/*감사연번호 내림차순 선택시*/
			 ORDER BY MASTER.AUD_YR DESC, MASTER.AUD_NO DESC, MASTER.DSP_RQ_SNO DESC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*감사연번호 오름차순 선택시*/
			 ORDER BY MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC		
			</isEqual>			
		</isEqual>		
			
		<isEqual property="strOrd1" compareValue="2">
			<isEqual property="strOrd2" compareValue="1">
			/*시행일자 내림차순 선택시*/
			 ORDER BY DETAIL.ENF_DT DESC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC			
			</isEqual>
			<isEqual property="strOrd2" compareValue="2">
			/*시행일자 오름차순 선택시*/
			 ORDER BY DETAIL.ENF_DT ASC, MASTER.AUD_YR ASC, MASTER.AUD_NO ASC, MASTER.DSP_RQ_SNO ASC
			</isEqual>			
		</isEqual>	

    </select> 
    
		
</sqlMap> 
