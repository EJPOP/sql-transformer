<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/bii/321">
	<!-- 자체감사결과 상세조회 맵 -->
	<resultMap class="java.util.HashMap" id="CSPBII321PMainSelectMap">
		<result property="AUD_YR_SRNO"			column="AUD_YR_SRNO"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_KND_CD_NM"		column="AUD_KND_CD_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_DVSN_CD_NM"		column="AUD_DVSN_CD_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_STR_DT"			column="AUD_STR_DT"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_END_DT"			column="AUD_END_DT"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_DCN"				column="AUD_DCN"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_NOP_CNT"			column="AUD_NOP_CNT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_SPV_DPT_NM"		column="AUD_SPV_DPT_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_MNDY_CNT"			column="AUD_MNDY_CNT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_SPH_NM"			column="AUD_SPH_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_SBJ"				column="AUD_SBJ"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_EPS_SBJ"			column="AUD_EPS_SBJ"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_DOC_ID"			column="AUD_DOC_ID"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="EXPOT_MNG_TIT_NM"		column="EXPOT_MNG_TIT_NM"	jdbcType="VARCHAR2" javaType="java.lang.String"/>		
		<result property="OGWD_TXT"				column="OGWD_TXT"			jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="ETR_AUDTOR_TXT"		column="ETR_AUDTOR_TXT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_RSLT_OPEN_YN"		column="AUD_RSLT_OPEN_YN"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="OPEN_SMM_TXT"			column="OPEN_SMM_TXT"		jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="EXPOT_DOC_ID_1"		column="EXPOT_DOC_ID_1"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="EXPOT_DOC_ID_2"		column="EXPOT_DOC_ID_2"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_DT"			column="DSP_RQ_DT"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_ACP_DT"		column="DSP_RQ_ACP_DT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="WRDO_TYP_NM"			column="WRDO_TYP_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_KND_NM"		column="DSP_RQ_KND_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_PEN_NM"			column="REL_PEN_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="PART_RRN"				column="PART_RRN"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_ORG_NM"			column="REL_ORG_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_DPT_NM"			column="REL_DPT_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_AM"			column="DSP_RQ_AM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AC_THN_ORG_NM"		column="AC_THN_ORG_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AC_THN_DPT_NM"		column="AC_THN_DPT_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AC_THN_DTY_NM"		column="AC_THN_DTY_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_TXT"			column="DSP_RQ_TXT"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ENFM_DT"				column="ENFM_DT"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ENFM_KND_NM"			column="ENFM_KND_NM"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ENFM_AM"				column="ENFM_AM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="PNSH_VT_RQ_DT"		column="PNSH_VT_RQ_DT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="VT_DT"				column="VT_DT"				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_RSLT_ENFM_TXT"	column="AUD_RSLT_ENFM_TXT"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ENFM_DOC_ID"			column="ENFM_DOC_ID"		jdbcType="VARCHAR2" javaType="java.lang.String"/>		
	</resultMap>
	
	<!-- 자체감사결과 상세조회 -->
	<select id="CSPBII321PMainSelect" parameterClass="paramMap" resultMap="CSPBII321PMainSelectMap">		
		<![CDATA[       
			SELECT A.AUD_YR || '-' || A.AUD_SRNO AS AUD_YR_SRNO   /* 감사연번호 */
			     , A.AUD_KND_CD_NM                                /* 감사종류코드명 */
			     , A.AUD_DVSN_CD_NM                               /* 감사구분코드명 */
			     , A.AUD_STR_DT                                   /* 감사시작일 */
			     , A.AUD_END_DT                                   /* 감사종료일 */
			     , A.AUD_DCN                                      /* 감사일수 */
			     , A.AUD_NOP_CNT                                  /* 감사인원 */
			     , A.AUD_SPV_DPT_NM                               /* 감사주관부서명 */
			     , A.AUD_MNDY_CNT                                 /* 감사연인원수 */
			     , A.AUD_SPH_NM                                   /* 감사분야명 */
			     , A.AUD_SBJ                                      /* 감사사항 */
			     , A.AUD_EPS_SBJ                                  /* 감사중점사항 */
			     , A.DOC_ID                      AS AUD_DOC_ID    /* 감사문서ID */
			     , B.EXPOT_MNG_TIT_NM                             /* 사후관리제목명 */
			     , B.OGWD_TXT                                     /* 원문내용 */
			     , B.ETR_AUDTOR_TXT                               /* 적출자감사자내용 */     
			     , B.AUD_RSLT_OPEN_YN                             /* 감사결과공개여부 */
			     , B.OPEN_SMM_TXT                                 /* 공개요약내용 */
			     , B.DOC_ID_1                    AS EXPOT_DOC_ID_1/* 사후문서ID1 */
			     , B.DOC_ID_2                    AS EXPOT_DOC_ID_2/* 사후문서ID2 */
			     , C.DSP_RQ_DT                                    /* 처분요구일 */
			     , C.DSP_RQ_ACP_DT                                /* 처분요구접수일 */
			     , C.WRDO_TYP_NM                                  /* 비위유형명 */
			     , C.DSP_RQ_KND_NM                                /* 처분요구종류명 */
			     , C.REL_PEN_NM                                   /* 성명 */
			     , SUBSTR(C.EIN,1,6)||'-*******' AS PART_RRN      /* 주민등록번호 */
			     , F_ORG_INFO(C.REL_ORG_CD,'1')  AS REL_ORG_NM    /* 관련기관명 */
			     , C.REL_DPT_NM                                   /* 관련부서명 */
			     , C.DSP_RQ_AM                                    /* 처분요구금액 */
			     , F_ORG_INFO(C.AC_THN_ORG_CD,'1') AS AC_THN_ORG_NM /* 행위당시기관명 */
			     , C.AC_THN_DPT_NM                                /* 행위당시부서명 */
			     , C.AC_THN_DTY_NM                                /* 행위당시직무명 */
			     , C.DSP_RQ_TXT                                   /* 처분요구내용 */
			     , C.ENFM_DT                                      /* 집행일 */
			     , C.ENFM_KND_NM                                  /* 집행종류명 */
			     , C.ENFM_AM                                      /* 집행금액 */
			     , C.PNSH_VT_RQ_DT                                /* 징계의결요구일 */
			     , C.VT_DT                                        /* 의결일 */
			     , C.AUD_RSLT_ENFM_TXT                            /* 감사결과집행내용 */
			     , C.DOC_ID                      AS ENFM_DOC_ID   /* 집행문서ID */
			  FROM TBFAAAEA019M A
			     , TBFAAAEA020L B
			     , TBFAAAEA021M C
             WHERE A.ORG_CD         = B.ORG_CD
               AND A.AUD_YR         = B.AUD_YR
               AND A.AUD_SRNO       = B.AUD_SRNO
               AND B.ORG_CD         = C.ORG_CD
               AND B.AUD_YR         = C.AUD_YR
               AND B.AUD_SRNO       = C.AUD_SRNO
               AND B.EXPOT_MNG_SRNO = C.EXPOT_MNG_SRNO
               AND C.ORG_CD         = #strORG_CD#
               AND C.AUD_YR         = #strAUD_YR#
               AND C.AUD_SRNO       = #strAUD_SRNO#
               AND C.EXPOT_MNG_SRNO = #strEXPOT_MNG_SRNO#
               AND C.SRNO           = #strSRNO#			     			     
		]]>
	</select>
</sqlMap> 
