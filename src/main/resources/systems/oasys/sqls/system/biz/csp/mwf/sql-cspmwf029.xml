<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/mwf/003">

	<select id="CSPMWF029PMainSelect" parameterClass="paramMap"	resultClass="resultMap">
		<![CDATA[       
                 SELECT BOKG_DVSN_CD    /* 예약구분코드 */
                       ,HLDY            /* 휴일 */
                       ,HLDY_RSN_TXT    /* 휴일사유내용 */
                   FROM TBCSPMWF011M
                  WHERE BOKG_DVSN_CD = #strBokgDvsnCd#
                    AND HLDY >= TO_CHAR(ADD_MONTHS(SYSDATE, -6), 'YYYYMMDD') /* 6개월 전까지만 보이게*/
                  ORDER BY HLDY DESC
		]]>
	</select>
	
	<insert id="CSPMWF029PMainInsert" parameterClass="paramMap">
				INSERT INTO TBCSPMWF011M
				 (
					   BOKG_DVSN_CD      /* 예약구분코드 */
				     , HLDY              /* 휴일 */
				     , HLDY_RSN_TXT      /* 휴일사유내용 */
				     , FRT_USR_ID
				     , FNL_USR_ID
				     , FNL_DEAL_DPT_CD
				     , FNL_MNU_ID
				     , FRT_REGI_DH
				     , FNL_MDF_DH
				 ) VALUES
				 (
				       #BOKG_DVSN_CD#
				     , #HLDY#
				     , #HLDY_RSN_TXT#				     		    
				     , #FRT_USR_ID#
				     , #FNL_USR_ID#
				     , #FNL_DEAL_DPT_CD#
				     , #FNL_MNU_ID#
				     , SYSDATE
				     , SYSDATE
				 ) 
	</insert>	
	
	<update id="CSPMWF029PMainDelete" parameterClass="paramMap">
			DELETE 
			  FROM TBCSPMWF011M
			 WHERE BOKG_DVSN_CD = #BOKG_DVSN_CD#
			   AND HLDY         = #HLDY#
	</update>		
	
</sqlMap> 
