<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/038">

	<select id="badded038QToDptSelect" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[       

          SELECT   F_MNG_KND_AUDYRNO(BASE.REL_AUD_YR, BASE.REL_AUD_NO, BASE.AUD_KND_CD, '-') ||'('|| BASE.AUD_STEP_SNO ||')' AS REL_AUD /*감사연번*/
                  ,BASE.BZT_YR
                  ,BASE.BZT_SNO
                  ,BASE.AUD_KND_CD
                  ,F_CODE_NM('1000007',BASE.AUD_KND_CD) AS AUD_KND_NM /*감사종류*/
                  ,BASE.SPVR_CNB
                  ,BASE.REL_AUD_YR
                  ,BASE.REL_AUD_NO
                  ,BASE.AUD_STEP_SNO
                  ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
                  , '['||F_CODE_NM('1000030',AUD_BZT_KND_CD) ||']'||BASE.TIT_TXT AS TIT_TXT /*사항명*/
                  ,BASE.BZT_BRDV_CD
                  ,F_DPT_INFO(BASE.BZT_BRDV_CD,'1')AS BZT_BRDV_NM /*부서명*/
                  ,BASE.AUD_BZT_KND_CD
                  , '['||F_CODE_NM('1000030',AUD_BZT_KND_CD) ||']'AS AUD_BZT_KND_NM
                  ,BASE.BZT_TL_RANK_CD
                  ,BASE.TRIP_LEADER_NM
                  ,BASE.NOP_CNT
                  ,BASE.EXT_NOP_CNT
                  ,BASE.AUD_STR_DT /*감사시작일*/
                  ,BASE.AUD_END_DT /*감사종료일*/
                  ,BASE.ORG_CNT
                  ,BASE.REP_ORG_NM
                  ,BASE.REP_ORG_NM||DECODE((BASE.ORG_CNT-1),0,'',' 외 '||(BASE.ORG_CNT-1)) AS ORG_NM_CNT /*기관명및기관수*/
                  ,TO_CHAR(TO_DATE(BASE.AUD_STR_DT,'YYYYMMDD'),'MM.DD')||'~'|| TO_CHAR(TO_DATE(BASE.AUD_END_DT,'YYYYMMDD'),'MM.DD') AS AUD_STR_END
          FROM (  SELECT SITU.BZT_DVSN_CD ,
                         SITU.BZT_YR,
                         SITU.BZT_SNO,
                         AUD.AUD_KND_CD,
                         AUD.SPVR_CNB,
                         SITU.REL_AUD_YR,
                         SITU.REL_AUD_NO,
                         SITU.AUD_STEP_SNO,
                         SITU.AUD_DCN,
                         SITU.TIT_TXT,
                         SITU.BZT_BRDV_CD,
                         SITU.AUD_BZT_KND_CD,
                         SITU.BZT_TL_RANK_CD,
               
          			   F_USR_INFO(SITU.BZT_TL_CNB,'2') AS TRIP_LEADER_NM,
                         PSON.CNT AS NOP_CNT,
                         PSON.EXT_CNT AS EXT_NOP_CNT,
                         SITU.AUD_STR_DT,
                         SITU.AUD_END_DT,
                         TTO.ORG_CNT,
                         ORG.ORG_NM AS REP_ORG_NM
                    FROM TBBADDED002M SITU,
                         TBBADDED001M AUD,
                         TBDCMACM015M ORG,
                         (SELECT BZT_YR,
                                 BZT_SNO,
                                 SUM(
                                     CASE
                                       WHEN AS1.STF_DVSN_CD != '0' THEN 1
                                     END) AS EXT_CNT,
                                 COUNT(*) AS CNT
                            FROM (SELECT BZT_YR,
                                         BZT_SNO,
                                         PCT_CNB,
                                         STF_DVSN_CD
                                    FROM TBBADDED005L
                                    ]]>
                                    <isNotEmpty property="strDate">	 
		                            WHERE 1 = 1  
		                            <![CDATA[
                                      AND  BZT_STR_DT <= #strDate#
                                      AND  BZT_END_DT >= #strDate#
                                      ]]>
                                    </isNotEmpty> 
                                    
                                    
                         <![CDATA[           
                                   GROUP BY BZT_YR,
                                         BZT_SNO,
                                         PCT_CNB,
                                         STF_DVSN_CD ) AS1
                           GROUP BY BZT_YR,
                                 BZT_SNO) PSON,
                         
                         (SELECT BZT_YR,
                                 BZT_SNO,
                                 MIN(O.ORG_CD) AS REP_ORG_CD,
                                 COUNT(O.ORG_CD) AS ORG_CNT
                            FROM (SELECT BZT_YR,
                                         BZT_SNO,
                                         ORG_CD
                                    FROM TBBADDED008L
                                   GROUP BY BZT_YR,
                                         BZT_SNO,
                                         ORG_CD) AS O
                           GROUP BY BZT_YR,
                                 BZT_SNO) AS TTO
                   WHERE AUD.AUD_YR = SITU.REL_AUD_YR
                     AND AUD.AUD_NO = SITU.REL_AUD_NO
                     AND TTO.BZT_YR(+) = SITU.BZT_YR
                     AND TTO.BZT_SNO(+)= SITU.BZT_SNO
                     AND PSON.BZT_YR(+) = SITU.BZT_YR
                     AND PSON.BZT_SNO(+) = SITU.BZT_SNO
                     AND ORG.ORG_CD(+) = TTO.REP_ORG_CD
                     AND SITU.BZT_DVSN_CD ='1'
			]]>
			<isNotEmpty property="strIsPop">
 					 AND AUD.MNG_DPT_CD  IN (SELECT DPT_CD FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDeptAuth#, '')))				
			</isNotEmpty>
			    
			/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>					
			                 
 		    <![CDATA[                    
                     ) BASE    
             ,(SELECT TMA.BZT_YR,
                         TMA.BZT_SNO,
                         TMA.PCT_CNB,
                         SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
                    FROM TBBADDED005L TMA,
                         TBBADDED006L PTD
                   WHERE TMA.BZT_YR = PTD.BZT_YR
                     AND TMA.BZT_SNO = PTD.BZT_SNO
                     AND TMA.TEAM_SNO = PTD.TEAM_SNO
                     AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
                   GROUP BY TMA.BZT_YR,
                         TMA.BZT_SNO,
                         TMA.PCT_CNB) APTD   
             
             WHERE 1=1
             AND APTD.BZT_YR(+) =  BASE.BZT_YR  
             AND APTD.BZT_SNO(+) = BASE.BZT_SNO
             AND APTD.PCT_CNB(+) = BASE.SPVR_CNB
                 
        ]]>
           <isNotEmpty property="strDptCd">	 
           AND BASE.BZT_BRDV_CD = #strDptCd#
           </isNotEmpty> 
           <isNotEmpty property="strDate">
		      <![CDATA[
                  AND  BASE.AUD_STR_DT <= #strDate#
                   AND BASE.AUD_END_DT >= #strDate#
               ]]>
             </isNotEmpty> 
           ORDER BY BASE.BZT_BRDV_CD 
     </select>
     
     
      <select id="badded038QReport1Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 

		SELECT AUD.AUD_KND_CD,
		       F_CODE_NM('1000007',AUD.AUD_KND_CD) AUD_EXEC_DVSN_CD_NM,  /*감사종류명*/
		       AUD.AUD_YR,
		       AUD.AUD_NO,
		       #strDate# AS STR_DATE,
		       SITU.AUD_STEP_SNO,
		       F_MNG_KND_AUDYRNO(AUD.AUD_YR, AUD.AUD_NO, AUD.AUD_KND_CD, '-') ||'('|| SITU.AUD_STEP_SNO ||')' AS BZT_YR_SNO,  /*감사년번호*/
		       SITU.TIT_TXT,  /*출장명*/
		       SITU.BZT_BRDV_CD,
		       F_DPT_INFO(SITU.BZT_BRDV_CD, '1') DPT_NM,  
		       PSON.NOP_CNT,  /*실인원*/
		       PSON.AUD_STR_DT, /*감사시작일*/
		       PSON.AUD_END_DT,  /*감사종료일*/
		       PSON.AUD_DCN,  /*일수*/
		       PSON.MAN_DAY,  /*연인원*/
		       TTORG.ORG_CNT,  /*기관수*/
		       AUD.AUD_SBJ_NM  /*사항명*/
		  FROM TBBADDED002M SITU,
		       TBBADDED001M AUD,
		       (SELECT BZT_YR,
		               BZT_SNO,
		               MIN(AUD_STR_DT) AS AUD_STR_DT,
		               MAX(AUD_END_DT) AS AUD_END_DT,
		               MAX(AUD_DCN) AS AUD_DCN ,
		               SUM(AUD_DCN) AS MAN_DAY,
		               COUNT(*) AS NOP_CNT
		          FROM (SELECT TMA.BZT_YR,
		                       TMA.BZT_SNO,
		                       TMA.PCT_CNB,
		                       MIN(PTD.AUD_STR_DT) AS AUD_STR_DT,
		                       MAX(PTD.AUD_END_DT) AS AUD_END_DT,
		                       SUM(PTD.AUD_DCN) AS AUD_DCN
		                  FROM TBBADDED005L TMA,
		                       TBBADDED006L PTD
		                 WHERE PTD.BZT_YR = TMA.BZT_YR
		                   AND PTD.BZT_SNO = TMA.BZT_SNO
		                   AND PTD.TEAM_SNO = TMA.TEAM_SNO
		                   AND PTD.PCT_ALC_SNO = TMA.PCT_ALC_SNO
		                 GROUP BY TMA.BZT_YR,
		                       TMA.BZT_SNO,
		                       TMA.PCT_CNB) PTD1
		         GROUP BY BZT_YR,
		               BZT_SNO) PSON,
		       (SELECT BZT_YR,
		               BZT_SNO,
		               COUNT(DISTINCT ORG_CD) AS ORG_CNT
		          FROM TBBADDED008L
		         GROUP BY BZT_YR,
		               BZT_SNO) AS TTORG
		 WHERE AUD.AUD_YR = SITU.REL_AUD_YR
		   AND AUD.AUD_NO = SITU.REL_AUD_NO
		   AND TTORG.BZT_YR = SITU.BZT_YR
		   AND TTORG.BZT_SNO = SITU.BZT_SNO
		   AND PSON.BZT_YR = SITU.BZT_YR
		   AND PSON.BZT_SNO = SITU.BZT_SNO
		   AND SITU.BZT_DVSN_CD ='1'
		   AND SITU.BZT_BRDV_CD LIKE #strDptCd#||'%' /*화면 부서코드*/       
		   AND PSON.AUD_STR_DT <= #strDate# /*출장일*/
		   AND PSON.AUD_END_DT >= #strDate# /*출장일*/
	 ]]>
	 
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	 
	 
	 </select>
	 
	 
	 <select id="badded038QReport2Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
    
		 SELECT SITU.TIT_TXT,
		       SITU.BZT_BRDV_CD,
		       TTO.ORG_CD,  
		       F_ORG_INFO(TTO.ORG_CD,'1') AS ORG_NM,  /*대상기관*/
		       TTO.RGN_CD,
		       F_CODE_NM('1000001',TTO.RGN_CD) LCL_NM,  /*지역명*/
		       TTO.AUD_STR_DT,  /*감사기간 FROM*/
		       TTO.AUD_END_DT,  /*감사기간 TO*/
		       TTO.AUDT_DPT_NM,
		       TTO.LODG_YN,
		       TTO.STGT_MV_AREA_YN,
		       PSON.NOP_CNT,  /*실인원*/
		       PSON.AUD_DCN,  /*일수*/
		       PSON.MAN_DAY,  /*연인원*/
		       F_MNG_KND_AUDYRNO(AUD.AUD_YR, AUD.AUD_NO, AUD.AUD_KND_CD, '-') ||'('||SITU.AUD_STEP_SNO ||')' AS BZT_YR_SNO  /*감사년번호*/
		  FROM TBBADDED008L TTO,
		       TBBADDED001M AUD,
		       TBBADDED002M SITU,
		       (SELECT BZT_YR,
		               BZT_SNO,
		               TEAM_SNO,
		               BGRP_TG_ORG_SNO,
		               COUNT(*) AS NOP_CNT,
		               SUM(AUD_DCN) AS MAN_DAY,
		               MAX(AUD_DCN) AS AUD_DCN
		          FROM TBBADDED006L
		         GROUP BY BZT_YR,
		               BZT_SNO,
		               TEAM_SNO,
		               BGRP_TG_ORG_SNO) PSON
		 WHERE TTO.AUD_STR_DT <=  #strDate#
		   AND TTO.AUD_END_DT >=  #strDate#
		   AND PSON.BZT_YR = TTO.BZT_YR
		   AND PSON.BZT_SNO = TTO.BZT_SNO
		   AND PSON.TEAM_SNO = TTO.TEAM_SNO
		   AND PSON.BGRP_TG_ORG_SNO = TTO.BGRP_TG_ORG_SNO
		   AND SITU.BZT_YR = TTO.BZT_YR
		   AND SITU.BZT_SNO = TTO.BZT_SNO
		   /*AND SITU.BZT_BRDV_CD = @DPT_CD_SEARCH  상위 쿼리의 (SQL_MAIN_QUERY) SITU.BZT_BRDV_CD*/
		   AND AUD.AUD_YR = SITU.REL_AUD_YR
		   AND AUD.AUD_NO = SITU.REL_AUD_NO
     ]]>
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>       
	 </select>
	 
	 <select id="badded038QReport3Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
	 SELECT
	      COUNT(*) AS ALL_SUM,
	      NVL(SUM(PSON.CNT),0) ALL_PSON_CNT,
	      NVL(SUM(PSON.EXT_CNT),0) ALL_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '1' THEN 1 END),0)  AS AUD_TYPE1_SUM,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '2' THEN 1 END),0) AS AUD_TYPE2_SUM,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '3' THEN 1 END),0) AS AUD_TYPE3_SUM,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '4' THEN 1 END),0) AS AUD_TYPE4_SUM,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '6' THEN 1 END),0)  AS AUD_TYPE7_SUM,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) not in ('1','2','3','4','6') THEN 1 END),0) AS AUD_TYPE_STT_RMK_SUM,        
	
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '1'  THEN PSON.CNT END),0) AS AUD_TYPE1_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '2'  THEN PSON.CNT END),0) AS AUD_TYPE2_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '3'  THEN PSON.CNT END),0) AS AUD_TYPE3_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '4'  THEN PSON.CNT END),0) AS AUD_TYPE4_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) not in ('1','2','3','4','6')  THEN PSON.CNT END),0) AS AUD_TYPE_STT_RMK_PSON_CNT,        
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '6'  THEN PSON.CNT END),0) AS AUD_TYPE7_PSON_CNT,
	
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '1' THEN PSON.EXT_CNT END),0) AS AUD_TYPE1_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '2' THEN PSON.EXT_CNT END),0) AS AUD_TYPE2_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '3' THEN PSON.EXT_CNT END),0) AS AUD_TYPE3_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '4' THEN PSON.EXT_CNT END),0) AS AUD_TYPE4_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) not in ('1','2','3','4','6') THEN PSON.EXT_CNT END),0) AS AUD_TYPE_STT_RMK_EXT_PSON_CNT,
	      NVL(SUM(CASE WHEN SUBSTRB(AUD.AUD_KND_CD,3,1) = '6' THEN PSON.EXT_CNT END),0) AS AUD_TYPE7_EXT_PSON_CNT,
		  (select case to_char(to_date(#strDate#, 'YYYYMMDD'), 'd') when 1 then '일' when 2 then '월' when 3 then '화' when 4 then '수' when 5 then '목' when 6 then '금' when 7 then '토' end as WRIT_DT_SUB from dual) AS STR_DATE 
	FROM TBBADDED002M SITU, 
	     TBBADDED001M AUD,
	    (SELECT BZT_YR,BZT_SNO
	           ,SUM(CASE WHEN  AS1.STF_DVSN_CD != '0' THEN 1 END) AS EXT_CNT 
	           ,COUNT(*) AS CNT
	      FROM (SELECT BZT_YR
	                  ,BZT_SNO
	                  ,PCT_CNB
	                  ,STF_DVSN_CD
	              FROM TBBADDED005L 
	             WHERE BZT_STR_DT <= #strDate#
	               AND BZT_END_DT >= #strDate#
	          GROUP BY BZT_YR
	                  ,BZT_SNO
	                  ,PCT_CNB
	                  ,STF_DVSN_CD) AS1
	      GROUP BY BZT_YR, BZT_SNO) PSON
	WHERE AUD.AUD_YR = SITU.REL_AUD_YR
	  AND AUD.AUD_NO = SITU.REL_AUD_NO
	  AND PSON.BZT_YR(+) = SITU.BZT_YR
	  AND PSON.BZT_SNO(+) = SITU.BZT_SNO
	  AND SITU.BZT_DVSN_CD ='1'
	 AND SITU.AUD_STR_DT <= #strDate#
	 AND SITU.AUD_END_DT >= #strDate#
	     ]]>

		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	     
	     
	 </select>
	 
	 <select id="badded038QReport4Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
	 
		SELECT BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2)
		           END 
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END
		           || '.' 
		           AS AUD_DATE, /*금일국과별현황 출력의 실지감사활동현황 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_STR_DT <=#strDate#
		                       AND BZT_END_DT >=#strDate#
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR(+)
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO(+)
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND  SITU.AUD_STR_DT <= #strDate#
		       AND  SITU.AUD_END_DT >= #strDate#   
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
	     ]]>		       
		
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	  
		 		       
    <![CDATA[ 			       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)          
		 ORDER BY BASE.BZT_BRDV_CD 
		 
	 
	     ]]>
	 </select>

	 
	  	 <select id="badded038QReport5Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
		    
		SELECT '오늘' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2) 
		           END
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2) 
		           END
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2) 
		           END
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2) 
		           END
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사착수 오늘 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_STR_DT = #strDate# 
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_STR_DT = #strDate#  
		       AND SITU.AUD_BZT_KND_CD != '03'
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
  	     ]]>		       
		
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	     
		 		       
    <![CDATA[ 			       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)         
    
	 	 	     ]]>
	 </select>
	 
  	<select id="badded038QReport6Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
		    
		SELECT '내일' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2)
		           END 
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END 
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사착수 내일 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_STR_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD')  
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_STR_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD')  
		       AND SITU.AUD_BZT_KND_CD != '03'
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
     ]]>
     		       
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	
		 		       
    <![CDATA[ 		
		       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)  
	 	 	     ]]>
	 </select>
	 
	  	 <select id="badded038QReport7Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
		    	 
		SELECT '오늘' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2)
		           END 
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END 
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사종료 오늘 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_END_DT = #strDate# 
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_END_DT = #strDate#  
		       
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
  	     ]]>		       

		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	
		 		       
    <![CDATA[ 			       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)  
   
	      ]]>
	      </select>
	       	 <select id="badded038QReport8Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
		    	 
		SELECT '내일' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2) 
		           END
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END 
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사종료 내일 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_END_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD')  
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_END_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD') 
		
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
  	     ]]>
  	     		       
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	
		 		       
    <![CDATA[ 				       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)  
	      ]]>
	      </select>
	       	 <select id="badded038QReport9Select" parameterClass="paramMap"
		resultClass="resultMap">
    <![CDATA[ 	
		    	
		SELECT '오늘' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2)
		           END 
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END 
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사연장 오늘 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_STR_DT = #strDate# 
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_STR_DT = #strDate#  
		       AND SITU.AUD_BZT_KND_CD = '03'
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		       
  	     ]]>		       

		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	
		 		       
    <![CDATA[ 				       
		       
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+)  
			    ]]>
	 </select>
	 
	 <select id="badded038QReport10Select" parameterClass="paramMap"
		resultClass="resultMap">
		
    <![CDATA[
		    
		    
		SELECT '내일' AS SUB
		      ,BASE.BZT_YR
		      ,BASE.BZT_SNO
		      ,BASE.AUD_KND_CD
		      ,BASE.REL_AUD_YR
		      ,BASE.REL_AUD_NO
		      ,BASE.AUD_STEP_SNO
		      ,BASE.TIT_TXT
		      ,BASE.DPT_NM
		      ,NVL(APTD.SUM_AUD_DCN, BASE.AUD_DCN) AUD_DCN
		      ,BASE.BZT_TL_RANK_CD
		      ,BASE.TRIP_LEADER_NM
		      ,TRIP_LEADER_TIT_TXT
		      ,BASE.PST_CD
		      ,BASE.RANK_CD
		      ,BASE.BZT_BRDV_CD
		      ,BASE.PSON
		      ,AUD_DATE
		      ,REP_ORG_NM  
		FROM 
		
		(
		    SELECT SITU.BZT_YR,
		           SITU.BZT_SNO,
		           AUD.SPVR_CNB,
		           SITU.AUD_DCN,
		           (CASE WHEN SITU.AUD_BZT_KND_CD IN('02','03') THEN       
		                     (SELECT SUBSTR(CD_NM, 1, 2)
		                        FROM TBDCMACM013C
		                       WHERE CD= AUD.AUD_KND_CD
		                         AND CMM_CD_DVSN_CD='1000007')
		            ELSE     
		                     (SELECT SUBSTR(CD_NM, 1, 4)
		                        FROM TBDCMACM013C
		                       WHERE CD= SITU.AUD_BZT_KND_CD
		                         AND CMM_CD_DVSN_CD='1000030')
		           END ) AUD_KND_CD,
		           SITU.REL_AUD_YR,
		           SITU.REL_AUD_NO,
		           SITU.AUD_STEP_SNO,
		           /*NVL(APTD.SUM_AUD_DCN, SITU.AUD_DCN) AUD_DCN,*/
		           SITU.TIT_TXT,
		           F_DPT_INFO(SITU.BZT_BRDV_CD, '4') DPT_NM,
		           SITU.BZT_TL_RANK_CD,
		           USR.USR_NAM TRIP_LEADER_NM,
		           NVL(F_CODE_NM('1000176',USR.PST_CD),F_CODE_NM('1000173',SITU.BZT_TL_RANK_CD)) TRIP_LEADER_TIT_TXT,
		
		           USR.PST_CD,
		           USR.RANK_CD,
		           SITU.BZT_BRDV_CD,
		           NVL(PSON.CNT, 0) || CASE WHEN NVL(PSON.EXT_CNT, 0) > 0 THEN CHR(10) || '(차출 등' || PSON.EXT_CNT ||')' 
		           END AS PSON,
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 6, 1) 
		                ELSE SUBSTR(SITU.AUD_STR_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_STR_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_STR_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_STR_DT, 7, 2)
		           END 
		           || '.~' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 5, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 6, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 5, 2)
		           END 
		           || '.' || 
		           CASE WHEN SUBSTR(SITU.AUD_END_DT, 7, 1) = '0' THEN SUBSTR(SITU.AUD_END_DT, 8, 1)
		                ELSE SUBSTR(SITU.AUD_END_DT, 7, 2)
		           END 
		           || '.' AS AUD_DATE, /*금일국과별현황 출력의 감사연장 내일 감사기간 수정(박진호감사관, 20250729)*/
		           F_ORG_INFO(TTO.REP_ORG_CD,'1') REP_ORG_NM
		      FROM TBBADDED002M SITU,
		           TBBADDED001M AUD,
		           TBDCMACM001M USR,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   SUM(CASE
		                         WHEN AS1.STF_DVSN_CD != '0' THEN 1 ELSE 0
		                       END) AS EXT_CNT,
		                   COUNT(*) AS CNT
		              FROM (SELECT BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD
		                      FROM TBBADDED005L
		                     WHERE BZT_STR_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD')  
		                     GROUP BY BZT_YR,
		                           BZT_SNO,
		                           PCT_CNB,
		                           STF_DVSN_CD) AS1
		             GROUP BY BZT_YR,
		                   BZT_SNO) PSON,
		           (SELECT BZT_YR,
		                   BZT_SNO,
		                   MIN(ORG_CD) AS REP_ORG_CD
		              FROM TBBADDED008L
		             GROUP BY BZT_YR,
		                   BZT_SNO) AS TTO
		     WHERE  SITU.REL_AUD_YR = AUD.AUD_YR
		       AND  SITU.REL_AUD_NO = AUD.AUD_NO
		       AND  SITU.BZT_YR     = TTO.BZT_YR
		       AND  SITU.BZT_SNO    = TTO.BZT_SNO
		       AND  SITU.BZT_YR     = PSON.BZT_YR(+)
		       AND  SITU.BZT_SNO    = PSON.BZT_SNO(+) 
		       AND  SITU.BZT_DVSN_CD ='1'
		       AND SITU.AUD_STR_DT = TO_CHAR(TO_DATE(#strDate#)+1,'YYYYMMDD')  
		       AND SITU.AUD_BZT_KND_CD = '03'
		       AND  USR.CNB(+)       = SITU.BZT_TL_CNB
		    ]]>
		       
				/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
				<isNotNull  property="strExmpDptYn">
					<isNotEmpty property="strExmpDptYn">
					    <isEqual property="strExmpDptYn" compareValue="Y">
					      	AND AUD.SPV_BRDV_CD != '100100'
					    </isEqual>
					</isNotEmpty>	                 
				 </isNotNull>  		       
		       
		    <![CDATA[   
		     ) BASE ,
		    (SELECT TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB,
		           SUM(NVL(PTD.AUD_DCN, 0)) SUM_AUD_DCN
		      FROM TBBADDED005L TMA,
		           TBBADDED006L PTD
		     WHERE TMA.BZT_YR = PTD.BZT_YR
		       AND TMA.BZT_SNO = PTD.BZT_SNO
		       AND TMA.TEAM_SNO = PTD.TEAM_SNO
		       AND TMA.PCT_ALC_SNO = PTD.PCT_ALC_SNO
		     GROUP BY TMA.BZT_YR,
		           TMA.BZT_SNO,
		           TMA.PCT_CNB) APTD
		 WHERE  BASE.BZT_YR      = APTD.BZT_YR(+)
		   AND  BASE.BZT_SNO     = APTD.BZT_SNO(+) 
		   AND  BASE.SPVR_CNB     = APTD.PCT_CNB(+) 
      ]]>
    </select> 	
    <select id="badded038QReport11Select" parameterClass="paramMap"
		resultClass="resultMap">
		
    <![CDATA[
		    
		    SELECT NVL(SUM(PSON.CNT), 0) ALL_PSON_CNT,
		       NVL(SUM(PSON.INTERNAL_CNT), 0) INTERNAL_CNT,
		       NVL(SUM(PSON.SUGUN_CNT), 0) SUGUN_CNT,
		       NVL(SUM(PSON.CHA_CNT), 0) CHA_CNT,
		       NVL(SUM(PSON.EXPERT_CNT), 0) EXPERT_CNT,
		       NVL(SUM(PSON.CHA1_CNT), 0) CHA1_CNT,
		       NVL(SUM(PSON.CHA_CNT), 0) + NVL(SUM(PSON.EXPERT_CNT), 0) + NVL(SUM(PSON.CHA1_CNT), 0) STT_RMK_CNT
		  FROM TBBADDED002M SITU,
		       TBBADDED001M AUD,
		       (SELECT BZT_YR,
		               BZT_SNO,
		               SUM(
		                   CASE
		                     WHEN AS1.STF_DVSN_CD = '0' THEN 1
		                   END) AS INTERNAL_CNT,
		               SUM(
		                   CASE
		                     WHEN AS1.STF_DVSN_CD = '1' THEN 1
		                   END) AS SUGUN_CNT,
		               SUM(
		                   CASE
		                     WHEN AS1.STF_DVSN_CD = '2' THEN 1
		                   END) AS CHA_CNT,
		               SUM(
		                   CASE
		                     WHEN AS1.STF_DVSN_CD = '3' THEN 1
		                   END) AS EXPERT_CNT,
		               SUM(
		                   CASE
		                     WHEN AS1.STF_DVSN_CD = '9' THEN 1
		                   END) AS CHA1_CNT,
		               COUNT(*) AS CNT
		          FROM (SELECT BZT_YR,
		                       BZT_SNO,
		                       PCT_CNB,
		                       STF_DVSN_CD
		                  FROM TBBADDED005L
		                 WHERE BZT_STR_DT <= #strDate#
		                   AND BZT_END_DT >= #strDate#
		                 GROUP BY BZT_YR,
		                       BZT_SNO,
		                       PCT_CNB,
		                       STF_DVSN_CD) AS1
		         GROUP BY BZT_YR,
		               BZT_SNO) PSON
		 WHERE AUD.AUD_YR = SITU.REL_AUD_YR
		   AND AUD.AUD_NO = SITU.REL_AUD_NO
		   AND PSON.BZT_YR(+) = SITU.BZT_YR
		   AND PSON.BZT_SNO(+) = SITU.BZT_SNO
		   AND SITU.BZT_DVSN_CD ='1'
		   AND SITU.AUD_STR_DT <= #strDate#
		   AND SITU.AUD_END_DT >= #strDate# 
          ]]>
          
		/* 감찰담당관실은 조회시 제외하며, 로그인 한 담당자가 감찰담당관일때만 포함하여 모두 보임 - 2016.01.04 yyh */
		<isNotNull  property="strExmpDptYn">
			<isNotEmpty property="strExmpDptYn">
			    <isEqual property="strExmpDptYn" compareValue="Y">
			      	AND AUD.SPV_BRDV_CD != '100100'
			    </isEqual>
			</isNotEmpty>	                 
		 </isNotNull>  	          
          
    </select> 
</sqlMap> 
