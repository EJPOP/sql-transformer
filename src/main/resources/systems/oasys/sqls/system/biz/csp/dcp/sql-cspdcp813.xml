<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/dcp/813">
 	
 	<select id="CSPDCP813EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<include refid = "include.pageSelct"/>
		<![CDATA[
			SELECT	T1.STTM_DVSN_CD
					,T1.ACP_YR
					,T1.STTM_ACP_NO
					,DECODE(T1.RM_STTM_ACP_NO,NULL,NULL,T1.ACP_YR||'-'||'청금-'||T1.RM_STTM_ACP_NO) AS ACP_NO
					,T1.HMP_APL_NO
					,T1.STTM_KND_CD
					,F_CODE_NM('1000758',T1.STTM_KND_CD) AS STTM_KND_NM
					,T1.STTM_KND_DTL_CD
					,F_CODE_NM('1000759',T1.STTM_KND_DTL_CD) AS STTM_KND_DTL_NM
					,T1.NAM
					,T1.TIT_NM
					,TO_CHAR(T1.ACP_DH,'YYYY-MM-DD HH24:MI') AS ACP_DH
					,TO_CHAR(T1.FRT_REGI_DH,'YYYY-MM-DD HH24:MI') AS FRT_REGI_DH
					,T1.ACP_RUT_CD
					,F_CODE_NM('1000761',T1.ACP_RUT_CD) AS ACP_RUT_NM
					,T1.HNDL_STA_CD
					,F_CODE_NM('1000760',T1.HNDL_STA_CD) AS HNDL_STA_NM
					,T1.RM_STTM_ACP_NO
			FROM	TBCSPDCP811M T1
			WHERE	T1.STTM_DVSN_CD = '1'
		]]>
		<dynamic>
			<isNotEmpty property="strSTTM_KND_CD">
				AND T1.STTM_KND_CD = #strSTTM_KND_CD#
			</isNotEmpty>
			<isNotEmpty property="strSTTM_KND_DTL_CD">
				AND T1.STTM_KND_DTL_CD = #strSTTM_KND_DTL_CD#
			</isNotEmpty>
			<isNotEmpty property="strACP_YR">
				AND	T1.ACP_YR = #strACP_YR#
			</isNotEmpty>
			<isNotEmpty property="strRM_STTM_ACP_NO">
				AND	T1.RM_STTM_ACP_NO = #strRM_STTM_ACP_NO#
			</isNotEmpty>
			<isNotEmpty property="strFRT_REGI_DHS">
				AND	TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') &gt;= #strFRT_REGI_DHS#
			</isNotEmpty>
			<isNotEmpty property="strFRT_REGI_DHE">
				AND	TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') &lt;= #strFRT_REGI_DHE#
			</isNotEmpty>
			<isNotEmpty property="strHNDL_STA_CD">
				AND	T1.HNDL_STA_CD = #strHNDL_STA_CD#
			</isNotEmpty>
			<isNotEmpty property="strTIT_NM">
				AND	T1.TIT_NM LIKE '%'||#strTIT_NM#||'%'
			</isNotEmpty>
			<isNotEmpty property="strHMP_APL_NO">
				AND	T1.HMP_APL_NO = #strHMP_APL_NO#
			</isNotEmpty>
			<isNotEmpty property="strNAM">
				AND	T1.NAM LIKE '%'||#strNAM#||'%'
			</isNotEmpty>
		</dynamic>
		<![CDATA[
			ORDER BY T1.ACP_YR DESC,TO_NUMBER(T1.RM_STTM_ACP_NO) DESC
		]]>
		<include refid = "include.pageOrder"/> 
	</select>
	
</sqlMap> 
