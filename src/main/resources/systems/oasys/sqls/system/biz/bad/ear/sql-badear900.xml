<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ear/900">

	<select id="BADEAR900EDtlselect" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[
 			SELECT  MASTER.AUD_YR
                  , MASTER.AUD_NO
                  , MASTER.DSP_RQ_SNO
                  , F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO
			                                                    AS AUD_YR_NO
			      , F_DPT_INFO(DETAIL.ENF_BRDV_CD,'1' )         AS ENF_BRDV_NM   
			      , MASTER.TIT_TXT                              AS TIT_TXT                                                                                      
			 	  , F_CODE_NM('1000002', MASTER.DSP_RQ_KND_CD)  AS DSP_RQ_KND_NM             

			  FROM  TBBADEAR001M MASTER                                          
			       ,TBBADEAR002D DETAIL                                          
			       ,TBBADDED001M AUD 	   			        
			  WHERE 1=1                                                            
			    AND MASTER.AUD_YR     	= DETAIL.AUD_YR                              
			    AND MASTER.AUD_NO     	= DETAIL.AUD_NO                               
			    AND MASTER.DSP_RQ_SNO 	= DETAIL.DSP_RQ_SNO                              
			    AND MASTER.AUD_YR     	= AUD.AUD_YR                                 
			    AND MASTER.AUD_NO     	= AUD.AUD_NO    			                
                AND MASTER.AUD_YR       = '2016' 
                AND F_MNG_KND_AUDYRNO(MASTER.AUD_YR, MASTER.AUD_NO, AUD.AUD_KND_CD, '-') ||'-'|| MASTER.DSP_RQ_SNO IN (
                
 '2016-기관-009-4'
,'2016-기관-009-9'
,'2016-기관-009-14'
,'2016-특정-053-1'
,'2016-특정-053-2'
,'2016-특정-053-3'
,'2016-특정-053-8'
,'2016-특정-053-11'
,'2016-특정-039-11'
,'2016-특정-039-13'
,'2016-특정-039-15'
,'2016-특정-039-17'
,'2016-특정-039-19'
,'2016-특정-039-20'
,'2016-특정-039-23'
,'2016-특정-039-25'
,'2016-특정-039-27'
,'2016-특정-039-29'
,'2016-특정-039-30'
,'2016-특정-039-31'
,'2016-특정-039-35'
,'2016-특정-039-44'
,'2016-특정-039-45'
,'2016-특정-039-46'
,'2016-특정-039-48'
,'2016-특정-039-51'
,'2016-특정-040-6'
,'2016-특정-040-8'
,'2016-특정-040-10'
,'2016-특정-040-14'
,'2016-특정-049-1'
,'2016-특정-049-11'
,'2016-특정-049-12'
,'2016-특정-049-19'
,'2016-특정-049-20'
,'2016-특정-049-23'
,'2016-특정-049-24'
,'2016-특정-049-27'
,'2016-특정-049-29'
,'2016-특정-049-33'
,'2016-특정-049-36'
,'2016-특정-049-38'
,'2016-특정-049-40'
,'2016-특정-049-42'
,'2016-특정-049-46'
,'2016-특정-049-52'
,'2016-특정-049-55'
,'2016-특정-049-57'
,'2016-특정-049-59'
,'2016-특정-049-61'
,'2016-특정-049-63'
,'2016-특정-049-66'
,'2016-특정-049-68'
,'2016-특정-049-70'
,'2016-특정-049-72'
,'2016-특정-049-74'
,'2016-특정-049-79'
,'2016-특정-049-80'
,'2016-특정-050-9'
,'2016-특정-050-12'
,'2016-특정-050-14'
,'2016-특정-050-15'
,'2016-특정-050-20'
,'2016-특정-050-23'
,'2016-특정-050-36'
,'2016-특정-050-44'
,'2016-기관-027-1'
,'2016-기관-027-3'
,'2016-기관-027-6'
,'2016-기관-027-8'
,'2016-기관-027-18'
,'2016-기관-027-22'
,'2016-기관-027-24'
,'2016-기관-027-29'
,'2016-기관-028-2'
,'2016-기관-028-5'
,'2016-기관-028-7'
,'2016-기관-028-10'
,'2016-기관-028-13'
,'2016-기관-028-19'
,'2016-기관-028-21'
,'2016-기관-028-23'
,'2016-기관-028-38'
,'2016-기관-028-39'
,'2016-기관-028-40'
,'2016-기관-028-44'
,'2016-기관-029-1'
,'2016-기관-029-3'
,'2016-기관-029-11'
,'2016-기관-029-14'
,'2016-기관-029-18'
,'2016-기관-029-22'
,'2016-기관-029-25'
,'2016-기관-029-26'
,'2016-기관-029-27'
,'2016-기관-030-1'
,'2016-기관-030-9'
,'2016-기관-030-21'
,'2016-기관-030-27'
,'2016-기관-030-32'
,'2016-특정-061-1'
,'2016-특정-061-3'
,'2016-특정-061-7'
,'2016-특정-061-8'
,'2016-특정-061-10'
,'2016-특정-061-11'
,'2016-특정-061-13'
,'2016-특정-061-15'
,'2016-특정-061-16'
,'2016-특정-061-18'
,'2016-특정-061-19'
,'2016-특정-061-21'
,'2016-특정-061-24'
,'2016-특정-061-26'
,'2016-특정-063-1'
,'2016-특정-063-4'
,'2016-특정-063-6'
,'2016-특정-063-9'
,'2016-특정-063-10'
,'2016-성과-006-2'
,'2016-기관-031-12'
,'2016-기관-031-17'
,'2016-기관-031-18'
,'2016-기관-031-21'
,'2016-기관-031-25'
,'2016-기관-031-38'
,'2016-기관-031-39'
,'2016-특정-066-1'
,'2016-특정-066-2'
,'2016-특정-066-14'
,'2016-성과-008-2'
,'2016-성과-008-10'
,'2016-특정-067-7'
,'2016-특정-067-10'
,'2016-특정-067-16'
,'2016-특정-067-21'
,'2016-특정-069-4'
,'2016-특정-069-15'
,'2016-특정-069-17'
,'2016-특정-069-21'
,'2016-특정-072-1'
,'2016-특정-072-5'
,'2016-특정-072-7'
,'2016-특정-072-9'
,'2016-특정-072-11'
,'2016-특정-072-14'
,'2016-특정-072-19'
,'2016-특정-072-22'
,'2016-특정-072-25'
,'2016-특정-072-26'
,'2016-특정-071-1'
,'2016-특정-071-2'
,'2016-특정-071-15'
,'2016-특정-071-22'
,'2016-특정-071-26'
,'2016-특정-076-1'
,'2016-특정-076-2'
,'2016-특정-076-7'
,'2016-특정-076-8'
,'2016-특정-076-11'
,'2016-특정-076-13'
,'2016-특정-076-15'
,'2016-특정-076-16'
,'2016-특정-076-19'
,'2016-특정-074-16'
,'2016-특정-075-1'
,'2016-특정-075-4'
,'2016-특정-075-5'
,'2016-특정-075-6'
,'2016-특정-075-8'
,'2016-특정-077-3'
,'2016-특정-078-3'
,'2016-특정-078-5'
,'2016-특정-078-7'
,'2016-특정-078-9'
,'2016-특정-078-11'
,'2016-특정-078-13'
,'2016-특정-078-15'
,'2016-특정-079-1'
,'2016-특정-080-1'
,'2016-특정-080-3'
,'2016-특정-080-5'
,'2016-특정-080-7'
,'2016-특정-080-9'
,'2016-특정-080-11'
,'2016-특정-080-13'
,'2016-특정-080-15'
,'2016-특정-080-17'
,'2016-특정-080-19'
,'2016-특정-080-21'
,'2016-특정-080-25'
,'2016-특정-080-26'
,'2016-특정-080-28'
,'2016-특정-080-30'
,'2016-특정-080-32'
,'2016-특정-080-33'
,'2016-특정-080-36'
,'2016-특정-080-38'
,'2016-특정-080-39'
,'2016-특정-080-40'
,'2016-특정-080-41'
,'2016-특정-080-42'
,'2016-특정-080-44'
,'2016-특정-080-45'
,'2016-특정-081-15'
,'2016-특정-081-17'
,'2016-특정-081-24'
,'2016-특정-081-27'
,'2016-특정-081-30'
,'2016-특정-081-31'
,'2016-특정-081-35'
,'2016-특정-081-37'
,'2016-특정-081-38'
,'2016-특정-081-39'
,'2016-특정-081-41'
,'2016-특정-081-43'
,'2016-특정-081-45'
,'2016-특정-081-49'
,'2016-특정-081-57'
,'2016-특정-081-58'
,'2016-특정-081-59'
,'2016-특정-081-60'
,'2016-특정-081-61'
,'2016-특정-081-62'
,'2016-특정-081-63'
,'2016-특정-081-65'
,'2016-특정-081-66'
,'2016-기관-033-4'
,'2016-기관-033-7'
,'2016-기관-033-8'
,'2016-특정-082-1'
,'2016-특정-082-10'
,'2016-특정-082-11'
,'2016-특정-082-12'
,'2016-특정-082-17'
,'2016-특정-082-18'
,'2016-특정-082-20'
,'2016-특정-084-2'
,'2016-특정-084-14'
,'2016-특정-085-1'
,'2016-특정-085-8'
,'2016-특정-086-1'
,'2016-특정-086-2'
,'2016-특정-086-4'
,'2016-특정-086-5'
,'2016-특정-086-6'
,'2016-특정-086-9'
,'2016-특정-086-11'
,'2016-특정-086-19'
,'2016-기관-034-1'
,'2016-기관-034-4'
,'2016-기관-034-7'
,'2016-특정-087-2'
,'2016-특정-087-4'
,'2016-특정-087-6'
,'2016-특정-087-8'
,'2016-기관-035-6'
,'2016-기관-036-1'
,'2016-기관-036-3'
,'2016-기관-036-6'
,'2016-기관-037-1'
,'2016-기관-037-4'
,'2016-기관-037-6'
,'2016-기관-037-12'
,'2016-기관-037-20'
,'2016-기관-037-25'
,'2016-기관-037-28'
,'2016-기관-037-29'
,'2016-기관-037-31'
,'2016-기관-038-10'
,'2016-기관-038-13'
,'2016-기관-040-2'
,'2016-특정-090-6'
,'2016-특정-090-7'
,'2016-특정-090-8'
,'2016-특정-090-9'
,'2016-특정-090-10'
,'2016-특정-090-12'
,'2016-특정-090-13'
,'2016-특정-090-14'
,'2016-특정-090-15'
,'2016-특정-090-16'
,'2016-특정-090-17'
,'2016-특정-090-18'
,'2016-특정-090-19'
,'2016-특정-090-20'
,'2016-특정-091-3'
,'2016-특정-093-5' 
 
)                
                
                
              ORDER BY DETAIL.ENF_BRDV_CD              
		]]>
	</select>	
	
		<resultMap class="java.util.HashMap" id="hwpDocMap">
		<result property="ENF_DT_NM" column="ENF_DT_NM" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="ENF_DT" column="ENF_DT" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="WRDO_TYP_CD" column="WRDO_TYP_CD" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="RLTN_ORG_CD" column="RLTN_ORG_CD" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="RLTN_ORG_NM" column="RLTN_ORG_NM" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="TIT_TXT" column="TIT_TXT" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="DSP_RQ_KND_CD" column="DSP_RQ_KND_CD" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="DSP_RQ_KND_NM" column="DSP_RQ_KND_NM" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="COPT_ORG_DVSN_CD" column="COPT_ORG_DVSN_CD" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="COPT_ORG_DVSN_NM" column="COPT_ORG_DVSN_NM" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
		<result property="DSP_RQ_HND_SBJ" column="DSP_RQ_HND_SBJ" jdbcType="CLOB"
			javaType="java.lang.String" />
		<result property="SUMPRT_ALL_TXT" column="SUMPRT_ALL_TXT" jdbcType="CLOB"
			javaType="java.lang.String" />
		<result property="RESULT" column="RESULT" jdbcType="VARCHAR2"
			javaType="java.lang.String" />
	</resultMap>
	<select id="BADEAR900EHwpSelect" parameterClass="paramMap" resultMap="hwpDocMap">
		<![CDATA[       
			SELECT TO_CHAR(TO_DATE(D2.ENF_DT),'YYYY. MM. DD')   AS ENF_DT_NM        /*실행일자*/
			     , D2.ENF_DT                                    AS ENF_DT           /*시행일자*/
			     , D2.WRDO_TYP_CD							AS WRDO_TYP_CD /*비위유형코드*/
			     , D3.RLTN_ORG_CD                               AS RLTN_ORG_CD      /*관계기관*/
			     , D3.RLTN_ORG_NM                               AS RLTN_ORG_NM      /*관계기관명*/
			     , D5.COPT_ORG_DVSN_CD                               AS COPT_ORG_DVSN_CD      /*소관청*/
			     , D5.COPT_ORG_DVSN_NM                               AS COPT_ORG_DVSN_NM      /*소관청명*/
			     , D1.TIT_TXT                                   AS TIT_TXT          /*제목*/
			     , D1.DSP_RQ_KND_CD                             AS DSP_RQ_KND_CD    /*처분요구종류*/    
			     , F_CODE_NM('1000002',D1.DSP_RQ_KND_CD )       AS DSP_RQ_KND_NM    /*처분요구종류명*/
		         , (CASE WHEN NVL(DBMS_LOB.GETLENGTH(D4.DSP_RQ_HND_SBJ_TXT),0) = 0 THEN D4.DSP_RQ_HND_SBJ
		              ELSE D4.DSP_RQ_HND_SBJ_TXT
		           END) AS DSP_RQ_HND_SBJ   
			     , D4.SUMPRT_ALL_TXT                                AS SUMPRT_ALL_TXT       /*요약전내용*/
			     , F_ENFO_INFO(D1.AUD_YR, D1.AUD_NO, D1.DSP_RQ_SNO, D3.RLTN_ORG_CD )                                           AS RESULT
			  FROM TBBADEAR001M D1
			     , TBBADEAR002D D2
			     , (
			        SELECT AUD_YR           AS AUD_YR
			             , AUD_NO           AS AUD_NO
			             , DSP_RQ_SNO       AS DSP_RQ_SNO
			             , MIN(RLTN_ORG_CD) AS RLTN_ORG_CD
			             , F_ORG_INFO(MIN(RLTN_ORG_CD),'1')  AS RLTN_ORG_NM
			          FROM TBBADEAR006M
			         GROUP BY AUD_YR , AUD_NO, DSP_RQ_SNO
			      ) D3
			      , TBBADEAR005M D4
			      , 	(
			        SELECT AUD_YR           AS AUD_YR
			             , AUD_NO           AS AUD_NO
			             , DSP_RQ_SNO       AS DSP_RQ_SNO
			             , MIN(RLTN_ORG_CD) AS COPT_ORG_DVSN_CD
			             , F_ORG_INFO(MIN(RLTN_ORG_CD),'1')  AS COPT_ORG_DVSN_NM
			          FROM TBBADEAR008M
			         GROUP BY AUD_YR , AUD_NO, DSP_RQ_SNO
			      ) D5
			 WHERE 1=1
			   AND D1.AUD_YR     = D2.AUD_YR        
			   AND D1.AUD_NO     = D2.AUD_NO
			   AND D1.DSP_RQ_SNO = D2.DSP_RQ_SNO
			   AND D1.AUD_YR     = D3.AUD_YR(+)        
			   AND D1.AUD_NO     = D3.AUD_NO(+)
			   AND D1.DSP_RQ_SNO = D3.DSP_RQ_SNO(+)
			   AND D1.AUD_YR     = D4.AUD_YR(+)        
			   AND D1.AUD_NO     = D4.AUD_NO(+)
			   AND D1.DSP_RQ_SNO = D4.DSP_RQ_SNO(+)
			   AND D1.AUD_YR     = D5.AUD_YR(+)        
			   AND D1.AUD_NO     = D5.AUD_NO(+)
			   AND D1.DSP_RQ_SNO = D5.DSP_RQ_SNO(+)
			   AND D1.AUD_YR     = #AUD_YR#       
			   AND D1.AUD_NO     = #AUD_NO#
			   AND D1.DSP_RQ_SNO = #DSP_RQ_SNO#			   
		]]>	
	</select>
	
</sqlMap> 
