<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/iit/015">
	
	<!-- 현행법령목록 조회 -->
	<select id="CSPIIT015EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	A.LAW_ORG_NM, 		/*법령기관명*/
					A.LAW_LNK_ID,			/*법령연결ID*/
					A.LAW_NM,			/*법령명*/
					A.PCM_DT,		/*공포일*/
					A.LAW_DVSN_NM		/*법령구분명*/
			FROM	TBBADCMR013M A	/*PC장비코드*/
			WHERE	1=1
        ]]>
        <dynamic>
        	<isNotEmpty property="strSEARCH_NM">
        		<isEqual property="strSEARCH_CD" compareValue="1">
        			AND	A.LAW_ORG_NM LIKE '%'||#strSEARCH_NM#||'%'
        		</isEqual>
        		<isEqual property="strSEARCH_CD" compareValue="2">
        			AND	A.LAW_NM LIKE '%'||#strSEARCH_NM#||'%'
        		</isEqual>
        		<isEqual property="strSEARCH_CD" compareValue="3">
        			AND	A.LAW_DVSN_NM LIKE '%'||#strSEARCH_NM#||'%'
        		</isEqual>
        	</isNotEmpty>
        </dynamic>
        <![CDATA[
        	ORDER BY A.LAW_LNK_ID
        ]]>
	</select>        
	
	<insert id="CSPIIT015EMainInsert" parameterClass="paramMap">
        <![CDATA[
        	INSERT INTO TBBADCMR013M       
			(
					ORG_CD,
					LAW_LNK_ID,
					LAW_ORG_NM,
					LAW_NM,
					PCM_DT,
					PCM_NO,
					ENF_DT,
					LAW_DVSN_CD,
					LAW_DVSN_NM,
					LAW_TIT_CD,
					LAW_TIT_NM,
					LAW_TXT,
					FRT_USR_ID,
					FNL_USR_ID,
					FNL_DEAL_DPT_CD,
					FNL_MNU_ID,
					FRT_REGI_DH,
					FNL_MDF_DH
			) VALUES (
					#ORG_CD#,
					#LAW_LNK_ID#,
					#LAW_ORG_NM#,
					#LAW_NM#,
					#PCM_DT#,
					#PCM_NO#,
					#ENF_DT#,
					#LAW_DVSN_CD#,
					#LAW_DVSN_NM#,
					#LAW_TIT_CD#,
					#LAW_TIT_NM#,
					#LAW_TXT#,
					#FRT_USR_ID#,
					#FNL_USR_ID#,
					#FNL_DEAL_DPT_CD#,
					#FNL_MNU_ID#,
					SYSDATE,
					SYSDATE
			)
        ]]>
	</insert>
	
	<delete id="CSPIIT015EMainDelete">
		<![CDATA[
			DELETE	FROM TBBADCMR013M
		]]>
	</delete>
	
	<!-- 현행법령목록 조회 -->
	<select id="CSPIIT015PMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[
			SELECT 	A.LAW_ORG_NM, 		/*법령기관명*/
					A.LAW_LNK_ID,			/*법령연결ID*/
					A.LAW_NM,			/*법령명*/
					A.PCM_DT,		/*공포일*/
					A.LAW_DVSN_NM		/*법령구분명*/
			FROM	TBBADCMR013M A	/*PC장비코드*/
			WHERE	1=1
        ]]>
        <dynamic>
        	<isNotEmpty property="strLAW_NM">
        		<isEqual property="strSEARCH_CD" compareValue="1">
        			AND	A.LAW_ORG_NM LIKE '%'||#strLAW_NM#||'%'
        		</isEqual>
        		<isEqual property="strSEARCH_CD" compareValue="2">
        			AND	A.LAW_NM LIKE '%'||#strLAW_NM#||'%'
        		</isEqual>
        		<isEqual property="strSEARCH_CD" compareValue="3">
        			AND	A.LAW_DVSN_NM LIKE '%'||#strLAW_NM#||'%'
        		</isEqual>
        		
        		<isEmpty property="strSEARCH_CD">
        			AND	(A.LAW_ORG_NM LIKE '%'||#strLAW_NM#||'%' OR 
        				A.LAW_NM LIKE '%'||#strLAW_NM#||'%' OR
        				A.LAW_LNK_ID LIKE '%'||#strLAW_NM#||'%' OR
        				A.LAW_DVSN_NM LIKE '%'||#strLAW_NM#||'%')
        		</isEmpty>
        	</isNotEmpty>
        </dynamic>
        <![CDATA[
        	ORDER BY A.LAW_LNK_ID
        ]]>
	</select>   
	
</sqlMap> 
