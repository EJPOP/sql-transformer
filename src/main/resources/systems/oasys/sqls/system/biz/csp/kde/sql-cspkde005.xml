<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/kde/005">

	<!-- 감사소명자료 조회 -->
	<select id="CSPKDE005EMainSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
            SELECT 
                   T1.AUD_YR                                              AS AUD_YR                   /* 감사년도 */ 
                  ,T1.AUD_NO                                              AS AUD_NO                   /* 감사번호 */
                  ,T2.AUD_GRN_NO                                          AS AUD_GRN_NO               /* 감사부여번호 - 2016.06.10 yyh */
			      ,CASE WHEN T2.AUD_YR >= '2016' 
			                 THEN T2.AUD_KND_CD
			            ELSE '' 
			        END                                                   AS AUD_YR_NO_KND_CD         /*감사연번호종류코드 추가 - 2016.06.10 yyh*/                  
                  ,T1.SRNO                                                AS SRNO                     /* 일련번호 */
                  ,F_DPT_INFO(T2.SPV_BRDV_CD,'1')                         AS AUD_DPT_NM               /* 감사부서 */
                  ,F_MNG_KND_AUDYRNO(T1.AUD_YR, T1.AUD_NO, T2.AUD_KND_CD, '-') || '-' || T1.SRNO        
                                                                          AS AUD_YR_NO                /* 감사연번호 */
                  ,T2.AUD_SBJ_NM                                          AS AUD_SBJ_NM               /* 감사사항명 */
                  ,T1.SMT_DT                                              AS SMT_DT                   /* 제출일 */
                  ,T1.PRSR                                                AS PRSR                     /* 제출자 */
                  ,T1.SMT_NOC                                             AS SMT_NOC                  /* 제출횟수 */
                  ,T1.MFEX_HNDL_STEP_CD                                   AS MFEX_HNDL_STEP_CD        /* 소명자료처리단계코드 */
                  ,F_CODE_NM('1000722',T1.MFEX_HNDL_STEP_CD)              AS MFEX_HNDL_STEP_NM        /* 소명자료처리단계코드명 */
                  ,SUBSTR(
                           DECODE(T1.MFEX_SMT_AIM_YN1, 'Y', ',사실관계상이') ||
                           DECODE(T1.MFEX_SMT_AIM_YN2, 'Y', ',새로운증거')   ||
                           DECODE(T1.MFEX_SMT_AIM_YN3, 'Y', ',법령해석 차이') ||
                           DECODE(T1.MFEX_SMT_AIM_YN4, 'Y', ',적극행정면책')  ||
                           DECODE(T1.MFEX_SMT_AIM_YN5, 'Y', ',정상참작 등 기타')    
                   ,2)                                                    AS MFEX_SMT_AIM_YN_NMS      /* 소명자료제출취지여부명 */
                  ,T1.MFEX_SMT_AIM_YN1                                    AS MFEX_SMT_AIM_YN1         /* 소명자료제출취지여부1 */
                  ,T1.MFEX_SMT_AIM_YN2                                    AS MFEX_SMT_AIM_YN2         /* 소명자료제출취지여부2 */
                  ,T1.MFEX_SMT_AIM_YN3                                    AS MFEX_SMT_AIM_YN3         /* 소명자료제출취지여부3 */
                  ,T1.MFEX_SMT_AIM_YN4                                    AS MFEX_SMT_AIM_YN4         /* 소명자료제출취지여부4 */
                  ,T1.MFEX_SMT_AIM_YN5                                    AS MFEX_SMT_AIM_YN5         /* 소명자료제출취지여부5 */
                  ,T1.AGT_YN_CD                                           AS AGT_YN_CD                /* 대리인여부코드 */
                  ,F_CODE_NM('1000724',T1.AGT_YN_CD)                      AS AGT_YN_NM                /* 대리인여부명 */
                  ,T1.AGRS_ADMN_EXET_APL_YN                               AS AGRS_ADMN_EXET_APL_YN    /* 적극행정면책신청여부 */
                  ,DECODE(T1.AGRS_ADMN_EXET_APL_YN,'Y','신청','미신청')    AS AGRS_ADMN_EXET_APL_YN_NM  /* 적극행정면책신청여부명 */
                  ,T1.FTFT_APL_YN                                         AS FTFT_APL_YN              /* 면담신청여부 */
                  ,DECODE(T1.FTFT_APL_YN,'Y','신청','미신청')              AS FTFT_APL_YN_NM           /* 면담신청여부명 */
                  ,T1.FTFT_EXEC_YN_CD                                     AS FTFT_EXEC_YN_CD          /* 면담실시여부코드 */
                  ,F_CODE_NM('1000725',T1.FTFT_EXEC_YN_CD)                AS FTFT_EXEC_YN_NM          /* 면담실시여부코드명 */
                  ,T1.ENF_DT                                              AS ENF_DT                   /* 시행일 */
                  ,T1.RCGT_YN                                             AS RCGT_YN                  /* 인정여부 */
                  ,DECODE(T1.RCGT_YN,'Y','인정','N','불인정','')           AS RCGT_YN_NM               /* 인정여부명 */
                  ,T1.INDC_SBJ                                            AS INDC_SBJ                 /* 지적사항 */
                  ,T1.RMK_SBJ                                             AS RMK_SBJ                  /* 비고사항 */
             FROM TBCSPKDE003M T1    /* 감사소명자료기본 */
                 ,TBBADDED001M T2    /* 감사사항기본 */
            WHERE 1=1 
              AND T1.AUD_YR = T2.AUD_YR(+)
              AND T1.AUD_NO = T2.AUD_NO(+) 
		]]>
		
		<!-- 감사년도 -->
		<isNotEmpty property="strAudYr">      
		      AND T1.AUD_YR = #strAudYr#
		</isNotEmpty>
		
		<!-- 감사번호 -->
		<isNotEmpty property="strAudGrnNo">      
		      AND T2.AUD_GRN_NO = #strAudGrnNo# 
		</isNotEmpty>
		
		<!-- 감사종류코드 조건 추가 - 2016.06.10 yyh -->
		<isNotEmpty property="strAudYrNoKndCd">	 	
			   AND SUBSTR(T2.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCd#,3,1)
		</isNotEmpty>			
		
		<!-- 제출일자 -->		
		      AND T1.SMT_DT BETWEEN NVL(#strSmtDtSt#,'19000101') AND NVL(#strSmtDtEd#,'29991231')  
		
		<!-- 접수시처리단계코드 -->		
		<isNotEmpty property="strMfexHndlStepCd">      
		      AND T1.MFEX_HNDL_STEP_CD = #strMfexHndlStepCd# 
		</isNotEmpty>		
		
		<!-- 감사사항명 -->		
		<isNotEmpty property="strAudSbjNm">      
		      AND T2.AUD_SBJ_NM LIKE '%' || #strAudSbjNm# || '%' 
		</isNotEmpty>	
		
		<!-- 지적사항명 -->		
		<isNotEmpty property="strIndcSbj">      
		      AND T1.INDC_SBJ LIKE '%' || #strIndcSbj# || '%' 
		</isNotEmpty>			
		
		<!-- 제출자 -->		
		<isNotEmpty property="strPrsr">      
		      AND T1.PRSR LIKE '%' || #strPrsr# || '%' 
		</isNotEmpty>	

		<!-- 제출횟수 -->		
		<isNotEmpty property="strSmtNoc">      
		      AND T1.SMT_NOC = #strSmtNoc# 
		</isNotEmpty>	

		<!-- 소명자료 제출취지 -->
		<!-- 
              AND ( 
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn1# = NVL(T1.MFEX_SMT_AIM_YN1,'') THEN 'Y'
                                  ELSE 'N' END )
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn2# = NVL(T1.MFEX_SMT_AIM_YN2,'') THEN 'Y'
                                  ELSE 'N' END )
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn3# = NVL(T1.MFEX_SMT_AIM_YN3,'') THEN 'Y'
                                  ELSE 'N' END )              
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn4# = NVL(T1.MFEX_SMT_AIM_YN4,'') THEN 'Y'
                                  ELSE 'N' END )              
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn5# = NVL(T1.MFEX_SMT_AIM_YN5,'') THEN 'Y'
                                  ELSE 'N' END )
                  )  
		-->		

		<isNotEmpty property="strMfexSmtAimYn1">      
		      AND T1.MFEX_SMT_AIM_YN1 IS NOT NULL /* 사실관계상이 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn2">      
		      AND T1.MFEX_SMT_AIM_YN2 IS NOT NULL /* 새로운증거 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn3">      
		      AND T1.MFEX_SMT_AIM_YN3 IS NOT NULL /* 법령해석차이 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn4">      
		      AND T1.MFEX_SMT_AIM_YN4 IS NOT NULL /* 적극행정면책 */ 
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn5">      
		      AND T1.MFEX_SMT_AIM_YN5 IS NOT NULL /* 정상참작 등 기타 */ 
		</isNotEmpty>
              
		<!-- 대리인등 여부 -->
		<isNotEmpty property="strAgtYnCd">      
		      AND T1.AGT_YN_CD = #strAgtYnCd#  
		</isNotEmpty>			
		
		<!-- 적극행정면책 신청여부 -->
		<isNotEmpty property="strAgrsAdmnExetAplYn">      
		      AND T1.AGRS_ADMN_EXET_APL_YN = #strAgrsAdmnExetAplYn#  
		</isNotEmpty>
		
		<!-- 면담 신청여부 -->
		<isNotEmpty property="strFtftAplYn">      
		      AND T1.FTFT_APL_YN = #strFtftAplYn#  
		</isNotEmpty>		
				
		<!-- 면담 실시여부 -->
		<isNotEmpty property="strFtftExecYn">      
		      AND T1.FTFT_EXEC_YN_CD = #strFtftExecYnCd#  
		</isNotEmpty>	

		<!-- 시행일 -->
		      AND NVL(T1.ENF_DT,'19000101') BETWEEN NVL(#strEnfDtSt#,'19000101') AND NVL(#strEnfDtEd#,'29991231')

		<!-- 인정여부 -->
		<isNotEmpty property="strRcgtYn">      
		      AND T1.RCGT_YN = #strRcgtYn#  
		</isNotEmpty>
								
		<![CDATA[
		    ORDER BY T1.SMT_DT, T2.SPV_BRDV_CD   
		]]>			
	</select>
	
	<!-- 일련번호 Max값 찾기 -->
	<select id="CSPKDE005EMainMaxSrnoSelect" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[     	
				SELECT TO_CHAR(NVL(MAX(SRNO),0) + 1) AS MAX_SRNO
				  FROM TBCSPKDE003M 
				 WHERE AUD_YR = #AUD_YR#
				   AND AUD_NO = #AUD_NO#
		]]>
	</select>	
	
	<!-- 감사소명자료 입력 -->
	<insert id="CSPKDE005EMainInsert" parameterClass="paramMap">	
		 INSERT INTO TBCSPKDE003M (    
	                 AUD_YR                       /* 감사년도               */
	                ,AUD_NO                       /* 감사번호               */
	                ,SRNO                         /* 일련번호               */
	                ,SMT_DT                       /* 제출일                 */
	                ,PRSR                         /* 제출자                 */
	                ,SMT_NOC                      /* 제출횟수               */
	                ,MFEX_HNDL_STEP_CD            /* 소명자료처리단계코드   */
	                ,MFEX_SMT_AIM_YN1             /* 소명자료제출취지여부1  */
	                ,MFEX_SMT_AIM_YN2             /* 소명자료제출취지여부2  */
	                ,MFEX_SMT_AIM_YN3             /* 소명자료제출취지여부3  */
	                ,MFEX_SMT_AIM_YN4             /* 소명자료제출취지여부4  */
	                ,MFEX_SMT_AIM_YN5             /* 소명자료제출취지여부5  */
	                ,AGT_YN_CD                    /* 대리인여부코드         */
	                ,AGRS_ADMN_EXET_APL_YN        /* 적극행정면책신청여부   */
	                ,FTFT_APL_YN                  /* 면담신청여부           */
	                ,FTFT_EXEC_YN_CD              /* 면담실시여부코드       */
	                ,ENF_DT                       /* 시행일                 */
	                ,RCGT_YN                      /* 인정여부               */
	                ,INDC_SBJ                     /* 지적사항               */
	                ,RMK_SBJ                      /* 비고사항               */
	                ,FRT_USR_ID                   /* 최초사용자ID         */
	                ,FNL_USR_ID                   /* 최종사용자ID         */
	                ,FNL_DEAL_DPT_CD              /* 최종거래부서코드       */
	                ,FNL_MNU_ID                   /* 최종메뉴ID           */
	                ,FRT_REGI_DH                  /* 최초등록일시           */
	                ,FNL_MDF_DH                   /* 최종수정일시           */
	        ) VALUES (
	                 #AUD_YR#                     /* 감사년도               */ 
	                ,#AUD_NO#                     /* 감사번호               */
                    ,#SRNO#                       /* 일련번호               */
	                ,#SMT_DT#                     /* 제출일                 */ 
	                ,#PRSR#                       /* 제출자                 */ 
	                ,#SMT_NOC#                    /* 제출횟수               */ 
	                ,#MFEX_HNDL_STEP_CD#          /* 소명자료처리단계코드   */
	                ,#MFEX_SMT_AIM_YN1#           /* 소명자료제출취지여부1  */
	                ,#MFEX_SMT_AIM_YN2#           /* 소명자료제출취지여부2  */
	                ,#MFEX_SMT_AIM_YN3#           /* 소명자료제출취지여부3  */
	                ,#MFEX_SMT_AIM_YN4#           /* 소명자료제출취지여부4  */
	                ,#MFEX_SMT_AIM_YN5#           /* 소명자료제출취지여부5  */
	                ,#AGT_YN_CD#                  /* 대리인여부코드         */ 
	                ,#AGRS_ADMN_EXET_APL_YN#      /* 적극행정면책신청여부   */ 
	                ,#FTFT_APL_YN#                /* 면담신청여부           */ 
	                ,#FTFT_EXEC_YN_CD#            /* 면담실시여부코드       */ 
	                ,#ENF_DT#                     /* 시행일                 */ 
	                ,#RCGT_YN#                    /* 인정여부               */ 
	                ,#INDC_SBJ#                   /* 지적사항               */ 
	                ,#RMK_SBJ#                    /* 비고사항               */ 
	                ,#FRT_USR_ID#                 /* 최초사용자ID         */ 
	                ,#FNL_USR_ID#                 /* 최종사용자ID         */ 
	                ,#FNL_DEAL_DPT_CD#            /* 최종거래부서코드       */ 
	                ,#FNL_MNU_ID#                 /* 최종메뉴ID           */ 
	                ,SYSDATE                      /* 최초등록일시           */ 
	                ,SYSDATE                      /* 최종수정일시           */ 
	        )
	</insert>
	
	<!-- 감사소명자료 수정 -->
	<update id="CSPKDE005EMainUpdate" parameterClass="paramMap">
         UPDATE TBCSPKDE003M
            SET  SMT_DT                    = #SMT_DT#                  /* 제출일                 */
                ,PRSR                      = #PRSR#                    /* 제출자                 */
                ,SMT_NOC                   = #SMT_NOC#                 /* 제출횟수               */
                ,MFEX_HNDL_STEP_CD         = #MFEX_HNDL_STEP_CD#       /* 소명자료처리단계코드   */
                ,MFEX_SMT_AIM_YN1          = #MFEX_SMT_AIM_YN1#        /* 소명자료제출취지여부1  */
                ,MFEX_SMT_AIM_YN2          = #MFEX_SMT_AIM_YN2#        /* 소명자료제출취지여부2  */
                ,MFEX_SMT_AIM_YN3          = #MFEX_SMT_AIM_YN3#        /* 소명자료제출취지여부3  */
                ,MFEX_SMT_AIM_YN4          = #MFEX_SMT_AIM_YN4#        /* 소명자료제출취지여부4  */
                ,MFEX_SMT_AIM_YN5          = #MFEX_SMT_AIM_YN5#        /* 소명자료제출취지여부5  */
                ,AGT_YN_CD                 = #AGT_YN_CD#               /* 대리인여부코드         */
                ,AGRS_ADMN_EXET_APL_YN     = #AGRS_ADMN_EXET_APL_YN#   /* 적극행정면책신청여부   */
                ,FTFT_APL_YN               = #FTFT_APL_YN#             /* 면담신청여부           */
                ,FTFT_EXEC_YN_CD           = #FTFT_EXEC_YN_CD#         /* 면담실시여부코드       */
                ,ENF_DT                    = #ENF_DT#                  /* 시행일                 */
                ,RCGT_YN                   = #RCGT_YN#                 /* 인정여부               */
                ,INDC_SBJ                  = #INDC_SBJ#                /* 지적사항               */
                ,RMK_SBJ                   = #RMK_SBJ#                 /* 비고사항               */
                ,FNL_USR_ID                = #FNL_USR_ID#              /* 최종사용자ID         */
                ,FNL_DEAL_DPT_CD           = #FNL_DEAL_DPT_CD#         /* 최종거래부서코드       */
                ,FNL_MNU_ID                = #FNL_MNU_ID#              /* 최종메뉴ID           */
                ,FNL_MDF_DH                = SYSDATE                   /* 최종수정일시           */
          WHERE AUD_YR = #AUD_YR#
            AND AUD_NO = #AUD_NO#
            AND SRNO   = #SRNO#		
	</update>
	
	<!-- 감사소명자료 삭제 -->	
	<update id="CSPKDE005EMainDelete" parameterClass="paramMap">
        DELETE 
          FROM TBCSPKDE003M
          WHERE AUD_YR = #AUD_YR#
            AND AUD_NO = #AUD_NO#
            AND SRNO   = #SRNO#	
	</update>	
		
		
	<!-- 엑셀용 감사소명자료 조회 -->
	<select id="CSPKDE005EExcelSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
            SELECT 
                   T1.AUD_YR                                              AS AUD_YR                   /* 감사년도 */ 
                  ,T1.AUD_NO                                              AS AUD_NO                   /* 감사번호 */
                  ,F_DPT_INFO(T2.SPV_BRDV_CD,'1')                         AS AUD_DPT_NM               /* 감사부서 */
                  ,F_MNG_KND_AUDYRNO(T1.AUD_YR, T1.AUD_NO, T2.AUD_KND_CD, '-') || '-' || T1.SRNO 
                                                                          AS AUD_YR_NO                /* 감사연번호 */
                  ,T2.AUD_SBJ_NM                                          AS AUD_SBJ_NM               /* 감사사항명 */
                  ,TO_CHAR(TO_DATE(T1.SMT_DT),'YYYY-MM-DD')               AS SMT_DT                   /* 제출일 */
                  ,T1.PRSR                                                AS PRSR                     /* 제출자 */
                  ,T1.SMT_NOC                                             AS SMT_NOC                  /* 제출횟수 */
                  ,T1.MFEX_HNDL_STEP_CD                                   AS MFEX_HNDL_STEP_CD        /* 소명자료처리단계코드 */
                  ,F_CODE_NM('1000722',T1.MFEX_HNDL_STEP_CD)              AS MFEX_HNDL_STEP_NM        /* 소명자료처리단계코드명 */
                  ,SUBSTR(
                           DECODE(T1.MFEX_SMT_AIM_YN1, 'Y', ',사실관계상이') ||
                           DECODE(T1.MFEX_SMT_AIM_YN2, 'Y', ',새로운증거')   ||
                           DECODE(T1.MFEX_SMT_AIM_YN3, 'Y', ',법령해석 차이') ||
                           DECODE(T1.MFEX_SMT_AIM_YN4, 'Y', ',적극행정면책')  ||
                           DECODE(T1.MFEX_SMT_AIM_YN5, 'Y', ',정상참작 등 기타')    
                   ,2)                                                    AS MFEX_SMT_AIM_YN_NMS      /* 소명자료제출취지여부명 */
                  ,T1.MFEX_SMT_AIM_YN1                                    AS MFEX_SMT_AIM_YN1         /* 소명자료제출취지여부1 */
                  ,T1.MFEX_SMT_AIM_YN2                                    AS MFEX_SMT_AIM_YN2         /* 소명자료제출취지여부2 */
                  ,T1.MFEX_SMT_AIM_YN3                                    AS MFEX_SMT_AIM_YN3         /* 소명자료제출취지여부3 */
                  ,T1.MFEX_SMT_AIM_YN4                                    AS MFEX_SMT_AIM_YN4         /* 소명자료제출취지여부4 */
                  ,T1.MFEX_SMT_AIM_YN5                                    AS MFEX_SMT_AIM_YN5         /* 소명자료제출취지여부5 */
                  ,T1.AGT_YN_CD                                           AS AGT_YN_CD                /* 대리인여부코드 */
                  ,F_CODE_NM('1000724',T1.AGT_YN_CD)                      AS AGT_YN_NM                /* 대리인여부명 */
                  ,T1.AGRS_ADMN_EXET_APL_YN                               AS AGRS_ADMN_EXET_APL_YN    /* 적극행정면책신청여부 */
                  ,DECODE(T1.AGRS_ADMN_EXET_APL_YN,'Y','신청','미신청')    AS AGRS_ADMN_EXET_APL_YN_NM  /* 적극행정면책신청여부명 */
                  ,T1.FTFT_APL_YN                                         AS FTFT_APL_YN              /* 면담신청여부 */
                  ,DECODE(T1.FTFT_APL_YN,'Y','신청','미신청')              AS FTFT_APL_YN_NM           /* 면담신청여부명 */
                  ,T1.FTFT_EXEC_YN_CD                                     AS FTFT_EXEC_YN_CD          /* 면담실시여부코드 */
                  ,F_CODE_NM('1000725',T1.FTFT_EXEC_YN_CD)                AS FTFT_EXEC_YN_NM          /* 면담실시여부코드명 */
                  ,TO_CHAR(TO_DATE(T1.ENF_DT),'YYYY-MM-DD')               AS ENF_DT                   /* 시행일 */
                  ,T1.RCGT_YN                                             AS RCGT_YN                  /* 인정여부 */
                  ,DECODE(T1.RCGT_YN,'Y','인정','N','불인정','')           AS RCGT_YN_NM               /* 인정여부명 */
                  ,T1.INDC_SBJ                                            AS INDC_SBJ                 /* 지적사항 */
                  ,T1.RMK_SBJ                                             AS RMK_SBJ                  /* 비고사항 */
             FROM TBCSPKDE003M T1    /* 감사소명자료기본 */
                 ,TBBADDED001M T2    /* 감사사항기본 */
            WHERE 1=1 
              AND T1.AUD_YR = T2.AUD_YR(+)
              AND T1.AUD_NO = T2.AUD_NO(+) 
		]]>
		
		<!-- 감사년도 -->
		<isNotEmpty property="strAudYr">      
		      AND T1.AUD_YR = #strAudYr#
		</isNotEmpty>
		
		<!-- 감사번호 -->
		<isNotEmpty property="strAudGrnNo">      
		      AND T2.AUD_GRN_NO = #strAudGrnNo# 
		</isNotEmpty>
		
		<!-- 감사종류코드 조건 추가 - 2016.06.10 yyh -->
		<isNotEmpty property="strAudYrNoKndCd">	 	
			   AND SUBSTR(T2.AUD_KND_CD,3,1) = SUBSTR(#strAudYrNoKndCd#,3,1) 
		</isNotEmpty>	
		
		<!-- 제출일자 -->		
		      AND T1.SMT_DT BETWEEN NVL(#strSmtDtSt#,'19000101') AND NVL(#strSmtDtEd#,'29991231')  			
		
		<!-- 접수시처리단계코드 -->		
		<isNotEmpty property="strMfexHndlStepCd">      
		      AND T1.MFEX_HNDL_STEP_CD = #strMfexHndlStepCd# 
		</isNotEmpty>		
		
		<!-- 감사사항명 -->		
		<isNotEmpty property="strAudSbjNm">      
		      AND T2.AUD_SBJ_NM LIKE '%' || #strAudSbjNm# || '%' 
		</isNotEmpty>	
		
		<!-- 지적사항명 -->		
		<isNotEmpty property="strIndcSbj">      
		      AND T1.INDC_SBJ LIKE '%' || #strIndcSbj# || '%' 
		</isNotEmpty>			
		
		<!-- 제출자 -->		
		<isNotEmpty property="strPrsr">      
		      AND T1.PRSR LIKE '%' || #strPrsr# || '%' 
		</isNotEmpty>	

		<!-- 제출횟수 -->		
		<isNotEmpty property="strSmtNoc">      
		      AND T1.SMT_NOC = #strSmtNoc# 
		</isNotEmpty>
		
		<!-- 소명자료 제출취지 -->
		<!-- 
              AND ( 
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn1# = NVL(T1.MFEX_SMT_AIM_YN1,'') THEN 'Y'
                                  ELSE 'N' END )
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn2# = NVL(T1.MFEX_SMT_AIM_YN2,'') THEN 'Y'
                                  ELSE 'N' END )
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn3# = NVL(T1.MFEX_SMT_AIM_YN3,'') THEN 'Y'
                                  ELSE 'N' END )              
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn4# = NVL(T1.MFEX_SMT_AIM_YN4,'') THEN 'Y'
                                  ELSE 'N' END )              
                   OR  
                      'Y' = (
                             CASE WHEN #strMfexSmtAimYn5# = NVL(T1.MFEX_SMT_AIM_YN5,'') THEN 'Y'
                                  ELSE 'N' END )
                  )  
		-->
		 
		<isNotEmpty property="strMfexSmtAimYn1">      
		      AND T1.MFEX_SMT_AIM_YN1 IS NOT NULL /* 사실관계상이 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn2">      
		      AND T1.MFEX_SMT_AIM_YN2 IS NOT NULL /* 새로운증거 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn3">      
		      AND T1.MFEX_SMT_AIM_YN3 IS NOT NULL /* 법령해석차이 */
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn4">      
		      AND T1.MFEX_SMT_AIM_YN4 IS NOT NULL /* 적극행정면책 */ 
		</isNotEmpty>	

		<isNotEmpty property="strMfexSmtAimYn5">      
		      AND T1.MFEX_SMT_AIM_YN5 IS NOT NULL /* 정상참작 등 기타 */ 
		</isNotEmpty>
		
		
		<!-- 대리인등 여부 -->
		<isNotEmpty property="strAgtYnCd">      
		      AND T1.AGT_YN_CD = #strAgtYnCd#  
		</isNotEmpty>			
		
		<!-- 적극행정면책 신청여부 -->
		<isNotEmpty property="strAgrsAdmnExetAplYn">      
		      AND T1.AGRS_ADMN_EXET_APL_YN = #strAgrsAdmnExetAplYn#  
		</isNotEmpty>
		
		<!-- 면담 신청여부 -->
		<isNotEmpty property="strFtftAplYn">      
		      AND T1.FTFT_APL_YN = #strFtftAplYn#  
		</isNotEmpty>		
				
		<!-- 면담 실시여부 -->
		<isNotEmpty property="strFtftExecYn">      
		      AND T1.FTFT_EXEC_YN_CD = #strFtftExecYnCd#  
		</isNotEmpty>	

		<!-- 시행일 -->
		      AND NVL(T1.ENF_DT,'19000101') BETWEEN NVL(#strEnfDtSt#,'19000101') AND NVL(#strEnfDtEd#,'29991231')

		<!-- 인정여부 -->
		<isNotEmpty property="strRcgtYn">      
		      AND T1.RCGT_YN = #strRcgtYn#  
		</isNotEmpty>
								
		<![CDATA[
		    ORDER BY T1.SMT_DT, T2.SPV_BRDV_CD    
		]]>			
	</select>		
</sqlMap>
