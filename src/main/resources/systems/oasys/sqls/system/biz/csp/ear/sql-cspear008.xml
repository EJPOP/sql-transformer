<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/ear/008">
 	<select id="CSPEAR008QMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	A.REQ_DVSN_CD , ACP_CNT, CNT1, CNT2, CNT3, CNT4, CNT5, CNT55, CNT6, CNT7, CNT8, CNT9, CNT10, ROUND(RTE) AS RTE
			FROM	(
						SELECT	A.REQ_DVSN_CD , ACP_CNT, (CNT2+CNT3+CNT4+CNT5+CNT6+CNT7+CNT55) AS CNT1, CNT2, CNT3, CNT4, CNT5, CNT55 ,CNT6, CNT7, (CNT9+CNT10) AS CNT8, CNT9, CNT10
								,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
						FROM	(
									SELECT	C.REQ_DVSN_NM AS REQ_DVSN_CD,
											NVL(COUNT(A.REQ_DVSN_CD),0) AS ACP_CNT,
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2, 
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3, 
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4, 
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5,
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55, 
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6,
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7,
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9,
											NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
									FROM 	TBCSPDCP101M A, TBCSPEAR001M B 
											,(	SELECT '2' AS REQ_DVSN_CD, '국민' AS REQ_DVSN_NM   FROM DUAL
												UNION ALL
												SELECT '3' AS REQ_DVSN_CD, '공익' AS REQ_DVSN_NM   FROM DUAL
											) C
									WHERE 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
									AND 	A.ACP_YR = B.ACP_YR (+)
									AND     A.REQ_DVSN_CD(+) = C.REQ_DVSN_CD
									AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
									AND		A.CVPT_HNDL_STA_CD(+) NOT IN ('10','21')
		]]>
								<isEqual property="strDT_CD" compareValue="1">
									<isNotEmpty property="strDTS">
										AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
									</isNotEmpty>
									<isNotEmpty property="strDTE">
										AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
									</isNotEmpty>
								</isEqual>
								<isEqual property="strDT_CD" compareValue="2">
									<isNotEmpty property="strDTS">
										AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
									</isNotEmpty>
									<isNotEmpty property="strDTE">
										AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
									</isNotEmpty>
								</isEqual>
		<![CDATA[
									GROUP BY C.REQ_DVSN_NM
								) A
						UNION ALL
						SELECT	A.REQ_DVSN_CD , ACP_CNT, (CNT2+CNT3+CNT4+CNT5+CNT55+CNT6+CNT7) AS CNT1, CNT2, CNT3, CNT4, CNT5,CNT55, CNT6, CNT7, (CNT9+CNT10) AS CNT8, CNT9, CNT10
								,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
						FROM	(
								SELECT	'합계' AS REQ_DVSN_CD,
										NVL(COUNT(*),0) AS ACP_CNT,
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2, 
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3, 
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4, 
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5,
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55, 
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6,
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7,
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9,
										NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
								FROM 	TBCSPDCP101M A, TBCSPEAR001M B 
								WHERE 	A.REQ_DVSN_CD IN ('2','3')
								AND 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
								AND 	A.ACP_YR = B.ACP_YR (+)
								AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
								AND		A.CVPT_HNDL_STA_CD NOT IN ('10','21')
		]]>
							<isEqual property="strDT_CD" compareValue="1">
								<isNotEmpty property="strDTS">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
								</isNotEmpty>
							</isEqual>
							<isEqual property="strDT_CD" compareValue="2">
								<isNotEmpty property="strDTS">
									AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
								</isNotEmpty>
							</isEqual>
		<![CDATA[
								) A
					) A
		]]>
	</select>
	
	<select id="CSPEAR008QSubSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT 	A.ACP_YR, A.ACP_CNT, A.CNT1, A.CNT2, A.CNT3, A.CNT4, A.CNT5,A.CNT55, A.CNT6, A.CNT7, A.CNT8, A.CNT9, A.CNT10, 
					ROUND(A.AVG_DAY1) AS AVG_DAY1, ROUND(A.AVG_DAY2) AS AVG_DAY2, ROUND(A.AVG_DAY3) AS AVG_DAY3, ROUND(A.RTE) AS RTE
			FROM	(
						SELECT 	A.ACP_YR
								,A.ACP_CNT
								,(A.CNT2+A.CNT3+A.CNT4+A.CNT5+A.CNT55+A.CNT6+A.CNT7) AS CNT1
								,A.CNT2
								,A.CNT3
								,A.CNT4
								,A.CNT5
								,A.CNT55
								,A.CNT6
								,A.CNT7
								,(A.CNT10+A.CNT9) AS CNT8 
								,A.CNT9
								,A.CNT10
								,DECODE(DAY1_CNT,0,0,A.DAY1/A.DAY1_CNT) AS AVG_DAY1
								,DECODE(DAY1_CNT,0,0,A.DAY2/A.DAY1_CNT) AS AVG_DAY2
								,DECODE(DAY1_CNT,0,0,A.DAY3/A.DAY1_CNT) AS AVG_DAY3
								,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
						FROM	( 
									SELECT	A.ACP_YR
											,COUNT(*) AS ACP_CNT
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2 
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4 
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
											,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
					 							ELSE 0 END) AS DAY1
											,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN 1
					 							ELSE 0 END) AS DAY1_CNT
					 						,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_RPL_DT) - TO_DATE(PREI_APV_DT)
													WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD'))
					 							ELSE 0 END) AS DAY2
					  						,SUM(CASE WHEN AUD_RSLT_CD = '02' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '03' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '04' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '06' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '07' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
					 							ELSE 0 END) AS DAY3
									FROM	TBCSPDCP101M A, TBCSPEAR001M B 
									WHERE 	A.REQ_DVSN_CD = '2'
									AND 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
									AND 	A.ACP_YR = B.ACP_YR (+)
									AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
									AND		A.CVPT_HNDL_STA_CD NOT IN ('10','21')
		]]>
							<isEqual property="strDT_CD" compareValue="1">
								<isNotEmpty property="strDTS">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
								</isNotEmpty>
							</isEqual>
							<isEqual property="strDT_CD" compareValue="2">
								<isNotEmpty property="strDTS">
									AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
								</isNotEmpty>
							</isEqual>
		<![CDATA[
									GROUP BY A.ACP_YR 
								) A
					UNION ALL
					SELECT 	A.ACP_YR
							,A.ACP_CNT
							,(A.CNT2+A.CNT3+A.CNT4+A.CNT5+A.CNT55+A.CNT6+A.CNT7) AS CNT1
							,A.CNT2
							,A.CNT3
							,A.CNT4
							,A.CNT5
							,A.CNT55
							,A.CNT6
							,A.CNT7
							,(A.CNT10+A.CNT9) AS CNT8 
							,A.CNT9
							,A.CNT10
							,DECODE(DAY1_CNT,0,0,A.DAY1/A.DAY1_CNT) AS AVG_DAY1
							,DECODE(DAY1_CNT,0,0,A.DAY2/A.DAY1_CNT) AS AVG_DAY2
							,DECODE(DAY1_CNT,0,0,A.DAY3/A.DAY1_CNT) AS AVG_DAY3
							,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
					FROM	( 
								SELECT	'합계' AS ACP_YR
										,COUNT(*) AS ACP_CNT
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2 
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4 
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55 
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
										,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
				 							ELSE 0 END) AS DAY1
										,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN 1
				 							ELSE 0 END) AS DAY1_CNT
				 						,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_RPL_DT) - TO_DATE(PREI_APV_DT)
												WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD'))
				 							ELSE 0 END) AS DAY2
				  						,SUM(CASE WHEN AUD_RSLT_CD = '02' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '03' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '04' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '06' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '07' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
				 							ELSE 0 END) AS DAY3
								FROM	TBCSPDCP101M A, TBCSPEAR001M B 
								WHERE 	A.REQ_DVSN_CD = '2'
								AND 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
								AND 	A.ACP_YR = B.ACP_YR (+)
								AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
								AND		A.CVPT_HNDL_STA_CD NOT IN ('10','21')
			]]>
						<isEqual property="strDT_CD" compareValue="1">
							<isNotEmpty property="strDTS">
								AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
							</isNotEmpty>
							<isNotEmpty property="strDTE">
								AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
							</isNotEmpty>
						</isEqual>
						<isEqual property="strDT_CD" compareValue="2">
							<isNotEmpty property="strDTS">
								AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
							</isNotEmpty>
							<isNotEmpty property="strDTE">
								AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
							</isNotEmpty>
						</isEqual>
		<![CDATA[
							) A
					) A
		]]>
	</select>
	
	<select id="CSPEAR008QSubSelect2" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT 	A.ACP_YR, A.ACP_CNT, A.CNT1, A.CNT2, A.CNT3, A.CNT4, A.CNT5,A.CNT55, A.CNT6, A.CNT7, A.CNT8, A.CNT9, A.CNT10, 
					ROUND(A.AVG_DAY1) AS AVG_DAY1, ROUND(A.AVG_DAY2) AS AVG_DAY2, ROUND(A.AVG_DAY3) AS AVG_DAY3, ROUND(A.RTE) AS RTE
			FROM	(
						SELECT 	A.ACP_YR
								,A.ACP_CNT
								,(A.CNT2+A.CNT3+A.CNT4+A.CNT5+A.CNT55+A.CNT6+A.CNT7) AS CNT1
								,A.CNT2
								,A.CNT3
								,A.CNT4
								,A.CNT5
								,A.CNT55
								,A.CNT6
								,A.CNT7
								,(A.CNT10+A.CNT9) AS CNT8 
								,A.CNT9
								,A.CNT10
								,DECODE(DAY1_CNT,0,0,A.DAY1/A.DAY1_CNT) AS AVG_DAY1
								,DECODE(DAY1_CNT,0,0,A.DAY2/A.DAY1_CNT) AS AVG_DAY2
								,DECODE(DAY1_CNT,0,0,A.DAY3/A.DAY1_CNT) AS AVG_DAY3
								,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
						FROM	( 
									SELECT	A.ACP_YR
											,COUNT(*) AS ACP_CNT
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2 
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4 
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9
											,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
											,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
					 							ELSE 0 END) AS DAY1
											,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN 1
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN 1
					 							ELSE 0 END) AS DAY1_CNT
					 						,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
													WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_RPL_DT) - TO_DATE(PREI_APV_DT)
													WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD'))
					 							ELSE 0 END) AS DAY2
					  						,SUM(CASE WHEN AUD_RSLT_CD = '02' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '03' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '04' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '06' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '07' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
													WHEN  AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
					 							ELSE 0 END) AS DAY3
									FROM	TBCSPDCP101M A, TBCSPEAR001M B 
									WHERE 	A.REQ_DVSN_CD = '3'
									AND 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
									AND 	A.ACP_YR = B.ACP_YR (+)
									AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
									AND		A.CVPT_HNDL_STA_CD NOT IN ('10','21')
		]]>
							<isEqual property="strDT_CD" compareValue="1">
								<isNotEmpty property="strDTS">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
								</isNotEmpty>
							</isEqual>
							<isEqual property="strDT_CD" compareValue="2">
								<isNotEmpty property="strDTS">
									AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
								</isNotEmpty>
								<isNotEmpty property="strDTE">
									AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
								</isNotEmpty>
							</isEqual>
		<![CDATA[
									GROUP BY A.ACP_YR 
							) A
					UNION ALL
					SELECT 	A.ACP_YR
							,A.ACP_CNT
							,(A.CNT2+A.CNT3+A.CNT4+A.CNT5+A.CNT55+A.CNT6+A.CNT7) AS CNT1
							,A.CNT2
							,A.CNT3
							,A.CNT4
							,A.CNT5
							,A.CNT55
							,A.CNT6
							,A.CNT7
							,(A.CNT10+A.CNT9) AS CNT8 
							,A.CNT9
							,A.CNT10
							,DECODE(DAY1_CNT,0,0,A.DAY1/A.DAY1_CNT) AS AVG_DAY1
							,DECODE(DAY1_CNT,0,0,A.DAY2/A.DAY1_CNT) AS AVG_DAY2
							,DECODE(DAY1_CNT,0,0,A.DAY3/A.DAY1_CNT) AS AVG_DAY3
							,DECODE((A.CNT2+A.CNT3+A.CNT4+A.CNT9),0,0,((A.CNT2+A.CNT3+A.CNT9)/(A.CNT2+A.CNT3+A.CNT4+A.CNT9))*100)  AS RTE
					FROM	( 
								SELECT	'합계' AS ACP_YR
										,COUNT(*) AS ACP_CNT
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='06' THEN 1 ELSE 0 END),0) AS CNT2 
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='07' THEN 1 ELSE 0 END),0) AS CNT3
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD IN ('02','04') THEN 1 ELSE 0 END),0) AS CNT4 
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND (B.PREI_DMS_RSN_CD IS NULL OR B.PREI_DMS_RSN_CD <> '0300' ) THEN 1 ELSE 0 END),0) AS CNT5
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='03' AND B.PREI_DMS_RSN_CD = '0300' THEN 1 ELSE 0 END),0) AS CNT55
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='08' THEN 1 ELSE 0 END),0) AS CNT6
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD ='05' THEN 1 ELSE 0 END),0) AS CNT7
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('150','160') THEN 1 ELSE 0 END),0) AS CNT9
										,NVL(SUM(CASE WHEN A.CVPT_HNDL_STA_CD IN ('20','23','30','110','120','125','130','140') THEN 1 ELSE 0 END),0) AS CNT10
										,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RPT_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_APV_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
				 							ELSE 0 END) AS DAY1
										,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN 1
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN 1
				 							ELSE 0 END) AS DAY1_CNT
				 						,SUM(CASE WHEN A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '01' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '02' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '03' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND REQ_EXAM_RSLT_CD = '04' THEN TO_DATE(EXAM_RSLT_RPL_DT) - TO_DATE(EXAM_RPT_APV_DT)
												WHEN  A.CVPT_HNDL_STA_CD ='170' AND PREI_DMS_YN = 'Y' THEN TO_DATE(PREI_RPL_DT) - TO_DATE(PREI_APV_DT)
												WHEN A.CVPT_HNDL_STA_CD ='170' AND AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD'))
				 							ELSE 0 END) AS DAY2
				  						,SUM(CASE WHEN AUD_RSLT_CD = '02' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '03' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '04' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '06' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '07' THEN TO_DATE(AUD_RSLT_RPL_DT) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
												WHEN  AUD_RSLT_CD = '08' THEN TO_DATE(TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD')) - TO_DATE(TO_CHAR(ACP_DH,'YYYYMMDD')) 
				 							ELSE 0 END) AS DAY3
								FROM	TBCSPDCP101M A, TBCSPEAR001M B 
								WHERE 	A.REQ_DVSN_CD = '3'
								AND 	A.REQ_DVSN_CD = B.REQ_DVSN_CD (+)
								AND 	A.ACP_YR = B.ACP_YR (+)
								AND 	A.CVPT_ACP_NO = B.CVPT_ACP_NO(+)
								AND		A.CVPT_HNDL_STA_CD NOT IN ('10','21')
			]]>
						<isEqual property="strDT_CD" compareValue="1">
							<isNotEmpty property="strDTS">
								AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &gt; #strDTS#
							</isNotEmpty>
							<isNotEmpty property="strDTE">
								AND	TO_CHAR(A.ACP_DH,'YYYYMMDD') &lt; #strDTE#
							</isNotEmpty>
						</isEqual>
						<isEqual property="strDT_CD" compareValue="2">
							<isNotEmpty property="strDTS">
								AND	(B.AUD_RSLT_RPL_DT &gt; #strDTS# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &gt; #strDTS#)
							</isNotEmpty>
							<isNotEmpty property="strDTE">
								AND	(B.AUD_RSLT_RPL_DT &lt; #strDTE# OR TO_CHAR(A.CVPT_WDW_DH,'YYYYMMDD') &lt; #strDTE#)
							</isNotEmpty>
						</isEqual>
		<![CDATA[
						) A
				) A
		]]>
	</select>
	
</sqlMap> 
