<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/cav/075"> 
	 
	<!--공지사항-->
	<select id="FAACAV075EMainselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMainselect */ ]]>
		<include refid="include.pageSelct" />		
        <![CDATA[       
			SELECT ROWNUM AS KEY,
				   GRP_NO,
			       RPL_SNO,
			       LVL_CNT,
			       TXT,
			       TIT_NM,
			       SRCH_CNT,
			       REGN_NM,
			       BRD_DVSN_CD,
			       RMK,
			       REGN_ID,
			       DOC_ID,
			       REGI_DH,
			       SRNO,
			       TNB,
			       EML_AD,
			       REGI_ORG_NM
			  FROM TWFAACAV065L 
              WHERE 1 = 1
              AND  REGI_DH  BETWEEN  #strSrchFrom#||'000000' AND #strSrchTo#||'999999'
              AND  BRD_DVSN_CD = 'NO'
		]]>
        <isNotEmpty property="strSrno">	 	   
			   AND SRNO     = #strSrno#
		</isNotEmpty>	
		
		<isNotEmpty property="strSrchNm">
			<isEqual property="strSndCd" compareValue="0">
			   AND  (TIT_NM like '%'||#strSrchNm#||'%' OR TXT like '%'||#strSrchNm#||'%')
			</isEqual>		
			<isEqual property="strSndCd" compareValue="1">
			   AND  TIT_NM like '%'||#strSrchNm#||'%'
			</isEqual>
			<isEqual property="strSndCd" compareValue="2">
			   AND  TXT like '%'||#strSrchNm#||'%'
			</isEqual>			
		</isNotEmpty> 
		<include refid="include.pageOrder" />		
 			ORDER BY KEY DESC
	</select>

	
	<!--게시판 insert-->
	<insert id="FAACAV075EMaininsert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMaininsert */ ]]>
		INSERT INTO TWFAACAV065L
		(
			 BRD_DVSN_CD
			,SRNO
			,GRP_NO
			,RPL_SNO
			,LVL_CNT
			,TIT_NM
			,REGI_DH
			,REGI_ORG_NM
			,REGN_ID
			,REGN_NM
			,SRCH_CNT
			,TXT
			,DOC_ID
			,TNB
			,EML_AD
			,RMK
		) VALUES (
			 #BRD_DVSN_CD#
			,#SRNO#
			,#GRP_NO#
			,#RPL_SNO#
			,#LVL_CNT#
			,#TIT_NM#
			,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
			,#REGI_ORG_NM#
			,#REGN_ID#
			,#REGN_NM#
			,0
			,#TXT#
			,#DOC_ID#
			,#TNB#
			,#EML_AD#
			,#RMK#
		)
	</insert>	

	<!-- 일련번호 Max값 찾기 -->
	<select id="FAACAV075EMainMaxSnoSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMainMaxSnoSelect */ ]]>
        <![CDATA[     	
			    SELECT TO_CHAR(NVL(MAX(TO_NUMBER(SRNO)),0)+1) AS MAX_SEQ
				  FROM TWFAACAV065L
				 WHERE BRD_DVSN_CD = #BRD_DVSN_CD#
		]]>
	</select>

	<!-- 조회수 구하기 -->
	<select id="FAACAV075ESrchCntSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/075/FAACAV075ESrchCntSelect */ ]]>
        <![CDATA[     	
			     SELECT TO_CHAR(NVL(TO_NUMBER(SRCH_CNT),0)+1) AS CNT
				  FROM TWFAACAV065L
				 WHERE BRD_DVSN_CD = #BRD_DVSN_CD#
				 AND SRNO        = #SRNO# 
		]]>
	</select>
		
	<!--게시판 delete-->
	<delete id="FAACAV075EMainDelete" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMainDelete */ ]]>
		   DELETE 
			 FROM 	TWFAACAV065L
			WHERE 1=1
			  AND BRD_DVSN_CD                = #BRD_DVSN_CD# 
		      AND SRNO                = #SRNO# 
	</delete>	
	
			<!--게시판 update-->
	<update id="FAACAV075EMainUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMainUpdate */ ]]>
		<![CDATA[ 	
			UPDATE TWFAACAV065L
			   SET TIT_NM                 = #TIT_NM# 
			     , TXT                = #TXT#
			     , DOC_ID         = #DOC_ID# 		
			   
		]]>	    
						
			  WHERE 1=1
			  AND BRD_DVSN_CD                = #BRD_DVSN_CD# 
		      AND SRNO                = #SRNO# 
	</update>
			<!--조회수 update-->
	<update id="FAACAV075EMainSrchCntUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/075/FAACAV075EMainSrchCntUpdate */ ]]>
		<![CDATA[ 	
			UPDATE TWFAACAV065L
			   SET SRCH_CNT                 = #SRCH_CNT# 

			   
		]]>	    
						
			  WHERE 1=1
			  AND BRD_DVSN_CD                = #BRD_DVSN_CD# 
		      AND SRNO                = #SRNO# 
	</update>	

</sqlMap> 
