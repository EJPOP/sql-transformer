<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/cmr/common">

	<!-- 중접법령 조회 법무부일때	-->
	<select id="BADCMRCommonEpsMngLawCdListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT EPS_LAW_YE
			     , EPS_LAW_SNO
			     , EPS_MNG_LAW_NM                   AS CD_NM
			     , EPS_LAW_YE || '-' || EPS_LAW_SNO AS  CD
			  FROM TBBADCMR014M
			 WHERE 1 = 1  
		]]>
		<![CDATA[ 			  
			 ORDER BY EPS_MNG_LAW_NM
		]]>
	</select> 
	
	<!-- 중접법령 조회 법무부 아닐일때	-->
	<select id="BADCMRCommonNotLawEpsMngLawCdListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT EPS_LAW_YE
			     , EPS_LAW_SNO
			     , EPS_MNG_LAW_NM                   AS CD_NM
			     , EPS_LAW_YE || '-' || EPS_LAW_SNO AS  CD
			  FROM TBBADCMR014M
			 WHERE 1 = 1  
			   AND COPT_DPT_CD = #strChgdDptCd#				  
			 ORDER BY EPS_MNG_LAW_NM
		]]>
	</select>
	
	<!-- 주무과 조회	-->
	<select id="BADCMRCommonBleDivDptCdListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT DPT_CD AS CD,
	       		   DPT_NM AS CD_NM
	  		FROM TBDCMACM002M
	 	   WHERE 1=1
	   		AND ( DPT_CD LIKE '___100'       
	      		OR DPT_CD LIKE '___A00' 
	      		OR DPT_CD IN ('040200','081600','170300','150120','200010','300120'))  /*사복1,국민1-1,심사1,디지털감사,교육운영,연구지원*/         
	   		AND DPT_CD NOT IN ('200100', '400100')/*교육지원, 연습1 제외*/
	   		AND USE_YN = 'Y'
		ORDER BY DPT_SNO, SRT_SNO
		]]>
	</select>
	
	<!-- 소관과 조회	-->
	<select id="BADCMRCommonChgdDptCdListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT DPT_CD AS CD ,
			       DPT_NM AS CD_NM ,
			       SUBSTR(DPT_CD, 1, 3) AS CD_KEY
			  FROM TBDCMACM002M
			 WHERE 1=1
			   AND DPT_CD NOT LIKE '___000'
			   AND DPT_CD NOT IN (SELECT DPT_CD
			                      FROM TBDCMACM002M
			                     WHERE 1=1
			                       AND ( DPT_CD LIKE '___100'       
			                          OR DPT_CD LIKE '___A00' 
			                          OR DPT_CD IN ('040200','081600','170300','150120','200010','300120'))  /*사복1,국민1-1,심사1,디지털감사,교육운영,연구지원*/         
			                       AND DPT_CD NOT IN ('200100', '400100')/*교육지원, 연습1 제외*/
			                       AND USE_YN = 'Y')  
			   AND SUBSTR(DPT_CD, 1, 3) < '400'
			   AND USE_YN ='Y'
			 ORDER BY DPT_SNO,SRT_SNO
		]]>
	</select>
	
	<!-- 각부서 인원 조회		-->
	<select id="BADCMRCommonDivChgrCnbListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT CNB     AS CD
			     , USR_NAM AS CD_NM
			     , DPT_CD  AS KEY
			  FROM TBDCMACM001M
			 WHERE 1=1  
			   AND RSG_DT IS NULL
			   AND BAI_USR_YN ='Y' /*감사원 사용자 여부*/
			   AND CNB <'4900'
			   AND DPT_CD != '770770' /*감사원*/
			 ORDER BY DPT_CD, USR_NAM
		]]>
	</select>
	
	<!-- 모니터링처리상태코드가 02(재분류) 일때 update	 -->
	<update id="BADCMRCommonStaCd02update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET FNL_MDF_DH            = SYSDATE
			     , BLE_DIV_BACK_RQS_RSN  = #BLE_DIV_BACK_RQS_RSN#       /*총괄과재분류요청사유*/
			     , BLE_DIV_BACK_RQS_DT   = TO_CHAR(SYSDATE, 'YYYYMMDD') /*총괄과재분류요청일*/
			     , CAT_DT                = ''                           /*분류일*/
			     , MDF_DT                = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB           = #MDF_PEN_CNB#                /*수정자전산번호*/
			     , AUD_MNT_HNDL_STA_CD   = #AUD_MNT_HNDL_STA_CD#
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 21(처리중) 일때 update	 -->
	<update id="BADCMRCommonStaCd21update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , BLE_DIV_ACP_DT      = TO_CHAR(SYSDATE, 'YYYYMMDD')  /*총괄과접수일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 41(접수) 일때 update	 -->
	<update id="BADCMRCommonStaCd41update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , OPIN_ACP_DT         = TO_CHAR(SYSDATE, 'YYYYMMDD') /*의견접수일*/
			     , OPIN_DTM_DT         = #OPIN_DTM_DT# /*의견확정일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 81(사후처리중) 일때 update	 -->
	<update id="BADCMRCommonStaCd81update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD       = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH                = SYSDATE
			     , BLE_DIV_EXPOT_HNDL_ACP_DT = TO_CHAR(SYSDATE, 'YYYYMMDD') /*총괄과사후처리접수일*/
			     , CPLT_DT                   = #CPLT_DT# /*완결일*/
			     , MDF_DT                    = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB               = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>

	<!-- 모니터링처리상태코드가 61(회신처리중) 일때 update	 -->
	<update id="BADCMRCommonStaCd61update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , RPL_RQS_ACP_DT      = TO_CHAR(SYSDATE, 'YYYYMMDD') /* 회신요청접수일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 62(회신확정) 일때 update	 -->
	<update id="BADCMRCommonStaCd62update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , OPIN_DTM_DT         = TO_CHAR(SYSDATE, 'YYYYMMDD') /*의견확정일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 11(분류완료) 일때 update	 -->
	<update id="BADCMRCommonStaCd11update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , CAT_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*분류일*/
			     , BLE_DIV_BACK_RQS_DT = ''      /*총괄과재분류요청일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 51(회신요청) 일때 update	 -->
	<update id="BADCMRCommonStaCd51update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , RPL_RQS_DT          = TO_CHAR(SYSDATE, 'YYYYMMDD') /*회신요청일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 71(사후관리개시) 일때 update	 -->
	<update id="BADCMRCommonStaCd71update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 91(사후관리확정/완결) 일때 update	 -->
	<update id="BADCMRCommonStaCd91update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , CPLT_DT             = TO_CHAR(SYSDATE, 'YYYYMMDD') /*완결일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 모니터링처리상태코드가 22(반려) 일때 update	 -->
	<update id="BADCMRCommonStaCd22update" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , OPIN_RET_DT         = TO_CHAR(SYSDATE, 'YYYYMMDD')    /*의견반려일*/
			     , OPIN_RET_RSN        = #OPIN_RET_RSN#   /*의견반려사유*/
			     , OPIN_SMT_DT         = ''                /*의견제출일*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#                /*수정자전산번호*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 법령모니터링(법무) - 결제상신	 -->
	<update id="BADCMRCommonExamApvSave" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , APV_REF_ID          = #APV_DOC_NO# /*결재참조ID*/
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE LAW_YE      = #LAW_YE#
			   AND LAW_MNT_SNO = #LAW_MNT_SNO#	
		]]>
	</update>
	
	<!-- 법령모니터링(법무) - 승인  -->
	<update id="BADCMRCommonApvSave" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
			     , OPIN_SMT_DT         = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , OPIN_RET_RSN        = ''      /*의견반려사유*/
			     , JA_DIV_ORD_TXT      = ''      /*법무과지시내용*/
			     , MDF_DT              = TO_CHAR(SYSDATE, 'YYYYMMDD') /*수정일*/
			     , MDF_PEN_CNB         = #MDF_PEN_CNB#  
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE APV_REF_ID = #APV_DOC_NO#
		]]>
	</update>
	
	<!-- 법령모니터링(법무) - 반려 -->
	<update id="BADCMRCommonApvRetSave" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBBADCMR011M
			   SET AUD_MNT_HNDL_STA_CD = #AUD_MNT_HNDL_STA_CD#
			     , FNL_MDF_DH          = SYSDATE
		]]>	
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<![CDATA[		
			 WHERE APV_REF_ID = #APV_DOC_NO#
		]]>
	</update>
	
	<!-- docId insnsert -->
	<insert id="BADCMRCommonFileinsert" parameterClass="paramMap">
		INSERT INTO TBBADCMR012M
			(
				  LAW_YE
				, LAW_MNT_SNO
				, DOC_ID
				, DOC_TYP_CD
				, FRT_USR_ID
				, FNL_USR_ID
				, FNL_DEAL_DPT_CD
				, FNL_MNU_ID
				, FRT_REGI_DH
				, FNL_MDF_DH
			) VALUES
			(
				  #LAW_YE#
				, #LAW_MNT_SNO#
				, TRIM(#DOC_ID#)
				, #DOC_TYP_CD#
				, #FNL_USR_ID#
				, #FNL_USR_ID#
				, #FNL_DEAL_DPT_CD#
				, #FNL_MNU_ID#
				, SYSDATE
				, SYSDATE
			)
	</insert>
	
	<!-- 조회조건 - 소관과 조회하기	-->
	<select id="BADCMRCommonSearchBoxDptListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
            SELECT D1.DPT_CD AS CD 
                 , D1.DPT_NM AS CD_NM
                 , NVL(D2.HIRK_DPT_CD, D1.DPT_CD) AS KEY
              FROM (
                 SELECT DPT_CD 
                      , DPT_NM 
                   FROM TBDCMACM002M
                  WHERE NVL(USE_YN, 'N') = 'Y'
                  ORDER BY DPT_CD
                ) D1
                , TBDCMACM002M D2
           WHERE D1.DPT_CD = D2.DPT_CD
		]]>
	</select>
	
	<!-- 법령모니터링상세 조회한다. -->
	<select id="BADCMRCommonMonitorDtlListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[   
			SELECT LAW_YE
			     , LAW_MNT_SNO
			     , '(' || LAW_YE || '-' || LAW_MNT_SNO || ')'  AS LAW_YE_SNO
			     , AUD_MNT_HNDL_STA_CD                         AS AUD_MNT_HNDL_STA_CD /*감사모니터링처리상태코드*/
			     , (SELECT ORG_NM FROM TBDCMACM015M WHERE ORG_CD = TBBADCMR011M.COPT_GD_CD) AS COPT_GD_NM          /*소관기관명*/
			     , COPT_GD_CD                                  AS COPT_GD_CD          /*소관기관 코드*/
			     , MTRL_CAT_CD                                 AS MTRL_CAT_CD         /*자료분류코드*/
			     , CASE WHEN TRIM(REL_EPS_MNG_LAW_YE) IS NULL OR TRIM(REL_EPS_MNG_LAW_SNO) IS NULL THEN '' ELSE REL_EPS_MNG_LAW_YE ||'-'|| REL_EPS_MNG_LAW_SNO END AS REL_EPS_MNG_LAW /*중접법령*/
			     , LAW_KND_CD                                  AS LAW_KND_CD          /*법령종류코드*/
			     , TRIM(MNT_TIT_NM)                            AS MNT_TIT_NM          /*모니터링 제목*/
			     , NVL2(MNT_URL_AD, '', TRIM(MNT_TXT))         AS MNT_TXT             /*모니터링 내용 - 모니터링 URL이 있을경우엔 내용을 보여주지 않는다.*/
			     , NVL2(MNT_URL_AD, 'Y', 'N')                  AS MNT_URL_YN          /*입법예고내용보기 버튼 보이고 말고*/
			     , TRIM(MNT_URL_AD)                            AS MNT_URL_AD          /*모니터링 URL*/
			     , TRIM(LAW_URL_AD)                            AS LAW_URL_AD          /*법령URL주소*/
			     , TRIM(LAW_LNK_ID)                            AS LAW_LNK_ID          /*법령연결ID*/
			     , TRIM(LAW_URL_AD_1)                          AS LAW_URL_AD_1
			     , TRIM(LAW_LNK_ID_1)                          AS LAW_LNK_ID_1
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-001') AS DOC_ID_1 /*모니터링내용 첨부파일*/
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-002') AS DOC_ID_2 /*총괄과 처리의견 첨부파일*/
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-003') AS DOC_ID_3 /*소관과 처리의견 첨부파일*/
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-004') AS DOC_ID_4 /*국무회의첨부파일*/
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-005') AS DOC_ID_5 /*총괄과 사후처리내용 첨부파일*/
			     , (SELECT DOC_ID FROM TBBADCMR012M WHERE LAW_YE = #strLawYe# AND LAW_MNT_SNO = #strLawMntSno# AND DOC_TYP_CD = 'AD-MR-006') AS DOC_ID_6 /*소관과 사후처리내용 첨부파일*/
			     , BLE_DIV_DPT_CD                              AS BLE_DIV_DPT_CD          /*주무과*/
			     , TRIM(BLE_DIV_CHGR_CNB)                      AS BLE_DIV_CHGR_CNB        /*총괄담당자전산번호*/
			     , TRIM(BLE_DIV_HNDL_OPIN_TXT)                 AS BLE_DIV_HNDL_OPIN_TXT   /*총괄과처리의견내용*/
			     , CHGD_DPT_CD                                 AS CHGD_DPT_CD             /*소관과*/
			     , TRIM(COPT_DIV_CHGR_CNB)                     AS COPT_DIV_CHGR_CNB       /*담당과전산번호*/
			     , TRIM(COPT_DIV_HNDL_OPIN_TXT)                AS COPT_DIV_HNDL_OPIN_TXT  /*소관과처리의견내용*/
			     , HNDL_OPIN_YO                                AS HNDL_OPIN_YO            /*의견유무*/
			     , TRIM(HNDL_OPIN_RPL_DT)                      AS HNDL_OPIN_RPL_DT        /*회신일자*/
			     , TRIM(HNDL_OPIN_RFC_YN_CD)                   AS HNDL_OPIN_RFC_YN_CD     /*변경여부*/
			     , TRIM(CBT_CFR_BILL_DT)                       AS CBT_CFR_BILL_DT         /*국무회의상정일*/
			     , TRIM(CBT_CFR_TXT)                           AS CBT_CFR_TXT             /*국무회의상정내용*/
			     , TRIM(BLE_DIV_EXPOT_HNDL_TXT)                AS BLE_DIV_EXPOT_HNDL_TXT  /*주무과처리의견*/
			     , TRIM(COPT_DIV_EXPOT_HNDL_TXT)               AS COPT_DIV_EXPOT_HNDL_TXT /*소관과처리의견*/
			     , EXPOT_HNDL_HNDL_OPIN_YO_YN                  AS EXPOT_HNDL_HNDL_OPIN_YO_YN  /*사후처리처리의견의견유무*/
			     , TRIM(EXPOT_HNDL_HNDL_OPIN_RPL_DT)           AS EXPOT_HNDL_HNDL_OPIN_RPL_DT /*사후처리처리의견회신일*/
			     , EXPOT_HNDL_RFC_YN_CD                        AS EXPOT_HNDL_RFC_YN_CD        /*사후처리반영여부코드*/
			     , TRIM(JA_DIV_ORD_TXT)                        AS JA_DIV_ORD_TXT              /*지시내용*/
			     , TRIM(BLE_DIV_ACP_DT)                        AS BLE_DIV_ACP_DT              /*총괄과저접수일자*/
			     , TRIM(BLE_DIV_BACK_RQS_RSN)                  AS BLE_DIV_BACK_RQS_RSN        /*총괄과재분류요청사유*/
			     , TRIM(OPIN_RET_RSN)                          AS OPIN_RET_RSN                /*의견반려사유*/
			FROM TBBADCMR011M
			WHERE LAW_YE      = #strLawYe#
			  AND LAW_MNT_SNO = #strLawMntSno#
		]]>
	</select>
	
	<!-- 모니터링담당자기본 talble에서 담당자 전산번호를 가져온다. -->
	<select id="BADCMRCommonChgrCnbListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
            SELECT D2.CHGR_CNB
			  FROM TBDCMACM001M D1
                 , TBBADCMR015M D2
			 WHERE D1.CNB = D2.CHGR_CNB
               AND D1.DPT_CD = D2.CHGR_BLT_BRDV_CD
			   AND D1.RSG_DT IS NULL
			   AND D1.BAI_USR_YN ='Y' /*감사원 사용자 여부*/
			   AND D1.CNB <'4900'
			   AND D1.DPT_CD != '770770' /*감사원*/
               AND D2.CHGR_BLT_BRDV_CD = #CHGR_BLT_BRDV_CD#
			 ORDER BY D1.DPT_CD, D1.USR_NAM
		]]>
	</select>
	
	<!-- 법령모니터링(법무) 저장한다. -->
	<update id="BADCMRCommonmainupdate" parameterClass="paramMap">
		UPDATE TBBADCMR011M
		   SET FNL_MDF_DH                  = SYSDATE
			 , AUD_MNT_HNDL_STA_CD         = #AUD_MNT_HNDL_STA_CD#
			 , COPT_GD_CD                  = #COPT_GD_CD#
			 , MTRL_CAT_CD                 = #MTRL_CAT_CD#
			 , REL_EPS_MNG_LAW_YE          = #REL_EPS_MNG_LAW_YE#
			 , REL_EPS_MNG_LAW_SNO         = #REL_EPS_MNG_LAW_SNO#
			 , LAW_KND_CD                  = #LAW_KND_CD#
			 , MNT_TIT_NM                  = #MNT_TIT_NM#
			 , MNT_TXT                     = #MNT_TXT#
			 , LAW_URL_AD                  = #LAW_URL_AD#
			 , LAW_LNK_ID                  = #LAW_LNK_ID#
			 , LAW_URL_AD_1                = #LAW_URL_AD_1#
			 , LAW_LNK_ID_1                = #LAW_LNK_ID_1#
			 , BLE_DIV_DPT_CD              = #BLE_DIV_DPT_CD#
			 , BLE_DIV_CHGR_CNB            = #BLE_DIV_CHGR_CNB#
			 , BLE_DIV_HNDL_OPIN_TXT       = #BLE_DIV_HNDL_OPIN_TXT#
			 , CHGD_DPT_CD                 = #CHGD_DPT_CD#
			 , COPT_DIV_CHGR_CNB           = #COPT_DIV_CHGR_CNB#
			 , COPT_DIV_HNDL_OPIN_TXT      = #COPT_DIV_HNDL_OPIN_TXT#
			 , HNDL_OPIN_YO                = #HNDL_OPIN_YO#
			 , HNDL_OPIN_RPL_DT            = #HNDL_OPIN_RPL_DT#
			 , HNDL_OPIN_RFC_YN_CD         = #HNDL_OPIN_RFC_YN_CD#
			 , CBT_CFR_BILL_DT             = #CBT_CFR_BILL_DT#
			 , CBT_CFR_TXT                 = #CBT_CFR_TXT#
			 , BLE_DIV_EXPOT_HNDL_TXT      = #BLE_DIV_EXPOT_HNDL_TXT#
			 , COPT_DIV_EXPOT_HNDL_TXT     = #COPT_DIV_EXPOT_HNDL_TXT#
			 , EXPOT_HNDL_HNDL_OPIN_YO_YN  = #EXPOT_HNDL_HNDL_OPIN_YO_YN#
			 , EXPOT_HNDL_HNDL_OPIN_RPL_DT = #EXPOT_HNDL_HNDL_OPIN_RPL_DT#
			 , EXPOT_HNDL_RFC_YN_CD        = #EXPOT_HNDL_RFC_YN_CD#
			 , JA_DIV_ORD_TXT              = #JA_DIV_ORD_TXT#
			 , BLE_DIV_ACP_DT              = #BLE_DIV_ACP_DT#
			 , MNT_URL_AD                  = #MNT_URL_AD#
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD =
			#FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		 WHERE 1 = 1
		   AND LAW_YE      = #LAW_YE#
		   AND LAW_MNT_SNO = #LAW_MNT_SNO#
	</update>
	
	<!-- 결재 팝업띄울때 보낼 결재자 리스트 -->
	<select id="BADCMRCommonAvpUserselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[   
			SELECT USR_NAM                      AS APVR_USR_NAM
			     , DPT_CD                       AS APVR_DPT_CD
			     , F_DPT_INFO(DPT_CD,'1')       AS APVR_DPT_NM
			     , CNB                          AS APVR_CNB
			     , RANK_CD                      AS APVR_RANK_CD
			     , F_CODE_NM('1000173',RANK_CD) AS APVR_RANK_NM 
			     , PST_CD                       AS APVR_PST_CD
			     , F_CODE_NM('1000176',PST_CD)  AS APVR_PST_NM
			     , ROWNUM                       AS APV_SNO
			     , '3'                          AS APVR_KND_CD /*결재자*/
			  FROM TBDCMACM001M 
			 WHERE BAI_USR_YN = 'Y'
			   AND DPT_CD     = #DPT_CD#
			   AND PST_CD     = '0013600' /*과장*/
			 ORDER BY CNB
		]]>
	</select>
	
	<!-- 조회조건 - 소관국 조회하기	-->
	<select id="BADCMRCommonSearchBoxUpDptselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT DPT_CD AS CD 
			     , F_DPT_INFO(DPT_CD, '1') AS CD_NM
			  FROM TBDCMACM002M
			 WHERE NVL(USE_YN, 'N') = 'Y'
			   AND ORZT_DVSN_CD = '20'
		]]>
	</select>
	
	<!-- 조회조건 - 연도 조회(1970 ~ 2029년)	-->
	<select id="BADCMRCommonSearchBoxYearListselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT LEVEL+1969 AS CD
			     , LEVEL+1969 AS CD_NM
			 FROM DUAL
			WHERE 1=1
		  CONNECT BY LEVEL <= 60
			ORDER BY CD
		]]>
	</select>
        
</sqlMap> 
