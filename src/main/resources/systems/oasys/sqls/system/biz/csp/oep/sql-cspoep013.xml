<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/oep/013">
 	
 	<select id="CSPOEP013EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
		   SELECT
		   		T1.NDTY_DT				/*서류등록일자*/
			   ,T1.NDTY_DOC_SEQ			/*서류접수순번*/
			   ,T1.NDTY_TIT_NM			/*접수서류제목*/
			   ,T1.NDTY_CNB				/*등록자전산번호*/
			   ,T1.NDTY_NAM				/*등록자명*/
			   ,T1.NDTY_DOC_ID			/*당직서류ID*/
			   ,T1.FRT_USR_ID			/*최초사용자ID*/
			   ,T1.FNL_USR_ID			/*최종사용자ID*/
			   ,T1.FNL_DEAL_DPT_CD		/*최종부서코드*/
			   ,T1.FNL_MNU_ID			/*최종메뉴ID*/
			   ,T1.FRT_REGI_DH			/*최초등록일시*/
			   ,T1.FNL_MDF_DH			/*최종수정일시*/
			FROM TBCSPOEP006M T1
		 WHERE 1=1
		]]>		
		<isNotEmpty property="strNDTY_DTS">
			<isNotEmpty property="strNDTY_DTE">
				AND (TO_CHAR(TO_DATE(T1.NDTY_DT, 'YYYYMMDD'), 'YYYYMMDD') BETWEEN #strNDTY_DTS# AND #strNDTY_DTE#)
			</isNotEmpty>
		</isNotEmpty>
		
		<isNotEmpty property="strNDTY_TIT_NM">
			AND T1.NDTY_TIT_NM LIKE '%'||#strNDTY_TIT_NM#||'%'
		</isNotEmpty>
		
		<isNotEmpty property="strNDTY_NAM">
			AND T1.NDTY_NAM LIKE '%'||#strNDTY_NAM#||'%'
		</isNotEmpty>
		
		 ORDER BY T1.NDTY_DOC_SEQ DESC
	</select>
	
	<select id="CSPOEP013EKeySelect" parameterClass="paramMap"
		resultClass="java.lang.String"> 
		
		SELECT NVL(MAX(NDTY_DOC_SEQ), 0)+1  AS NDTY_DOC_SEQ
          FROM TBCSPOEP006M
         WHERE 1=1
	</select>
	
	<insert id="CSPOEP013EInsert" parameterClass="paramMap">
	<![CDATA[
	INSERT INTO TBCSPOEP006M(
             NDTY_DT
            ,NDTY_DOC_SEQ
            ,NDTY_TIT_NM
            ,NDTY_CNB
            ,NDTY_NAM
            ,NDTY_DOC_ID 
            ,FRT_USR_ID 
            ,FNL_USR_ID 
            ,FNL_DEAL_DPT_CD 
            ,FNL_MNU_ID 
            ,FRT_REGI_DH
            ,FNL_MDF_DH
            )
            VALUES(
                #NDTY_DT#
               ,#NDTY_DOC_SEQ#
               ,#NDTY_TIT_NM#
               ,#NDTY_CNB#
               ,#NDTY_NAM#
               ,#NDTY_DOC_ID#
               ,#FRT_USR_ID#
               ,#FNL_USR_ID# 
               ,#FNL_DEAL_DPT_CD#
               ,#FNL_MNU_ID# 
               ,SYSDATE
               ,SYSDATE
            )  
	]]>
	</insert>
	
	<update id="CSPOEP013EUpdate" parameterClass="paramMap">
	<![CDATA[
	UPDATE TBCSPOEP006M
       SET FNL_USR_ID         = #FNL_USR_ID#
    	  ,FNL_DEAL_DPT_CD    = #FNL_DEAL_DPT_CD#
    	  ,FNL_MNU_ID         = #FNL_MNU_ID#
          ,FNL_MDF_DH         = SYSDATE
          ,NDTY_TIT_NM		  = #NDTY_TIT_NM#
          ,NDTY_CNB			  = #NDTY_CNB#
          ,NDTY_NAM			  = #NDTY_NAM#
          ,NDTY_DOC_ID		  = #NDTY_DOC_ID#
     WHERE NDTY_DT			  = #NDTY_DT#
       AND NDTY_DOC_SEQ		  = #NDTY_DOC_SEQ#
        ]]>
	</update>
	
	<delete id="CSPOEP013EDelete" parameterClass="paramMap">
	<![CDATA[
	
		      DELETE 
                FROM TBCSPOEP006M
               WHERE 1=1
                 AND NDTY_DOC_SEQ = #NDTY_DOC_SEQ#
	
	]]>
	</delete>
	
    <select id="CSPOEP013EExcelSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
		   SELECT
		   		T1.NDTY_DT				/*서류등록일자*/
			   ,T1.NDTY_DOC_SEQ			/*서류접수순번*/
			   ,T1.NDTY_TIT_NM			/*접수서류제목*/
			   ,T1.NDTY_CNB				/*등록자전산번호*/
			   ,T1.NDTY_NAM				/*등록자명*/
			   ,T1.NDTY_DOC_ID			/*당직서류ID*/
			   ,T1.FRT_USR_ID			/*최초사용자ID*/
			   ,T1.FNL_USR_ID			/*최종사용자ID*/
			   ,T1.FNL_DEAL_DPT_CD		/*최종부서코드*/
			   ,T1.FNL_MNU_ID			/*최종메뉴ID*/
			   ,T1.FRT_REGI_DH			/*최초등록일시*/
			   ,T1.FNL_MDF_DH			/*최종수정일시*/
			FROM TBCSPOEP006M T1
		 WHERE 1=1
		]]>		
		<isNotEmpty property="strNDTY_DTS">
			<isNotEmpty property="strNDTY_DTE">
				AND (TO_CHAR(TO_DATE(T1.NDTY_DT, 'YYYYMMDD'), 'YYYYMMDD') BETWEEN #strNDTY_DTS# AND #strNDTY_DTE#)
			</isNotEmpty>
		</isNotEmpty>
		
		<isNotEmpty property="strNDTY_TIT_NM">
			AND T1.NDTY_TIT_NM LIKE '%'||#strNDTY_TIT_NM#||'%'
		</isNotEmpty>
		
		 ORDER BY T1.NDTY_DOC_SEQ DESC
	</select>
</sqlMap> 
