<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/gda/009">
	
 <resultMap class="java.util.HashMap" id="mainselect">
    <result property="NTF_NO"           column="NTF_NO"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 통보번호 -->	             
    <result property="ORG_CD"           column="ORG_CD"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 기관코드 -->
    <result property="ORG_NM"           column="ORG_NM"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 기관명 -->
    <result property="YR"               column="YR"                 jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 년도 -->
    <result property="SRNO"             column="SRNO"               jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 일련번호 -->
    <result property="DPT_CD"           column="DPT_CD"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 부서코드 -->
    <result property="DPT_NM"           column="DPT_NM"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 부서명 -->
    <result property="ACP_STA_CD"       column="ACP_STA_CD"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 접수상태코드 --> 
    <result property="ACP_STA_NM"       column="ACP_STA_NM"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 접수상태코드명(처리상태) -->
    <result property="ACP_DT"           column="ACP_DT"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 접수일 -->
    <result property="RCEP_ID"          column="RCEP_ID"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 접수자ID -->
    <result property="HNDL_DT"          column="HNDL_DT"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리일 -->
    <result property="HNDL_PEN_ID"      column="HNDL_PEN_ID"        jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리자ID -->
    <result property="HNDL_PEN_NM"      column="HNDL_PEN_NM"        jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리자명 -->
    <result property="CPLT_DT"          column="CPLT_DT"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 완결일 -->
    <result property="DTM_YN"           column="DTM_YN"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 확정여부 -->
    <result property="DTM_DH"           column="DTM_DH"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 확정일시 -->
    <result property="HNDL_OPIN_CD"     column="HNDL_OPIN_CD"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리의견코드 -->
    <result property="HNDL_OPIN_NM"     column="HNDL_OPIN_NM"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리의견명 -->
    <result property="EXAM_RSLT_TXT"    column="EXAM_RSLT_TXT"      jdbcType="CLOB"      javaType="java.lang.String"/>  <!-- 검토결과내용 -->
    <result property="APV_DOC_NO"       column="APV_DOC_NO"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 결재문서번호 -->
    <result property="NTF_TIT_NM"       column="NTF_TIT_NM"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 통보제목명 -->
    <result property="NTF_TXT"          column="NTF_TXT"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 통보내용 -->
    <result property="CONT_DT"          column="CONT_DT"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약일 -->
    <result property="CONT_WAY_CD"      column="CONT_WAY_CD"        jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약방법코드 -->
    <result property="CONT_WAY_NM"      column="CONT_WAY_NM"        jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약방법명 -->
    <result property="CONT_DVSN_CD"     column="CONT_DVSN_CD"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약구분코드 -->
    <result property="CONT_DVSN_NM"     column="CONT_DVSN_NM"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약구분명 -->
    <result property="CONT_AM"          column="CONT_AM"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 계약금액 -->
    <result property="LAW_NTF_DVSN_CD"  column="LAW_NTF_DVSN_CD"    jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 법령통보구분코드 -->
    <result property="LAW_NTF_DVSN_NM"  column="LAW_NTF_DVSN_NM"    jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 법령통보구분명 -->
    <result property="REL_LAW_NTF_CD"   column="REL_LAW_NTF_CD"     jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 관련법령통보코드 -->
    <result property="REL_LAW_NTF_NM"   column="REL_LAW_NTF_NM"     jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 관련법령통보명 -->
    <result property="BAI_RPT_MNG_NO"   column="BAI_RPT_MNG_NO"     jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사원보고관리번호 -->
    <result property="BAI_RPT_DT"       column="BAI_RPT_DT"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사원보고일 -->
    <result property="DEL_YN"           column="DEL_YN"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 삭제여부 -->
    <result property="REGI_DT"          column="REGI_DT"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 등록일 -->
    <result property="REGN_ID"          column="REGN_ID"            jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 등록자ID -->
    <result property="HNDL_STT_TXT"     column="HNDL_STT_TXT"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 처리상황내용 -->
    <result property="CMT_SBCN_TXT"     column="CMT_SBCN_TXT"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 위원회부의내용 -->
    <result property="ENF_DT"           column="ENF_DT"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 시행일 -->
    <result property="AUD_MTRL_RMK"     column="AUD_MTRL_RMK"       jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사자료비고 -->
    <result property="AUD_MTRL_YR"      column="AUD_MTRL_YR"        jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사자료년도 -->
    <result property="AUD_MTRL_DPT_CD"  column="AUD_MTRL_DPT_CD"    jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사자료부서코드 -->
    <result property="AUD_MTRL_SRNO"    column="AUD_MTRL_SRNO"      jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 감사자료일련번호 -->
    <result property="CON_RET_KY_NM"    column="CON_RET_KY_NM"      jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 연계반려키명 -->
    <result property="CON_YR"           column="CON_YR"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 연계년도 -->
    <result property="CON_SRNO"         column="CON_SRNO"           jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 연계일련번호 -->
    <result property="DOC_ID"           column="DOC_ID"             jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 문서ID -->
    <result property="DOC_TYP_CD"       column="DOC_TYP_CD"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 문서유형코드 -->
    <result property="SLF_IPT_YN"       column="SLF_IPT_YN"         jdbcType="VARCHAR2"  javaType="java.lang.String"/>  <!-- 자체입력유무 - 2016.12.26 yyh -->    
 </resultMap>
                
	<!-- 관련법령통지통보  조회-->
	<select id="BADGDA009EMainselect" parameterClass="paramMap"   resultMap="mainselect">
	      SELECT 
                 F_ORG_INFO(ORG_CD,'1') || '-' ||
                 YR                     || '-' ||
                 SRNO                                            AS NTF_NO       /* 통보번호 */	             
                ,ORG_CD                                                          /* 기관코드 */
                ,F_ORG_INFO(ORG_CD,'1')                          AS ORG_NM       /* 기관명 */
                ,YR                                                              /* 년도 */
                ,SRNO                                                            /* 일련번호 */
                ,DPT_CD                                                          /* 부서코드 */
                ,F_DPT_INFO(DPT_CD,'1')                          AS DPT_NM       /* 부서명 */
                ,ACP_STA_CD                                                      /* 접수상태코드 */ 
                ,CASE WHEN ACP_STA_CD IN ('58','59') THEN '미접수'
                      WHEN ACP_STA_CD IN ('71','72') THEN '처리중' 
                      WHEN ACP_STA_CD IN ('75','76') THEN '결재중' 
                      WHEN ACP_STA_CD = '77'         THEN '완결'
                      ELSE ACP_STA_CD 
                  END                                              AS ACP_STA_NM  /* 접수상태코드명(처리상태) */
                ,ACP_DT                                                           /* 접수일 */
                ,RCEP_ID                                                          /* 접수자ID */
                ,HNDL_DT                                                          /* 처리일 */
                ,HNDL_PEN_ID                                                      /* 처리자ID */
                ,CASE WHEN HNDL_PEN_ID IS NOT NULL THEN F_USR_INFO_BY_ID(HNDL_PEN_ID,'2')
                          ELSE HNDL_PEN_NM 
                      END                                     AS HNDL_PEN_NM      /* 처리자명 */
                ,CPLT_DT                                                          /* 완결일 */
                ,DTM_YN                                                           /* 확정여부 */
                ,DTM_DH                                                           /* 확정일시 */
                ,HNDL_OPIN_CD                                                     /* 처리의견코드 */
                ,F_CODE_NM('1000200', HNDL_OPIN_CD)           AS HNDL_OPIN_NM     /* 처리의견명 */                
                ,EXAM_RSLT_TXT                                                    /* 검토결과내용 */
                ,APV_DOC_NO                                                       /* 결재문서번호 */
                ,NTF_TIT_NM                                                       /* 통보제목명 */
                ,NTF_TXT                                                          /* 통보내용 */
                ,CONT_DT                                                          /* 계약일 */
                ,CONT_WAY_CD                                                      /* 계약방법코드 */
                ,F_CODE_NM('1000204', CONT_WAY_CD)            AS CONT_WAY_NM      /* 계약방법명 */
                ,CONT_DVSN_CD                                                     /* 계약구분코드 */
                ,F_CODE_NM('1000205', CONT_DVSN_CD)           AS CONT_DVSN_NM     /* 계약구분명 */
                ,CONT_AM                                                          /* 계약금액 */                
                ,LAW_NTF_DVSN_CD                                                  /* 법령통보구분코드 */
                ,F_CODE_NM('1000652', LAW_NTF_DVSN_CD)       AS LAW_NTF_DVSN_NM   /* 법령통보구분명 */
                ,REL_LAW_NTF_CD                                                   /* 관련법령통보코드 */
                ,CASE WHEN REL_LAW_NTF_CD IS NOT NULL THEN F_CODE_NM('1000653', REL_LAW_NTF_CD)    
                      ELSE CONT_BAS_TXT 
                  END                                        AS REL_LAW_NTF_NM    /* 관련법령통보명 */
                ,BAI_RPT_MNG_NO                                                   /* 감사원보고관리번호 */
                ,BAI_RPT_DT                                                       /* 감사원보고일 */
                ,DEL_YN                                                           /* 삭제여부 */
                ,REGI_DT                                                          /* 등록일 */
                ,REGN_ID                                                          /* 등록자ID */
                ,HNDL_STT_TXT                                                     /* 처리상황내용 */
                ,CMT_SBCN_TXT                                                     /* 위원회부의내용 */
                ,ENF_DT                                                           /* 시행일 */
                ,AUD_MTRL_RMK                                                     /* 감사자료비고 */
                ,AUD_MTRL_YR                                                      /* 감사자료년도 */
                ,AUD_MTRL_DPT_CD                                                  /* 감사자료부서코드 */
                ,AUD_MTRL_SRNO                                                    /* 감사자료일련번호 */
                ,CON_RET_KY_NM                                                    /* 연계반려키명 */
                ,CON_YR                                                           /* 연계년도 */
                ,CON_SRNO                                                         /* 연계일련번호 */
                ,DOC_ID                                                           /* 문서ID */
                ,DOC_TYP_CD                                                       /* 문서유형코드 */
                ,SLF_IPT_YN                                                       /* 자체입력여부 - 2016.12.26 yyh */                	
            FROM TBBADGDA004M                         /* 관련법령 통지통보 */
           WHERE ORG_CD          = #strOrgCd#         /* 기관코드 */ 
             AND YR              = #strYr#            /* 년도 */
             AND SRNO            = #strSrno#          /* 일련번호 */
             AND LAW_NTF_DVSN_CD = #strLawNtfDvsnCd#  /* 법령통보구분코드 */
	</select>


	<!--관련법령통지통보를 수정한다-->
	<update id="BADGDA009EMainupdate" parameterClass="paramMap">
		UPDATE TBBADGDA004M                           /* 관련법령통지통보 */
           SET FNL_MDF_DH         = SYSDATE           /* 최종수정일시 */ 
              ,FNL_USR_ID         = #FNL_USR_ID#      /* 최종사용자ID */       
              ,FNL_DEAL_DPT_CD    = #FNL_DEAL_DPT_CD# /* 최종거래부서코드 */
              ,FNL_MNU_ID         = #FNL_MNU_ID#      /* 최종메뉴ID */
              		
              ,LAW_NTF_DVSN_CD    = #LAW_NTF_DVSN_CD# /* 통보구분 */
              ,BAI_RPT_DT         = #BAI_RPT_DT#      /* 감사원통보일 */
              ,REL_LAW_NTF_CD     = #REL_LAW_NTF_CD#  /* 관련법령 */
              ,CONT_WAY_CD        = #CONT_WAY_CD#     /* 계약방법 */
              ,CONT_DVSN_CD       = #CONT_DVSN_CD#    /* 계약구분 */
              ,CONT_DT            = #CONT_DT#         /* 계약일 */
              ,CONT_AM            = #CONT_AM#         /* 계약금액 */
              ,NTF_TIT_NM         = #NTF_TIT_NM#      /* 통보제목 */
              ,NTF_TXT            = #NTF_TXT#         /* 통보내역 */
              		
		      ,EXAM_RSLT_TXT      = #EXAM_RSLT_TXT#   /* 검토결과내용 */
			  ,HNDL_DT            = #HNDL_DT#         /* 처리일자 */
			  ,HNDL_PEN_ID        = #HNDL_PEN_ID#     /* 처리자ID */
			  ,HNDL_OPIN_CD       = #HNDL_OPIN_CD#    /* 처리의견코드 */					
			  ,DTM_YN             = #DTM_YN#          /* 확정여부 */		
			  ,DTM_DH             = SYSDATE           /* 확정일시 */	
			  ,CPLT_DT            = #CPLT_DT#         /* 완결일 */
			  ,ACP_STA_CD         = #ACP_STA_CD#      /* 접수상태코드 */
			  ,DOC_ID             = #DOC_ID#          /* 문서ID - 2017.07.04 yyh */
		 WHERE 1=1
		   AND ORG_CD            = #ORG_CD#
		   AND YR                = #YR#
		   AND SRNO              = #SRNO#
		   AND LAW_NTF_DVSN_CD   = #LAW_NTF_DVSN_CD# 
	</update>	
		
		
	<!--관련법령통지통보를 상태를 변경(결재저장)한다. -->
	<update id="BADGDA009EApvSbmupdate" parameterClass="paramMap">
		UPDATE TBBADGDA004M                     /* 관련법령통지통보 */
           SET ACP_STA_CD   = #ACP_STA_CD#      /* 접수상태코드 */
              ,APV_DOC_NO   = #APV_DOC_NO#      /* 결재문서번호 */

            <isNotNull property="CPLT_DT">
              ,CPLT_DT      = #CPLT_DT#         /* 완결일 */
			</isNotNull>

			<isNotNull property="AUD_MTRL_YR">
              	,AUD_MTRL_YR  		= #AUD_MTRL_YR#          /* 감사자료년도 */
			</isNotNull>
			<isNotNull property="AUD_MTRL_DPT_CD">
              	,AUD_MTRL_DPT_CD	= #AUD_MTRL_DPT_CD#      /* 감사자료부서코드 */
			</isNotNull>
			<isNotNull property="AUD_MTRL_SRNO">
              	,AUD_MTRL_SRNO      = #AUD_MTRL_SRNO#        /* 감사자료일련번호 */
			</isNotNull>
			
		 WHERE 1=1
		   AND ORG_CD            = #ORG_CD#
		   AND YR                = #YR#
		   AND SRNO              = #SRNO# 
		   AND LAW_NTF_DVSN_CD   = #LAW_NTF_DVSN_CD# 
	</update>
	
	
	<!-- 결재완료시 나의 할일 완료 처리 -->
	<update id="BADGDA009ETskOrdCmplt" parameterClass="paramMap">
	     UPDATE PTL_ORDER_RECEIVE_LIST
	        SET COMP_DT   = TO_CHAR(SYSDATE,'YYYYMMDDHH24MMSS')
	           ,COMP_CMMT = '[처리완료]'
          WHERE 1 = 1
		    AND SEQ = ( SELECT TSK_ORD_SRNO
		    		      FROM TBBADGDA004M
		                 WHERE ORG_CD          = #ORG_CD#
		    			   AND YR              = #YR#
		                   AND SRNO            = #SRNO# 
		                   AND LAW_NTF_DVSN_CD = #LAW_NTF_DVSN_CD# )
	</update>
	
	
	<!-- 결재참조번호로 조회-->
	<select id="BADGDA009EApvDocNoselect" parameterClass="paramMap" resultClass="resultMap">
              SELECT                  
                     ORG_CD           /* 기관코드 */   
                    ,SRNO             /* 일련번호 */  
                    ,YR               /* 년도 */
                    ,LAW_NTF_DVSN_CD  /* 법령통보구분코드 */
                    ,DPT_CD           /* 부서코드 */
                    ,HNDL_OPIN_CD     /* 처리의견코드 */
                    ,NTF_TIT_NM       /* 통보제목명 */
                    ,LAW_NTF_DVSN_CD  /* 법령통보구분코드 */     
               FROM TBBADGDA004M      /* 관련법령통지통보 */
              WHERE APV_DOC_NO = #strApvDocNo#
	</select>
	
	
	<!-- 관련법령 조회 - 2017.04.10 yyh -->
	<select id="BADGDA009EMainKeyselect" parameterClass="paramMap" resultClass="resultMap">
              SELECT                  
                     ORG_CD           /* 기관코드 */   
                    ,SRNO             /* 일련번호 */  
                    ,YR               /* 년도 */
                    ,LAW_NTF_DVSN_CD  /* 법령통보구분코드 */
                    ,DPT_CD           /* 부서코드 */
                    ,HNDL_OPIN_CD     /* 처리의견코드 */
                    ,NTF_TIT_NM       /* 통보제목명 */
                    ,LAW_NTF_DVSN_CD  /* 법령통보구분코드 */     
               FROM TBBADGDA004M      /* 관련법령통지통보 */
              WHERE ORG_CD             = #ORG_CD#
                AND YR                 = #YR#
                AND SRNO               = #SRNO#
                AND LAW_NTF_DVSN_CD    = #LAW_NTF_DVSN_CD#
	</select>	
	
  <resultMap class="java.util.HashMap" id="reportselect">
     <result property="ORG_CD"            column="ORG_CD"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 기관코드 -->   
     <result property="ORG_NM"            column="ORG_NM"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 기관코드명 -->
     <result property="YR"                column="YR"                jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 년도 -->
     <result property="SRNO"              column="SRNO"              jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 일련번호 -->
     <result property="CONT_WAY_CD"       column="CONT_WAY_CD"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약방법코드 -->
     <result property="CONT_WAY_NN"       column="CONT_WAY_NN"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약방법코드명 -->
     <result property="CONT_DVSN_CD"      column="CONT_DVSN_CD"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약구분코드  -->
     <result property="CONT_DVSN_NN"      column="CONT_DVSN_NN"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약구분코드명  -->
     <result property="CONT_NM"           column="CONT_NM"           jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약명 -->
     <result property="CONT_PPS_TXT"      column="CONT_PPS_TXT"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약목적 -->
     <result property="APT_ESTM_AM"       column="APT_ESTM_AM"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 예상견적금액 -->
     <result property="CONT_AM"           column="CONT_AM"           jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약금액 -->
     <result property="CONT_STR_DT"       column="CONT_STR_DT"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약시작일자 -->
     <result property="CONT_END_DT"       column="CONT_END_DT"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약종료일자 -->
     <result property="CONT_RSN"          column="CONT_RSN"          jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약사유 -->
     <result property="CONT_BAS_TXT"      column="CONT_BAS_TXT"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약근거내용 -->
     <result property="SEC_SSEC_TXT"      column="SEC_SSEC_TXT"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 장관내용 -->
     <result property="DITM_TXT"          column="DITM_TXT"          jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 세항내용 -->
     <result property="SITM_TXT"          column="SITM_TXT"          jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 목내용 -->
     <result property="CONT_CHGR_NM"      column="CONT_CHGR_NM"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약담당자명 -->
     <result property="CONT_ETP_NM"       column="CONT_ETP_NM"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약업체명 -->
     <result property="CONT_ETP_RPST_NM"  column="CONT_ETP_RPST_NM"  jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약업체대표명 -->
     <result property="CONT_ETP_AD"       column="CONT_ETP_AD"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약업체주소 -->
     <result property="CONT_DT"           column="CONT_DT"           jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 계약일 -->
     <result property="BZN"               column="BZN"               jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 사업자등록번호 -->
     <result property="REGI_DT"           column="REGI_DT"           jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 등록일 -->
     <result property="REGN_ID"           column="REGN_ID"           jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 등록자ID -->
     <result property="ATT_DCM_EXI_YN"    column="ATT_DCM_EXI_YN"    jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 첨부서류존재여부 -->
     <result property="DOC_TEXT_NO"       column="DOC_TEXT_NO"       jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 문서텍스트번호 -->
     <result property="SMT_DT"            column="SMT_DT"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 제출일 -->
     <result property="ATT_ACP_YN"        column="ATT_ACP_YN"        jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 첨부접수여부 -->
     <result property="DOC_ACP_DH"        column="DOC_ACP_DH"        jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 문서접수일시 -->  
     <result property="EXAM_RSLT_TXT"     column="EXAM_RSLT_TXT"     jdbcType="CLOB"     javaType="java.lang.String"/>   <!-- 검토결과내용 -->           
     <result property="HNDL_CHGR_NM"      column="HNDL_CHGR_NM"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 처리담당자명 -->
     <result property="HNDL_OPIN_CD"      column="HNDL_OPIN_CD"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 처리의견코드 -->
     <result property="HNDL_OPIN_NN"      column="HNDL_OPIN_NN"      jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 처리의견코드명 -->
     <result property="DTM_YN"            column="DTM_YN"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 확정여부 -->   
     <result property="DTM_DH"            column="DTM_DH"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 확정일시 --> 
     <result property="RMK"               column="RMK"               jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 비고 --> 
     <result property="DOC_ID"            column="DOC_ID"            jdbcType="VARCHAR2" javaType="java.lang.String"/>   <!-- 문서ID -->    
 </resultMap>
  
	<!--(출력물)관련법령통지통보 조회-->
	<select id="BADGDA009EReportselect1" parameterClass="paramMap"   resultMap="reportselect">
         SELECT A.ORG_CD                                             /* 기관코드 */   
               ,F_ORG_INFO(A.ORG_CD,'1')            AS ORG_NM        /* 기관코드명 */
               ,A.YR                                                 /* 년도 */
               ,A.SRNO                                               /* 일련번호 */
               ,A.CONT_WAY_CD                                        /* 계약방법코드 */
               ,F_CODE_NM('1000204',A.CONT_WAY_CD)  AS CONT_WAY_NN   /* 계약방법코드명 */
               ,A.CONT_DVSN_CD                                       /* 계약구분코드  */
               ,F_CODE_NM('1000205',A.CONT_DVSN_CD) AS CONT_DVSN_NN  /* 계약구분코드명  */
               ,A.CONT_NM                                            /* 계약명 */
               ,A.CONT_PPS_TXT                                       /* 계약목적 */
               ,A.APT_ESTM_AM                                        /* 예상견적금액 */
               ,A.CONT_AM                                            /* 계약금액 */
               ,A.CONT_STR_DT                                        /* 계약시작일자 */
               ,A.CONT_END_DT                                        /* 계약종료일자 */
               ,A.CONT_RSN                                           /* 계약사유 */
               ,A.CONT_BAS_TXT                                       /* 계약근거내용 */
               ,A.SEC_SSEC_TXT                                       /* 장관내용 */
               ,A.DITM_TXT                                           /* 세항내용 */
               ,A.SITM_TXT                                           /* 목내용 */
               ,A.CONT_CHGR_NM                                       /* 계약담당자명 */
               ,A.CONT_ETP_NM                                        /* 계약업체명 */
               ,A.CONT_ETP_RPST_NM                                   /* 계약업체대표명 */
               ,A.CONT_ETP_AD                                        /* 계약업체주소 */
               ,A.CONT_DT                                            /* 계약일 */
               ,A.BZN                                                /* 사업자등록번호 */
               ,A.REGI_DT                                            /* 등록일 */
               ,A.REGN_ID                                            /* 등록자ID */
               ,A.ATT_DCM_EXI_YN                                     /* 첨부서류존재여부 */
               ,A.DOC_TEXT_NO                                        /* 문서텍스트번호 */
               ,A.SMT_DT                                             /* 제출일 */
               ,NVL(A.ATT_ACP_YN, '')               AS ATT_ACP_YN    /* 첨부접수여부 */
               ,A.DOC_ACP_DH                                         /* 문서접수일시 */  
               ,A.EXAM_RSLT_TXT                                      /* 검토결과내용 */           
               ,NVL(A.HNDL_CHGR_NM,'')              AS HNDL_CHGR_NM  /* 처리담당자명 */
               ,A.HNDL_OPIN_CD                                       /* 처리의견코드 */
               ,F_CODE_NM('1000196',A.HNDL_OPIN_CD) AS HNDL_OPIN_NN  /* 처리의견코드명 */
               ,A.DTM_YN                                             /* 확정여부 */   
               ,NVL(A.DTM_DH , '')                  AS DTM_DH        /* 확정일시 */ 
               ,A.RMK                               AS RMK           /* 비고 */ 
               ,A.DOC_ID                                             /* 문서ID */        
           FROM TBBADGDA004M A        /* 관련법령통지통보 */                           
          WHERE 1 = 1                    
            AND ORG_CD            = #strOrgCd#           /* 기관코드 */ 
            AND YR                = #strYr#              /* 년도 */
		    AND SRNO              = #strSrno#            /* 일련번호 */
		    AND LAW_NTF_DVSN_CD   = #strLawNtfDvsnCd#    /* 법령통보구분코드 */                     
	</select>		

	<!-- 일련번호 채번 - 2016.12.27 yyh -->
	<select id="BADGDA009EMainMaxSrnoSelect" parameterClass="paramMap" resultClass="resultMap">
        <![CDATA[ 
                  SELECT TO_CHAR(NVL(MAX(SRNO),0) + 1) AS MAX_SRNO
                    FROM TBBADGDA004M 
                   WHERE 1=1
                     AND ORG_CD = #ORG_CD#
                     AND YR     = #YR#
		]]>
	</select>	
	
	<!--신규 insert - 2016.12.26 yyh -->
	<insert id="BADGDA009EMainInsert" parameterClass="paramMap">
        	 INSERT INTO TBBADGDA004M      
        	 (       ORG_CD                
        	        ,YR                    
        	        ,SRNO                  
        	        ,LAW_NTF_DVSN_CD       
        	        ,DPT_CD                
        	        ,ACP_STA_CD            
        	        ,ACP_DT                
        	        ,RCEP_ID               
        	        ,HNDL_DT               
        	        ,HNDL_PEN_ID           
        	        ,CPLT_DT               
        	        ,DTM_YN                
        	        ,DTM_DH                
        	        ,HNDL_OPIN_CD          
        	        ,EXAM_RSLT_TXT         
        	        ,APV_DOC_NO            
        	        ,NTF_TIT_NM            
        	        ,NTF_TXT               
        	        ,CONT_DT               
        	        ,CONT_WAY_CD           
        	        ,CONT_DVSN_CD          
        	        ,CONT_AM               
        	        ,REL_LAW_NTF_CD        
        	        ,BAI_RPT_MNG_NO        
        	        ,BAI_RPT_DT            
        	        ,DEL_YN                
        	        ,REGI_DT               
        	        ,REGN_ID               
        	        ,HNDL_STT_TXT          
        	        ,CMT_SBCN_TXT          
        	        ,ENF_DT                
        	        ,AUD_MTRL_RMK          
        	        ,AUD_MTRL_YR           
        	        ,AUD_MTRL_DPT_CD       
        	        ,AUD_MTRL_SRNO         
        	        ,CON_RET_KY_NM         
        	        ,CON_YR                
        	        ,CON_SRNO              
        	        ,DOC_ID                
        	        ,DOC_TYP_CD  
        	        ,SLF_IPT_YN          
        	        ,FRT_USR_ID            
        	        ,FNL_USR_ID            
        	        ,FNL_DEAL_DPT_CD       
        	        ,FNL_MNU_ID            
        	        ,FRT_REGI_DH           
        	        ,FNL_MDF_DH            
        	    ) VALUES (                 
                     #ORG_CD#
                    ,#YR#
                    ,#SRNO#
                    ,#LAW_NTF_DVSN_CD#
                    ,(SELECT CASE WHEN LENGTH(ENFM_DPT_CD) = 4 THEN SUBSTR(ENFM_DPT_CD,1,2) || '0' ||
                                               						SUBSTR(ENFM_DPT_CD,3,2) || '0'
					              ELSE ENFM_DPT_CD
					          END
					    FROM TBDCMACM015M
					   WHERE ORG_CD = #ORG_CD#)
                    ,#ACP_STA_CD#
                    ,NVL(#ACP_DT#, TO_CHAR(SYSDATE,'YYYYMMDD'))
                    ,#RCEP_ID#
                    ,#HNDL_DT#
                    ,#HNDL_PEN_ID#
                    ,#CPLT_DT#
                    ,#DTM_YN#
                    ,#DTM_DH#
                    ,#HNDL_OPIN_CD#
                    ,#EXAM_RSLT_TXT#
                    ,#APV_DOC_NO#
                    ,#NTF_TIT_NM#
                    ,#NTF_TXT#
                    ,#CONT_DT#
                    ,#CONT_WAY_CD#
                    ,#CONT_DVSN_CD#
                    ,#CONT_AM#
                    ,#REL_LAW_NTF_CD#
                    ,#BAI_RPT_MNG_NO#
                    ,#BAI_RPT_DT#
                    ,#DEL_YN#
                    ,#REGI_DT#
                    ,#REGN_ID#
                    ,#HNDL_STT_TXT#
                    ,#CMT_SBCN_TXT#
                    ,#ENF_DT#
                    ,#AUD_MTRL_RMK#
                    ,#AUD_MTRL_YR#
                    ,#AUD_MTRL_DPT_CD#
                    ,#AUD_MTRL_SRNO#
                    ,#CON_RET_KY_NM#
                    ,#CON_YR#
                    ,#CON_SRNO#
                    ,#DOC_ID#
                    ,#DOC_TYP_CD#
                    ,#SLF_IPT_YN#
                    ,#FRT_USR_ID#
                    ,#FNL_USR_ID#
                    ,#FNL_DEAL_DPT_CD#
                    ,#FNL_MNU_ID#
                    ,SYSDATE
                    ,SYSDATE
        	    )                        	
	</insert>	
</sqlMap> 
