<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="bad/ear/017">
	<!-- 개인정보처리 조회 -->
	<select id="BADEAR017ListSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
		 select D1.PSN_INF_HNDL_SYM_NO,
		        D1.PSN_INF_HNDL_SYM_TXT,
		        D1.REGI_DT
		   from TBBADEAR010L D1
		  where 1=1
		]]>
		<dynamic>
			<isNotEmpty prepend="AND" property="strDateFrom">
				D1.REGI_DT >
				#strDateFrom#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="strDateTo">
				D1.REGI_DT &lt;=
				#strDateTo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="strMasking">
				D1.PSN_INF_HNDL_SYM_TXT LIKE
				'%'||#strMasking#||'%'
			</isNotEmpty>
		</dynamic>
		<![CDATA[       
			ORDER BY D1.PSN_INF_HNDL_SYM_NO ASC
		]]>
	</select>

	<!-- 개인정보처리기호 삭제 -->
	<delete id="BADEAR017ListDelete" parameterClass="paramMap">
		DELETE
		FROM
		TBBADEAR010L
		WHERE 1=1
		AND PSN_INF_HNDL_SYM_NO=#PSN_INF_HNDL_SYM_NO#
		AND
		PSN_INF_HNDL_SYM_TXT=#PSN_INF_HNDL_SYM_TXT#
	</delete>
	<select id="BADEAR017CheckSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[       
			SELECT 	PSN_INF_HNDL_SYM_TXT
			FROM		TBBADEAR010L
			WHERE	PSN_INF_HNDL_SYM_TXT = #PSN_INF_HNDL_SYM_TXT#
		]]>
		<dynamic>
			<isNotEmpty property="PSN_INF_HNDL_SYM_NO">
				AND		PSN_INF_HNDL_SYM_NO != #PSN_INF_HNDL_SYM_NO#
			</isNotEmpty>
		</dynamic>
	</select>
	<!-- 개인정보처리기호 등록 -->
	<insert id="BADEAR017MainInsert" parameterClass="paramMap">
		INSERT INTO
		TBBADEAR010L
		(
		PSN_INF_HNDL_SYM_NO
		, PSN_INF_HNDL_SYM_TXT
		, REGI_DT
		,
		FRT_USR_ID
		, FNL_USR_ID
		, FNL_DEAL_DPT_CD
		, FNL_MNU_ID
		, FRT_REGI_DH
		,
		FNL_MDF_DH
		)
		VALUES
		(
		#PSN_INF_HNDL_SYM_NO#
		, #PSN_INF_HNDL_SYM_TXT#
		,
		#REGI_DT#
		, #FRT_USR_ID#
		, #FNL_USR_ID#
		, #FNL_DEAL_DPT_CD#
		, #FNL_MNU_ID#
		, SYSDATE
		, SYSDATE
		)
	</insert>

	<!-- 개인정보처리기호 수정 -->
	<update id="BADEAR017MainUpdate" parameterClass="paramMap">
		UPDATE TBBADEAR010L
		SET PSN_INF_HNDL_SYM_TXT = #PSN_INF_HNDL_SYM_TXT#
		<isNotEmpty prepend="," property="REGI_DT">
			REGI_DT = #REGI_DT#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD =
			#FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MDF_DH">
			FNL_MDF_DH = SYSDATE
		</isNotEmpty>
		WHERE 1 = 1
		AND PSN_INF_HNDL_SYM_NO=#PSN_INF_HNDL_SYM_NO#
	</update>

	<!-- 개인정보처리기호번호 Max값 찾기 -->
	<select id="BADEAR017ListNoSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[     	
			    SELECT LPAD(NVL(MAX(TO_NUMBER(PSN_INF_HNDL_SYM_NO)),0)+1,3,0) AS MAX_SEQ
				  FROM TBBADEAR010L
				 WHERE 1=1
		]]>
	</select>

</sqlMap>
