<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/aea/008">
	<select id="FAAAEA008EMainSelect" parameterClass="paramMap" resultClass="resultMap">
		<include refid="include.pageSelct" />
		<![CDATA[
			SELECT T1.SRNO
			       ,F_CODE_NM('1000864',T1.MTRL_DVSN_CD) AS MTRL_DVSN_NM
			       ,T1.MTRL_DVSN_CD
			       ,F_DPT_INFO(T1.DPT_CD,'1') AS DPT_NM
			       ,T1.DPT_CD
			       ,T1.TIT_NM
			       ,F_USR_INFO(T1.REGN_CNB,'2') AS REGN_NM
			       ,T1.REGN_CNB
			       ,TO_CHAR(T1.FRT_REGI_DH,'YYYY-MM-DD') AS FRT_REGI_DT
			       ,T1.DTL_TXT
			       ,T1.DOC_ID
			  FROM TBFAAAEA045M T1
			 WHERE 1=1
		]]>
		
		<dynamic>
			<isNotEmpty property="strMTRL_DVSN_CD">
				AND T1.MTRL_DVSN_CD = #strMTRL_DVSN_CD#
			</isNotEmpty>
			<isNotEmpty property="strDPT_CD">
				AND T1.DPT_CD = #strDPT_CD#
			</isNotEmpty>
			<isNotEmpty property="strTIT_NM">
				AND T1.TIT_NM LIKE '%'||#strTIT_NM#||'%'
			</isNotEmpty>
			<isNotEmpty property="strSRNO">
				AND T1.SRNO = #strSRNO#
			</isNotEmpty>
			<isNotEmpty property="strFRT_REGI_DT1">
				AND TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') <![CDATA[ >= ]]> #strFRT_REGI_DT1#
			</isNotEmpty>
			<isNotEmpty property="strFRT_REGI_DT2">
				AND TO_CHAR(T1.FRT_REGI_DH,'YYYYMMDD') <![CDATA[ <= ]]>  #strFRT_REGI_DT2#
			</isNotEmpty>	
			
		</dynamic>
		
		<include refid="include.pageOrder" />
	</select>
	
	<select id="FAAAEA008EMainSelectDetail" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
			SELECT T1.SRNO
			       ,F_CODE_NM('1000864',T1.MTRL_DVSN_CD) AS MTRL_DVSN_NM
			       ,T1.MTRL_DVSN_CD
			       ,F_DPT_INFO(T1.DPT_CD,'1') AS DPT_NM
			       ,T1.DPT_CD
			       ,T1.TIT_NM
			       ,F_USR_INFO(T1.REGN_CNB,'2') AS REGN_NM
			       ,T1.REGN_CNB
			       ,TO_CHAR(T1.FRT_REGI_DH,'YYYY-MM-DD') AS FRT_REGI_DT
			       ,T1.DTL_TXT
			       ,T1.DOC_ID
			  FROM TBFAAAEA045M T1
			 WHERE 1=1
		]]>		
		<dynamic>
			<isNotEmpty property="strSRNO">
				AND T1.SRNO = #strSRNO#
			</isNotEmpty>
		</dynamic>
		ORDER BY T1.SRNO DESC

	</select>
	
	
	
	<select id="FAAAEA009EKeySelect" parameterClass="paramMap" resultClass="integer">
		<![CDATA[
                  SELECT NVL(MAX(SRNO),0) + 1 AS MAX_SRNO
                    FROM TBFAAAEA045M
		]]>
	</select>
	
	
	<insert id="FAAAEA009EMainInsert" parameterClass="paramMap">
		<![CDATA[
			INSERT INTO TBFAAAEA045M
						(	 SRNO
						    ,MTRL_DVSN_CD
						    ,DPT_CD
						    ,TIT_NM
						    ,DTL_TXT
						    ,DOC_ID
						    ,REGN_CNB
						    ,FRT_USR_ID
						    ,FNL_USR_ID
						    ,FNL_DEAL_DPT_CD
						    ,FNL_MNU_ID
						    ,FRT_REGI_DH
						    ,FNL_MDF_DH
						)
					VALUES (	 #SRNO#
								,#MTRL_DVSN_CD#
						        ,#DPT_CD#
						    	,#TIT_NM#
						    	,#DTL_TXT#
						    	,#DOC_ID#
						    	,#S_CNB#
						    	,#FRT_USR_ID#
						    	,#FNL_USR_ID#
						    	,#FNL_DEAL_DPT_CD#
						   	 	,#FNL_MNU_ID#
						    	,SYSDATE
						    	,SYSDATE
						   )
		]]>
	</insert>
	
	<update id="FAAAEA009EMainUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE TBFAAAEA045M T1
			   SET MTRL_DVSN_CD = #MTRL_DVSN_CD#
			      ,DPT_CD = #DPT_CD#
			      ,TIT_NM = #TIT_NM#
			      ,DTL_TXT = #DTL_TXT#
			      ,DOC_ID = #DOC_ID#
			      ,FNL_USR_ID = #FNL_USR_ID#
			      ,FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
			      ,FNL_MNU_ID = #FNL_MNU_ID#
			      ,FNL_MDF_DH = SYSDATE
			 WHERE T1.SRNO = #SRNO#
		]]>
	</update>
	
	<delete id="FAAAEA009EMainDelete" parameterClass="paramMap">
		<![CDATA[
			DELETE
			  FROM TBFAAAEA045M T1
			 WHERE T1.SRNO = #SRNO#
		]]>
	</delete>
</sqlMap> 
