<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/cav/031">
	<!--업무분장 목록조회-->
	<select id="FAACAV031EMainSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/031/FAACAV031EMainSelect */ ]]>
		<include refid="include.pageSelct" />
        <![CDATA[
        	 
			SELECT 
				DISTINCT 
				 ORG_CD
				, ORG_NM
				,RPAD(BR_CD,3,'0') AS BR_CD
				,RPAD(DIV_CD,3,'0') AS DIV_CD
				,CD1.ACNT_CD_NM
				,DPT_NM
			FROM TWFAACAV003M A,TWFAACAV024C CD1,TBDCMACM002M CM
			WHERE 1 = 1
			AND   SUBSTR(A.ORG_CD,1,3) = CD1.ACNT_CD
			AND   CD1.ACNT_DVSN_CD = '02'
			AND   CM.DPT_CD(+)  = RPAD(A.BR_CD,3,'0')||RPAD(A.DIV_CD,3,'0')

		]]>	   
		<isNotEmpty property="strOrgCd">	
			   AND ORG_CD  =  #strOrgCd# 
		</isNotEmpty>
		<isNotEmpty property="strOrgCdSt">	
			   AND ORG_CD  BETWEEN  #strOrgCdSt# AND #strOrgCdEd#
		</isNotEmpty>		
		<include refid="include.pageOrder" />
			ORDER BY ORG_CD
	</select> 

		
	<!--업무분장 update-->
	<update id="FAACAV031EMainUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/031/FAACAV031EMainUpdate */ ]]>
			UPDATE TWFAACAV003M
			   SET 
			       BR_CD   = RPAD(#BR_CD#,3,'0')
			     , DIV_CD  = RPAD(#DIV_CD#,3,'0')
		   
			  WHERE 1=1
			  AND ORG_CD = #ORG_CD#

	</update>
	
	
</sqlMap> 
