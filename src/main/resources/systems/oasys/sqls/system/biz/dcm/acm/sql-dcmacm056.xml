<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="dcm/acm/056">
	<select id="dcmacm056QselectMainList" parameterClass="paramMap" resultClass="resultMap">
		<include refid = "include.pageSelct"/>
		<![CDATA[
		
			SELECT	T1.YE,T1.QR_DVSN_CD,T3.DPT_SNO , T3.DPT_CD, T3.DPT_NM, T2.RANK_CD
					, F_CODE_NM('1000173',T2.RANK_CD) AS RANK_NM
					, F_CODE_NM('1000338',T2.USR_DVSN_CD) AS USR_DVSN_NM
					, T1.CNB
					,T2.USR_NAM
		]]>
			<isEqual property="strYN" compareValue="Y">
				, T1.BZT_ICLS_WRK_CNT_1 + BZT_ICLS_WRK_CNT_2 + BZT_ICLS_WRK_CNT_3 + BZT_ICLS_WRK_CNT_4 +BZT_ICLS_WRK_CNT_5 +BZT_ICLS_WRK_CNT_6 AS SUM
				, BZT_ICLS_WRK_CNT_1 AS CNT1
				, BZT_ICLS_WRK_CNT_2 AS CNT2
				, BZT_ICLS_WRK_CNT_3 AS CNT3
				, BZT_ICLS_WRK_CNT_4 AS CNT4
				, BZT_ICLS_WRK_CNT_5 AS CNT5
				, BZT_ICLS_WRK_CNT_6 AS CNT6
			</isEqual>
		<isEqual property="strYN" compareValue="N">
				, T1.BZT_EXMP_WRK_CNT_1 + BZT_EXMP_WRK_CNT_2 + BZT_EXMP_WRK_CNT_3 + BZT_EXMP_WRK_CNT_4 +BZT_EXMP_WRK_CNT_5 +BZT_EXMP_WRK_CNT_6 AS SUM
				, BZT_EXMP_WRK_CNT_1 AS CNT1
				, BZT_EXMP_WRK_CNT_2 AS CNT2
				, BZT_EXMP_WRK_CNT_3 AS CNT3
				, BZT_EXMP_WRK_CNT_4 AS CNT4
				, BZT_EXMP_WRK_CNT_5 AS CNT5
				, BZT_EXMP_WRK_CNT_6 AS CNT6
		</isEqual>
		<![CDATA[
				,T2.RAL_BLT_DIV_CD,NVL(T2.INN_RANK_CD,'50') AS INN_RANK_CD
				,T2.RANK_SRT_SEQ_NM
				,T2.CRNT_RANK_APM_DT
				,SRT_KY_NO, CRNT_DPT_APM_DT, EIN
			FROM	TBDCMACM040M T1
					,TBDCMACM001M T2
					,TBDCMACM002M T3
			WHERE	1=1
			AND		T1.YE = #strYE#
			AND		T1.QR_DVSN_CD = #strQR_DVSN_CD#
			AND T1.CNB = T2.CNB
			AND T2.DPT_CD = T3.DPT_CD
			
		]]>
		<isNotEmpty property="strDPT_CD">
			AND T2.DPT_CD = #strDPT_CD#
		</isNotEmpty>
		
		<isNotEmpty property="strCNB">
			AND T2.CNB = #strCNB#
		</isNotEmpty>
		
		<isNotEmpty property="strUSR_DVSN_CD">
			AND T2.USR_DVSN_CD = #strUSR_DVSN_CD#
		</isNotEmpty>
		
		<include refid = "include.pageOrder"/> 
	</select>
	
	<select id="dcmacm056QselectExcelExport" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[
		
			SELECT	T1.YE,T1.QR_DVSN_CD,T3.DPT_SNO , T3.DPT_CD, T3.DPT_NM, T2.RANK_CD
					, F_CODE_NM('1000173',T2.RANK_CD) AS RANK_NM
					, F_CODE_NM('1000338',T2.USR_DVSN_CD) AS USR_DVSN_NM
					, T1.CNB
					,T2.USR_NAM
		]]>
			<isEqual property="strYN" compareValue="Y">
		<![CDATA[
				, T1.BZT_ICLS_WRK_CNT_1 + BZT_ICLS_WRK_CNT_2 + BZT_ICLS_WRK_CNT_3 + BZT_ICLS_WRK_CNT_4 +BZT_ICLS_WRK_CNT_5 +BZT_ICLS_WRK_CNT_6 AS SUM
				, BZT_ICLS_WRK_CNT_1 AS CNT1
				, BZT_ICLS_WRK_CNT_2 AS CNT2
				, BZT_ICLS_WRK_CNT_3 AS CNT3
				, BZT_ICLS_WRK_CNT_4 AS CNT4
				, BZT_ICLS_WRK_CNT_5 AS CNT5
				, BZT_ICLS_WRK_CNT_6 AS CNT6
		]]>
			</isEqual>
		<isEqual property="strYN" compareValue="N">
		<![CDATA[
				, T1.BZT_EXMP_WRK_CNT_1 + BZT_EXMP_WRK_CNT_2 + BZT_EXMP_WRK_CNT_3 + BZT_EXMP_WRK_CNT_4 +BZT_EXMP_WRK_CNT_5 +BZT_EXMP_WRK_CNT_6 AS SUM
				, BZT_EXMP_WRK_CNT_1 AS CNT1
				, BZT_EXMP_WRK_CNT_2 AS CNT2
				, BZT_EXMP_WRK_CNT_3 AS CNT3
				, BZT_EXMP_WRK_CNT_4 AS CNT4
				, BZT_EXMP_WRK_CNT_5 AS CNT5
				, BZT_EXMP_WRK_CNT_6 AS CNT6
		]]>
		</isEqual>
		<![CDATA[
				,T2.RAL_BLT_DIV_CD,NVL(T2.INN_RANK_CD,'50') AS INN_RANK_CD
				,T2.RANK_SRT_SEQ_NM
				,T2.CRNT_RANK_APM_DT
				,SRT_KY_NO, CRNT_DPT_APM_DT, EIN
			FROM	TBDCMACM040M T1
					,TBDCMACM001M T2
					,TBDCMACM002M T3
			WHERE	1=1
			AND		T1.YE = #strYE#
			AND		T1.QR_DVSN_CD = #strQR_DVSN_CD#
			AND T1.CNB = T2.CNB
			AND T2.DPT_CD = T3.DPT_CD
			ORDER BY DPT_SNO,RAL_BLT_DIV_CD, INN_RANK_CD ASC , RANK_SRT_SEQ_NM, CRNT_RANK_APM_DT, SRT_KY_NO, CRNT_DPT_APM_DT, EIN
		]]>
	</select>
</sqlMap> 