<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/047">

	<select id="badded047EDistricTrainselect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[       
        SELECT RGN_CD
             , F_CODE_NM('1000001',RGN_CD) AS RGN_NM
             , STN_NM
             , STAD_STN_RMK_TXT
             , MDF_DT
          FROM TBBADDED015B A, TBDCMACM013C B
          WHERE 1=1
            AND B.CMM_CD_DVSN_CD ='1000001'
            AND A.RGN_CD = B.CD
        ]]>
        <isNotEmpty property="strRgnNm">	 
			  AND B.CD_NM LIKE '%'||#strRgnNm#||'%'		 /*지역코드*/
		</isNotEmpty>   
		ORDER BY MDF_DT
        </select>
        
	<insert id="badded047EDistricTraininsert" parameterClass="paramMap">
		INSERT
		INTO
		TBBADDED015B
		( RGN_CD
		, STN_NM
		, STAD_STN_RMK_TXT
		, MDF_DT
		
		, FNL_MNU_ID
		, FRT_USR_ID
		, FNL_USR_ID
		, FNL_DEAL_DPT_CD
		, FRT_REGI_DH
		, FNL_MDF_DH
		)
		VALUES
		( #RGN_CD#
		, #STN_NM#
		, #STAD_STN_RMK_TXT#
		, #MDF_DT# 
        
		, #FNL_MNU_ID#
		, #FRT_USR_ID#
		, #FNL_USR_ID#
		, #FNL_DEAL_DPT_CD#
		, SYSDATE
		, SYSDATE

		)
	</insert>
	
	
	<update id="badded047EDistricTrainupdate" parameterClass="paramMap">
		UPDATE TBBADDED015B
		SET RGN_CD = #RGN_CD#
	
		
		, FNL_MDF_DH = SYSDATE
		, FNL_USR_ID = #FNL_USR_ID#
		, FNL_DEAL_DPT_CD =	#FNL_DEAL_DPT_CD#
		, FNL_MNU_ID = #FNL_MNU_ID#

		<isNotNull prepend="," property="STN_NM">
			STN_NM = #STN_NM#
		</isNotNull>
		<isNotNull prepend="," property="STAD_STN_RMK_TXT">
			STAD_STN_RMK_TXT = #STAD_STN_RMK_TXT#
		</isNotNull>

		<isNotNull prepend="," property="MDF_DT">
			MDF_DT = TO_CHAR(SYSDATE,'yyyymmdd')
		</isNotNull>

				WHERE 1 = 1
		AND RGN_CD = #RGN_CD#


	</update>
	
	
	<delete id="badded047EDistricTraindelete" parameterClass="paramMap">
		DELETE
		TBBADDED015B
		WHERE 1 = 1
		AND RGN_CD = #RGN_CD#

	</delete>
		
</sqlMap> 
