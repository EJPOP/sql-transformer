<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/qbo/151">
	
 
 	<select id="CSPQBO151QMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	  CASE WHEN AGT_CNB IS NOT NULL THEN F_USR_INFO(B.LAG_INV_CNB,'2')||'('||F_USR_INFO(B.AGT_CNB,'2')||')'
            			ELSE  F_USR_INFO(B.LAG_INV_CNB,'2') END  AS LAG_INV_NAM		/*대출자명*/
					, F_USR_INFO(B.LAG_INV_CNB,'1')  AS LAG_INV_ID 					/*대출자ID*/
					, F_DPT_INFO(F_USR_INFO(B.LAG_INV_CNB,'5'), '1') AS DPT_NM			/*부서명*/
					, F_CODE_NM('1000173', F_USR_INFO(B.LAG_INV_CNB, '3')) AS RANK_NAM	/*직급명*/
					, B.BOO_LEND_DT			/*BOO_LEND_DT*/
					, DECODE(B.BOO_REN_YN_CD,'0',B.BOO_REN_APT_DT,'') AS BOO_REN_APT_DT	/*도서반납예정일*/
					, A.BOO_NO  			/*도서번호*/
					, A.BOO_NO||'-'||A.BOO_VLE_NO AS BOO_NOS/*도서번호*/
					, A.BOO_VLE_NO /*도서권번호*/
					, A.CAT_SYM_NM 			/*분류기호명*/
					, SUBSTR(A.CAT_SYM_NM,1,1)||'-'||SUBSTR(A.CAT_SYM_NM,2,3)||'-'||SUBSTR(A.CAT_SYM_NM,5,3) AS CAT_SYM_NM2
					, A.BOO_TIT_NM  		/*도서제목명*/
					, A.ATR_NM  			/*저자명*/
					, A.BOO_KND_CD			/*도서종류코드*/
					, A.COPT_CAT_CD			/*소관분류코드*/
					, B.LAG_INV_CNB			/*대출자전산번호*/
					, F_USR_INFO(B.LAG_INV_CNB,'5')	AS DPT_CD		/*부서코드*/
					, F_USR_INFO(B.LAG_INV_CNB, '3') AS RANK_CD		/*직급코드*/
					, B.BOO_LEND_SLN		/*도서대출연번*/
					, NVL(B.BOO_REN_YN_CD,'1') AS BOO_REN_YN_CD
					, B.BOO_REN_DT
			FROM	TBCSPQBO001M A ,
					TBCSPQBO002H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
		]]> 
		<dynamic>
        	<isNotEmpty property="strBOO_NOS">
				AND	A.BOO_NO &gt;= #strBOO_NOS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_NOE">
				AND	A.BOO_NO &lt;= #strBOO_NOE#
        	</isNotEmpty>
        	<isNotEmpty property="strBAR_CD">
        		AND	A.BAR_CD = #strBAR_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTS">
        		AND	B.BOO_LEND_DT &gt;= #strBOO_LEND_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTE">
        		AND	B.BOO_LEND_DT &lt;= #strBOO_LEND_DTE#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTS">
        		AND	B.BOO_REN_APT_DT &gt;= #strBOO_REN_APT_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTE">
        		AND	B.BOO_REN_APT_DT &lt;= #strBOO_REN_APT_DTE#
        	</isNotEmpty>
        	
			<isNotEmpty property="strBOO_KND_CD"> 
			  	AND A.BOO_KND_CD IN 
			  		(SELECT 	SUBSTR(CODE,INSTR(CODE,',',1,LEVEL)+1,INSTR(CODE,',',1,LEVEL+1)-INSTR(CODE,',',1,LEVEL) -1) merge_col
                     FROM 	DUAL A
                     CROSS JOIN(SELECT ','|| #strBOO_KND_CD# ||',' AS CODE FROM DUAL) B
                     CONNECT BY LEVEL&lt;=LENGTH(CODE)-LENGTH(REPLACE(CODE,','))-1 )				
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NMS2"> 
				AND	A.CAT_SYM_NM &gt;= #strCAT_SYM_NMS1#||#strCAT_SYM_NMS2#||#strCAT_SYM_NMS3#
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NME2"> 
				AND	A.CAT_SYM_NM &lt;= #strCAT_SYM_NME1#||#strCAT_SYM_NME2#||#strCAT_SYM_NME3#
			</isNotEmpty>
        	<isNotEmpty property="strLAG_INV_CNB">
        		AND	B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE USR_NAM LIKE '%'||#strLAG_INV_CNB#||'%')
        	</isNotEmpty>
        	<isNotEmpty property="strDPT_CD">
        		AND B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE DPT_CD = #strDPT_CD#)
        	</isNotEmpty>
        	
        	<isNotEmpty property="strBOO_TIT_NM1">
        		<isEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%'
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        			</isNotEmpty>
        		</isEmpty>
        		<isNotEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND (BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%'))
        					</isEqual>
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	( (BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        								AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        				</isEqual>
        			</isNotEmpty>
        		</isNotEmpty>
        	</isNotEmpty>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="0">
        		AND	B.BOO_REN_YN_CD = '0'
        		AND	A.BOO_LEND_DVSN_CD = '0'
        	</isEqual>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="1">
        		AND (B.BOO_REN_YN_CD = '1' OR B.BOO_REN_YN_CD IS NULL )
        	</isEqual>
        	<isNotEmpty property="strBOO_REN_DTS"> 
				AND	B.BOO_REN_DT &gt;= #strBOO_REN_DTS#
			</isNotEmpty>
			<isNotEmpty property="strBOO_REN_DTE">
        		AND	B.BOO_REN_DT &lt;= #strBOO_REN_DTE#
        	</isNotEmpty>
        	</dynamic>
        	<![CDATA[
        		ORDER BY B.LAG_INV_CNB DESC
        	]]>
	</select>
	
	<select id="CSPQBO153EMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[	
			SELECT 	A.BOO_KND_CD			/*도서종류코드*/
					,F_CODE_NM('1000149',A.BOO_KND_CD) AS BOO_KND_NM	/*도서종류명*/
					,F_USR_INFO(B.LAG_INV_CNB, '2') AS LAG_INV_NAM		/*대출자명*/
					,B.LAG_INV_CNB			/*대출자전산번호*/
					,F_DPT_INFO(F_USR_INFO(B.LAG_INV_CNB, '5'), '1') AS LAG_INV_DPT_NM	/*대출부서*/
					,F_USR_INFO(B.LAG_INV_CNB, '5') AS LAG_INV_DPT_CD	/*대출부서코드*/
					,A.BOO_NO				/*도서번호*/
					,A.BOO_NO||'-'||A.BOO_VLE_NO  AS BOO_NOS/*도서번호*/
					,A.BOO_VLE_NO /*도서권번호*/
					,A.CAT_SYM_NM			/*분류기호*/
					,A.BOO_TIT_NM			/*도서제목*/
					,A.ATR_NM				/*저자명*/
					,B.BOO_REN_APT_DT		/*반납예정일자*/
					,DECODE((SELECT COUNT(*)
							FROM 	TBCSPQBO003H H 
							WHERE 	A.COPT_CAT_CD = H.COPT_CAT_CD
							AND		A.BOO_KND_CD = H.BOO_KND_CD
							AND		A.BOO_NO = H.BOO_NO
							AND		A.CAT_SYM_NM = H.CAT_SYM_NM
							AND		A.BOO_VLE_NO = H.BOO_VLE_NO
							AND		H.LEND_BOKG_STA_CD = 'Y'),0,'N','Y'
						) AS BOO_BOKG_YN	/*대출예약여부*/
					,A.COPT_CAT_CD			/*소관부호*/
					,B.BOO_LEND_SLN
			FROM	TBCSPQBO001M A, TBCSPQBO002H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
			AND		A.BOO_LEND_DVSN_CD = B.BOO_REN_YN_CD
			AND		A.BOO_LEND_DVSN_CD = '0'
		]]>
		<dynamic>
			<isNotEmpty property="strLAG_INV_CNB">
				AND		B.LAG_INV_CNB = #strLAG_INV_CNB#
			</isNotEmpty>
			<isNotEmpty property="strDPT_CD">
				AND		B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE DPT_CD = #strDPT_CD#) 
			</isNotEmpty>
		</dynamic>
		<![CDATA[
       		ORDER BY B.BOO_REN_APT_DT DESC
       	]]>
	</select>
	
	<select id="CSPQBO153ESubSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT 	B.LEND_BOKG_APL_DT
					,F_USR_INFO(B.LEND_BOKG_PEN_CNB, '2') AS LEND_BOKG_PEN_CNB
					,F_DPT_INFO(F_USR_INFO(B.LEND_BOKG_PEN_CNB, '5'), '1') AS LEND_BOKG_DPT_NM
			FROM	TBCSPQBO001M A
					,TBCSPQBO003H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
			AND		A.BOO_KND_CD = #strBOO_KND_CD#
			AND		A.BOO_NO = #strBOO_NO#
			AND		A.CAT_SYM_NM = #strCAT_SYM_NM#
			AND		A.BOO_VLE_NO = #strBOO_VLE_NO#
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
			AND		B.LEND_BOKG_STA_CD = 'Y'
		]]>
	</select>	
	
	<update id="CSPQBO153EMainUpdate" parameterClass="paramMap">
        <![CDATA[
        	UPDATE	TBCSPQBO001M A
        	SET		A.BOO_LEND_DVSN_CD = '1'
        			,A.FNL_USR_ID = #FNL_USR_ID#
					,A.FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
					,A.FNL_MNU_ID = #FNL_MNU_ID#
					,A.FNL_MDF_DH = SYSDATE
        	WHERE	A.COPT_CAT_CD = #COPT_CAT_CD#
        	AND		A.BOO_KND_CD = #BOO_KND_CD#
			AND		A.BOO_NO = #BOO_NO#
			AND		A.CAT_SYM_NM = #CAT_SYM_NM#
			AND		A.BOO_VLE_NO = #BOO_VLE_NO#
        ]]>
    </update>
    
    <update id="CSPQBO153ETBCSPQBO002HUpdate" parameterClass="paramMap">
        <![CDATA[
        	UPDATE	TBCSPQBO002H A
        	SET		A.BOO_REN_YN_CD = '1'
        			,A.BOO_REN_DT = TO_CHAR(SYSDATE,'YYYYMMDD')
        			,A.FNL_USR_ID = #FNL_USR_ID#
					,A.FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
					,A.FNL_MNU_ID = #FNL_MNU_ID#
					,A.FNL_MDF_DH = SYSDATE
        	WHERE	A.COPT_CAT_CD = #COPT_CAT_CD#
        	AND		A.BOO_KND_CD = #BOO_KND_CD#
			AND		A.BOO_NO = #BOO_NO#
			AND		A.CAT_SYM_NM = #CAT_SYM_NM#
			AND		A.BOO_LEND_SLN = #BOO_LEND_SLN#
			AND		A.BOO_VLE_NO = #BOO_VLE_NO#
        ]]>
    </update>
	
	
	<select id="CSPQBO151QReportSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	  F_USR_INFO(B.LAG_INV_CNB,'2')  AS LAG_INV_NAM 					/*대출자명*/
					, F_DPT_INFO(F_USR_INFO(B.LAG_INV_CNB,'5'), '1') AS DPT_NM			/*부서명*/
					, F_CODE_NM('1000173', F_USR_INFO(B.LAG_INV_CNB, '3')) AS RANK_NAM	/*직급명*/
					, TO_CHAR(TO_DATE(B.BOO_LEND_DT),'YYYY-MM-DD') AS BOO_LEND_DT			/*대출일자*/
					, TO_CHAR(TO_DATE(B.BOO_REN_DT), 'YYYY-MM-DD') AS BOO_REN_DT /*도서반납일*/
					, DECODE(B.BOO_REN_YN_CD,'0',TO_CHAR(TO_DATE(B.BOO_REN_APT_DT),'YYYY-MM-DD'),'') AS BOO_REN_APT_DT	/*도서반납예정일*/
					, A.BOO_NO  			/*도서번호*/
					, SUBSTR(A.CAT_SYM_NM,1,1)||'-'||SUBSTR(A.CAT_SYM_NM,2,3)||'-'||SUBSTR(A.CAT_SYM_NM,5,3) AS CAT_SYM_NM /*분류기호명*/
					, A.BOO_TIT_NM  		/*도서제목명*/
					, A.ATR_NM  			/*저자명*/
					, DECODE(NVL(B.BOO_REN_YN_CD,'1'),'1','반납','대출중') AS BOO_REN_YN_CD
			FROM	TBCSPQBO001M A ,
					TBCSPQBO002H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
		]]> 
		<dynamic>
        	<isNotEmpty property="strBOO_NOS">
				AND	A.BOO_NO &gt;= #strBOO_NOS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_NOE">
				AND	A.BOO_NO &lt;= #strBOO_NOE#
        	</isNotEmpty>
        	<isNotEmpty property="strBAR_CD">
        		AND	A.BAR_CD = #strBAR_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTS">
        		AND	B.BOO_LEND_DT &gt;= #strBOO_LEND_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTE">
        		AND	B.BOO_LEND_DT &lt;= #strBOO_LEND_DTE#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTS">
        		AND	B.BOO_REN_APT_DT &gt;= #strBOO_REN_APT_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTE">
        		AND	B.BOO_REN_APT_DT &lt;= #strBOO_REN_APT_DTE#
        	</isNotEmpty>
        	
			<isNotEmpty property="strBOO_KND_CD"> 
			  	AND A.BOO_KND_CD IN 
			  		(SELECT 	SUBSTR(CODE,INSTR(CODE,',',1,LEVEL)+1,INSTR(CODE,',',1,LEVEL+1)-INSTR(CODE,',',1,LEVEL) -1) merge_col
                     FROM 	DUAL A
                     CROSS JOIN(SELECT ','|| #strBOO_KND_CD# ||',' AS CODE FROM DUAL) B
                     CONNECT BY LEVEL&lt;=LENGTH(CODE)-LENGTH(REPLACE(CODE,','))-1 )				
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NMS2"> 
				AND	A.CAT_SYM_NM &gt;= #strCAT_SYM_NMS1#||#strCAT_SYM_NMS2#||#strCAT_SYM_NMS3#
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NME2"> 
				AND	A.CAT_SYM_NM &lt;= #strCAT_SYM_NME1#||#strCAT_SYM_NME2#||#strCAT_SYM_NME3#
			</isNotEmpty>
        	<isNotEmpty property="strLAG_INV_CNB">
        		AND	B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE USR_NAM LIKE '%'||#strLAG_INV_CNB#||'%')
        	</isNotEmpty>
        	<isNotEmpty property="strDPT_CD">
        		AND B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE DPT_CD = #strDPT_CD#)
        	</isNotEmpty>
        	
        	<isNotEmpty property="strBOO_TIT_NM1">
        		<isEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%'
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        			</isNotEmpty>
        		</isEmpty>
        		<isNotEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND (BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%'))
        					</isEqual>
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	( (BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        								AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        				</isEqual>
        			</isNotEmpty>
        		</isNotEmpty>
        	</isNotEmpty>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="0">
        		AND	B.BOO_REN_YN_CD = '0'
        		AND	A.BOO_LEND_DVSN_CD = '0'
        	</isEqual>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="1">
        		AND (B.BOO_REN_YN_CD = '1' OR B.BOO_REN_YN_CD IS NULL )
        	</isEqual>
            <isNotEmpty property="strBOO_REN_DTS"> 
				AND	B.BOO_REN_DT &gt;= #strBOO_REN_DTS#
			</isNotEmpty>
			<isNotEmpty property="strBOO_REN_DTE">
        		AND	B.BOO_REN_DT &lt;= #strBOO_REN_DTE#
        	</isNotEmpty>
        	</dynamic>
	</select>
	
	<select id="CSPQBO151QReportSelect2" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT 	  #KND_CD1# AS KND_CD1,#KND_CD2# AS KND_CD2
					, #KND_CD3# AS KND_CD3,#KND_CD4# AS KND_CD4
					, #KND_CD5# AS KND_CD5,#KND_CD6# AS KND_CD6,#KND_CD7# AS KND_CD7
					, #strBOO_NOS# AS strBOO_NOS, #strBOO_NOE# AS strBOO_NOE
					, #strBAR_CD# AS strBAR_CD
					, DECODE(#strBOO_REN_YN_CD#,NULL,'전체','1','대출중','0','반납') AS strBOO_REN_YN_CD
					, TO_CHAR(TO_DATE(#strBOO_LEND_DTS#),'YYYY-MM-DD') AS strBOO_LEND_DTS, TO_CHAR(TO_DATE(#strBOO_LEND_DTE#),'YYYY-MM-DD') AS strBOO_LEND_DTE
					, DECODE(#strCAT_SYM_NMS2#,NULL,'',#strCAT_SYM_NMS1#||'-'||NVL(#strCAT_SYM_NMS2#,'   ')||'-'||NVL(#strCAT_SYM_NMS3#,'   ')) AS strCAT_SYM_NMS 
					, DECODE(#strCAT_SYM_NME2#,NULL,'',#strCAT_SYM_NME1#||'-'||NVL(#strCAT_SYM_NME2#,'   ')||'-'||NVL(#strCAT_SYM_NME3#,'   ')) AS strCAT_SYM_NME
					, TO_CHAR(TO_DATE(#strBOO_REN_APT_DTS#),'YYYY-MM-DD') AS strBOO_REN_APT_DTS
					, TO_CHAR(TO_DATE(#strBOO_REN_APT_DTE#),'YYYY-MM-DD') AS strBOO_REN_APT_DTE
					, #strLAG_INV_CNB# AS strLAG_INV_CNB
					, #strDPT_NM# AS strDPT_NM
					, #strBOO_TIT_NM1# AS strBOO_TIT_NM1 , #strBOO_TIT_NM2# AS strBOO_TIT_NM2 , #strBOO_TIT_NM3# AS strBOO_TIT_NM3
					, #strBOO_TIT_NM_DELI1# AS strBOO_TIT_NM_DELI1 , #strBOO_TIT_NM_DELI2# AS strBOO_TIT_NM_DELI2
					, TO_CHAR(TO_DATE(#strREN_RQS_DT#),'YYYY-MM-DD') AS strREN_RQS_DT
			FROM	DUAL  
			WHERE	1=1
		]]> 
	</select>
	
	<select id="CSPQBO151QDptReportSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	  F_USR_INFO(B.LAG_INV_CNB,'2')  AS LAG_INV_NAM 					/*대출자명*/
					, NVL(F_CODE_NM('1000144',F_USR_INFO(B.LAG_INV_CNB,'5')),' ') AS DPT_NM
					, TO_CHAR(TO_DATE(B.BOO_LEND_DT),'YYYY-MM-DD') AS BOO_LEND_DT			/*BOO_LEND_DT*/
					, DECODE(B.BOO_REN_YN_CD,'0',TO_CHAR(TO_DATE(B.BOO_REN_APT_DT),'YYYY-MM-DD'),'') AS BOO_REN_APT_DT	/*도서반납예정일*/
					, A.BOO_NO  			/*도서번호*/
					, SUBSTR(A.CAT_SYM_NM,1,1)||'-'||SUBSTR(A.CAT_SYM_NM,2,3)||'-'||SUBSTR(A.CAT_SYM_NM,5,3) AS CAT_SYM_NM /*분류기호명*/
					, A.BOO_TIT_NM  		/*도서제목명*/
					, A.ATR_NM  			/*저자명*/
					, A.PBC_PLAC_NM
					, F_CODE_NM('1000149',A.BOO_KND_CD) AS BOO_KND_CD
					, DECODE(NVL(B.BOO_REN_YN_CD,'1'),'1','반납','대출중') AS BOO_REN_YN_CD
			FROM	TBCSPQBO001M A ,
					TBCSPQBO002H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
		]]> 
		<dynamic>
        	<isNotEmpty property="strBOO_NOS">
				AND	A.BOO_NO &gt;= #strBOO_NOS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_NOE">
				AND	A.BOO_NO &lt;= #strBOO_NOE#
        	</isNotEmpty>
        	<isNotEmpty property="strBAR_CD">
        		AND	A.BAR_CD = #strBAR_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTS">
        		AND	B.BOO_LEND_DT &gt;= #strBOO_LEND_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTE">
        		AND	B.BOO_LEND_DT &lt;= #strBOO_LEND_DTE#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTS">
        		AND	B.BOO_REN_APT_DT &gt;= #strBOO_REN_APT_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTE">
        		AND	B.BOO_REN_APT_DT &lt;= #strBOO_REN_APT_DTE#
        	</isNotEmpty>
        	
			<isNotEmpty property="strBOO_KND_CD"> 
			  	AND A.BOO_KND_CD IN 
			  		(SELECT 	SUBSTR(CODE,INSTR(CODE,',',1,LEVEL)+1,INSTR(CODE,',',1,LEVEL+1)-INSTR(CODE,',',1,LEVEL) -1) merge_col
                     FROM 	DUAL A
                     CROSS JOIN(SELECT ','|| #strBOO_KND_CD# ||',' AS CODE FROM DUAL) B
                     CONNECT BY LEVEL&lt;=LENGTH(CODE)-LENGTH(REPLACE(CODE,','))-1 )				
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NMS2"> 
				AND	A.CAT_SYM_NM &gt;= #strCAT_SYM_NMS1#||#strCAT_SYM_NMS2#||#strCAT_SYM_NMS3#
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NME2"> 
				AND	A.CAT_SYM_NM &lt;= #strCAT_SYM_NME1#||#strCAT_SYM_NME2#||#strCAT_SYM_NME3#
			</isNotEmpty>
        	<isNotEmpty property="strLAG_INV_CNB">
        		AND	B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE USR_NAM LIKE '%'||#strLAG_INV_CNB#||'%')
        	</isNotEmpty>
        	<isNotEmpty property="strDPT_CD">
        		AND B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE DPT_CD = #strDPT_CD#)
        	</isNotEmpty>
        	
        	<isNotEmpty property="strBOO_TIT_NM1">
        		<isEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%'
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        			</isNotEmpty>
        		</isEmpty>
        		<isNotEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND (BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%'))
        					</isEqual>
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	( (BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        								AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        				</isEqual>
        			</isNotEmpty>
        		</isNotEmpty>
        	</isNotEmpty>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="0">
        		AND	B.BOO_REN_YN_CD = '0'
        		AND	A.BOO_LEND_DVSN_CD = '0'
        	</isEqual>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="1">
        		AND (B.BOO_REN_YN_CD = '1' OR B.BOO_REN_YN_CD IS NULL )
        	</isEqual>
        	</dynamic>
        	<![CDATA[
        		ORDER BY F_USR_INFO(B.LAG_INV_CNB,'5'), B.LAG_INV_CNB
        	]]>
	</select>
	
	<select id="CSPQBO151QCnbReportSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	  F_USR_INFO(B.LAG_INV_CNB,'2')  AS LAG_INV_NAM 					/*대출자명*/
					, LAG_INV_CNB
					, NVL(F_CODE_NM('1000144',F_USR_INFO(B.LAG_INV_CNB,'5')),' ') AS DPT_NM
					, TO_CHAR(TO_DATE(B.BOO_LEND_DT),'YYYY-MM-DD') AS BOO_LEND_DT			/*BOO_LEND_DT*/
					, DECODE(B.BOO_REN_YN_CD,'0',TO_CHAR(TO_DATE(B.BOO_REN_APT_DT),'YYYY-MM-DD'),'') AS BOO_REN_APT_DT	/*도서반납예정일*/
					, A.BOO_NO  			/*도서번호*/
					, SUBSTR(A.CAT_SYM_NM,1,1)||'-'||SUBSTR(A.CAT_SYM_NM,2,3)||'-'||SUBSTR(A.CAT_SYM_NM,5,3) AS CAT_SYM_NM /*분류기호명*/
					, A.BOO_TIT_NM  		/*도서제목명*/
					, A.ATR_NM  			/*저자명*/
					, A.PBC_PLAC_NM
					, F_CODE_NM('1000149',A.BOO_KND_CD) AS BOO_KND_CD
					, DECODE(NVL(B.BOO_REN_YN_CD,'1'),'1','반납','대출중') AS BOO_REN_YN_CD
			FROM	TBCSPQBO001M A ,
					TBCSPQBO002H B
			WHERE	1=1
			AND		A.COPT_CAT_CD = B.COPT_CAT_CD
			AND		A.BOO_KND_CD = B.BOO_KND_CD
			AND		A.BOO_NO = B.BOO_NO
			AND		A.CAT_SYM_NM = B.CAT_SYM_NM
			AND		A.BOO_VLE_NO = B.BOO_VLE_NO
			AND		A.COPT_CAT_CD = #strCOPT_CAT_CD#
		]]> 
		<dynamic>
        	<isNotEmpty property="strBOO_NOS">
				AND	A.BOO_NO &gt;= #strBOO_NOS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_NOE">
				AND	A.BOO_NO &lt;= #strBOO_NOE#
        	</isNotEmpty>
        	<isNotEmpty property="strBAR_CD">
        		AND	A.BAR_CD = #strBAR_CD#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTS">
        		AND	B.BOO_LEND_DT &gt;= #strBOO_LEND_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_LEND_DTE">
        		AND	B.BOO_LEND_DT &lt;= #strBOO_LEND_DTE#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTS">
        		AND	B.BOO_REN_APT_DT &gt;= #strBOO_REN_APT_DTS#
        	</isNotEmpty>
        	<isNotEmpty property="strBOO_REN_APT_DTE">
        		AND	B.BOO_REN_APT_DT &lt;= #strBOO_REN_APT_DTE#
        	</isNotEmpty>
        	
			<isNotEmpty property="strBOO_KND_CD"> 
			  	AND A.BOO_KND_CD IN 
			  		(SELECT 	SUBSTR(CODE,INSTR(CODE,',',1,LEVEL)+1,INSTR(CODE,',',1,LEVEL+1)-INSTR(CODE,',',1,LEVEL) -1) merge_col
                     FROM 	DUAL A
                     CROSS JOIN(SELECT ','|| #strBOO_KND_CD# ||',' AS CODE FROM DUAL) B
                     CONNECT BY LEVEL&lt;=LENGTH(CODE)-LENGTH(REPLACE(CODE,','))-1 )				
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NMS2"> 
				AND	A.CAT_SYM_NM &gt;= #strCAT_SYM_NMS1#||#strCAT_SYM_NMS2#||#strCAT_SYM_NMS3#
			</isNotEmpty>
			<isNotEmpty property="strCAT_SYM_NME2"> 
				AND	A.CAT_SYM_NM &lt;= #strCAT_SYM_NME1#||#strCAT_SYM_NME2#||#strCAT_SYM_NME3#
			</isNotEmpty>
        	<isNotEmpty property="strLAG_INV_CNB">
        		AND	B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE USR_NAM LIKE '%'||#strLAG_INV_CNB#||'%')
        	</isNotEmpty>
        	<isNotEmpty property="strDPT_CD">
        		AND B.LAG_INV_CNB IN (SELECT CNB FROM TBDCMACM001M WHERE DPT_CD = #strDPT_CD#)
        	</isNotEmpty>
        	
        	<isNotEmpty property="strBOO_TIT_NM1">
        		<isEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%'
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        				</isEqual>
        			</isNotEmpty>
        		</isEmpty>
        		<isNotEmpty property="strBOO_TIT_NM2">
        			<isEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        				</isEqual>
        			</isEmpty>
        			<isNotEmpty property="strBOO_TIT_NM3">
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="AND">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        							AND BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' 
        							AND (BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%'))
        					</isEqual>
        				</isEqual>
        				<isEqual property="strBOO_TIT_NM_DELI1" compareValue="OR">
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="AND">
        						AND	( (BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%')
        								AND	BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        					<isEqual property="strBOO_TIT_NM_DELI2" compareValue="OR">
        						AND	(BOO_TIT_NM like '%'||#strBOO_TIT_NM1#||'%' OR BOO_TIT_NM like '%'||#strBOO_TIT_NM2#||'%'
        								OR BOO_TIT_NM like '%'||#strBOO_TIT_NM3#||'%')
        					</isEqual>
        				</isEqual>
        			</isNotEmpty>
        		</isNotEmpty>
        	</isNotEmpty>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="0">
        		AND	B.BOO_REN_YN_CD = '0'
        		AND	A.BOO_LEND_DVSN_CD = '0'
        	</isEqual>
        	<isEqual property="strBOO_REN_YN_CD" compareValue="1">
        		AND (B.BOO_REN_YN_CD = '1' OR B.BOO_REN_YN_CD IS NULL )
        	</isEqual>
        	</dynamic>
        	<![CDATA[
        		ORDER BY B.LAG_INV_CNB, F_USR_INFO(B.LAG_INV_CNB,'5')
        	]]>
	</select>
	
	<insert id="CSPQBO152PMsg206Insert" parameterClass="paramMap">
		<![CDATA[
			INSERT INTO
			TBDCMACM026L
			(
			  MSG_SNO
			, TSK_CAT_CD
			, FUNC_CAT_CD
			, SEND_ID
	        , MSG_TP_YN
	  
	        , MSG_TXT_2
	        , RCNT_CNT
	        , RCNT_HIS
	        , MSG_REGI_DH
	
			, FRT_USR_ID
			, FNL_USR_ID
			, FNL_DEAL_DPT_CD
			, FNL_MNU_ID
			, FRT_REGI_DH
			,
			FNL_MDF_DH
	
			)
			VALUES
			(
			  (SELECT NVL(MAX(MSG_SNO),0)+1 FROM TBDCMACM026L)
			, 'SP'
			, 'BO'
			, #FNL_USR_ID#
	        , '0'
	     
	        , #MSG#
	        , 1
	        , #MSG_CNB#
	        , SYSDATE
	        
	        
			, #FNL_USR_ID#
			, #FNL_USR_ID#
			, #FNL_DEAL_DPT_CD#
			, #FNL_MNU_ID#
			, SYSDATE
			, SYSDATE
	
			);
			
		]]>
	</insert>
	
	<update id="CSPQBO151QUpdate" parameterClass="paramMap">
		<![CDATA[
			UPDATE	TBCSPQBO002H A
        	SET		A.BOO_REN_APT_DT = #BOO_REN_APT_DT#
        			,A.FNL_USR_ID = #FNL_USR_ID#
					,A.FNL_DEAL_DPT_CD = #FNL_DEAL_DPT_CD#
					,A.FNL_MNU_ID = #FNL_MNU_ID#
					,A.FNL_MDF_DH = SYSDATE
        	WHERE	A.COPT_CAT_CD = #COPT_CAT_CD#
        	AND		A.BOO_KND_CD = #BOO_KND_CD#
			AND		A.BOO_NO = #BOO_NO#
			AND		A.CAT_SYM_NM = #CAT_SYM_NM#
			AND		A.BOO_LEND_SLN = #BOO_LEND_SLN#
			AND		A.BOO_VLE_NO = #BOO_VLE_NO#
		]]>
	</update>
</sqlMap> 
