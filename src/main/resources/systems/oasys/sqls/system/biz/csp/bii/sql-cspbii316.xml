<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/bii/316">

	<resultMap class="java.util.HashMap" id="subBai01Map">
		<result property="ENF_DT" 			column="ENF_DT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="RLTN_ORG_NM" 		column="RLTN_ORG_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_KND_NM"	column="DSP_RQ_KND_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_TXT" 			column="TIT_TXT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SUMPRT_TXT" 		column="SUMPRT_TXT" 	jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="AUD_YR" 			column="AUD_YR" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_NO"			column="AUD_NO" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DSP_RQ_SNO" 		column="DSP_RQ_SNO" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>	
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="subBai02Map">
		<result property="SMT_DT"		column="SMT_DT" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_ORG_NM"	column="REL_ORG_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="HNDL_RSLT_NM"	column="HNDL_RSLT_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_TXT"		column="TIT_TXT"		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="AUD_INF_TXT"	column="AUD_INF_TXT"	jdbcType="CLOB"		javaType="java.lang.String"/>
		<result property="YE"			column="YE" 			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SRNO"			column="SRNO" 			jdbcType="VARCHAR2" javaType="java.lang.String"/>
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="subBai05Map">
		<result property="NTF_DVSN_NM"		column="NTF_DVSN_NM" 	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ORG_NM"			column="ORG_NM"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_NM"			column="TIT_NM" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="CRIM_WRDO_TXT"	column="CRIM_WRDO_TXT" 	jdbcType="CLOB" 	javaType="java.lang.String"/>
		<result property="ORG_CD"			column="ORG_CD" 		jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="NTF_DVSN_CD"		column="NTF_DVSN_CD"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="YR"				column="YR"				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="DPT_CD"			column="DPT_CD"			jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="NNB"				column="NNB"			jdbcType="VARCHAR2"	javaType="java.lang.String"/>
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="subBai06Map">
		<result property="ACP_DT"						column="ACP_DT" 					jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ETC_INSP_MTRL_CLC_DVSN_NM"	column="ETC_INSP_MTRL_CLC_DVSN_NM"	jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="CLC_RUT_NM"					column="CLC_RUT_NM" 				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="REL_ORG_NM"					column="REL_ORG_NM" 				jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="TIT_NM"						column="TIT_NM"						jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="ETC_INSP_MTRL_TXT"			column="ETC_INSP_MTRL_TXT"			jdbcType="CLOB"		javaType="java.lang.String"/>
		<result property="YE"							column="YE" 						jdbcType="VARCHAR2" javaType="java.lang.String"/>
		<result property="SRNO"							column="SRNO" 						jdbcType="VARCHAR2" javaType="java.lang.String"/>
	</resultMap>
	
	<!-- 기본정보 조회 -->   
	<select id="CSPBII316QMainSelect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT A.EIN                                                                                          AS RRN			     
			     , A.NAM
			     , CASE WHEN A.CHC_NAM IS NOT NULL THEN '[' || CHC_NAM || ']'
			            ELSE ''
			       END                                                                                            AS CHC_NAM 
			     , SUBSTR(EIN, 1, 6) || '-*******'                                                                AS PART_RRN
			     , A.EIN                                                                                                    
			     , F_CODE_NM('1000084', A.EPS_MNG_DVSN_CD) 
			    || ' | 근무기간(' || (SELECT SUBSTR(MIN(B.JOCP_DT), 1, 4) 
			                           || CASE WHEN LENGTH(MIN(B.JOCP_DT)) > 4 THEN '.' || SUBSTR(MIN(B.JOCP_DT), 5, 2) 
			                                   ELSE '' 
			                              END 
			                           || CASE WHEN LENGTH(MIN(B.JOCP_DT)) > 6 THEN '.' || SUBSTR(MIN(B.JOCP_DT), 7, 2) 
			                                   ELSE '' 
			                              END 
			                         FROM TBCSPBII610L B
			                        WHERE B.EIN = A.EIN) ||' ~ '|| DECODE(NVL(A.RSG_YN, 'N'), 'Y', SUBSTR(A.RSG_DT, 1, 4) 
			                                                                                    || CASE WHEN LENGTH(A.RSG_DT) > 4 THEN '.' || SUBSTR(A.RSG_DT, 5, 2) 
			                                                                                            ELSE '' 
			                                                                                       END 
			                                                                                    || CASE WHEN LENGTH(A.RSG_DT) > 6 THEN '.' || SUBSTR(A.RSG_DT, 7, 2) 
			                                                                                            ELSE '' 
			                                                                                       END, '현재') || ')' AS EPS_DVSN_NM /* 중점구분 */	                                                    
			     , (SELECT B.ORG_NM
			          FROM TBDCMACM015M B
			         WHERE B.ORG_CD = A.BLT_ORG_CD)
			    || CASE WHEN (SELECT 1
                                FROM TBCSPBII300M B  
                               WHERE B.ORGCHF_YN = 'Y'
                                 AND B.BLT_ORG_CD = A.BLT_ORG_CD
                                 AND ROWNUM = 1) IS NOT NULL THEN ' (' || (SELECT MAX(NAM) KEEP (DENSE_RANK LAST ORDER BY FNL_MDF_DH)
                                                                             FROM TBCSPBII300M B  
                                                                            WHERE B.ORGCHF_YN = 'Y'
                                                                              AND B.BLT_ORG_CD = A.BLT_ORG_CD) || ')'
                        ELSE ''
                   END
			    || CASE WHEN A.BLT_DPT_NM IS NOT NULL THEN ' (' || A.BLT_DPT_NM || ')'
			            ELSE ''
			       END                                                                                            AS BLT_ORG_NM /* 소속기관명 */
			     , A.PST_NM || ' | '
			    || A.RANK_NM || '(' 
			    || F_CODE_NM('1000173', A.CLSS_CD) || ', ' 			 			     
			    || F_CODE_NM('1000058', A.CRSP_OD_RANK_CD) || ')'                                                 AS PST_NM	
			     , A.AD 
			    || CASE WHEN A.TNB IS NOT NULL THEN ' 전화(' || A.TNB || ')'
			            ELSE ''
			       END
			    || CASE WHEN A.FAN IS NOT NULL THEN ' 팩스(' || A.FAN || ')'
			            ELSE ''
			       END
			    || CASE WHEN A.EML_AD IS NOT NULL THEN ' 이메일(' || A.EML_AD || ')'
			            ELSE ''
			       END                                                                                            AS AD
			     , F_CODE_NM('1000061', A.DICE_DVSN_CD)
			    || CASE WHEN A.EMP_RSN_CD IS NOT NULL THEN '(' || F_CODE_NM('1000062', A.EMP_RSN_CD) || ')'
			            ELSE ''
			       END
			    || CASE WHEN A.RLG_CD IS NOT NULL THEN ' | ' || F_CODE_NM('1000060', A.RLG_CD) 
			            ELSE ''
			       END                                                                                            AS DICE_DVSN_NM     
			     , CASE WHEN A.MTRL_SRC_CD IS NOT NULL THEN F_CODE_NM('1000067', A.MTRL_SRC_CD)
			            ELSE ''
			       END 
			    || ' | ' || A.FRT_USR_ID || '('
			    || TO_CHAR(A.FRT_REGI_DH, 'YYYY.MM.DD') || ' 등록, '
			    || TO_CHAR(A.FNL_MDF_DH, 'YYYY.MM.DD') || ' 수정)'                                                AS MTRL_SRC_NM
			     , A.ETC_TXT	
			     , A.DOC_ID		     
                 , (SELECT COUNT(*)
                      FROM TBBADEAR007M B
                          ,TBBADEAR002D X
                     WHERE B.AUD_YR     = X.AUD_YR 
                       AND B.AUD_NO     = X.AUD_NO
                       AND B.DSP_RQ_SNO = X.DSP_RQ_SNO
                       AND X.DTM_STA_CD IN ('1','2')
                       AND B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT01 			         
			     , (SELECT COUNT(*)
			          FROM TBCSPBII130L B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT02  			    
			     , (SELECT COUNT(*)
			          FROM TBFAAAEA032M B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT04
			     , (SELECT COUNT(*)
			          FROM TBBADGDA001L B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT05
			     , (SELECT COUNT(*)
			          FROM TBCSPBII401L B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT06
			     , (SELECT COUNT(*)
			          FROM TBCSPBII500L B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT07
			     , (SELECT COUNT(*)
			          FROM TBCSPBII630L B
			         WHERE B.EIN = A.EIN)                                                                        AS BAI_MTRL_CNT08    
			     , 0                                                                        					 AS HRA_MTRL_CNT01
			     , 0					                                                                         AS HRA_MTRL_CNT02            
			     , (SELECT COUNT(*)
			          FROM TBCSPBII320L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT03
			     , (SELECT COUNT(*)
			          FROM TBCSPBII330L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT04
			     , (SELECT COUNT(*)
			          FROM TBCSPBII342L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT05
			     , (SELECT COUNT(*)
			          FROM TBCSPBII360L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT06
			     , (SELECT COUNT(*)
			          FROM TBCSPBII340L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT07
			     , (SELECT COUNT(*)
			          FROM TBCSPBII341L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT08
			     , (SELECT COUNT(*)
			          FROM TBCSPBII350L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT09
			     , (SELECT COUNT(*)
			          FROM TBCSPBII351L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT10
			     , (SELECT COUNT(*)
			          FROM TBCSPBII321L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT11
			     , (SELECT COUNT(*)
			          FROM TBCSPBII322L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT12
			     , (SELECT COUNT(*)
			          FROM TBCSPBII610L B
			         WHERE B.EIN = A.EIN)                                                                        AS HRA_MTRL_CNT13			            
			  FROM TBCSPBII300M A  /* 대인정보기본 */
			 WHERE A.EIN = #strEin#
		]]>
	</select>
	
	<!-- 감사원 처분요구 -->
	<select id="CSPBII316QSubBai01Select" parameterClass="paramMap" resultMap="subBai01Map">
		<![CDATA[       
			SELECT TO_CHAR(TO_DATE(B.ENF_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS ENF_DT
			     , (SELECT E.ORG_NM                                                           
				      FROM TBDCMACM015M E                                          
					 WHERE E.ORG_CD = B.RLTN_ORG_CD)     AS RLTN_ORG_NM
			     , F_CODE_NM('1000002', A.DSP_RQ_KND_CD) AS DSP_RQ_KND_NM
			     , A.TIT_TXT
			     , C.SUMPRT_TXT
			     , A.AUD_YR
			     , A.AUD_NO
			     , A.DSP_RQ_SNO
			  FROM TBBADEAR001M A    
			     , TBBADEAR002D B
			     , TBBADEAR005M C
			 WHERE A.AUD_YR     = B.AUD_YR
			   AND A.AUD_NO	    = B.AUD_NO
			   AND A.DSP_RQ_SNO = B.DSP_RQ_SNO
			   AND A.AUD_YR     = C.AUD_YR(+)
			   AND A.AUD_NO	    = C.AUD_NO(+)
			   AND A.DSP_RQ_SNO = C.DSP_RQ_SNO(+)
			   AND B.DTM_STA_CD IN ('1','2')
			   AND (A.AUD_YR, A.AUD_NO, A.DSP_RQ_SNO) IN (SELECT D.AUD_YR
			                                                   , D.AUD_NO
			                                                   , D.DSP_RQ_SNO
			                                                FROM TBBADEAR007M D
						                                   WHERE D.EIN = #strEin#)	     
		]]>
	</select>
	
	<!-- 직원제출정보 -->
	<select id="CSPBII316QSubBai02Select" parameterClass="paramMap" resultMap="subBai02Map">
		<![CDATA[       
			SELECT TO_CHAR(TO_DATE(A.SMT_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS SMT_DT
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.REL_ORG_CD)     AS REL_ORG_NM
			     , F_CODE_NM('1000042', A.HNDL_RSLT_CD) AS HNDL_RSLT_NM
			     , A.TIT_TXT
			     , B.AUD_INF_TXT
			     , A.YE
			     , A.SRNO
			  FROM TBCSPBII100M A
			     , TBCSPBII101L B
			 WHERE A.YE = B.YE
			   AND A.SRNO = B.SRNO
			   AND (A.YE, A.SRNO) IN (SELECT C.YE
			                               , C.SRNO
			                            FROM TBCSPBII130L C
			                           WHERE C.EIN = #strEin#)
		]]>
	</select>
	
	<!-- 자체감사결과 처분요구 -->
	<select id="CSPBII316QSubBai04Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT (SELECT C.ORG_NM
			          FROM TBDCMACM015M C
			         WHERE C.ORG_CD = B.ORG_CD) AS ORG_NM
			     , B.DSP_RQ_NM
			     , A.AUD_SBJ
			     , A.AUD_EPS_SBJ
			     , B.ORG_CD
			     , B.AUD_YR
			     , B.AUD_SRNO
			     , B.EXPOT_MNG_SRNO
			     , B.SRNO
			  FROM TBFAAAEA019M A
			     , TBFAAAEA021M B
			     , TBFAAAEA032M C
			 WHERE A.ORG_CD   = B.ORG_CD
			   AND A.AUD_YR   = B.AUD_YR
			   AND A.AUD_SRNO = B.AUD_SRNO
			   AND B.ORG_CD   = C.ORG_CD
			   AND B.AUD_YR   = C.AUD_YR
			   AND B.AUD_SRNO = C.AUD_SRNO
			   AND B.EXPOT_MNG_SRNO = C.EXPOT_MNG_SRNO
			   AND B.SRNO     = C.SRNO  
			   AND C.EIN      = #strEin#
			   
		]]>
	</select>
	
	<!-- 통보사항 -->
	<select id="CSPBII316QSubBai05Select" parameterClass="paramMap" resultMap="subBai05Map">
		<![CDATA[       
			SELECT F_CODE_NM('1000412', A.NTF_DVSN_CD) AS NTF_DVSN_NM
                 , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.ORG_CD)        AS ORG_NM
			     , A.TIT_NM
			     , B.CRIM_WRDO_TXT
			     , A.ORG_CD
			     , A.NTF_DVSN_CD
			     , A.YR
			     , A.DPT_CD
			     , A.NNB
			  FROM TBBADGDA001M A
			     , TBBADGDA001L B
			 WHERE A.ORG_CD      = B.ORG_CD
   			   AND A.NTF_DVSN_CD = B.NTF_DVSN_CD
   			   AND A.NNB         = B.NNB
   			   AND B.EIN         = #strEin#
		]]>
	</select>
	
	<!-- 기타정보 -->
	<select id="CSPBII316QSubBai06Select" parameterClass="paramMap" resultMap="subBai06Map">
		<![CDATA[       	
			SELECT A.YE
			     , A.SRNO
			     , TO_CHAR(TO_DATE(A.ACP_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS ACP_DT
			     , F_CODE_NM('1000402', A.ETC_INSP_MTRL_CLC_DVSN_CD)    AS ETC_INSP_MTRL_CLC_DVSN_NM
			     , A.CLC_RUT_NM
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.REL_ORG_CD)    AS REL_ORG_NM
			     , A.TIT_NM
			     , A.ETC_INSP_MTRL_TXT
			  FROM TBCSPBII400L A			     
			 WHERE (A.YE, A.SRNO) IN (SELECT B.YE
			                               , B.SRNO
			                            FROM TBCSPBII401L B
			                           WHERE B.EIN = #strEin#)      				  
		]]>
	</select>
	
	<!-- 직무역량평가 -->
	<select id="CSPBII316QSubBai07Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[    
			SELECT A.YE
                 , A.SRNO
			     , TO_CHAR(TO_DATE(A.EVL_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS EVL_DT
			     , F_CODE_NM('1000070', A.EVL_MTRL_DVSN_CD)             AS EVL_MTRL_DVSN_NM 		    
			     , (SELECT C.DPT_NM                                                          
			          FROM TBDCMACM002M C                                          
			         WHERE C.DPT_CD = A.EVL_DPT_CD)        AS EVL_DPT_NM
			     , (SELECT C.ORG_NM                                                           
			          FROM TBDCMACM015M C                                          
			         WHERE C.ORG_CD = A.BLT_ORG_CD)        AS BLT_ORG_NM
			     , A.PST_NM
			  FROM TBCSPBII500L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.YE DESC, A.SRNO DESC	    	   				    
		]]>
	</select>
	
	<!-- 특이사항 -->
	<select id="CSPBII316QSubBai08Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT (SELECT B.UNQ_TXT
			          FROM TBCSPBII631C B
			         WHERE B.UNQ_CD = A.UNQ_CD) AS UNQ_NM
			     , A.WRDO_SC			        
			     , A.UNQ_RMK
			  FROM TBCSPBII630L A
			 WHERE A.EIN = #strEin#
		]]>
	</select>
	
	<!-- 갸족 -->
	<select id="CSPBII316QSubHra01Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT A.FMY_NAM                                         /* 가족성명 */
			     , CASE WHEN A.RLTN_NM IS NOT NULL
			                 THEN '(' || A.RLTN_NM || ')'
			       END                                    AS RLTN_NM /* 관계명 */                
			     , NVL(A.FMY_EIN, A.FMY_BTDY)             AS FMY_EIN /* 가족암호화주민등록번호 */
			  FROM TBCSPBII310L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.SRNO DESC 
		]]>
	</select>
	
	<!-- 갸족(가족보험카드내역)-->
	<select id="CSPBII316QSubHra02Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT A.FMY_NAM                                                                       /* 가족성명 */
			     , A.FMY_EIN                                                                       /* 가족주민등록번호 */
			     , CASE WHEN F_CODE_NM('1000059', A.FMY_RLTN_CD) IS NOT NULL
			                 THEN '(' || F_CODE_NM('1000059', A.FMY_RLTN_CD) || ')'
			       END                                                              AS FMY_RLTN_NM /* 가족관계명 */
			     , '기준일:'||TO_CHAR(A.FNL_MDF_DH, 'YYYY.MM.DD')                     AS STAD_DT     /* 기준일 */  
			  FROM TBCSPBII620L A
			 WHERE A.EIN = #strEin#
		]]>
	</select>
	
	<!-- 학력 -->
	<select id="CSPBII316QSubHra03Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       	
			SELECT '(' || SUBSTR(A.ENT_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.ENT_DT) > 4 THEN '.' || SUBSTR(A.ENT_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.ENT_DT) > 6 THEN '.' || SUBSTR(A.ENT_DT, 7, 2) 
			                   ELSE '' 
			              END || '~'
			           || SUBSTR(A.GRD_DT, 1, 4)    
			           || CASE WHEN LENGTH(A.GRD_DT) > 4 THEN '.' || SUBSTR(A.GRD_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.GRD_DT) > 6 THEN '.' || SUBSTR(A.GRD_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                                            AS PRD    /* 기간 */       			         
			     , A.SCHL_NM                                                              /* 학교명 */      			     
			     , A.MJR_TXT                                                              /* 전공학과내용 */ 
			     , CASE WHEN F_CODE_NM('1000066', A.DEG_CD) IS NOT NULL  
			                 THEN '(' || F_CODE_NM('1000066', A.DEG_CD) || ')'
			       END                                                          AS DEG_NM /* 학위명 */   
			  FROM TBCSPBII320L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.ENT_DT
			       , A.GRD_DT
		]]>	
	</select>
	
	<!-- 자격/면허 -->
	<select id="CSPBII316QSubHra04Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.ACQ_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.ACQ_DT) > 4 THEN '.' || SUBSTR(A.ACQ_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.ACQ_DT) > 6 THEN '.' || SUBSTR(A.ACQ_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                             AS ACQ_DT     /* 취득일 */
			     , A.QLF_NM                                                    /* 자격명 */
			     , CASE WHEN A.ENF_ORG_NM IS NOT NULL
			                 THEN '[시행청:' || A.ENF_ORG_NM || ']'
			       END                                           AS ENF_ORG_NM /* 시행기관명 */
			  FROM TBCSPBII330L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.ACQ_DT 
		]]>
	</select>
	
	<!-- 전력 -->
	<select id="CSPBII316QSubHra05Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.WRK_STR_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.WRK_STR_DT) > 4 THEN '.' || SUBSTR(A.WRK_STR_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.WRK_STR_DT) > 6 THEN '.' || SUBSTR(A.WRK_STR_DT, 7, 2) 
			                   ELSE '' 
			              END || '~'
			           || SUBSTR(A.WRK_END_DT, 1, 4)    
			           || CASE WHEN LENGTH(A.WRK_END_DT) > 4 THEN '.' || SUBSTR(A.WRK_END_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.WRK_END_DT) > 6 THEN '.' || SUBSTR(A.WRK_END_DT, 7, 2) 
			                   ELSE '' 
			              END  || ')'                                AS PRD       /* 기간 */       	
			     , A.WRK_PLAC_NM                                                  /* 근무처명 */  
			     , CASE WHEN PST_NM IS NOT NULL
			                 THEN '(' || A.PST_NM || ')'
			       END                                               AS PST_NM    /* 직위명 */    
			     , CASE WHEN CHR_OW_NM IS NOT NULL
			                 THEN '[담당사무:' || A.CHR_OW_NM || ']'
			       END                                               AS CHR_OW_NM /* 담당사무명 */
			  FROM TBCSPBII342L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.WRK_STR_DT
			       , A.WRK_END_DT
		]]>
	</select>
	
	<!-- 재산 -->
	<select id="CSPBII316QSubHra06Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       	
		SELECT A.STTM_YE /* 신고연도 */    
		     , A.FRTN_AMT /* 재산액 */      
		     , A.INCR_AMT /* 증가액 */		     
		     , A.DOC_ID                                     /* 문서ID */      
		  FROM TBCSPBII360L A
		 WHERE A.EIN = #strEin#
		ORDER BY A.SRNO DESC 
		]]>	
	</select>
	
	<!-- 임용시험 -->
	<select id="CSPBII316QSubHra07Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.EXM_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.EXM_DT) > 4 THEN '.' || SUBSTR(A.EXM_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.EXM_DT) > 6 THEN '.' || SUBSTR(A.EXM_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                             AS EXM_DT     /* 시험일 */
			     , A.EXM_NM                                                    /* 시험명 */        
			     , A.APM_APT_RANK_NM                                           /* 임용예정직급명 */
			     , CASE WHEN A.ENF_ORG_NM IS NOT NULL
			                 THEN '[시행청:' || A.ENF_ORG_NM || ']'
			       END                                           AS ENF_ORG_NM /* 시행기관명 */
			  FROM TBCSPBII340L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.EXM_DT
		]]>
	</select>
	
	<!-- 임용발령 -->
	<select id="CSPBII316QSubHra08Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       	
			SELECT '(' || SUBSTR(A.OFOD_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.OFOD_DT) > 4 THEN '.' || SUBSTR(A.OFOD_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.OFOD_DT) > 6 THEN '.' || SUBSTR(A.OFOD_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                               AS OFOD_DT     /* 발령일 */
			     , A.APM_DVSN_NM                                                  /* 임용구분명 */
			     , CASE WHEN A.APM_DPT_NM IS NOT NULL
			                 THEN '(' || A.APM_DPT_NM || ')'
			       END                                             AS APM_DPT_NM  /* 임용부서명 */
			     , A.RANK_NM                                                      /* 직급명 */
			     , CASE WHEN A.PST_NM IS NOT NULL
			                 THEN '(' || A.PST_NM || ')'
			       END                                             AS PST_NM      /* 직위명 */    
			     , CASE WHEN A.OFOD_OFI_NM IS NOT NULL
			                 THEN '[발령청:' || A.OFOD_OFI_NM || ']'
			       END                                             AS OFOD_OFI_NM /* 발령청명 */  
			  FROM TBCSPBII341L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.OFOD_DT
		]]>	
	</select>

	<!-- 포상,서훈 -->
	<select id="CSPBII316QSubHra09Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.ACQ_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.ACQ_DT) > 4 THEN '.' || SUBSTR(A.ACQ_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.ACQ_DT) > 6 THEN '.' || SUBSTR(A.ACQ_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                          AS ACQ_DT     /* 취득일 */
			     , A.RWD_KND_NM                                             /* 포상종류명 */
			     , CASE WHEN A.ENF_ORG_NM IS NOT NULL
			                 THEN '[' || A.ENF_ORG_NM || ']'
			       END                                        AS ENF_ORG_NM /* 시행기관명 */
			  FROM TBCSPBII350L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.ACQ_DT
		]]>
	</select>

	<!-- 징계사항 -->
	<select id="CSPBII316QSubHra10Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.PNSH_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.PNSH_DT) > 4 THEN '.' || SUBSTR(A.PNSH_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.PNSH_DT) > 6 THEN '.' || SUBSTR(A.PNSH_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                                AS PNSH_DT     /* 징계일 */
			     , F_CODE_NM('1000064', A.PNSH_TYP_CD)              AS PNSH_TYP_NM /* 징계유형코드 */
			     , CASE WHEN A.WRDO_TXT IS NOT NULL
			                 THEN '(' || A.WRDO_TXT || ')'
			       END                                              AS WRDO_TXT    /* 비위내용 */
			     , CASE WHEN A.PNSH_ORG_CD IS NOT NULL
			                 THEN (SELECT B.ORG_NM                                                           
			                         FROM TBDCMACM015M B                                           
			                        WHERE B.ORG_CD = A.PNSH_ORG_CD)
			       END                                              AS PNSH_ORG_NM /* 징계기관명 */    
			     , '변경일:'||TO_CHAR(A.FNL_MDF_DH, 'YYYY.MM.DD')     AS MDF_DT      /* 변경일 */
			  FROM TBCSPBII351L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.PNSH_DT
		]]>
	</select>

	<!-- 교육/훈련 -->
	<select id="CSPBII316QSubHra11Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       
			SELECT '(' || SUBSTR(A.TRN_STR_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.TRN_STR_DT) > 4 THEN '.' || SUBSTR(A.TRN_STR_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.TRN_STR_DT) > 6 THEN '.' || SUBSTR(A.TRN_STR_DT, 7, 2) 
			                   ELSE '' 
			              END || '~'
			           || SUBSTR(A.TRN_END_DT, 1, 4)    
			           || CASE WHEN LENGTH(A.TRN_END_DT) > 4 THEN '.' || SUBSTR(A.TRN_END_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.TRN_END_DT) > 6 THEN '.' || SUBSTR(A.TRN_END_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                                            AS PRD         /* 기간 */       			
			     , A.TRN_CRS_NM                                                                /* 훈련과정명 */
			     , CASE WHEN A.TRN_ORG_NM IS NOT NULL
			                 THEN '(' || A.TRN_ORG_NM || ')'
			       END                                                          AS TRN_ORG_NM  /* 훈련기관명 */ 
			     , CASE WHEN F_CODE_NM('1000065', A.TRN_DVSN_CD) IS NOT NULL
			                 THEN '[구분:' || F_CODE_NM('1000065', A.TRN_DVSN_CD) || ']'
			       END                                                          AS TRN_DVSN_NM /* 훈련구분명 */			       			      
			  FROM TBCSPBII321L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.TRN_STR_DT
			       , A.TRN_END_DT
		]]>
	</select>
	
	<!-- 외국시찰/수학 -->
	<select id="CSPBII316QSubHra12Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       	
			SELECT '(' || SUBSTR(A.ISPCT_STR_DT, 1, 4) 
			           || CASE WHEN LENGTH(A.ISPCT_STR_DT) > 4 THEN '.' || SUBSTR(A.ISPCT_STR_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.ISPCT_STR_DT) > 6 THEN '.' || SUBSTR(A.ISPCT_STR_DT, 7, 2) 
			                   ELSE '' 
			              END || '~'
			           || SUBSTR(A.ISPCT_END_DT, 1, 4)    
			           || CASE WHEN LENGTH(A.ISPCT_END_DT) > 4 THEN '.' || SUBSTR(A.ISPCT_END_DT, 5, 2) 
			                   ELSE '' 
			              END 
			           || CASE WHEN LENGTH(A.ISPCT_END_DT) > 6 THEN '.' || SUBSTR(A.ISPCT_END_DT, 7, 2) 
			                   ELSE '' 
			              END || ')'                                     AS PRD        /* 기간 */       	
			     , A.ISPCT_STUD_SPH_NM                                                 /* 시찰수학분야명 */
			     , A.NAT_NM                                                            /* 국가명 */
			     , A.TNG_ISPCT_ORG_NM                                                  /* 연수시찰기관명 */
			     , CASE WHEN A.ENF_ORG_NM IS NOT NULL
			                 THEN '[시행기관:' || A.ENF_ORG_NM || ']'
			       END                                                   AS ENF_ORG_NM /* 시행기관명 */
			  FROM TBCSPBII322L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.ISPCT_STR_DT
			       , A.ISPCT_END_DT
		]]>	
	</select>
	
	<!-- 근무이력 -->
	<select id="CSPBII316QSubHra13Select" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[       	
			SELECT TO_CHAR(A.FNL_MDF_DH, 'YYYY.MM.DD') AS STAD_DT    /* 기준일 */ 
			     , (SELECT B.ORG_NM                                                           
			          FROM TBDCMACM015M B                                           
			         WHERE B.ORG_CD = A.BLT_ORG_CD) AS BLT_ORG_NM /* 소속기관명 */
			     , A.WRK_RANK_CD  AS RANK_CD                                     /* 직급코드 */
			     , F_CODE_NM('1000058', A.WRK_RANK_CD)  AS RANK_NM    /* 직급명 */
			     , TO_CHAR(TO_DATE(A.JOCP_DT, 'YYYYMMDD'), 'YYYY.MM.DD') AS JOCP_DT /* 입사일 */
			     , TO_CHAR(TO_DATE(A.RSG_DT, 'YYYYMMDD'), 'YYYY.MM.DD')  AS RSG_DT  /* 퇴사일 */
			  FROM TBCSPBII610L A
			 WHERE A.EIN = #strEin#
			ORDER BY A.JOCP_DT
			       , A.RSG_DT
		]]>	
	</select>
	
</sqlMap> 
