<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="faa/cav/036">
	
	<select id="FAACAV036EMainSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainSelect */ ]]>
		<include refid="include.pageSelct" />
		<![CDATA[
		    SELECT	ROWNUM AS KEY 
				    ,ACNT_DVSN_CD
				    ,ACNT_CD
				    ,ACNT_CD_NM
				    ,RMK_1 AS RMK1
		]]>
			<isEqual property="SgDvsnCd1" compareValue="03">
				    ,CASE LENGTH(RMK_2) WHEN 4 THEN RMK_2||'   ' 
				                        WHEN 2 THEN RMK_2||'   '
				    ELSE RMK_2 END AS RMK2
			</isEqual>
			<isNotEqual property="SgDvsnCd1" compareValue="03">
					,RMK_2 AS RMK2
			</isNotEqual>
		    FROM	TWFAACAV024C	
			WHERE	1=1
		<isNotEmpty property="SgDvsnCd1">
			AND		ACNT_DVSN_CD = #SgDvsnCd1#
		</isNotEmpty>
		<isNotEmpty property="SgDvsnCd2">
			AND		ACNT_DVSN_CD = #SgDvsnCd2#
		</isNotEmpty>			
		<isNotEmpty property="startSgCd">
			AND		ACNT_CD &gt;= #startSgCd#
		</isNotEmpty>
		<include refid="include.pageOrder" />			
			ORDER BY ACNT_CD
	</select> 
	
	<!-- 오류부호조회 -->
	<select id="FAACAV036ErrSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ErrSelect */ ]]>
		<include refid="include.pageSelct" />
		<![CDATA[
	    	SELECT	ROWNUM AS KEY
			    	,ACNT_DVSN_CD
			    	,ACNT_CD
			    	,RMK_2 AS ACNT_CD_NM
			    	,RMK_1 AS RMK2
		     FROM	TWFAACAV024C	
			 WHERE	1=1
		]]>   
		<isNotEmpty property="SgDvsnCd2">
			AND		ACNT_DVSN_CD = #SgDvsnCd2#
		</isNotEmpty>			
		<isNotEmpty property="startSgCd">
			AND		ACNT_CD &gt;= #startSgCd#
		</isNotEmpty>
		<include refid="include.pageOrder" />
		   ORDER BY ACNT_CD
	</select> 
	
	<!-- 외부코드조회 -->
	<select id="FAACAV036ExtlSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ExtlSelect */ ]]>
		<include refid="include.pageSelct" />
        <![CDATA[
		    SELECT	ROWNUM AS KEY
			    	,EXTL_DVSN_CD ACNT_DVSN_CD 
			    	,EXTL_CD ACNT_CD
			    	,EXTL_CD_NM ACNT_CD_NM 
			    	,EXTL_CD_RMK AS RMK2
		    FROM	TWFAACAV023C	
			WHERE	1=1
		]]>	   
		<isNotEmpty property="SgDvsnCd2">
			AND		EXTL_DVSN_CD = #SgDvsnCd2#
		</isNotEmpty>
		<isNotEmpty property="startSgCd">
			AND		EXTL_CD &gt;= #startSgCd#
		</isNotEmpty>
		<include refid="include.pageOrder" />			
			ORDER BY ACNT_CD
	</select> 
	
	<!-- 기관코드조회 -->
	<select id="FAACAV036EOrgSelect" parameterClass="paramMap" 	resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EOrgSelect */ ]]>
        <![CDATA[
        SELECT 
        ROWNUM AS KEY 
        ,B.ORG_CD ACNT_CD 
        ,B.ORG_NM ACNT_CD_NM
          FROM  TBDCMACM015M B
          LEFT OUTER JOIN 
                (SELECT COPT_SG_CD||'000000000' COPT_SG_CD_A
                FROM TBDCMACM015M A
                WHERE ORG_CD LIKE '___000000000' 
                GROUP BY COPT_SG_CD) A
          ON( B.ORG_CD = A.COPT_SG_CD_A )

		]]>	   
			<isNotEmpty property="org1">
			WHERE	B.ORG_CD = #org1#||#org2#||#org3#||#org4#
			</isNotEmpty>
		ORDER BY ACNT_CD
	</select> 
	
	<select id="FAACAV036ERselect4" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ERselect4 */ ]]>
		<![CDATA[
        SELECT 
        ROWNUM AS KEY 
        ,B.ORG_CD ACNT_CD 
        ,B.ORG_NM ACNT_CD_NM
          FROM  TBDCMACM015M B
          LEFT OUTER JOIN 
                (SELECT COPT_SG_CD||'000000000' COPT_SG_CD_A
                FROM TBDCMACM015M A
                WHERE ORG_CD LIKE '___000000000' 
                GROUP BY COPT_SG_CD) A
          ON( B.ORG_CD = A.COPT_SG_CD_A )

		]]>	   
			<isNotEmpty property="org1">
			WHERE	B.ORG_CD >= #org1#||#org2#||#org3#||#org4#
			</isNotEmpty>
		ORDER BY ACNT_CD
	</select>
	
	
	<select id="FAACAV036ERselect5" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ERselect5 */ ]]>
		<![CDATA[
		    SELECT 
		    	ROWNUM AS KEY
		    	,ACNT_DVSN_CD
		    	,ACNT_CD
		    	,RMK_2 AS ACNT_CD_NM
		    	,RMK_1 AS RMK1
		    FROM TWFAACAV024C	
			 WHERE	1=1

		]]>	   

			<isNotEmpty property="SgDvsnCd2">
			   AND	ACNT_DVSN_CD = #SgDvsnCd2#
			</isNotEmpty>			
			<isNotEmpty property="startSgCd">
			   AND	ACNT_CD &gt;= #startSgCd#
			</isNotEmpty>			
		ORDER BY ACNT_CD
	</select>
	
	<select id="FAACAV036ERselect6" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ERselect6 */ ]]>
		<![CDATA[
		    SELECT 
		    	ROWNUM AS KEY
		    	,EXTL_DVSN_CD ACNT_DVSN_CD 
		    	,EXTL_CD ACNT_CD
		    	,EXTL_CD_NM ACNT_CD_NM 
		    	,EXTL_CD_RMK AS RMK2
		    FROM TWFAACAV023C	
			 WHERE	1=1

		]]>	   

			<isNotEmpty property="SgDvsnCd2">
			   AND	EXTL_DVSN_CD = #SgDvsnCd2#
			</isNotEmpty>
			<isNotEmpty property="startSgCd">
			   AND	EXTL_CD &gt;= #startSgCd#
			</isNotEmpty>			

		ORDER BY ACNT_CD
	</select>
	
	<select id="FAACAV036ERselect12" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ERselect12 */ ]]>
		SELECT
		    ROWNUM AS KEY 
		    ,ACNT_DVSN_CD
		    ,ACNT_CD,ACNT_CD_NM
		    ,RMK_1 AS RMK1
		<isEqual property="SgDvsnCd1" compareValue="03">
		    ,CASE LENGTH(RMK_2) WHEN 4 THEN RMK_2||'   ' 
		                        WHEN 2 THEN RMK_2||'       '
		    ELSE RMK_2 END AS RMK2
		</isEqual>
		<isNotEqual property="SgDvsnCd1" compareValue="03">
			,RMK_2 AS RMK2
		</isNotEqual>
		    FROM TWFAACAV024C	
			 WHERE	1=1
			<isNotEmpty property="SgDvsnCd1">
			   AND	ACNT_DVSN_CD = #SgDvsnCd1#
			</isNotEmpty>
			<isNotEmpty property="SgDvsnCd2">
			   AND	ACNT_DVSN_CD = #SgDvsnCd2#
			</isNotEmpty>			
			<isNotEmpty property="startSgCd">
			   AND	ACNT_CD &gt;= #startSgCd#
			</isNotEmpty>			
		ORDER BY ACNT_CD
	</select>
	
	
	<!--부호 insert-->
	<insert id="FAACAV036EMainInsert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainInsert */ ]]>
		INSERT INTO TWFAACAV024C (
			ACNT_DVSN_CD
			,ACNT_CD         
			,ACNT_CD_NM      
			,RMK_1            
			,RMK_2            
			,FRT_REGI_DH     
			,FRT_USR_ID      
			,FNL_DEAL_DPT_CD 
			,FNL_MNU_ID      
		) VALUES (
			#ACNT_DVSN_CD#
		    ,#ACNT_CD#
		    ,#ACNT_CD_NM#
		    ,#RMK1#
		    ,#RMK2#
		    ,SYSDATE
		    ,'TEST'
		    ,'TEST'
		    ,'TEST'
		)
	</insert>
	
	
	<!--오류코드 insert-->
	<insert id="FAACAV036EMainErrInsert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainErrInsert */ ]]>
		INSERT INTO TWFAACAV024C (
			ACNT_DVSN_CD
			,ACNT_CD         
			,ACNT_CD_NM      
			,RMK_1            
			,RMK_2            
			,FRT_REGI_DH     
			,FRT_USR_ID      
			,FNL_DEAL_DPT_CD 
			,FNL_MNU_ID      
		) VALUES (
			 #ACNT_DVSN_CD#
		    ,#ACNT_CD#
		    ,#RMK1#
		    ,#RMK2#
		    ,#ACNT_CD_NM#
		    ,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
		    ,'TEST'
		    ,'TEST'
		    ,'TEST'
		)
	</insert>
	
	<!--외부 insert-->
	<insert id="FAACAV036ExtlInsert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ExtlInsert */ ]]>
		INSERT INTO TWFAACAV023C (
			EXTL_DVSN_CD
			,EXTL_CD         
			,EXTL_CD_NM      
			,EXTL_CD_RMK            
			,FRT_REGI_DH     
			,FRT_USR_ID      
			,FNL_DEAL_DPT_CD 
			,FNL_MNU_ID      
		) VALUES (
			 #ACNT_DVSN_CD#
		    ,#ACNT_CD#
		    ,#ACNT_CD_NM#
		    ,#RMK1#
		    ,TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
		    ,'TEST'
		    ,'TEST'
		    ,'TEST'
		)
	</insert>
	
		
	<!--부호 update-->
	<update id="FAACAV036EMainUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainUpdate */ ]]>
		<![CDATA[ 	
			UPDATE TWFAACAV024C
			   SET ACNT_CD_NM   = #ACNT_CD_NM# 
			     , RMK_1         = #RMK1#
			     , RMK_2         = #RMK2# 		
		]]>	    
			  WHERE 1=1
			  AND ACNT_DVSN_CD     = #ACNT_DVSN_CD# 
		      AND ACNT_CD             = #ACNT_CD# 
	</update>
	
	<!--부호 DELETE-->
	<delete id="FAACAV036EMainDelete" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainDelete */ ]]>
		<isNotEqual property="ACNT_DVSN_CD" compareValue="">
			DELETE FROM TWFAACAV024C
			WHERE 1=1
			AND ACNT_DVSN_CD     = #ACNT_DVSN_CD# 
		    AND ACNT_CD             = #ACNT_CD#
		</isNotEqual>
		
		<isEqual property="ACNT_DVSN_CD" compareValue="">
			DELETE FROM TBDCMACM015M
			WHERE 1=1
			AND ORG_CD             = #ACNT_CD# 
		</isEqual>
	</delete>
	
	<!--오류부호 update-->
	<!-- , RMK_2   = #ACNT_CD_NM#  		-->
	<update id="FAACAV036EMainErrUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036EMainErrUpdate */ ]]>
		<![CDATA[ 	
			UPDATE TWFAACAV024C
			   SET RMK_1   = #RMK2# 
			   	 , RMK_2   = #ACNT_CD_NM#  
		]]>	    
			  WHERE 1=1
			  AND ACNT_DVSN_CD     = #ACNT_DVSN_CD# 
		      AND ACNT_CD             = #ACNT_CD# 
	</update>
	
	<!--외부코드 update-->
	<update id="FAACAV036ExtlUpdate" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ExtlUpdate */ ]]>
		<![CDATA[ 	
			UPDATE TWFAACAV023C
			   SET EXTL_CD_NM   = #ACNT_CD_NM# 
			     , EXTL_CD_RMK         = #RMK2#
   
		]]>	    
						
			  WHERE 1=1
			  AND EXTL_DVSN_CD     = #ACNT_DVSN_CD#
		      AND EXTL_CD             = #ACNT_CD# 
	</update>
	
	<!--외부코드 DELETE-->
	<delete id="FAACAV036ExtlDelete" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ExtlDelete */ ]]>
		<![CDATA[ 	
			DELETE FROM TWFAACAV023C
		]]>	    
						
			  WHERE 1=1
			  AND EXTL_DVSN_CD     = #ACNT_DVSN_CD# 
		      AND EXTL_CD             = #ACNT_CD#
	</delete>	
	
	<select id="FAACAVOrgPopList" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		<![CDATA[  /* faa/cav/036/FAACAVOrgPopList */ ]]>
	        SELECT  A.ORG_CD ,
	                A.ORG_NM,
	                A.RGN_CD,
	                A.ORG_DVSN_CD,
	                A.COPT_SG_CD,
	                A.USE_DVSN_NO,
	                A.BR_CD,
	                A.DIV_CD,
	                A.AD
	        FROM    (
	                SELECT  B.ORG_CD ,
	                        B.ORG_NM,
	                        RGN_CD,
	                        ORG_DVSN_CD,
	                        COPT_SG_CD,
	                        USE_DVSN_NO,
	                        SUBSTR(B.ENFM_DPT_CD,1,3) AS BR_CD,
	                        SUBSTR(B.ENFM_DPT_CD,4,3) AS DIV_CD,
	                        B.AD
	                FROM    TBDCMACM015M B
	                        LEFT OUTER JOIN 
	                        (SELECT  COPT_SG_CD||'000000000' COPT_SG_CD_A
	                        FROM    TBDCMACM015M A
	                        WHERE   ORG_CD LIKE '___000000000' 
	                        GROUP BY COPT_SG_CD) A
	                ON      (B.ORG_CD = A.COPT_SG_CD_A)
	                ) A
	        WHERE   1=1
	                    <isNotEmpty property="strOrgCd" prepend="AND">
	                        A.ORG_CD like '%' || #strOrgCd# || '%' <!-- 기관코드 -->
	                    </isNotEmpty>	
	                    <isNotEmpty property="strOrgNm" prepend="AND">
	                        A.ORG_NM like '%' || #strOrgNm# || '%' <!-- 기관명 -->
	                    </isNotEmpty>
	                    <isNotEmpty property="strUseYn" prepend="AND">
	                        USE_DVSN_NO = #strUseYn# <!-- 사용여부 -->
	                    </isNotEmpty>	
					/* 지정취소 된 건이 아닌것 */		
	        AND     EXISTS (SELECT  DISTINCT C.ORG_CD 
	                        FROM    TWFAACAV003M C
	                        WHERE   C.MDF_DVSN_CD != 'D'
	                            <isNotEmpty property="strOrgCd" prepend="AND">
	                                C.ORG_CD LIKE '%' || #strOrgCd# || '%' <!-- 기관코드 -->
	                            </isNotEmpty>
	                            <isNotEmpty property="strOrgNm" prepend="AND">
	                                C.ORG_NM LIKE '%' || #strOrgNm# || '%' <!-- 기관명 -->
	                            </isNotEmpty>
	                        )						
	        ORDER BY ORG_NM
	</select>	
	
	<select id="FAACAV036ERselect" parameterClass="paramMap" resultClass="resultMap">
		<![CDATA[  /* faa/cav/036/FAACAV036ERselect */ ]]>
		<isNotEqual property="SgDvsnCd1" compareValue="06">
		SELECT ACNT_CD AS 부호
		       ,ACNT_CD_NM AS 명
		  FROM TWFAACAV024C	
		 WHERE 1=1
		   AND ACNT_DVSN_CD = #SgDvsnCd1#
      ORDER BY ACNT_CD
		 </isNotEqual>
		 <isEqual property="SgDvsnCd1" compareValue="06">
	    SELECT EXTL_CD AS 코드
		       ,EXTL_CD_NM AS 코드명
		       ,EXTL_CD_RMK AS 비고
		  FROM TWFAACAV023C	
	     WHERE 1=1
		   AND EXTL_DVSN_CD = #SgDvsnCd2#
      ORDER BY EXTL_CD
		 </isEqual>
	</select>
	
		<insert id="FAACAV036E_ENAIS_CODE_Insert" parameterClass="paramMap">
		<![CDATA[  /* faa/cav/036/FAACAV036E_ENAIS_CODE_Insert */ ]]>
		<![CDATA[
			INSERT INTO EN_ENAIS_BOARD
			(
				IF_SEQ
	            ,BRD_DVSN_CD
				,TIT_NM
				,TXT
				,RMK
	            ,FLAG
	            ,IF_STATUS
	            ,IF_TRY
	            ,IF_RAISE_DT
	            ,IF_DEAL_DT
	            ,IF_MESSG
	            ,IF_SIID
			) VALUES (
	            #IF_SEQ#
				,#ACNT_DVSN_CD#
				,#ACNT_CD#
				,#ACNT_CD_NM#
				,#RMK2#
	            ,#FLAG#
	            ,'SS'
	            ,0
	            ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
	            ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
	            ,''
	            ,''
			)
		]]>
	</insert>
	
	
</sqlMap> 
