<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/020">

	<!--출장 통제여부와 통제일 UPDATE-->
	<update id="BADDED020ECtrlUpdate" parameterClass="paramMap">
		UPDATE TBBADDED002M
		   SET CTRL_YN = 'Y' 
		     , CTRL_DT = TO_CHAR(SYSDATE,'YYYYMMDD')	
		<isNotNull prepend="," property="FNL_USR_ID">	       
			     FNL_USR_ID = #FNL_USR_ID#
		</isNotNull>	
		<isNotNull prepend="," property="FNL_DEAL_DPT_CD">	       
			     FNL_DEAL_DPT_CD  = #FNL_DEAL_DPT_CD#
		</isNotNull>		
		<isNotNull prepend="," property="FNL_MNU_ID">	       
			     FNL_MNU_ID       = #FNL_MNU_ID#
		</isNotNull>		
				  , FNL_MDF_DH              = SYSDATE	
			 WHERE BZT_YR  = #BZT_YR#
			   AND BZT_SNO = #BZT_SNO#
	</update>

	<!--출장 통제여부와 통제일을 NULL로 UPDATE-->
	<update id="BADDED020ECtrlCancelUpdate" parameterClass="paramMap">
		UPDATE TBBADDED002M
		   SET CTRL_YN = ''
		     , CTRL_DT = ''
		<isNotNull prepend="," property="FNL_USR_ID">	       
			     FNL_USR_ID = #FNL_USR_ID#
		</isNotNull>	
		<isNotNull prepend="," property="FNL_DEAL_DPT_CD">	       
			     FNL_DEAL_DPT_CD  = #FNL_DEAL_DPT_CD#
		</isNotNull>		
		<isNotNull prepend="," property="FNL_MNU_ID">	       
			     FNL_MNU_ID       = #FNL_MNU_ID#
		</isNotNull>		
				 , FNL_MDF_DH              = SYSDATE	
			 WHERE BZT_YR  = #BZT_YR#
			   AND BZT_SNO = #BZT_SNO#
	</update>

</sqlMap> 

