<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/dcp/615">

 	<resultMap class="java.util.HashMap" id="hwpDoc_Map">
	
	<result property="YEAR" column="YEAR" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="ACCT_NO" column="ACCT_NO" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="JUBSOONO" column="JUBSOONO" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="ACCT_DATE" column="ACCT_DATE" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="CV_PETER_NM" column="CV_PETER_NM" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="CV_PETER_ADDR" column="CV_PETER_ADDR" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="REL_ORG_NM" column="REL_ORG_NM" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="REL_PSON_NM" column="REL_PSON_NM" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="BELONG_ORG_CD" column="BELONG_ORG_CD" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="TITLE" column="TITLE" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	
	<result property="CV_PET_SUMM" column="CV_PET_SUMM" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="INSPEC_SUMM" column="INSPEC_SUMM" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="HNDL_OPINION" column="HNDL_OPINION" jdbcType="CLOB"	javaType="java.lang.String" />
	<result property="INFORM" column="INFORM" jdbcType="CLOB"	javaType="java.lang.String" />
	
	<result property="CV_PET_HNDL_RSLT_CD" column="CV_PET_HNDL_RSLT_CD" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="SOLVE_TYPE_CD" column="SOLVE_TYPE_CD" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	<result property="UNSOLVE_TYPE_CD" column="UNSOLVE_TYPE_CD" jdbcType="VARCHAR2"	javaType="java.lang.String" />
	
    </resultMap>
    
 	<select id="CSPDCP615PMainSelect" parameterClass="paramMap"
		resultMap="hwpDoc_Map">
		<![CDATA[
		SELECT D1.CV_PET_CATE_CD
		      ,D1.YEAR
		      ,D1.ACCT_NO
		      ,D1.YEAR||'-'||D1.CV_PET_CATE_CD||'-'||D1.ACCT_NO AS JUBSOONO
		      ,TO_CHAR(TO_DATE(D1.ACCT_DATE, 'YYYYMMDD'), 'YYYY.MM.DD') AS ACCT_DATE
		      ,D1.CV_PETER_NM
		      ,D1.CV_PETER_ADDR
		      ,F_ORG_INFO(D1.REL_ORG_CD, '1') AS REL_ORG_NM
		      ,'' AS REL_PSON_NM
		      ,'' AS BELONG_ORG_CD
		      ,D1.TITLE
		      ,D1.CV_PET_SUMM
		      ,D2.INSPEC_SUMM
		      ,D2.HNDL_OPINION
		      ,D2.INFORM
		      ,D2.CV_PET_HNDL_RSLT_CD
		      ,D2.SOLVE_TYPE_CD
		      ,D2.UNSOLVE_TYPE_CD
		  FROM AM_CV_PET_HNDL_DOC D1
		      ,AM_CV_PET_RSLT_RPT D2
		 WHERE 1=1
		   AND D1.CV_PET_CATE_CD = D2.CV_PET_CATE_CD
		   AND D1.YEAR           = D2.YEAR
		   AND D1.ACCT_NO        = D2.ACCT_NO
		   AND D1.CV_PET_CATE_CD = #CV_PET_CATE_CD#
		   AND D1.YEAR           = #YEAR#
		   AND D1.ACCT_NO        = #ACCT_NO#
		]]>
		
	</select>

</sqlMap> 
