<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/iit/008">

	<select id="CSPIIT008QMainSelect2" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	CASE WHEN USE_DVSN_NO = 'N' THEN '(*)'||ORG_CD
					ELSE ORG_CD END AS ORG_CD
					,ORG_NM
					,F_CODE_NM('1000001',RGN_CD) AS RGN_NM
					,F_CODE_NM('1000119',ORG_DVSN_CD) AS ORG_DVSN_NM
					,USE_DVSN_NO
					,F_DPT_INFO(ENFM_DPT_CD, '1') AS ENFM_DPT_NM
					,F_CODE_NM('1000346',ORG_DGE_CD) AS ORG_DGE_NM
					,PASA_USE_YN_CD
					,COPT_SG_CD
					,TOT_CNT
					,ORG_CD AS ORG_CD_NO
			FROM	(
		]]>
				<include refid = "include.pageSelct"/>
		        <![CDATA[
		          SELECT	ORG_CD
							, ORG_NM
							, RGN_CD
							, ORG_DVSN_CD
							, USE_DVSN_NO
							, ENFM_DPT_CD
							, ORG_DGE_CD
							, PASA_USE_YN_CD
							, COPT_SG_CD
					FROM	TBDCMACM015M
		        	WHERE 	1=1
		                    
		            ]]>
				<isNotEmpty property="strEnfmDptCd">
					AND ENFM_DPT_CD = #strEnfmDptCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgNm">
					AND ORG_NM LIKE '%'||#strOrgNm#||'%'
				</isNotEmpty>
				<isNotEmpty property="strUseDvsn">
					AND USE_DVSN_NO = #strUseDvsn#
				</isNotEmpty>
				<isNotEmpty property="strOrgDvsnCd">
					AND ORG_DVSN_CD = #strOrgDvsnCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgDge">
					AND ORG_DGE_CD = #strOrgDge#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdS">
					AND ORG_CD &gt;= #strOrgCdS#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdE">
					AND ORG_CD &lt;= #strOrgCdE#
				</isNotEmpty>
				<isNotEmpty property="strPasaUseYn">
					AND PASA_USE_YN_CD = #strPasaUseYn#
				</isNotEmpty>
				<isNotEmpty property="strCOPT_SG_NM">
					AND COPT_SG_CD IN (SELECT SUBSTR(ORG_CD,1,3) FROM TBDCMACM015M WHERE ORG_NM LIKE '%'||#strCOPT_SG_NM#||'%')
				</isNotEmpty>
				<include refid = "include.pageOrder"/> 
		<![CDATA[
				)
		]]>
	</select>
	
	
	<select id="CSPIIT008QMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<include refid = "include.pageSelct"/>
		<![CDATA[
			SELECT	CASE WHEN USE_DVSN_NO = 'N' THEN '(*)'||ORG_CD
					ELSE ORG_CD END AS ORG_CD
					,ORG_NM
					,F_CODE_NM('1000001',RGN_CD) AS RGN_NM
					,F_CODE_NM('1000119',ORG_DVSN_CD) AS ORG_DVSN_NM
					,USE_DVSN_NO
					,F_DPT_INFO(ENFM_DPT_CD, '4') AS ENFM_DPT_NM
					,ORG_DGE_CD AS ORG_DGE_NM
					,PASA_USE_YN_CD
					,COPT_SG_2_CD as COPT_SG_CD
					,ORG_CD AS ORG_CD_NO
					,F_CODE_NM('1000128',PUB_DVSN_CD) AS PUB_DVSN_NM   
					,ADMN_ORG_DVSN_CD
			FROM	TBDCMACM015M
			WHERE 	1=1
		]]>
				<isNotEmpty property="strEnfmDptCd">
					AND ENFM_DPT_CD = #strEnfmDptCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgNm">
					AND ORG_NM LIKE '%'||#strOrgNm#||'%'
				</isNotEmpty>
				<isNotEmpty property="strUseDvsn">
					AND USE_DVSN_NO = #strUseDvsn#
				</isNotEmpty>
				<isNotEmpty property="strOrgDvsnCd">
					AND ORG_DVSN_CD = #strOrgDvsnCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgDge">
					AND ORG_DGE_CD = #strOrgDge#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdS">
					AND ORG_CD &gt;= #strOrgCdS#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdE">
					AND ORG_CD &lt;= #strOrgCdE#
				</isNotEmpty>
				<isNotEmpty property="strPasaUseYn">
					AND PASA_USE_YN_CD = #strPasaUseYn#
				</isNotEmpty>
				<isNotEmpty property="strCOPT_SG_2_CD">
					AND COPT_SG_2_CD =  #strCOPT_SG_2_CD#
				</isNotEmpty>
				<isNotEmpty property="strRgnCd">
					AND RGN_CD =  #strRgnCd#
				</isNotEmpty>
				<isNotEmpty property="strPUB_DVSN_CD">
					AND PUB_DVSN_CD =  #strPUB_DVSN_CD#
				</isNotEmpty>
				<include refid = "include.pageOrder"/> 
	</select>
	
	
	<select id="CSPIIT008CoptSgSelect" parameterClass="paramMap"
		resultClass="resultMap">

		SELECT SUBSTR(ORG_CD,1,3) AS ORG_CD,
		ORG_NM
		FROM TBDCMACM015M
		WHERE ORG_CD = COPT_SG_CD||'000000000'
		ORDER BY ORG_NM
	</select>

	<select id="CSPIIT008QReportSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	CASE WHEN USE_DVSN_NO = 'N' THEN '(*)'||ORG_CD
					ELSE ORG_CD END AS ORG_CD
					,ORG_NM
					,F_CODE_NM('1000001',RGN_CD) AS RGN_NM
					,AD||' '||DTL_AD AS AD
					,SUBSTR(ZCD,0,3)||'-'||SUBSTR(ZCD,4,3) AS ZCD
					,TNB
					,PASA_USE_YN_CD AS  USE_DVSN_NO
			FROM	TBDCMACM015M
			WHERE	1=1
		]]>
			<isNotEmpty property="strEnfmDptCd">
					AND ENFM_DPT_CD = #strEnfmDptCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgNm">
					AND ORG_NM LIKE '%'||#strOrgNm#||'%'
				</isNotEmpty>
				<isNotEmpty property="strUseDvsn">
					AND USE_DVSN_NO = #strUseDvsn#
				</isNotEmpty>
				<isNotEmpty property="strOrgDvsnCd">
					AND ORG_DVSN_CD = #strOrgDvsnCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgDge">
					AND ORG_DGE_CD = #strOrgDge#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdS">
					AND ORG_CD &gt;= #strOrgCdS#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdE">
					AND ORG_CD &lt;= #strOrgCdE#
				</isNotEmpty>
				<isNotEmpty property="strPasaUseYn">
					AND PASA_USE_YN_CD = #strPasaUseYn#
				</isNotEmpty>
				<isNotEmpty property="strCOPT_SG_2_CD">
					AND COPT_SG_2_CD =  #strCOPT_SG_2_CD#
				</isNotEmpty>
				<isNotEmpty property="strRgnCd">
					AND RGN_CD =  #strRgnCd#
				</isNotEmpty>
				<isNotEmpty property="strPUB_DVSN_CD">
					AND PUB_DVSN_CD =  #strPUB_DVSN_CD#
				</isNotEmpty>
		<![CDATA[
			ORDER BY ORG_CD ASC
		]]>
	</select>
	
	<select id="CSPIIT008QExcelExportSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
			SELECT	F_CODE_NM('1000119',ORG_DVSN_CD) AS ORG_DVSN_NM
					,CASE WHEN USE_DVSN_NO = 'N' THEN '(*)'||ORG_CD
					ELSE ORG_CD END AS ORG_CD
					,ORG_NM
					,F_CODE_NM('1000001',RGN_CD) AS RGN_NM
					,USE_DVSN_NO
					,F_DPT_INFO(ENFM_DPT_CD, '1') AS ENFM_DPT_NM
					,F_CODE_NM('1000346',ORG_DGE_CD) AS ORG_DGE_NM
					,AD||' '||DTL_AD AS AD
					,SUBSTR(ZCD,0,3)||'-'||SUBSTR(ZCD,4,3) AS ZCD
					,TNB
					,PASA_USE_YN_CD
			FROM	TBDCMACM015M
			WHERE	1=1
		]]>
			<isNotEmpty property="strEnfmDptCd">
					AND ENFM_DPT_CD = #strEnfmDptCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgNm">
					AND ORG_NM LIKE '%'||#strOrgNm#||'%'
				</isNotEmpty>
				<isNotEmpty property="strUseDvsn">
					AND USE_DVSN_NO = #strUseDvsn#
				</isNotEmpty>
				<isNotEmpty property="strOrgDvsnCd">
					AND ORG_DVSN_CD = #strOrgDvsnCd#
				</isNotEmpty>
				<isNotEmpty property="strOrgDge">
					AND ORG_DGE_CD = #strOrgDge#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdS">
					AND ORG_CD &gt;= #strOrgCdS#
				</isNotEmpty>
				<isNotEmpty property="strOrgCdE">
					AND ORG_CD &lt;= #strOrgCdE#
				</isNotEmpty>
				<isNotEmpty property="strPasaUseYn">
					AND PASA_USE_YN_CD = #strPasaUseYn#
				</isNotEmpty>
				<isNotEmpty property="strCOPT_SG_2_CD">
					AND COPT_SG_2_CD =  #strCOPT_SG_2_CD#
				</isNotEmpty>
				<isNotEmpty property="strRgnCd">
					AND RGN_CD =  #strRgnCd#
				</isNotEmpty>
				<isNotEmpty property="strPUB_DVSN_CD">
					AND PUB_DVSN_CD =  #strPUB_DVSN_CD#
				</isNotEmpty>
		<![CDATA[
			ORDER BY ORG_CD ASC
		]]>
	</select>
</sqlMap> 
