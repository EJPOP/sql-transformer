<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ear/010">

	<!--처분요구상세의 처리상태  update-->
	<update id="BADEAR010ECtrlUpdate" parameterClass="paramMap">
		<![CDATA[ 	
			UPDATE TBBADEAR002D
			   SET 
			       AUD_YR            = #AUD_YR# 
			     , AUD_NO            = #AUD_NO# 		
			     , DSP_RQ_SNO        = #DSP_RQ_SNO#
			     
			     , DTM_STA_CD        = #DTM_STA_CD# 

			     , DSP_RQ_DTM_DT     = CASE WHEN #DTM_STA_CD# IN ('1', '2') THEN TO_CHAR(SYSDATE,'YYYYMMDD')
			                                ELSE '' 
			                            END
			                            
			     , DSP_RQ_DTM_PEN_ID = CASE WHEN #DTM_STA_CD# IN ('1', '2') THEN #strCnb#
			                                ELSE '' 
			                            END	
			     
			     , ENFM_CPLT_IPT_DT  = CASE WHEN #DTM_STA_CD# = '2' THEN ENF_DT 
			                                ELSE '' 
			                            END                                      /* 집행완결입력일 - 2015.06.08 yyh */
			     , ENFM_WHLS_DTM_DT  = CASE WHEN #DTM_STA_CD# = '2' THEN ENF_DT 
			                                ELSE '' 
			                            END                                      /* 집행전말확정일 - 2015.06.08 yyh */
		]]>	 
		<isNotNull prepend="," property="FNL_USR_ID">	       
			      FNL_USR_ID      = #FNL_USR_ID#
		</isNotNull>	
		<isNotNull prepend="," property="FNL_DEAL_DPT_CD">	       
			      FNL_DEAL_DPT_CD  = #FNL_DEAL_DPT_CD#
		</isNotNull>		
		<isNotNull prepend="," property="FNL_MNU_ID">	       
			      FNL_MNU_ID        = #FNL_MNU_ID#
		</isNotNull>
		<![CDATA[ 	
				 , FNL_MDF_DH        = SYSDATE			
			  WHERE 1=1
			    AND AUD_YR = #AUD_YR# 
			    AND AUD_NO = #AUD_NO# 	
			    AND DSP_RQ_SNO = #DSP_RQ_SNO#
		]]>			    					        
	</update>	

	<update id="BADEAR010ECtrlCpltUpdate" parameterClass="paramMap">
		<![CDATA[ 	
			DECLARE
			BEGIN
                UPDATE TBBADEAR006M                                     /* 관계기관 기본 */ 
                  SET 
                      CPLT_YN           = 'Y'                           /* 완결여부 */   
                     ,CPLT_DT           = TO_CHAR(SYSDATE,'YYYYMMDD')   /* 완결일 */   
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */
                ;  
                  
                UPDATE TBBADEAR007M                                     /* 관계자 기본 */ 
                  SET 
                      CPLT_YN           = 'Y'                           /* 완결여부 */   
                     ,CPLT_DT           = TO_CHAR(SYSDATE,'YYYYMMDD')   /* 완결일 */   
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */  
                ;
                
                UPDATE TBBADEAR008M                                     /* 소관기관 기본 */ 
                  SET 
                      CPLT_YN           = 'Y'                           /* 완결여부 */        
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */    
                ;
            END;
		]]>			    					        
	</update>
	
	<update id="BADEAR010ECtrlCpltCancelUpdate" parameterClass="paramMap">
		<![CDATA[ 	
			DECLARE
			BEGIN
                UPDATE TBBADEAR006M                                     /* 관계기관 기본 */ 
                  SET 
                      CPLT_YN           = NULL                          /* 완결여부 */   
                     ,CPLT_DT           = NULL							/* 완결일 */   
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */
                ;  
                  
                UPDATE TBBADEAR007M                                     /* 관계자 기본 */ 
                  SET 
                      CPLT_YN           = NULL                          /* 완결여부 */   
                     ,CPLT_DT           = NULL							/* 완결일 */   
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */  
                ;
                
                UPDATE TBBADEAR008M                                     /* 소관기관 기본 */ 
                  SET 
                      CPLT_YN           = NULL                          /* 완결여부 */        
                     ,FNL_USR_ID        = #FNL_USR_ID#                  /* 최종사용자ID */
                     ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#             /* 최종거래부서코드 */
                     ,FNL_MNU_ID        = #FNL_MNU_ID#                  /* 최종메뉴ID */
                     ,FNL_MDF_DH        = SYSDATE                       /* 최종수정일시 */ 
                WHERE AUD_YR            = #AUD_YR#                      /* 감사년도 */ 
                  AND AUD_NO            = #AUD_NO#                      /* 감사번호 */
                  AND DSP_RQ_SNO        = #DSP_RQ_SNO#                  /* 처분요구순번 */    
                ;
            END;
		]]>			    					        
	</update>

	<!--처분요구사항기본 공감insert-->
	<insert id="BADEAR010EGongMasterInsert" parameterClass="paramMap">
		<![CDATA[  
			INSERT INTO TBBADEAR013H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    CON_HNDL_CD,
			    USE_YN,
			    FRT_USR_ID,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH
			)
			VALUES
			(
			    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR013H),
			    #AUD_YR#,
			    #AUD_NO#,
			    #DSP_RQ_SNO#,
			    'C',
			    'N',
			    #FRT_USR_ID#,
			    #FNL_USR_ID#,
			    #FNL_DEAL_DPT_CD#,
			    #FNL_MNU_ID#,
			    SYSDATE,
			    SYSDATE
			);			
		]]>
	</insert>

	<!--처분요구사항기본 공감insert-->
	<insert id="BADEAR010EGongMasterSubInsert" parameterClass="paramMap">
		<![CDATA[  
				INSERT INTO TBBADEAR015H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR015H),
				    #AUD_YR#,
				    #AUD_NO#,
				    #DSP_RQ_SNO#,
				    'C',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);		
		]]>
	</insert>	


	<!--처분요구기본 delete-->
	<update id="BADEAR010EGongMasterDelete" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
				INSERT INTO TBBADEAR013H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR013H),
				    #AUD_YR#,
				    #AUD_NO#,
				    #DSP_RQ_SNO#,
				    'D',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);		
		END;
		]]>		  
	</update>

	<!--처분요구상세 delete-->
	<update id="BADEAR010EGongMasterSubDelete" parameterClass="paramMap">
		<![CDATA[	
		DECLARE
			BEGIN	
				INSERT INTO TBBADEAR015H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR015H),
				    #AUD_YR#,
				    #AUD_NO#,
				    #DSP_RQ_SNO#,
				    'D',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);			  
		END;
		]]>			  
	</update>	
	
	<!--처분요구상세 update-->
	<update id="BADEAR010EGongMasterUpdate" parameterClass="paramMap">	
		<![CDATA[	
			INSERT INTO TBBADEAR012H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    FRM_NO,
			    RPRT_NO,
			    JUDG_NO,
			    TIT_TXT,
			    HND_SBJ_TXT,
			    HNDL_PLAN_DVSN_CD,
			    DSP_RQ_KND_CD,
			    ORG_DVSN_CD,
			    AUD_EPS_CD,
			    USE_YN,
			    FRT_USR_ID,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH
			)
			SELECT (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR012H),
			       AUD_YR,
			       AUD_NO,
			       DSP_RQ_SNO,
			       FRM_NO,
			       RPRT_NO,
			       JUDG_NO,
			       TIT_TXT,
			       HND_SBJ_TXT,
			       HNDL_PLAN_DVSN_CD,
			       DSP_RQ_KND_CD,
			       ORG_DVSN_CD,
			       AUD_EPS_CD,
			       'N',
			       #FRT_USR_ID#,
			       #FNL_USR_ID#,
			       #FNL_DEAL_DPT_CD#,
			       #FNL_MNU_ID#,
			       SYSDATE,
			       SYSDATE
			  FROM TBBADEAR001M
			 WHERE 1=1
			   AND AUD_YR       = #AUD_YR#
			   AND AUD_NO       = #AUD_NO#
			   AND DSP_RQ_SNO   = #DSP_RQ_SNO#		
		]]>
	</update>	
	
	
	
	
	<!--처분요구상세 update-->
	<update id="BADEAR010EGongMasterSubUpdate" parameterClass="paramMap">		
		<![CDATA[
		INSERT INTO TBBADEAR014H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    DSP_RQ_SRNO,
				    ENF_DT,
				    HNDL_DDLN_DT,
				    ENF_BRDV_CD,
				    CHGR_NM,
				    DOC_SEN_NO,
				    DSP_RQ_IPT_DT,
				    PSC_RQT_NOP_CNT,
				    PNL_DRIN_PSVT_AM,
				    RSR_AM,
				    SPLP_AM,
				    BGT_RDC_AM,
				    INC_ICR_AM,
				    PPL_BDN_RDT_AM,
				    FRTN_INCR_AM,
				    EXPN_RTNL_AM,
				    IJS_AM,
				    SLF_HNDL_RQ_AM,
				    WRDO_CAU_CD,
				    ENFM_MNG_BRDV_CD,
				    DTM_YN,
				    DTM_STA_CD,
				    ENFM_HST_IPT_DT,
				    ACNT_INSP_CD,
				    CPLT_DT,
				    HMP_OPEN_YN,
				    DTY_OBV_UTL_YN,
				    AM,
				    NOP_CNT,
				    HNDL_PLAN_RPT_NO,
				    EVI_CNT,
				    TOT_EVI_CNT,
				    WRDO_TYP_CD,
				    DTY_INSP_MTRL_TXT,
				    AUD_POLI_CD,
				    AUD_SPH_CD,
				    AUD_RPT_YR,
				    ENFM_CPLT_IPT_DT,
				    EPT_EFCT_AM_STA_CD,
				    EPT_EFCT_DT,
				    ENFM_WHLS_DTM_DT,
				    SLF_HNDL_TXT,
				    STF_SMT_INF_TXT,
				    COPT_OFI_CD,
				    RLTN_ORG_CD,
				    COPT_CNT,
				    ORG_CNT,
				    DSP_RQ_DTM_DT,
				    DSP_RQ_DTM_PEN_ID,
				    ENFM_CPLT_IPT_PEN_ID,
				    ENFM_WHLS_DTM_PEN_ID,
				    DSP_RQ_APV_STA_CD,
				    APV_DOC_NO,
				    DSP_RQ_APV_STA_DT,
				    CPLT_PEN_ID,
				    TSK_CAT_CD,
				    APV_DOC_GRP_NO,
				    EXPOT_Y_EFCT_AM,
				    ENFM_WHLS_APV_KND_CD,
				    EXAM_RPRT_DSP_RQ_SBT,
				    EXAM_RPRT_UNENFM_RTWR_TXT,
				    EXAM_RPRT_UNENFM_RSN_EXAM_TXT,
				    EXAM_RPRT_APV_STA_DT,
				    EXAM_RPRT_APV_DOC_NO,
				    EXAM_RPRT_APV_STA_CD,
				    CLSG_PRSS_STA_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				SELECT (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR014H),
				        AUD_YR,
				        AUD_NO,
				        DSP_RQ_SNO,
				        DSP_RQ_SRNO,
				        ENF_DT,
				        HNDL_DDLN_DT,
				        ENF_BRDV_CD,
				        CHGR_NM,
				        DOC_SEN_NO,
				        DSP_RQ_IPT_DT,
				        PSC_RQT_NOP_CNT,
				        PNL_DRIN_PSVT_AM,
				        RSR_AM,
				        SPLP_AM,
				        BGT_RDC_AM,
				        INC_ICR_AM,
				        PPL_BDN_RDT_AM,
				        FRTN_INCR_AM,
				        EXPN_RTNL_AM,
				        IJS_AM,
				        SLF_HNDL_RQ_AM,
				        WRDO_CAU_CD,
				        ENFM_MNG_BRDV_CD,
				        DTM_YN,
				        DTM_STA_CD,
				        ENFM_HST_IPT_DT,
				        ACNT_INSP_CD,
				        CPLT_DT,
				        HMP_OPEN_YN,
				        DTY_OBV_UTL_YN,
				        AM,
				        NOP_CNT,
				        HNDL_PLAN_RPT_NO,
				        EVI_CNT,
				        TOT_EVI_CNT,
				        WRDO_TYP_CD,
				        DTY_INSP_MTRL_TXT,
				        AUD_POLI_CD,
				        AUD_SPH_CD,
				        AUD_RPT_YR,
				        ENFM_CPLT_IPT_DT,
				        EPT_EFCT_AM_STA_CD,
				        EPT_EFCT_DT,
				        ENFM_WHLS_DTM_DT,
				        SLF_HNDL_TXT,
				        STF_SMT_INF_TXT,
				        COPT_OFI_CD,
				        RLTN_ORG_CD,
				        COPT_CNT,
				        ORG_CNT,
				        DSP_RQ_DTM_DT,
				        DSP_RQ_DTM_PEN_ID,
				        ENFM_CPLT_IPT_PEN_ID,
				        ENFM_WHLS_DTM_PEN_ID,
				        DSP_RQ_APV_STA_CD,
				        APV_DOC_NO,
				        DSP_RQ_APV_STA_DT,
				        CPLT_PEN_ID,
				        TSK_CAT_CD,
				        APV_DOC_GRP_NO,
				        EXPOT_Y_EFCT_AM,
				        ENFM_WHLS_APV_KND_CD,
				        EXAM_RPRT_DSP_RQ_SBT,
				        EXAM_RPRT_UNENFM_RTWR_TXT,
				        EXAM_RPRT_UNENFM_RSN_EXAM_TXT,
				        EXAM_RPRT_APV_STA_DT,
				        EXAM_RPRT_APV_DOC_NO,
				        EXAM_RPRT_APV_STA_CD,
				        CLSG_PRSS_STA_CD,
				        'N',
				        #FRT_USR_ID#,
				        #FNL_USR_ID#,
				        #FNL_DEAL_DPT_CD#,
				        #FNL_MNU_ID#,
				        SYSDATE,
				        SYSDATE
				  FROM TBBADEAR002D
				 WHERE 1=1
				   AND AUD_YR       = #AUD_YR#
				   AND AUD_NO       = #AUD_NO#
				   AND DSP_RQ_SNO   = #DSP_RQ_SNO#
			  	
		]]>
	</update>			
	
	
	
	<!--회계사항 insert-->
	<insert id="BADEAR010EGongAcctInsert" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , ACNT_SBJ_SNO
				  FROM TBBADEAR003M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
			)
			LOOP 						
				INSERT INTO TBBADEAR023H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    ACNT_SBJ_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR023H),
				    CS.AUD_YR,
				    CS.AUD_NO,
				    CS.DSP_RQ_SNO,
				    CS.ACNT_SBJ_SNO,
				    'C',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);	
			END LOOP;			
		END;			
		]]>
	</insert>
	
	<!-- 회계사항 Update -->
	<update id="BADEAR010EGongAcctUpdate" parameterClass="paramMap">
		<![CDATA[ 	
		DECLARE
			BEGIN		
				INSERT INTO TBBADEAR022H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    ACNT_SBJ_SNO,
				    DSP_RQ_ACNT_CD,
				    EPT_EFCT_DVSN_CD,
				    ACNT_YE,
				    PNL_DRIN_PSVT_AM,
				    RSR_AM,
				    SPLP_AM,
				    EPT_EFCT_AM,
				    EXPOT_Y_EFCT_AM,
				    EXPOT_Y_EFCT_AM_CALC_BAS_TXT,
				    DSP_RQ_BK_ACNT_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				SELECT  (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR022H),
				        AUD_YR,
				        AUD_NO,
				        DSP_RQ_SNO,
				        ACNT_SBJ_SNO,
				        DSP_RQ_ACNT_CD,
				        EPT_EFCT_DVSN_CD,
				        ACNT_YE,
				        PNL_DRIN_PSVT_AM,
				        RSR_AM,
				        SPLP_AM,
				        EPT_EFCT_AM,
				        EXPOT_Y_EFCT_AM,
				        EXPOT_Y_EFCT_AM_CALC_BAS_TXT,
				        DSP_RQ_BK_ACNT_CD, 
				        'N',
				        #FRT_USR_ID#,
				        #FNL_USR_ID#,
				        #FNL_DEAL_DPT_CD#,
				        #FNL_MNU_ID#,
				        SYSDATE,
				        SYSDATE        
				  FROM TBBADEAR003M
				WHERE 1=1
				  AND AUD_YR 		= #AUD_YR# 
				  AND AUD_NO 		= #AUD_NO# 	 
				  AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
				  AND ACNT_SBJ_SNO	= #ACNT_SBJ_SNO#	
				;  	
		END; 				  
		]]>			    					        
	</update>		
	
	<!--회계사항 delete-->
	<update id="BADEAR010EGongAcctDelete" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN			
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , ACNT_SBJ_SNO
				  FROM TBBADEAR003M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
			)
			LOOP 				   		
				INSERT INTO TBBADEAR023H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    ACNT_SBJ_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR023H),
				    CS.AUD_YR,
				    CS.AUD_NO,
				    CS.DSP_RQ_SNO,
				    CS.ACNT_SBJ_SNO,
				    'D',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);	
			END LOOP;
		END;												
		]]>
	</update>		


	<!--소관청 insert-->
	<insert id="BADEAR010EGongCoptInsert" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
				FOR CS IN (
				 
				    SELECT AUD_YR
				         , AUD_NO
				         , DSP_RQ_SNO
				         , RLTN_ORG_CD
					  FROM TBBADEAR008M
					 WHERE 1=1
					   AND AUD_YR 		= #AUD_YR# 
					   AND AUD_NO 		= #AUD_NO# 	
					   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
				)
				LOOP			
					INSERT INTO TBBADEAR025H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    RLTN_ORG_CD,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR025H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.RLTN_ORG_CD,
					    'C',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);
				END LOOP;	
		END;		
				
		]]>
	</insert>	

	<!-- 소관청 Update -->
	<update id="BADEAR010EGongCoptUpdate" parameterClass="paramMap">
		<![CDATA[ 	
			 
			INSERT INTO TBBADEAR024H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    RLTN_ORG_CD,
			    COPT_ORG_DVSN_CD,
			    DSP_RQ_TG_KND_CD,
			    CPLT_YN,
			    USE_YN,
			    FRT_USR_ID,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH
			)
			SELECT  (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR024H),
			        AUD_YR,
			        AUD_NO,
			        DSP_RQ_SNO,
			        RLTN_ORG_CD,
			        COPT_ORG_DVSN_CD,
			        DSP_RQ_TG_KND_CD,
			        CPLT_YN,
			       'N',
			        #FRT_USR_ID#,
			        #FNL_USR_ID#,
			        #FNL_DEAL_DPT_CD#,
			        #FNL_MNU_ID#,
			        SYSDATE,
			        SYSDATE  
			  FROM TBBADEAR008M
			 WHERE 1=1
			   AND AUD_YR 		= #AUD_YR# 
			   AND AUD_NO 		= #AUD_NO# 	
			   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
			   AND RLTN_ORG_CD = #RLTN_ORG_CD#
			;			   			 	    
		END;
		]]>			    					        
	</update>		


	<!--소관청 delete-->
	<update id="BADEAR010EGongCoptDelete" parameterClass="paramMap">
		<![CDATA[ 	
		DECLARE
			BEGIN	
				FOR CS IN (
				 
				    SELECT AUD_YR
				         , AUD_NO
				         , DSP_RQ_SNO
				         , RLTN_ORG_CD
					  FROM TBBADEAR008M
					 WHERE 1=1
					   AND AUD_YR 		= #AUD_YR# 
					   AND AUD_NO 		= #AUD_NO# 	
					   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
				)
				LOOP
						INSERT INTO TBBADEAR025H
						(
						    CON_NO,
						    AUD_YR,
						    AUD_NO,
						    DSP_RQ_SNO,
						    RLTN_ORG_CD,
						    CON_HNDL_CD,
						    USE_YN,
						    FRT_USR_ID,
						    FNL_USR_ID,
						    FNL_DEAL_DPT_CD,
						    FNL_MNU_ID,
						    FRT_REGI_DH,
						    FNL_MDF_DH
						)
						VALUES
						(
						    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR025H),
						    CS.AUD_YR,
						    CS.AUD_NO,
						    CS.DSP_RQ_SNO,
						    CS.RLTN_ORG_CD,
						    'D',
						    'N',
						    #FRT_USR_ID#,
						    #FNL_USR_ID#,
						    #FNL_DEAL_DPT_CD#,
						    #FNL_MNU_ID#,
						    SYSDATE,
						    SYSDATE
						);
				END LOOP;
			END;
		]]>   
	</update>	

        
	<!--관계기관 insert-->
	<insert id="BADEAR010EGongRltnInsert" parameterClass="paramMap">
		DECLARE
			BEGIN			
		<![CDATA[	
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , RLTN_ORG_CD
				  FROM TBBADEAR006M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
			   )
			LOOP			
				INSERT INTO TBBADEAR021H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    RLTN_ORG_CD,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR021H),
				    CS.AUD_YR,
				    CS.AUD_NO,
				    CS.DSP_RQ_SNO,
				    CS.RLTN_ORG_CD,
				    'C',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);	
			END LOOP;
		]]>				
		END;	
	</insert>	        

	<!--관계자 insert-->
	<insert id="BADEAR010EGongDfntInsert" parameterClass="paramMap"> 			
		<![CDATA[
		DECLARE
			BEGIN	
			  FOR CS IN ( 
			  	SELECT AUD_YR
			  	     , AUD_NO
			  	     , DSP_RQ_SNO
			  	     , RLTN_ORG_CD
			  	     , DFNT_SNO
			  	  FROM TBBADEAR007M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
			   )
			   LOOP 				 
					INSERT INTO TBBADEAR017H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    RLTN_ORG_CD,
					    DFNT_SNO,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR017H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.RLTN_ORG_CD,
					    CS.DFNT_SNO,
					    'C',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);			 
				END LOOP;	 
		]]>
		END;
	</insert>

	<!-- 관계기관 Update -->
	<update id="BADEAR010EGongRltnUpdate" parameterClass="paramMap">
		<![CDATA[		
		DECLARE
			BEGIN		
			INSERT INTO TBBADEAR020H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    RLTN_ORG_CD,
			    RLTN_ORG_DVSN_CD,
			    DSP_RQ_TG_KND_CD,
			    CPLT_YN,
			    CPLT_DT,
			    CPLT_PEN_ID,
			    SLF_ACP_STA_CD,
			    SLF_APV_DT,
			    SLF_ACP_DT,
			    ENFM_MNG_ORG_CD,
			    USE_YN,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH,
			    FRT_USR_ID
			)
			 SELECT	(SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR020H),
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    RLTN_ORG_CD,
				    RLTN_ORG_DVSN_CD,
				    DSP_RQ_TG_KND_CD,
				    CPLT_YN,
				    CPLT_DT,
				    CPLT_PEN_ID,
				    SLF_ACP_STA_CD,
				    SLF_APV_DT,
				    SLF_ACP_DT,
				    ENFM_MNG_ORG_CD,		    
				    'N',
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE,
				    #FRT_USR_ID#
			   FROM TBBADEAR006M
			  WHERE 1=1
			    AND AUD_YR 		= #AUD_YR# 
			    AND AUD_NO 		= #AUD_NO# 	
			    AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
			    AND RLTN_ORG_CD = #RLTN_ORG_CD#			  
				;
		END;
		]]>
	</update>	

	<!-- 관계자 Update -->
	<update id="BADEAR010EGongDfntUpdate" parameterClass="paramMap">
		<![CDATA[ 	
		DECLARE
			BEGIN				
			INSERT INTO TBBADEAR016H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    RLTN_ORG_CD,
			    DFNT_SNO,
			    AD,
			    OCP_CD,
			    RANK_CD,
			    DFNT_NAM,
			    EIN,
			    BK_COM_AD,
			    CMPY_NM,
			    ACNT_NM,
			    HND_CD,
			    AM,
			    CPLT_YN,
			    HND_RQ_KND_CD,
			    CPLT_DT,
			    CPLT_PEN_ID,
			    SDY_GRT_AM,
			    SDY_GRT_RSN,
			    USE_YN,
			    FRT_USR_ID,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH
			)
			SELECT  (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR016H),
			        AUD_YR,
			        AUD_NO,
			        DSP_RQ_SNO,
			        RLTN_ORG_CD,
			        DFNT_SNO,
			        AD,
			        OCP_CD,
			        RANK_CD,
			        DFNT_NAM,
			        EIN,
			        BK_COM_AD,
			        CMPY_NM,
			        ACNT_NM,
			        HND_CD,
			        AM,
			        CPLT_YN,
			        HND_RQ_KND_CD,
			        CPLT_DT,
			        CPLT_PEN_ID,
			        SDY_GRT_AM,
			        SDY_GRT_RSN,
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
			  FROM TBBADEAR007M
			 WHERE 1=1
			   AND AUD_YR      = #AUD_YR#
			   AND AUD_NO      = #AUD_NO#
			   AND DSP_RQ_SNO  = #DSP_RQ_SNO#
			   AND RLTN_ORG_CD = #RLTN_ORG_CD#
			   AND DFNT_SNO    = #DFNT_SNO#			    
			;
		END;							       
		]]>			    					        
	</update>	
	
	<!--관계기관 delete-->
	<update id="BADEAR010EGongRltnDelete" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , RLTN_ORG_CD
				  FROM TBBADEAR006M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
			   )
			LOOP
		
					INSERT INTO TBBADEAR021H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    RLTN_ORG_CD,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR021H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.RLTN_ORG_CD,
					    'D',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);					
			END LOOP ;	
		END;	
	]]>	
	</update>		
	
	<!--관계자 delete-->
	<update id="BADEAR010EGongDfntDelete" parameterClass="paramMap">
		<![CDATA[ 	
		DECLARE
			BEGIN	
			  FOR CS IN ( 
			  	SELECT AUD_YR
			  	     , AUD_NO
			  	     , DSP_RQ_SNO
			  	     , RLTN_ORG_CD
			  	     , DFNT_SNO
			  	  FROM TBBADEAR007M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
		   )
		   LOOP 
				  
				INSERT INTO TBBADEAR017H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    RLTN_ORG_CD,
				    DFNT_SNO,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR017H),
				    CS.AUD_YR,
				    CS.AUD_NO,
				    CS.DSP_RQ_SNO,
				    CS.RLTN_ORG_CD,
				    CS.DFNT_SNO,
				    'D',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);	
			END LOOP ;	
		END;								  
		]]>   
	</update>		

	<!--감사자 insert-->
	<insert id="BADEAR010EGongEtrInsert" parameterClass="paramMap">
		DECLARE
			BEGIN		
		<![CDATA[
			  FOR CS IN ( 
			  	SELECT AUD_YR
			  	     , AUD_NO
			  	     , DSP_RQ_SNO
			  	     , ETR_PEN_ID
			  	  FROM TBBADEAR004M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
	   		 )
		     LOOP 		
					INSERT INTO TBBADEAR019H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    ETR_PEN_ID,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR019H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.ETR_PEN_ID,
					    'C',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);	
				END LOOP ;				 		
		]]>
		END;
	</insert>		
	
	<!-- 감사자 Update -->
	<update id="BADEAR010EGongEtrUpdate" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
			INSERT INTO TBBADEAR018H
			(
			    CON_NO,
			    AUD_YR,
			    AUD_NO,
			    DSP_RQ_SNO,
			    ETR_PEN_ID,
			    ETR_PEN_BLT_CD,
			    ETR_PEN_RANK_CD,
			    ETR_PEN_NAM,
			    CTB_RTE,
			    PNL_DRIN_PSVT_AM,
			    IJS_AM,
			    NOP_RTE,
			    ETR_PEN_EXAM_OPIN_TXT,
			    USE_YN,
			    FRT_USR_ID,
			    FNL_USR_ID,
			    FNL_DEAL_DPT_CD,
			    FNL_MNU_ID,
			    FRT_REGI_DH,
			    FNL_MDF_DH
			)
			SELECT   (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR018H),
			        AUD_YR,
			        AUD_NO,
			        DSP_RQ_SNO,
			        ETR_PEN_ID,
			        ETR_PEN_BLT_CD,
			        ETR_PEN_RANK_CD,
			        ETR_PEN_NAM,
			        CTB_RTE,
			        PNL_DRIN_PSVT_AM,
			        IJS_AM,
			        NOP_RTE,
			        ETR_PEN_EXAM_OPIN_TXT, 
			        'N',
			        #FRT_USR_ID#,
			        #FNL_USR_ID#,
			        #FNL_DEAL_DPT_CD#,
			        #FNL_MNU_ID#,
			        SYSDATE,
			        SYSDATE    
			  FROM TBBADEAR004M
			 WHERE 1=1
			   AND AUD_YR 		= #AUD_YR#
			   AND AUD_NO 		= #AUD_NO#
			   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#
			   AND ETR_PEN_ID 	= #ETR_PEN_ID#
			  ;
		END;			   
		]]>			    					        
	</update>		

	<!--감사자 delete-->
	<update id="BADEAR010EGongEtrDelete" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN
			  FOR CS IN ( 
			  	SELECT AUD_YR
			  	     , AUD_NO
			  	     , DSP_RQ_SNO
			  	     , ETR_PEN_ID
			  	  FROM TBBADEAR004M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
	   		 )
		     LOOP 
					INSERT INTO TBBADEAR019H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    ETR_PEN_ID,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR019H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.ETR_PEN_ID,
					    'D',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);				  
			END LOOP ;	
		END;	
		]]>   
	</update>	


	<!-- 공감연계 감사사항 insert-->
	<insert id="BADEAR010EGongAudItemInsert" parameterClass="paramMap">
		<![CDATA[
		
				INSERT INTO TBBADDED024H
				   ( 
				       CON_NO
				     , AUD_YR
				     , AUD_NO
				     , CON_HNDL_CD
				     , USE_YN
				     , FRT_USR_ID
				     , FNL_USR_ID
				     , FNL_DEAL_DPT_CD
				     , FNL_MNU_ID
				     , FRT_REGI_DH
				     , FNL_MDF_DH 
				  ) VALUES(
				       (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADDED024H)
				     , #AUD_YR#
				     , #AUD_NO#
				     , 'C'
				     , 'N'
				     , #FRT_USR_ID#
				     , #FNL_USR_ID#
				     , #FNL_DEAL_DPT_CD#
				     , #FNL_MNU_ID#
				     , SYSDATE
				     , SYSDATE
				  )		
		]]>
	</insert>


	<!-- 공감연계 국과별처리현황 insert-->
	<insert id="BADEAR010EGongAudBrdvInsert" parameterClass="paramMap">
		<![CDATA[
		
            INSERT INTO TBBADDED026H
                (
                    CON_NO,
                    AUD_YR,
                    AUD_NO,
                    CON_HNDL_CD,
                    USE_YN,
                    FRT_USR_ID,
                    FNL_USR_ID,
                    FNL_DEAL_DPT_CD,
                    FNL_MNU_ID,
                    FRT_REGI_DH,
                    FNL_MDF_DH
                )
                VALUES
                (
                    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADDED026H)
				    , #AUD_YR#
				    , #AUD_NO#
                    , 'C'
                    , 'N'
				    , #FRT_USR_ID#
				    , #FNL_USR_ID#
				    , #FNL_DEAL_DPT_CD#
				    , #FNL_MNU_ID#
                    , SYSDATE
                    , SYSDATE
                )
		]]>
	</insert>
	  
	<!--관계기관 기본에 집행관리기관코드를 변경한다 -->
	<update id="BADEAR010EEnfmMngOrgCdupdate" parameterClass="paramMap">
           UPDATE TBBADEAR006M                             /* 관계기관 기본 */ 
              SET 
                  ENFM_MNG_ORG_CD   = #ENFM_MNG_ORG_CD#    /* 집행관리기관코드 */   
                 ,FNL_USR_ID        = #FNL_USR_ID#         /* 최종사용자ID */
                 ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#    /* 최종거래부서코드 */
                 ,FNL_MNU_ID        = #FNL_MNU_ID#         /* 최종메뉴ID */
                 ,FNL_MDF_DH        = SYSDATE              /* 최종수정일시 */ 
            WHERE AUD_YR            = #AUD_YR#             /* 감사년도  */ 
              AND AUD_NO            = #AUD_NO#             /* 감사번호 */
              AND DSP_RQ_SNO        = #DSP_RQ_SNO#         /* 처분요구순번 */
              AND RLTN_ORG_CD       = #RLTN_ORG_CD#        /* 관계기관코드 */
	</update>	
	
	<!--관계기관 기본에 집행관리국과코드를 변경한다 -->
	<update id="BADEAR010EEnfmMngBrdvCdupdate" parameterClass="paramMap">
           UPDATE TBBADEAR002D                             /* 처분요구사항상세 */ 
              SET 
                  ENFM_MNG_BRDV_CD  = #ENFM_MNG_BRDV_CD#   /* 집행관리국과코드 */   
                 ,FNL_USR_ID        = #FNL_USR_ID#         /* 최종사용자ID */
                 ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#    /* 최종거래부서코드 */
                 ,FNL_MNU_ID        = #FNL_MNU_ID#         /* 최종메뉴ID */
                 ,FNL_MDF_DH        = SYSDATE              /* 최종수정일시 */ 
            WHERE AUD_YR            = #AUD_YR#             /* 감사년도  */ 
              AND AUD_NO            = #AUD_NO#             /* 감사번호 */
              AND DSP_RQ_SNO        = #DSP_RQ_SNO#         /* 처분요구순번 */
	</update>
	
	
	<!--관계기관 insert 2015.03.25 yyh -->
	<insert id="BADEAR010EGongRltnInsert_1" parameterClass="paramMap">
		DECLARE
			BEGIN			
		<![CDATA[	
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , RLTN_ORG_CD
				  FROM TBBADEAR006M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
				   AND RLTN_ORG_CD  = #RLTN_ORG_CD#
			   )
			LOOP			
				INSERT INTO TBBADEAR021H
				(
				    CON_NO,
				    AUD_YR,
				    AUD_NO,
				    DSP_RQ_SNO,
				    RLTN_ORG_CD,
				    CON_HNDL_CD,
				    USE_YN,
				    FRT_USR_ID,
				    FNL_USR_ID,
				    FNL_DEAL_DPT_CD,
				    FNL_MNU_ID,
				    FRT_REGI_DH,
				    FNL_MDF_DH
				)
				VALUES
				(
				    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR021H),
				    CS.AUD_YR,
				    CS.AUD_NO,
				    CS.DSP_RQ_SNO,
				    CS.RLTN_ORG_CD,
				    'C',
				    'N',
				    #FRT_USR_ID#,
				    #FNL_USR_ID#,
				    #FNL_DEAL_DPT_CD#,
				    #FNL_MNU_ID#,
				    SYSDATE,
				    SYSDATE
				);	
			END LOOP;
		]]>				
		END;	
	</insert>
	
	<!--관계기관 delete-->
	<update id="BADEAR010EGongRltnDelete_1" parameterClass="paramMap">
		<![CDATA[
		DECLARE
			BEGIN	
			  FOR CS IN ( 
			    SELECT AUD_YR
			         , AUD_NO
			         , DSP_RQ_SNO
			         , RLTN_ORG_CD
				  FROM TBBADEAR006M
				 WHERE 1=1
				   AND AUD_YR 		= #AUD_YR# 
				   AND AUD_NO 		= #AUD_NO# 	
				   AND DSP_RQ_SNO 	= #DSP_RQ_SNO#	
                   AND RLTN_ORG_CD  = #RLTN_ORG_CD#				   
			   )
			LOOP
		
					INSERT INTO TBBADEAR021H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    RLTN_ORG_CD,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
					VALUES
					(
					    (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR021H),
					    CS.AUD_YR,
					    CS.AUD_NO,
					    CS.DSP_RQ_SNO,
					    CS.RLTN_ORG_CD,
					    'D',
					    'N',
					    #FRT_USR_ID#,
					    #FNL_USR_ID#,
					    #FNL_DEAL_DPT_CD#,
					    #FNL_MNU_ID#,
					    SYSDATE,
					    SYSDATE
					);					
			END LOOP ;	
		END;	
	]]>	
	</update>		
		     
		     
	<!-- 반려처리 2017.06.01 yyh -->
	<update id="BADEAR010ERetupdate" parameterClass="paramMap">
           UPDATE TBBADEAR002D                             /* 처분요구사항상세 */ 
              SET 
                  SND_STA_CD        = '4'                  /* 송부상태코드 - 반려 */
                 ,SND_APV_DOC_NO    = ''                   /* 송부결재문서번호 - 주석처리 2017.12.14 yyh - 주석풀기 2021.06.28 yyh */
                 ,SND_RET_RSN_TXT   = #SND_RET_RSN_TXT#    /* 송부반려사유내용 */
                     
                 ,FNL_USR_ID        = #FNL_USR_ID#         /* 최종사용자ID */
                 ,FNL_DEAL_DPT_CD   = #FNL_DEAL_DPT_CD#    /* 최종거래부서코드 */
                 ,FNL_MNU_ID        = #FNL_MNU_ID#         /* 최종메뉴ID */
                 ,FNL_MDF_DH        = SYSDATE              /* 최종수정일시 */ 
            WHERE AUD_YR            = #AUD_YR#             /* 감사년도  */ 
              AND AUD_NO            = #AUD_NO#             /* 감사번호 */
              AND DSP_RQ_SNO        = #DSP_RQ_SNO#         /* 처분요구순번 */
	</update>


	<!-- 반려사유 메신저 쪽지 발송입력 -->	    
	<insert id="BADEAR010ERetMessengerInsert" parameterClass="paramMap">
		<![CDATA[	
			INSERT INTO TBDCMACM026L (              			
			            MSG_SNO 
			          , TSK_CAT_CD 
			          , FUNC_CAT_CD 
			          , SEND_ID 
			          , MSG_TP_YN 
			          , MSG_TXT_2 
			          , RCNT_CNT 
			          , RCNT_HIS 
			          , MSG_REGI_DH 
			          , MSG_HNDL_YN 
			          , FRT_USR_ID 
			          , FNL_USR_ID 
			          , FNL_DEAL_DPT_CD 
			          , FNL_MNU_ID 
			          , FRT_REGI_DH 
			          , FNL_MDF_DH )
			  VALUES ( 
			            (SELECT NVL(MAX(MSG_SNO),0) + 1 
			               FROM (SELECT MSG_SNO 
			                       FROM TBDCMACM026L        		
			                      ORDER BY MSG_SNO DESC) 
			              WHERE ROWNUM < 2 
			              GROUP BY MSG_SNO) 
			          , 'AD' 
			          , 'AR' 
			          , #SEND_USR_ID#                         /* 보내는 사람 USR_ID */
			          , '0' 
			          , #TXT_CONT#                            /* 내용 */
			          , 1 
			          , (SELECT F_USR_INFO_BY_ID(FRT_USR_ID,'1')
                           FROM TBBADEAR002D 
                          WHERE AUD_YR     = #AUD_YR#
                            AND AUD_NO     = #AUD_NO#
                            AND DSP_RQ_SNO = #DSP_RQ_SNO#)    /* 받는사람 전산번호 */
			          , SYSDATE 
			          , 'N' 
			          , #FRT_USR_ID#
			          , #FNL_USR_ID#
			          , #FNL_DEAL_DPT_CD#
			          , #FNL_MNU_ID# 
			          , SYSDATE
			          , SYSDATE )
		]]>			          
	</insert>		
	
	<update id="BADEAR010ESumPrtCopySaveInsert" parameterClass="paramMap">
		<![CDATA[
		  DECLARE
			BEGIN
			      DELETE 
			        FROM TBBADEAR005M
			       WHERE AUD_YR     = #AUD_YR#
			         AND AUD_NO     = #AUD_NO#
			         AND DSP_RQ_SNO = #DSP_RQ_SNO#
			        ;
			      
				  INSERT INTO TBBADEAR005M 
				        (
				               AUD_YR
				              ,AUD_NO           
				              ,DSP_RQ_SNO       
				              ,SUMPRT_TXT       /* 요약전내용(지적사항) */
				              ,DSP_RQ_HND_SBJ   /* 조치사항 */ 
				              ,DOC_ID           /* 문서ID */  
				              ,DOC_TYP_CD       /* 문서유형코드 */  								  
				              ,SUMPRT_IPT_YN     
				              ,FRT_USR_ID
				              ,FNL_USR_ID
				              ,FNL_DEAL_DPT_CD
				              ,FNL_MNU_ID
				              ,FRT_REGI_DH
				              ,FNL_MDF_DH
				        )
				        SELECT #AUD_YR#
				              ,#AUD_NO#          
				              ,#DSP_RQ_SNO#
				              ,SUMPRT_TXT       /* 요약전내용(지적사항) */
				              ,DSP_RQ_HND_SBJ   /* 조치사항 */ 
				              ,DOC_ID           /* 문서ID */  
				              ,DOC_TYP_CD       /* 문서유형코드 */  								  
				              ,'Y'                  
				              ,#FRT_USR_ID#
				              ,#FNL_USR_ID#
				              ,#FNL_DEAL_DPT_CD#
				              ,#FNL_MNU_ID#
				              ,SYSDATE
				              ,SYSDATE
				          FROM TBBADEAR036M
				         WHERE AUD_YR         = #AUD_YR#
				           AND AUD_NO         = #AUD_NO# 
				           AND AUD_DSP_RQ_SNO = (SELECT AUD_DSP_RQ_SNO
				                                   FROM TBBADEAR001M
				                                  WHERE AUD_YR     = #AUD_YR#
				                                    AND AUD_NO     = #AUD_NO#
				                                    AND DSP_RQ_SNO = #DSP_RQ_SNO#)	
				     ;
		     END;
		]]>			          
	</update>
	
	<select id="BADEAR010ESumPrtCntSelect" parameterClass="paramMap" resultClass="java.lang.Integer">
        SELECT COUNT(1) AS CNT 
          FROM TBBADEAR005M
         WHERE AUD_YR     = #AUD_YR#
           AND AUD_NO     = #AUD_NO# 
           AND DSP_RQ_SNO = #DSP_RQ_SNO#
	</select>
		
	<!-- 처분요구요약전기본 공감insert - 2018.05.24  -->
	<insert id="BADEAR010EGongSumPrtInsert" parameterClass="paramMap">
		<![CDATA[  	
					INSERT INTO TBBADEAR027H
					(
					    CON_NO,
					    AUD_YR,
					    AUD_NO,
					    DSP_RQ_SNO,
					    CON_HNDL_CD,
					    USE_YN,
					    FRT_USR_ID,
					    FNL_USR_ID,
					    FNL_DEAL_DPT_CD,
					    FNL_MNU_ID,
					    FRT_REGI_DH,
					    FNL_MDF_DH
					)
				VALUES
					(
					   (SELECT NVL(MAX(CON_NO),0)+1 FROM TBBADEAR027H),
					   #AUD_YR#,
					   #AUD_NO#,
					   #DSP_RQ_SNO#,
					   #CON_HNDL_CD#, 
					   'Y',
					   #FRT_USR_ID#,
					   #FNL_USR_ID#,
					   #FNL_DEAL_DPT_CD#,
					   #FNL_MNU_ID#,
					   SYSDATE,
					   SYSDATE
				)
		]]>
	</insert>	     
</sqlMap> 
