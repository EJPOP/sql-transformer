<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="csp/bii/311">
	
	<select id="CSPBII311QMainSelect" parameterClass="paramMap" resultClass="resultMap">
		SELECT A.*
		     , A.PST_NM || ' / ' || F_CODE_NM('1000173', A.CLSS_CD) AS PST_RANK_NM      /* 직위직급명 */
		     , F_CODE_NM('1000084', A.EPS_MNG_DVSN_CD)              AS EPS_MNG_DVSN_NM  /* 중점관리구분명 */
		     , F_CODE_NM('1000403',A.RSG_YN) AS RSG_YN_NM
		     , (SELECT B.ORG_NM
			      FROM TBDCMACM015M B
			     WHERE B.ORG_CD = A.BLT_ORG_CD)                     AS BLT_ORG_NM     /* 소속기관명 */
		     , CASE WHEN (SELECT 1 
		                    FROM TBBADEAR007M B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '처분 '
		       END
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII130L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '정보 '
		       END 
		    || CASE WHEN (SELECT 1 
		                    FROM TBFAAAEA032M B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '자체 '
		       END                                    			   
		    || CASE WHEN (SELECT 1 
		                    FROM TBBADGDA001L B 
		                   WHERE B.EIN  = A.EIN 
		                     AND ROWNUM = 1) = 1
		                                         THEN '통보 '
		       END                                  
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII401L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '기타 '
		       END 
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII351L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1 
		                                         THEN '징계 '
		       END                                   
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII500L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '직무 '
		       END
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII630L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '특이 '
		       END                                                  AS UNQ_LIST
		       ,(SELECT F_CODE_NM('1000908',S1.DBT_PSN_DVSN_CD) AS DBT_PSN_DVSN_NM
		           FROM TBCSPBII380M S1
		          WHERE S1.EIN = A.EIN)  AS DBT_PSN_DVSN_NM
		  FROM (SELECT T.* 
		             , ROWNUM AS NUM 
		          FROM (SELECT DT.*
		                     , COUNT(1) OVER() AS TOT_CNT 
		         		  FROM (SELECT /* csp.bii.service.impl.CSPBII311QServiceImpl.CSPBII311QMainSelect */
		                               A.NAM                                                /* 성명 */
		                             , DECODE(DOC_ID, NULL, NULL, '사진보기') AS PHT_EXI_AT /* 사진존재여부 */
		                             , SUBSTR(A.EIN,1,6)||'-*******'          AS PART_RRN   /* 부분주민등록번호 */
		                             , A.EIN                                                /* 암호화주민등록번호 */
		                             , A.PST_NM                                             /* 직위명 */
		                             , A.CLSS_CD                                            /* 계급코드 */
		                             , A.EPS_MNG_DVSN_CD                                    /* 중점관리구분코드 */
		                             , A.BLT_ORG_CD			                                /* 소속기관코드 */
		                             , A.RSG_YN
		                          FROM TBCSPBII300M A  
		                         WHERE 1=1
			 
		                         <!-- 이름 검색 -->
		                         <isNotEmpty property="nam">
		                         	AND A.NAM LIKE #nam#||'%'
		                         </isNotEmpty>
		
		                         <!-- 주민번호 검색 -->
		                         <isNotEmpty property="strEin">
		                         	AND A.EIN LIKE #strEin# || '%'
		                         </isNotEmpty>
		
		                         <!-- 소속기관 검색 -->
		                         <isNotEmpty property="bltOrgCd">
		                         	<isEqual property="bltOrgIclsAt" compareValue="Y">
		                         		AND A.BLT_ORG_CD LIKE SUBSTR(#bltOrgCd#, 0, INSTR(#bltOrgCd#, '000') -1) || '%'
		                         	</isEqual>
		                         	<isNotEqual property="bltOrgIclsAt" compareValue="Y">
		                         		AND A.BLT_ORG_CD = #bltOrgCd#
		                         	</isNotEqual>	
		                         </isNotEmpty>
		
		                         <!-- 기관구분검색 -->
		                         <isNotEmpty property="orgDvsnCd">
		                         	AND A.BLT_ORG_CD IN (SELECT B.ORG_CD
		                         	                       FROM TBDCMACM015M B
		                         	                      WHERE B.ORG_DVSN_CD = #orgDvsnCd#)
		                         </isNotEmpty>
		
		                         <!-- 시작 생년월일 검색 -->
		                         <isNotEmpty property="strBtdt">
		                         	AND CASE WHEN SUBSTR(A.EIN, 7, 1) IN ('1', '2') THEN '19'
		                         	         WHEN SUBSTR(A.EIN, 7, 1) IN ('3', '4') THEN '20'
		                         	    END || SUBSTR(A.EIN, 1, 6) >= #strBtdt#
		                         </isNotEmpty>
		
		                         <!-- 종료 생년월일 검색 -->
		                         <isNotEmpty property="endBtdt">
		                         	AND CASE WHEN SUBSTR(A.EIN, 7, 1) IN ('1', '2') THEN '19'
		                         	         WHEN SUBSTR(A.EIN, 7, 1) IN ('3', '4') THEN '20'
		                         	    END || SUBSTR(A.EIN, 1, 6) &lt;= #endBtdt#
		                         </isNotEmpty>
		
		                         <!-- 직위명 검색 -->
		                         <isNotEmpty property="pstNm">
		                         	AND A.PST_NM LIKE '%'||#pstNm#||'%'
		                         </isNotEmpty>
		
		                         <!-- 계급코드 검색 -->
		                         <isNotEmpty property="clssCd">
		                         	AND A.CLSS_CD = #clssCd#
		                         </isNotEmpty>
		
		                         <!-- 시작 직급코드 검색 -->
		                         <isNotEmpty property="strRankCd">
		                         	AND A.CRSP_OD_RANK_CD >= #strRankCd#
		                         </isNotEmpty>
		
		                         <!-- 종료 직급코드 검색 -->
		                         <isNotEmpty property="endRankCd">
		                         	AND A.CRSP_OD_RANK_CD &lt;= #endRankCd#
		                         </isNotEmpty>
				
		                         <!-- 학교명 검색 -->
		                         <isNotEmpty property="schlNm">
		                         	AND A.EIN IN (SELECT B.EIN
		                         	                FROM TBCSPBII320L B
		                         	               WHERE B.SCHL_NM LIKE '%' || #schlNm# || '%')			              
		                         </isNotEmpty>
		
		                         <!-- 검색어 검색 -->
		                         <isNotEmpty property="schTxt">		
		                         	AND A.EIN IN (/* 처분요구 관련자 */
			                                       SELECT C.EIN
			                                         FROM TBBADEAR001M B
			                                            , TBBADEAR007M C
			                                        WHERE B.AUD_YR     = C.AUD_YR
			                                          AND B.AUD_NO	   = C.AUD_NO
			                                          AND B.DSP_RQ_SNO = C.DSP_RQ_SNO
			                                          AND B.TIT_TXT LIKE  '%' || #schTxt# || '%'
				          
				                                   UNION ALL
				          	
		                         		          <!-- /* 민원사항 관련자 */ -->
			              				          	
		                         		          /* 감사정보 관련자 */
		                         	              SELECT C.EIN
		                         	                FROM TBCSPBII100M B
		                                               , TBCSPBII130L C
		                         		           WHERE B.YE   = C.YE
		                         		             AND B.SRNO = C.SRNO
		                         		             AND B.TIT_TXT LIKE '%' || #schTxt# || '%'
				          
		                         		          UNION ALL
		                         		          
		                         		           /* 자체감사 관련자 */
		                         	              SELECT C.EIN
		                         	                FROM TBFAAAEA019M B
				                         		       , TBFAAAEA032M C
				                         		   WHERE B.ORG_CD   = C.ORG_CD
			 	                         		     AND B.AUD_YR   = C.AUD_YR
			 	                         		     AND B.AUD_SRNO = C.AUD_SRNO  
		                         		             AND B.AUD_SBJ LIKE '%' || #schTxt# || '%'
		                         		          
                                                  UNION ALL
				          	
		                         		          /* 통보사항 관련자 */
		                         	              SELECT C.EIN <!-- 암호화 -->
		                         		            FROM TBBADGDA001M B
		                         			           , TBBADGDA001L C
		                         		           WHERE B.ORG_CD      = C.ORG_CD
		                         		             AND B.NTF_DVSN_CD = C.NTF_DVSN_CD
		                         		             AND B.YR          = C.YR
		                         		             AND B.DPT_CD      = C.DPT_CD
		                         		             AND B.NNB         = C.NNB
		                         		             AND B.TIT_NM   LIKE '%' || #schTxt# || '%'
		                         		          
		                         		          UNION ALL
		                         		          	
		                         		          /* 기타정보 관련자 */
		                         	              SELECT C.EIN
		                         	                FROM TBCSPBII400L B
		                         	                   , TBCSPBII401L C
		                         		           WHERE B.YE   = C.YE
		                                         AND B.SRNO = C.SRNO
		                         		             AND C.EIN  = A.EIN	        
		                         	)
		                         </isNotEmpty>
		                         
		                         <!-- 대상구분 검색 -->
		                         <isNotEmpty property="tgDvsnCd">
		                         	AND A.EPS_MNG_DVSN_CD = #tgDvsnCd#
		                         </isNotEmpty>
		                         
		                         <!-- 퇴직구분 검색 -->
		                         <isNotEmpty property="rsgYn">
		                         	AND NVL(A.RSG_YN, 'N') = #rsgYn#
		                         </isNotEmpty>
		                         
		                         <!-- 특이사항 코드 검색 -->
		                         <isNotEmpty property="unqCd">
		                         	AND A.EIN IN (SELECT B.EIN
		                         	                FROM TBCSPBII630L B
		                         	               WHERE B.UNQ_CD = #unqCd#)
		                         </isNotEmpty>
		                         	
		                         <!-- 시작 비위점수 검색 -->
		                         <isNotEmpty property="strWrdoSc">
		                         	AND A.EIN IN (SELECT B.EIN
		                         	                FROM TBCSPBII630L B
		                         	               WHERE B.WRDO_SC >= #strWrdoSc#)			                 
		                         </isNotEmpty>
		                         
		                         <!-- 종료 비위점수 검색 -->
		                         <isNotEmpty property="endWrdoSc">
		                         	AND A.EIN IN (SELECT B.EIN
		                         	                FROM TBCSPBII630L B
		                         	               WHERE B.WRDO_SC &lt;= #endWrdoSc#)		
		                         </isNotEmpty>		
		                         
		                         AND (#relInspMtrlCnd#='AND'
		                         
		                         <!-- 관련감찰자료 - 처분요구관련자 -->
		                         <isNotEmpty property="relInspMtrlAt1">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
		                         	                           FROM TBBADEAR001M B
		                         	                              , TBBADEAR007M C
		                         	                          WHERE B.AUD_YR     = C.AUD_YR
		                         	                            AND B.AUD_NO	 = C.AUD_NO
		                         	                            AND B.DSP_RQ_SNO = C.DSP_RQ_SNO
		                         		                        AND C.EIN        = A.EIN
		                         		                        AND ROWNUM       = 1)	
		                         </isNotEmpty>
		                         
		                         <!-- 관련감찰자료 - 감사정보 관련자 -->
		                         <isNotEmpty property="relInspMtrlAt3">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
		                         	                           FROM TBCSPBII100M B
		                         	                              , TBCSPBII130L C
		                         		                      WHERE B.YE   = C.YE
		                         		                        AND B.SRNO = C.SRNO
		                         		                        AND C.EIN  = A.EIN
		                         		                        AND ROWNUM = 1)	
		                         </isNotEmpty>
		                         
		                         <!-- 관련감찰자료 - 자체감사 관련자 -->
		                         <isNotEmpty property="relInspMtrlAt4">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
		                         	                           FROM TBFAAAEA019M B
		                         	                              , TBFAAAEA032M C
		                         	                          WHERE B.ORG_CD   = C.ORG_CD
		                         	                            AND B.AUD_YR   = C.AUD_YR
		                         	                            AND B.AUD_SRNO = C.AUD_SRNO
		                         	                            AND C.EIN      = A.EIN
		                         		                        AND ROWNUM = 1)	
		                         </isNotEmpty>
		                         
		                         <!-- 관련감찰자료 - 통보사항 관련자 -->
		                         <isNotEmpty property="relInspMtrlAt5">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
			                                                    FROM TBBADGDA001M B
					                                               , TBBADGDA001L C
				                                               WHERE B.ORG_CD      = C.ORG_CD
				                                                 AND B.NTF_DVSN_CD = C.NTF_DVSN_CD
				                                                 AND B.YR          = C.YR
				                                                 AND B.DPT_CD      = C.DPT_CD
				                                                 AND B.NNB         = C.NNB
				                                                 AND C.EIN         = A.EIN
				                                                 AND ROWNUM        = 1)	
		                         </isNotEmpty>
		
		                         <!-- 관련감찰자료 - 기타정보 관련자 -->
		                         <isNotEmpty property="relInspMtrlAt6">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
		                         	                           FROM TBCSPBII400L B
		                         	                              , TBCSPBII401L C
		                         		                        WHERE B.YE   = C.YE
		                         		                          AND B.SRNO = C.SRNO
		                         		                          AND C.EIN  = A.EIN
		                         		                          AND ROWNUM = 1)	
		                         </isNotEmpty>
		                         
		                         <!-- 관련감찰자료 - 직무역량 평가자 -->
		                         <isNotEmpty property="relInspMtrlAt7">
		                         	$relInspMtrlCnd$ EXISTS (SELECT 1
		                         		                         FROM TBCSPBII500L B
		                         		                        WHERE B.EIN  = A.EIN
			                       		                          AND ROWNUM = 1)
					                   </isNotEmpty>	
				                     )
				                 <!-- 부서코드 -->
				                 <isNotEmpty property="dptCd">
				                 	AND A.BLT_ORG_CD IN (SELECT B.ORG_CD
                                                           FROM TBDCMACM015M B
				                     		               WHERE B.ENFM_DPT_CD = #dptCd#)
                                </isNotEmpty>			
		                       ORDER BY NAM) DT
		          	   ) T
		       ) A
		 WHERE NUM BETWEEN (((#currPage#- 1) * #pageSize#) + 1) AND (#currPage# * #pageSize#)
	</select>	

	<!-- 검색로그내역 등록  -->
	<insert id="CSPBII311QinsertSchLog" parameterClass="paramMap">
		INSERT INTO TBCSPBII402L (
		                          SRNO            /* 일련번호 */
		                        , EIN             /* 암호화주민등록번호 */
		                        , CNB             /* 전산번호 */
		                        , SCH_DT          /* 검색일 */
		                        , FRT_USR_ID      /* 최초사용자ID */
		                        , FNL_USR_ID      /* 최종사용자ID */
		                        , FNL_DEAL_DPT_CD /* 최종거래부서코드 */
		                        , FNL_MNU_ID      /* 최종메뉴ID */
		                        , FRT_REGI_DH     /* 최초등록일시 */
		                        , FNL_MDF_DH      /* 최종수정일시 */
		                         ) 
		                  VALUES (
		                          (SELECT NVL(MAX(SRNO), 0) + 1
		                             FROM TBCSPBII402L)
		                        , #logEin# <!-- 화면에서 requstKey로 받아오는 값이므로 파라미터가 소문자 -->		                        
		                        , #CNB#
		                        , TO_CHAR(SYSDATE, 'YYYYMMDD')        
		                        , #FRT_USR_ID#
		                        , #FNL_USR_ID#
		                        , #FNL_DEAL_DPT_CD#
		                        , #FNL_MNU_ID#
		                        , SYSDATE
		                        , SYSDATE
				                 )
	</insert>	
	
	<!-- 대인감찰목록 엑셀 다운로드 -->
	<select id="CSPBII311QExcelExportSelect" parameterClass="paramMap" resultClass="resultMap">
		SELECT A.NAM                                                                    /* 성명 */
		     , SUBSTR(A.EIN,1,6)||'-*******'                        AS PART_RRN         /* 부분주민등록번호 */
		     , (SELECT B.ORG_NM
		          FROM TBDCMACM015M B
		         WHERE B.ORG_CD = A.BLT_ORG_CD)                     AS BLT_ORG_NM       /* 소속기관명 */
		     , A.PST_NM || ' / ' || F_CODE_NM('1000173', A.CLSS_CD) AS PST_RANK_NM      /* 직위계급명 */
		     , F_CODE_NM('1000084', A.EPS_MNG_DVSN_CD)              AS EPS_MNG_DVSN_NM  /* 중점관리구분명 */
		     , F_CODE_NM('1000403',A.RSG_YN) AS RSG_YN	 
		     , CASE WHEN (SELECT 1 
		                    FROM TBBADEAR007M B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '처분 '
		       END
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII130L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '정보 '
		        END 
		    || CASE WHEN (SELECT 1 
		                    FROM TBFAAAEA032M B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '자체 '
		       END                                    			   
		    || CASE WHEN (SELECT 1 
		                    FROM TBBADGDA001L B 
		                   WHERE B.EIN  = A.EIN 
		                     AND ROWNUM = 1) = 1
		                                         THEN '통보 '
		       END                                  
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII401L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '기타 '
		       END 
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII351L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1 
		                                         THEN '징계 '
		       END                                   
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII500L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '직무 '
		       END
		    || CASE WHEN (SELECT 1 
		                    FROM TBCSPBII630L B 
		                   WHERE B.EIN  = A.EIN
		                     AND ROWNUM = 1) = 1
		                                         THEN '특이 '
		       END                                                  AS UNQ_LIST         /* 관련감찰자료 */
		       ,(SELECT F_CODE_NM('1000908',S1.DBT_PSN_DVSN_CD) AS DBT_PSN_DVSN_NM
		           FROM TBCSPBII380M S1
		          WHERE S1.EIN = A.EIN)  AS DBT_PSN_DVSN_NM
		  FROM TBCSPBII300M A 
		 WHERE 1=1
			 
		<!-- 이름 검색 -->
		<isNotEmpty property="nam">
			AND A.NAM LIKE #nam#||'%'
		</isNotEmpty>
		
		<!-- 주민번호 검색 -->
		<isNotEmpty property="strEin">
			AND A.EIN LIKE #strEin# || '%'
		</isNotEmpty>
		
		<!-- 소속기관 검색 -->
		<isNotEmpty property="bltOrgCd">
			<isEqual property="bltOrgIclsAt" compareValue="Y">
				AND A.BLT_ORG_CD LIKE SUBSTR(#bltOrgCd#, 0, INSTR(#bltOrgCd#, '000') -1) || '%'
			</isEqual>
			<isNotEqual property="bltOrgIclsAt" compareValue="Y">
				AND A.BLT_ORG_CD = #bltOrgCd#
			</isNotEqual>	
		</isNotEmpty>
		
		<!-- 기관구분검색 -->
		<isNotEmpty property="orgDvsnCd">
			AND A.BLT_ORG_CD IN (SELECT B.ORG_CD
			                       FROM TBDCMACM015M B
			                      WHERE B.ORG_DVSN_CD = #orgDvsnCd#)
		</isNotEmpty>
		
		<!-- 시작 생년월일 검색 -->
		<isNotEmpty property="strBtdt">
			AND CASE WHEN SUBSTR(A.EIN, 7, 1) IN ('1', '2') THEN '19'
			         WHEN SUBSTR(A.EIN, 7, 1) IN ('3', '4') THEN '20'
			    END || SUBSTR(A.EIN, 1, 6) >= #strBtdt#
		</isNotEmpty>
		
		<!-- 종료 생년월일 검색 -->
		<isNotEmpty property="endBtdt">
			AND CASE WHEN SUBSTR(A.EIN, 7, 1) IN ('1', '2') THEN '19'
			         WHEN SUBSTR(A.EIN, 7, 1) IN ('3', '4') THEN '20'
			    END || SUBSTR(A.EIN, 1, 6) &lt;= #endBtdt#
		</isNotEmpty>
		
		<!-- 직위명 검색 -->
		<isNotEmpty property="pstNm">
			AND A.PST_NM LIKE '%'||#pstNm#||'%'
		</isNotEmpty>
		
		<!-- 계급코드 검색 -->
		<isNotEmpty property="clssCd">
			AND A.CLSS_CD = #clssCd#
		</isNotEmpty>
		
		<!-- 시작 직급코드 검색 -->
		<isNotEmpty property="strRankCd">
			AND A.CRSP_OD_RANK_CD >= #strRankCd#
		</isNotEmpty>
		
		<!-- 종료 직급코드 검색 -->
		<isNotEmpty property="endRankCd">
			AND A.CRSP_OD_RANK_CD &lt;= #endRankCd#
		</isNotEmpty>
		
		<!-- 학교명 검색 -->
		<isNotEmpty property="schlNm">
			AND A.EIN IN (SELECT B.EIN
			                FROM TBCSPBII320L B
			               WHERE B.SCHL_NM LIKE '%' || #schlNm# || '%')			              
		</isNotEmpty>
		
		<!-- 검색어 검색 -->
		<isNotEmpty property="schTxt">		
			AND A.EIN IN (/* 처분요구 관련자 */
		               SELECT C.EIN
		                 FROM TBBADEAR001M B
		                    , TBBADEAR007M C
		                WHERE B.AUD_YR     = C.AUD_YR
		                  AND B.AUD_NO	   = C.AUD_NO
		                  AND B.DSP_RQ_SNO = C.DSP_RQ_SNO
		                  AND B.TIT_TXT LIKE  '%' || #schTxt# || '%'
		
		               UNION ALL
		
				          <!-- /* 민원사항 관련자 */ -->
				          	
				          /* 감사정보 관련자 */
			              SELECT C.EIN
			                FROM TBCSPBII100M B
		                   , TBCSPBII130L C
				           WHERE B.YE   = C.YE
				             AND B.SRNO = C.SRNO
				             AND B.TIT_TXT LIKE '%' || #schTxt# || '%'
		
				          UNION ALL
				          
				           /* 자체감사 관련자 */
			              SELECT C.EIN
			                FROM TBFAAAEA019M B
		     		       , TBFAAAEA032M C
		     		   WHERE B.ORG_CD   = C.ORG_CD
		         		     AND B.AUD_YR   = C.AUD_YR
		         		     AND B.AUD_SRNO = C.AUD_SRNO  
				             AND B.AUD_SBJ LIKE '%' || #schTxt# || '%'
				          
		              UNION ALL
		
				          /* 통보사항 관련자 */
			              SELECT C.EIN <!-- 암호화 -->
				            FROM TBBADGDA001M B
					           , TBBADGDA001L C
				           WHERE B.ORG_CD      = C.ORG_CD
				             AND B.NTF_DVSN_CD = C.NTF_DVSN_CD
				             AND B.YR          = C.YR
				             AND B.DPT_CD      = C.DPT_CD
				             AND B.NNB         = C.NNB
				             AND B.TIT_NM   LIKE '%' || #schTxt# || '%'
				          
				          UNION ALL
				          	
				          /* 기타정보 관련자 */
			              SELECT C.EIN
			                FROM TBCSPBII400L B
			                   , TBCSPBII401L C
				           WHERE B.YE   = C.YE
		             AND B.SRNO = C.SRNO
				             AND C.EIN  = A.EIN	        
			)
		</isNotEmpty>
		
		<!-- 대상구분 검색 -->
		<isNotEmpty property="tgDvsnCd">
			AND A.EPS_MNG_DVSN_CD = #tgDvsnCd#
		</isNotEmpty>
		
		<!-- 퇴직구분 검색 -->
		<isNotEmpty property="rsgYn">
			AND NVL(A.RSG_YN, 'N') = #rsgYn#
		</isNotEmpty>
		
		<!-- 특이사항 코드 검색 -->
		<isNotEmpty property="unqCd">
			AND A.EIN IN (SELECT B.EIN
			                FROM TBCSPBII630L B
			               WHERE B.UNQ_CD = #unqCd#)
		</isNotEmpty>
			
		<!-- 시작 비위점수 검색 -->
		<isNotEmpty property="strWrdoSc">
			AND A.EIN IN (SELECT B.EIN
			                FROM TBCSPBII630L B
			               WHERE B.WRDO_SC >= #strWrdoSc#)			                 
		</isNotEmpty>
		
		<!-- 종료 비위점수 검색 -->
		<isNotEmpty property="endWrdoSc">
			AND A.EIN IN (SELECT B.EIN
			                FROM TBCSPBII630L B
			               WHERE B.WRDO_SC &lt;= #endWrdoSc#)		
		</isNotEmpty>		
		
		AND (#relInspMtrlCnd#='AND'
		
		<!-- 관련감찰자료 - 처분요구관련자 -->
		<isNotEmpty property="relInspMtrlAt1">
			$relInspMtrlCnd$ EXISTS (SELECT 1
			                           FROM TBBADEAR001M B
			                              , TBBADEAR007M C
			                          WHERE B.AUD_YR     = C.AUD_YR
			                            AND B.AUD_NO	 = C.AUD_NO
			                            AND B.DSP_RQ_SNO = C.DSP_RQ_SNO
				                        AND C.EIN        = A.EIN
				                        AND ROWNUM       = 1)	
		</isNotEmpty>
		
		<!-- 관련감찰자료 - 감사정보 관련자 -->
		<isNotEmpty property="relInspMtrlAt3">
			$relInspMtrlCnd$ EXISTS (SELECT 1
			                           FROM TBCSPBII100M B
			                              , TBCSPBII130L C
				                      WHERE B.YE   = C.YE
				                        AND B.SRNO = C.SRNO
				                        AND C.EIN  = A.EIN
				                        AND ROWNUM = 1)	
		</isNotEmpty>
		
		<!-- 관련감찰자료 - 자체감사 관련자 -->
		<isNotEmpty property="relInspMtrlAt4">
			$relInspMtrlCnd$ EXISTS (SELECT 1
			                           FROM TBFAAAEA019M B
			                              , TBFAAAEA032M C
			                          WHERE B.ORG_CD   = C.ORG_CD
			                            AND B.AUD_YR   = C.AUD_YR
			                            AND B.AUD_SRNO = C.AUD_SRNO
			                            AND C.EIN      = A.EIN
				                        AND ROWNUM = 1)	
		</isNotEmpty>
		
		<!-- 관련감찰자료 - 통보사항 관련자 -->
		<isNotEmpty property="relInspMtrlAt5">
			$relInspMtrlCnd$ EXISTS (SELECT 1
		                            FROM TBBADGDA001M B
		                               , TBBADGDA001L C
		                           WHERE B.ORG_CD      = C.ORG_CD
		                             AND B.NTF_DVSN_CD = C.NTF_DVSN_CD
		                             AND B.YR          = C.YR
		                             AND B.DPT_CD      = C.DPT_CD
		                             AND B.NNB         = C.NNB
		                             AND C.EIN         = A.EIN
		                             AND ROWNUM        = 1)	
		</isNotEmpty>
		
		<!-- 관련감찰자료 - 기타정보 관련자 -->
		<isNotEmpty property="relInspMtrlAt6">
			$relInspMtrlCnd$ EXISTS (SELECT 1
			                           FROM TBCSPBII400L B
			                              , TBCSPBII401L C
				                        WHERE B.YE   = C.YE
				                          AND B.SRNO = C.SRNO
				                          AND C.EIN  = A.EIN
				                          AND ROWNUM = 1)	
		</isNotEmpty>
		
		<!-- 관련감찰자료 - 직무역량 평가자 -->
		<isNotEmpty property="relInspMtrlAt7">
			$relInspMtrlCnd$ EXISTS (SELECT 1
				                         FROM TBCSPBII500L B
				                        WHERE B.EIN  = A.EIN
				                          AND ROWNUM = 1)
		   </isNotEmpty>	
		 )
		<!-- 부서코드 -->
		<isNotEmpty property="dptCd">
			AND A.BLT_ORG_CD IN (SELECT B.ORG_CD
		                       FROM TBDCMACM015M B
		 		               WHERE B.ENFM_DPT_CD = #dptCd#)
		</isNotEmpty>
					
		ORDER BY NAM
	</select>
</sqlMap>