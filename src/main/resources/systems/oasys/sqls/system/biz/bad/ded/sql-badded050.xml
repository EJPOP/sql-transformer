<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="bad/ded/050">
       
	<insert id="badded050EAuditCodeCopyinsert" parameterClass="paramMap">
	 <![CDATA[      
		INSERT
		INTO
		TBDCMACM013C
		( CMM_CD_DVSN_CD
		, CD
		, TSK_CAT_CD
		, FUNC_CAT_CD
		, CD_NM
		, USE_YN
		
		, FNL_MNU_ID
		, FRT_USR_ID
		, FNL_USR_ID
		, FNL_DEAL_DPT_CD
		, FRT_REGI_DH
		, FNL_MDF_DH
		)
	
		 SELECT CMM_CD_DVSN_CD
		       , SUBSTR(#strYear#,3,4)||SUBSTR(CD,3) AS CD
		       , TSK_CAT_CD
		       , FUNC_CAT_CD
		       , CD_NM
		       , USE_YN
		       , #FNL_MNU_ID# AS FNL_MNU_ID
		       , #FRT_USR_ID# AS FRT_USR_ID
		       , #FNL_USR_ID# AS FNL_USR_ID
		       , #FNL_DEAL_DPT_CD# AS FNL_DEAL_DPT_CD
		       , SYSDATE AS FRT_REGI_DH
		       , SYSDATE AS FNL_MDF_DH
		   FROM TBDCMACM013C
		   WHERE 1=1
		     AND CD <>'000000000'
		     AND CMM_CD_DVSN_CD = #strCdDvsn#     
		     AND SUBSTR(CD,1,2)=SUBSTR(#strYear#-1,3)
	    ]]>
	</insert>
	
	
	<select id="badded050EAuditCntChk" parameterClass="paramMap"
		resultClass="java.lang.String">
        <![CDATA[       
			SELECT COUNT(*) AS CNT
		
			FROM TBDCMACM013C
			WHERE 1=1
			 AND CMM_CD_DVSN_CD = #strCdDvsn#     
		     AND SUBSTR(CD,1,2)=SUBSTR(#strYear#-1,3)
        ]]>

	</select>

	
</sqlMap> 
