<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="bad/ear/018">
	<!-- 개인정보처리 조회 -->
	<select id="BADEAR018ListSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[
		 select D1.ABST_NO,
		        D1.ABST_TXT,
		        D1.REGI_DT
		   from TBBADEAR011L D1
		  where 1=1
		]]>
		<dynamic>
			<isNotEmpty prepend="AND" property="strDateFrom">
				D1.REGI_DT >
				#strDateFrom#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="strDateTo">
				D1.REGI_DT &lt;=
				#strDateTo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="strAbst">
				D1.ABST_TXT LIKE
				'%'||#strAbst#||'%'
			</isNotEmpty>
		</dynamic>
		<![CDATA[       
			ORDER BY D1.ABST_NO ASC
		]]>
	</select>

	<!-- 개인정보처리기호 삭제 -->
	<delete id="BADEAR018ListDelete" parameterClass="paramMap">
		DELETE
		FROM
		TBBADEAR011L
		WHERE 1=1
		AND ABST_NO=#ABST_NO#
		AND
		ABST_TXT=#ABST_TXT#
	</delete>

	<!-- 개인정보처리기호 등록 -->
	<insert id="BADEAR018MainInsert" parameterClass="paramMap">
		INSERT INTO
		TBBADEAR011L
		(
		ABST_NO
		, ABST_TXT
		, REGI_DT
		,
		FRT_USR_ID
		, FNL_USR_ID
		, FNL_DEAL_DPT_CD
		, FNL_MNU_ID
		, FRT_REGI_DH
		,
		FNL_MDF_DH
		)
		VALUES
		(
		#ABST_NO#
		, #ABST_TXT#
		,
		#REGI_DT#
		, #FRT_USR_ID#
		, #FNL_USR_ID#
		, #FNL_DEAL_DPT_CD#
		, #FNL_MNU_ID#
		, SYSDATE
		, SYSDATE
		)
	</insert>

	<!-- 개인정보처리기호 수정 -->
	<update id="BADEAR018MainUpdate" parameterClass="paramMap">
		UPDATE TBBADEAR011L
		SET ABST_TXT = #ABST_TXT#
		<isNotEmpty prepend="," property="REGI_DT">
			REGI_DT = #REGI_DT#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_USR_ID">
			FNL_USR_ID = #FNL_USR_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_DEAL_DPT_CD">
			FNL_DEAL_DPT_CD =
			#FNL_DEAL_DPT_CD#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MNU_ID">
			FNL_MNU_ID = #FNL_MNU_ID#
		</isNotEmpty>
		<isNotEmpty prepend="," property="FNL_MDF_DH">
			FNL_MDF_DH = SYSDATE
		</isNotEmpty>
		WHERE 1 = 1
		AND ABST_NO=#ABST_NO#
	</update>

	<!-- 개인정보처리기호번호 Max값 찾기 -->
	<select id="BADEAR018ListNoSelect" parameterClass="paramMap"
		resultClass="resultMap">
        <![CDATA[     	
			    SELECT LPAD(NVL(MAX(TO_NUMBER(ABST_NO)),0)+1,3,0) AS MAX_SEQ
				  FROM TBBADEAR011L
				 WHERE 1=1
		]]>
	</select>

</sqlMap>
