<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="csp/bii/641">

	<select id="CSPBII641QMainSelect" parameterClass="paramMap"
		resultClass="resultMap">
		<![CDATA[       
				SELECT 
					UNQ_CD,  				/*특이사항 코드*/
					UNQ_TXT,				/*특이사항 명*/
					UNQ_DT,				/*특이사항 일*/
					STR_WRDO_SC,		/*비위점수 FROM */
					END_WRDO_SC		/*비위점수 TO */
				FROM 
					TBCSPBII631C
				WHERE 1 = 1 
				 
		]]>
			<dynamic>
				<isNotEmpty property="title">
					AND  UNQ_TXT LIKE '%'||#title#||'%'
				</isNotEmpty>
			</dynamic>
		<![CDATA[  
			ORDER BY UNQ_CD DESC
		]]>
        
	</select>
	

	<!-- 특이사항 신규등록 -->
	<insert id="CSPBII641Qinsert" parameterClass="paramMap">
		INSERT INTO TBCSPBII631C 
		    (
			 UNQ_CD
			, UNQ_TXT
			, UNQ_DT
			, STR_WRDO_SC
			, END_WRDO_SC
			, FRT_USR_ID      /* 최초사용자ID */
			, FNL_USR_ID      /* 최종사용자ID */
			, FNL_DEAL_DPT_CD /* 최종거래부서코드 */
			, FNL_MNU_ID      /* 최종메뉴ID */
			, FRT_REGI_DH     /* 최초등록일시 */
			, FNL_MDF_DH      /* 최종수정일시 */
			)  VALUES 
			(
		       (SELECT LPAD(MAX(UNQ_CD)+1,3,'0') AS CD_DATA FROM TBCSPBII631C)
			 , #UNQ_TXT#
			 , #UNQ_DT#
			 , #STR_WRDO_SC#
			 , #END_WRDO_SC#
			 , #FRT_USR_ID#
		     , #FNL_USR_ID#
		     , #FNL_DEAL_DPT_CD#
		     , #FNL_MNU_ID#
		     , SYSDATE
		     , SYSDATE
			 )
	</insert>
	
	<!-- 특이사항 정보 수정 -->
	<update id="CSPBII641Qupdate" parameterClass="paramMap">
		UPDATE TBCSPBII631C
		   SET FNL_MDF_DH = SYSDATE 
			, UNQ_TXT = #UNQ_TXT#
			, UNQ_DT = #UNQ_DT#
			,STR_WRDO_SC = #STR_WRDO_SC#
			,END_WRDO_SC = #END_WRDO_SC#
		WHERE 1 = 1
		  AND UNQ_CD = #UNQ_CD#
	</update>
	
	<!-- 특이사항 정보 삭제 -->
	<delete id="CSPBII641Qdelete" parameterClass="paramMap">
		DELETE TBCSPBII631C
		 WHERE 1 = 1
		   AND UNQ_CD = #UNQ_CD#
	</delete>

</sqlMap> 
